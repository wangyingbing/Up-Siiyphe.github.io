(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1060:function(e,t,n){"use strict";var a=n(0),r=n(319),i=n.n(r),c=n(40);t.a=function(e,t,n){var r=Object(c.d)(t);Object(a.useEffect)((function(){return i.a.bind(e,r,n),function(){i.a.unbind(e)}}),[JSON.stringify(e),r,n])}},1161:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(32),r=n(14),i=n(15),c=n(17),o=n(18),s=n(7),u=n(1),l=n(3),d=n.n(l),p=n(0),h=n(33),f=n(1169),g=n(1333),A=n(70),b=n.n(A),m=n(312),C=["switchDisabled","placeholderPrefix"];function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var v=function(e){Object(c.a)(n,e);var t=E(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleSwitchPasswordInputType=function(){a.setState((function(e){return{inputType:"password"===e.inputType?"text":"password"}}))},a.handleChange=function(e){a.state.hasValue!==Boolean(e)&&a.setState({hasValue:Boolean(e)}),a.props.onChange(e)},a.state={hasValue:Boolean(e.defaultValue),inputType:e.defaultType},a}return Object(i.a)(n,[{key:"render",value:function(){var e=b()(this.props,["onChange","defaultType"]),t=e.switchDisabled,n=e.placeholderPrefix,r=Object(a.default)(e,C),i=this.state,c=i.inputType,o=i.hasValue;return Object(u.c)("div",{className:"SignFlow-password",children:[Object(u.b)(m.a,Object.assign({name:"password",inputClassName:"password"===c&&o?"SignFlow-passwordInput":"",type:c,placeholder:"".concat(n||"","密码"),onChange:this.handleChange,errorMessageClassName:"SignFlow-passwordErrorMask",validations:[{type:"required",message:"请输入密码",className:"SignFlow-requiredPasswordErrorMask"}]},r)),!t&&Object(u.b)(h.c,{className:"SignFlow-switchPassword",tabIndex:-1,preset:"plain",onClick:this.handleSwitchPasswordInputType,icon:"password"===c?f.a:g.a})]})}}]),n}(p.Component);v.propTypes={onChange:d.a.func.isRequired,switchDisabled:d.a.bool,defaultType:d.a.string},v.defaultProps={defaultType:"password"}},1162:function(e,t,n){"use strict";var a=n(32),r=n(14),i=n(15),c=n(17),o=n(18),s=n(7),u=n(1),l=n(3),d=n.n(l),p=n(0),h=n(312),f=["onChange","validations"];function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var A=function(e){Object(c.a)(n,e);var t=g(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.validations,r=Object(a.default)(e,f);return Object(u.b)(h.a,Object.assign({className:"SignFlow-username",onChange:t,validations:n||[{type:"required",message:"请输入用户名"}]},r))}}]),n}(p.Component);A.propTypes={onChange:d.a.func.isRequired};t.a=A},1169:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),i=n(12),c=Object.assign;function o(e){return r.a.createElement(i.a,c(c({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"EyeFill24","data-old-api":"Eye"},e),{className:"Zi Zi--Eye"+(e.className?" ".concat(e.className):"")}),r.a.createElement("path",{d:"M21.675 15.423c-1.392 2.207-4.33 5.294-9.674 5.294-5.34 0-8.28-3.083-9.674-5.29a5.882 5.882 0 01-.392-5.534c1.15-2.605 3.963-6.61 10.066-6.61 6.107 0 8.918 4.01 10.066 6.615a5.88 5.88 0 01-.392 5.525zM9.734 11.937a2.165 2.165 0 012.72-2.093.75.75 0 10.383-1.45 3.669 3.669 0 00-4.603 3.543 3.665 3.665 0 107.216-.908.75.75 0 00-1.453.37 2.168 2.168 0 01-2.098 2.703 2.165 2.165 0 01-2.165-2.165z",fillRule:"evenodd",clipRule:"evenodd"}))}},1171:function(e,t,n){},1172:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))};function r(e){var t=[];return e.reduce((function(e,n){return e.then((function(){return n().then((function(e){t.push(e)}))}))}),Promise.resolve()).then((function(){return t}))}},1173:function(e,t,n){"use strict";var a=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;t.a=function(e){return a.test(e)}},1219:function(e,t,n){"use strict";var a=n(14),r=n(15),i=n(17),c=n(18),o=n(7),s=n(1),u=n(3),l=n.n(u),d=n(0),p=n.n(d),h=n(21),f=n(158),g=n(4),A=n(13),b=n.n(A),m=n(886),C=n(33),E=n(312),v=n(51),w=Object.assign;var S=function(e){return p.a.createElement(v.a,w({viewBox:"0 0 8 8"},e),p.a.createElement("path",{d:"M7.755 1.434A.839.839 0 007.75.248.837.837 0 006.565.244L4 2.81 1.434.245A.839.839 0 00.248.248c-.33.33-.33.86-.004 1.186L2.81 4 .246 6.566A.839.839 0 00.25 7.752c.33.33.86.33 1.185.004L4 5.19l2.566 2.565a.839.839 0 001.186-.004c.33-.33.33-.86.004-1.185L5.19 4l2.565-2.566z",fillRule:"evenodd"}))},I=Object.assign;var B=function(e){return p.a.createElement(v.a,I({viewBox:"0 0 20 20"},e),p.a.createElement("circle",{cx:"83",cy:"111",r:"10",transform:"translate(-73 -101)"}))};function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var y=function(e){Object(i.a)(n,e);var t=O(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={hovered:!0},e.handleMouseEnter=function(){e.setState({hovered:!0})},e.handleMouseLeave=function(){e.setState({hovered:!1})},e}return Object(r.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.position!==e.position&&this.handleMouseLeave()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.position!==e.position||this.state.hovered!==t.hovered}},{key:"render",value:function(){var e=this.props,t=e.position,n=e.onUnMark,a=this.state.hovered,r=a?S:B;return Object(s.c)(C.c,{className:"ChineseCaptchaPoint",style:t,onClick:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,preset:"plain",children:[Object(s.b)(B,{className:b()("ChineseCaptchaPoint-backIcon",{"ChineseCaptchaPoint-backIcon--hovered":a}),fill:a?"#0f88eb":"#aad9ff",width:20,height:20}),Object(s.b)(r,{className:b()("ChineseCaptchaPoint-frontIcon",{"ChineseCaptchaPoint-frontIcon--hovered":a}),fill:a?"#ffffff":"#0f88eb",width:a?8:12,height:a?8:12})]})}}]),n}(d.Component);y.propTypes={onUnMark:l.a.func.isRequired,position:l.a.object.isRequired};var j=y;function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var k="最多只能选择 ".concat(7," 个点"),R=function(e){Object(i.a)(n,e);var t=Q(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={markPositionsArray:[],isClient:!1},e.updateSize=function(){if(e.chineseCaptchaImg){var t=e.chineseCaptchaImg.getBoundingClientRect();e.chineseImgWidth=t.width,e.chineseImgHeight=t.height}},e.handleMarkPoint=function(t){if(e.chineseCaptchaImg){var n=e.state.markPositionsArray,a=e.props.onValidation;if(n.length>=7)a({validationMessage:k});else{var r=t.pageX,i=t.pageY;e.updateSize();var c=e.chineseCaptchaImg.getBoundingClientRect(),o=c.top,s=c.left,u=i-o-window.pageYOffset-10,l=r-s-window.pageXOffset-10,d=[].concat(Object(g.a)(n),[{top:u,left:l+60+16}]);e.updateMarkPoint(d)}}},e.handleUnMarkPoint=function(t){var n=Object(g.a)(e.state.markPositionsArray);n.splice(t,1),e.updateMarkPoint(n)},e.updateMarkPoint=function(t){e.setState({markPositionsArray:t},(function(){e.props.onUpdateInput(e.parseMarkPositionsArrayToInputValue(t))}))},e.parseMarkPositionsArrayToInputValue=function(t){return JSON.stringify({img_size:[e.chineseImgWidth,e.chineseImgHeight],input_points:t.map((function(e){var t=e.top;return[e.left+10-60-16,t+10]}))})},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.setState({isClient:!0}),this.updateSize()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.url!==e.url&&this.props.isChinese&&this.setState({markPositionsArray:[]})}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.url!==e.url||this.props.validationMessage!==e.validationMessage||this.props.isShown!==e.isShown||this.props.className!==e.className||this.state.markPositionsArray!==t.markPositionsArray}},{key:"renderCaptcha",value:function(){var e=this,t=this.props,n=t.url,a=t.isChinese,r=t.onRefresh;return n?Object(s.c)("div",{className:a?"Captcha-chineseContainer":"Captcha-englishContainer",children:[Object(s.b)("img",{"data-tooltip":"看不清楚？换一张","aria-label":"看不清楚？换一张",className:a?"Captcha-chineseImg":"Captcha-englishImg",src:n,alt:"图形验证码",onClick:a?this.handleMarkPoint:r,ref:a&&function(t){e.chineseCaptchaImg=t}}),a?this.state.markPositionsArray.map((function(t,n){return Object(s.b)(j,{onUnMark:function(){return e.handleUnMarkPoint(n)},position:t},n)})):null]}):null}},{key:"render",value:function(){var e=this.props,t=e.isChinese,n=e.validationMessage,a=e.className,r=e.onUpdateInput,i=e.validations,c=e.isShown,o=e.onRefresh,u=this.state.isClient,l=this.renderCaptcha();return Object(s.b)("div",{className:b()("Captcha",a,{"Captcha-chinese":t&&u}),style:c?{}:{width:"0",height:"0",opacity:"0",overflow:"hidden",margin:"0",padding:"0",border:"0"},children:t?Object(s.c)("div",{children:[Object(s.c)("div",{className:"Captcha-chineseOperator",children:[Object(s.b)("span",{className:b()("Captcha-info",{"Captcha-error":Boolean(n)}),children:n||"请点击图中倒立的文字"}),Object(s.b)(C.c,{className:"Captcha-chineseRefreshButton",preset:"plain",onClick:o,children:Object(s.b)(m.a,{size:20})})]}),l]}):Object(s.c)("div",{children:[Object(s.b)(E.a,{name:"captcha",type:"text",errorMessageClassName:"Captcha-errorMessage",placeholder:"验证码",onChange:r,validations:c?i:[],manualValidateError:n,tabIndex:c?0:-1}),Object(s.b)("span",{className:"Captcha-englishImage",children:l})]})})}}]),n}(d.Component);R.propTypes={isChinese:l.a.bool,url:l.a.string,validationMessage:l.a.string,onValidation:l.a.func,onRefresh:l.a.func.isRequired,onUpdateInput:l.a.func.isRequired,isShown:l.a.bool,validations:l.a.array},R.defaultProps={isChinese:!1,isShown:!1,validations:[{type:"required",message:"请填写验证码",className:"Captcha-requiredErrorMessage"}]};var T=R;function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var D=function(e){Object(i.a)(n,e);var t=N(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={validationMessage:""},e.handleValidation=function(t){var n=t.message,a=t.needsRefresh;n&&e.setState({validationMessage:n});var r=e.props,i=r.captchaNeeded,c=r.checkIfCaptchaNeeded,o=r.requestForCaptcha;!i&&a?c(e.lang):a&&o(e.lang)},e.handleRefresh=function(){e.props.requestForCaptcha(e.lang)},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.isChinese,a=e.checkIfCaptchaNeeded;this.lang=n?"cn":"en",this.type="register"===t?"register":"login",a(this.lang)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.validationResult,a=void 0===n?{}:n,r=t.captchaNeeded,i=t.requestForCaptcha,c=e.validationResult,o=void 0===c?{}:c,s=e.captchaNeeded;!r&&s&&i(this.lang),a.timestamp!==o.timestamp&&this.handleValidation(o)}},{key:"componentWillUnmount",value:function(){this.props.resetCaptchaInfo()}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.isChinese,a=e.onUpdateInput,r=e.className,i=e.captchaBase64String,c=e.isShown,o=this.state.validationMessage,u="digitsLogin"!==t?T.defaultProps.validations:[];return Object(s.b)(T,{className:r,isShown:c,isChinese:n,url:"data:image/jpg;base64,".concat(i),validationMessage:o,onRefresh:this.handleRefresh,onValidation:this.handleValidation,validations:u,onUpdateInput:a})}}]),n}(d.Component);D.propTypes={canCaptchaShown:l.a.bool,isChinese:l.a.bool,type:l.a.oneOf(["login","digitsLogin","register"]).isRequired,validationResult:l.a.object,captchaNeeded:l.a.bool,captchaBase64String:l.a.string,onUpdateInput:l.a.func,checkIfCaptchaNeeded:l.a.func,requestForCaptcha:l.a.func},D.defaultProps={canCaptchaShown:!1,isChinese:!1};var M=Object(h.connect)((function(e,t){var n=e.captcha,a=n.captchaNeeded,r=n.captchaBase64String,i=t.canCaptchaShown;return{isShown:Boolean(i&&a&&r),captchaNeeded:a,captchaBase64String:r}}),{checkIfCaptchaNeeded:f.c,requestForCaptcha:f.f,resetCaptchaInfo:f.h})(D);t.a=M},1243:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var a=n(32),r=n(13),i=n.n(r),c=["className","label","tabIndex"];function o(e){return"Enter"===e.key||" "===e.key||"Enter"===e.code||"Space"===e.code||13===e.keyCode||32===e.keyCode}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.className,r=t.label,s=void 0===r?"":r,u=t.tabIndex,l=void 0===u?0:u,d=Object(a.default)(t,c);return Object.assign(Object.assign({role:"button",tabIndex:l,onClick:e,onKeyDown:function(t){o(t)&&e(t)},className:i()("a11y-button",n)},s&&{"aria-label":s}),d)}},1325:function(e,t,n){"use strict";var a=n(2),r=n(14),i=n(15),c=n(17),o=n(18),s=n(7),u=n(1),l=n(0),d=n(20),p=n(21),h=n(33),f=n(303),g=n(304),A=n(493),b=n(158),m=n(305),C=n(496),E=n(1161),v=n(1162),w=n(1219);n(1171);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var r=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.a)(this,n)}}var I={phoneNoError:null,fullnameError:null,passwordError:null,digitsError:null},B=function(e){Object(c.a)(n,e);var t=S(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={email:"",password:"",fullname:"",captcha:"",customErrorInputMap:Object.assign({},I)},e.handleChange=function(t){return function(n){e.setState(Object(a.a)({},t,n))}},e.runBeforeCheckCaptcha=function(t){var n=e.state.captcha,a=e.props,r=a.captchaNeeded,i=a.checkCaptcha;if(!e.captchaValidated&&r)return n?void i(n).then((function(n){n.payload.success&&(e.captchaValidated=!0,t())})):void e.setState({validationResult:{message:"请输入验证码",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});t()},e.handleSubmit=function(){e.runBeforeCheckCaptcha((function(){var t=e.props,n=t.validateAndRegister;(0,t.resetRegisterValidateResult)();var a=e.state;n({source:"com.zhihu.web",registerType:"email",email:a.email,password:a.password,fullname:a.fullname})}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.isLogin&&(location.href="https://www.zhihu.com/logout?next=/email-register")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.captchaValidationMessage,a=t.registerConfirmSucceeded,r=e.captchaValidationMessage,i=e.registerConfirmSucceeded;!a&&i&&(location.href="/"),!n&&r&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:r,needsRefresh:Boolean(r),timestamp:Date.now()}})}},{key:"render",value:function(){var e=this.state.validationResult,t=this.props.registerValidateErrors,n=t.email,a=(n=void 0===n?{}:n).message,r=t.fullname,i=(r=void 0===r?{}:r).message,c=t.password,o=(c=void 0===c?{}:c).message;return Object(u.b)(g.a,{children:Object(u.c)(m.b,{className:"SignContainer-content EmailRegister",onSubmit:this.handleSubmit,children:[Object(u.b)(v.a,{onChange:this.handleChange("fullname"),name:"fullname",placeholder:"用户名",manualValidateError:i}),Object(u.b)(C.a,{type:"register",placeholder:"输入邮箱",onChange:this.handleChange("email"),manualValidateError:a,supportedCountriesShown:!1}),Object(u.b)(E.a,{onChange:this.handleChange("password"),manualValidateError:o}),Object(u.b)(w.a,{className:"SignFlow-captchaContainer Register-captcha",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:!0,onUpdateInput:this.handleChange("captcha"),validationResult:e}),Object(u.b)(h.c,{className:"EmailRegister-submitButton",preset:"primary",color:"blue",type:"submit",children:"注册"})]})})}}]),n}(l.Component);t.a=Object(d.compose)(f.b,Object(p.connect)((function(e){var t=e.captcha,n=t.captchaNeeded,a=t.captchaValidationMessage,r=e.register;return{captchaNeeded:n,registerValidateErrors:r.registerValidateErrors,captchaValidationMessage:a,registerConfirmSucceeded:r.registerConfirmSucceeded}}),{checkCaptcha:b.b,validateAndRegister:A.f,resetRegisterValidateResult:A.d}))(B)},1332:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a="SignContainerModal";function r(e){return e===a?"登录框":"登录页"}},1476:function(e,t,n){"use strict";var a=n(14),r=n(15),i=n(17),c=n(18),o=n(7),s=n(1),u=n(3),l=n.n(u),d=n(0),p=n.n(d),h=n(20),f=n(21),g=n(48),A=n(44),b=n.n(A),m=n(63),C=n(47),E=n(40),v=n(72),w=n(305),S=n(26),I=n(460),B=n(31),O=n(33),y=n(1170),j=function(e){var t=e.onBack,n=e.data,a=n.phoneNo,r=n.code,i=n.targetNo,c=e.onSubmit;return Object(s.c)("div",{className:"SMSIdentify",children:[Object(s.c)("div",{className:"SMSIdentify-back",role:"button",tabIndex:0,onClick:t,children:[Object(s.b)(y.a,{fill:"#8590a6",size:36,center:!0}),"返回"]}),Object(s.b)("div",{className:"SMSIdentify-title",children:"身份验证"}),Object(s.c)("div",{className:"SMSIdentify-tip",children:["请用手机号 ",a.slice(0,-8),"****",a.slice(-4)," 发送短信"]}),Object(s.c)("div",{className:"SMSIdentify-content",children:[Object(s.c)("div",{children:["短信内容",Object(s.b)("span",{children:r})]}),Object(s.c)("div",{children:["发送到号码",Object(s.b)("span",{children:i})]})]}),Object(s.b)("div",{className:"SMSIdentify-submitTip",children:"发送完成后，请点击下方按钮进行校验"}),Object(s.b)(O.c,{className:"SMSIdentify-submit",preset:"primary",color:"blue",onClick:c,children:"我已发送"})]})},Q=Object(f.connect)(null,{getSMSIdentify:I.d,postSMSIdentify:I.e,showNotification:B.h})((function(e){var t=e.getSMSIdentify,n=e.postSMSIdentify,a=e.showNotification,r=e.onBack,i=e.phoneNo,c=Object(d.useState)({code:"",phoneNo:"",targetNo:""}),o=Object(C.a)(c,2),u=o[0],l=o[1];Object(d.useEffect)((function(){S.a.trackCardShow(null,{id:5935})}),[]),Object(d.useEffect)((function(){i&&t(i).then((function(e){var t=e.payload;t&&l(t)})).catch((function(e){var t=e.payload;t&&l(t)}))}),[t,i]);var p=j;return Object(s.b)(p,{onBack:r,onSubmit:function(){S.a.trackEvent(null,{id:23456}),n(i).then((function(e){var t=e.payload;S.a.trackEvent(null,{id:6729,action:"Click",name:t.success?"通过":"失败"}),t.success?r():a("没有收到短信，请稍后重试","red")}))},data:u})})),k=n(1484),R=function(e){var t=e.captcha,n=t.captchaValidationMessage,a=t.captchaNeeded,r=t.captchaValidated,i=t.v2,c=e.login,o=c.loginConfirmSucceeded,s=c.loginConfirmError,u=c.sendDigitsError,l=c.needSMSIdentify,d=c.loginUnregisteredError,p=c.verification,h=e.register;return{loginConfirmSucceeded:o,loginConfirmError:s,sendDigitsError:u,loginUnregisteredError:d,captchaValidationMessage:n,captchaNeeded:a,captchaValidated:r,registerValidateErrors:h.registerValidateErrors,registerConfirmError:h.registerConfirmError,registerConfirmSucceeded:h.registerConfirmSucceeded,needSMSIdentify:l,captchaV2:i,verification:p}},T=n(304),N=n(13),D=n.n(N),M=n(1243),U=n(51),x=Object.assign;var P=function(e){return p.a.createElement(U.a,x({width:"52",height:"52",fill:"none",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),p.a.createElement("mask",{id:"id-3757926926-a",width:"52",height:"52",x:"0",y:"0",maskUnits:"userSpaceOnUse"},p.a.createElement("path",{fill:"#fff",d:"M0 0l52 52V0H0z"})),p.a.createElement("g",{mask:"url(#id-3757926926-a)"},p.a.createElement("path",{fill:"#06F",d:"M0 0h48a4 4 0 014 4v48L0 0z"}),p.a.createElement("path",{fill:"url(#pattern0)",d:"M0 0h52v52H0z"})),p.a.createElement("defs",null,p.a.createElement("pattern",{id:"pattern0",width:"1",height:"1",patternContentUnits:"objectBoundingBox"},p.a.createElement("use",{transform:"scale(.00216)",xlinkHref:"#image0"})),p.a.createElement("image",{id:"image0",width:"463",height:"463",xlinkHref:"data:image/png;base64,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"})))},z=function(e){var t=e.type,n=e.showSwitchTypeIcon,a=Object(T.b)().handleChangeType;return Object(s.c)("div",{className:"SignFlow-tabs",children:[Object(s.b)(v.a,{as:"div",zaText:"免密码登录",zaType:"Button",zaAction:"Save",className:D()("SignFlow-tab",{"SignFlow-tab--active":"digits"===t}),role:"button",tabIndex:0,onClick:function(){"digits"!==t&&a("digits")},onKeyDown:function(e){Object(M.b)(e)&&"digits"!==t&&a("digits")},children:"免密码登录"}),Object(s.b)(v.a,{as:"div",zaText:"密码登录",zaType:"Button",zaAction:"Save",className:D()("SignFlow-tab",{"SignFlow-tab--active":"password"===t}),role:"button",tabIndex:0,onClick:function(){"password"!==t&&a("password")},onKeyDown:function(e){Object(M.b)(e)&&"password"!==t&&a("password")},children:"密码登录"}),n&&Object(s.b)(v.a,{as:"div",zaText:"二维码图片登录",zaType:"Button",zaAction:"Save",role:"button",tabIndex:0,"aria-label":"二维码图片",className:"SignFlow-qrcodeTab",onClick:function(){a("qrcode")},children:Object(s.b)(P,{})})]})};z.propTypes={showSwitchTypeIcon:l.a.bool},z.defaultProps={showSwitchTypeIcon:!0};var V=z,F=n(496),L=function(e){var t=e.type,n=e.isOversea,a=e.supportedCountriesShown,r=e.selectedCountry,i=e.username,c=e.usernameServerError,o=e.customErrorInputMap,u=(o=void 0===o?{}:o).username,l=Object(T.b)().handleChange;return Object(s.b)(F.a,{type:"digits"===t||a?"digits":"password",supportedCountriesShown:"digits"===t||n,onChange:function(e){return l("username",e)},onSelect:function(e){return l("selectedCountry",e)},defaultSelectedCountry:r,manualValidateError:c||u,defaultValue:i})},H=n(2),q=n(1162),J=n(1161),Z=function(e){var t=e.handleRegister,n=e.setState,a=e.usernameServerError,r=e.passwordServerError,i=e.submitDisabled,c=Object(f.useDispatch)(),o=Object(E.d)((function(e){return function(t){return n(Object(H.a)({},e,t))}}));return Object(s.c)(w.b,{className:"SignFlow-setting",onSubmit:t,children:[Object(s.c)("div",{role:"button",tabIndex:0,className:"SignFlow-back",onClick:function(){return c(I.f.apply(void 0,arguments))},children:[Object(s.b)(y.a,{center:!0,size:28,fill:"#8590a6"}),"返回"]}),Object(s.b)("div",{className:"SignFlow-settingTitle",children:"设置用户名和密码"}),Object(s.b)(q.a,{name:"fullname",placeholder:"用户名",onChange:o("fullname"),manualValidateError:a}),Object(s.b)(J.a,{onChange:o("password"),placeholderPrefix:"8 位数字或字母",defaultType:"text",manualValidateError:r}),Object(s.b)(O.c,{type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:i,children:"进入知乎"})]},"setting")},Y=n(1500),K=function(e){var t=e.type,n=e.smsInputInterceptTime,a=e.digitsServerError,r=e.smsType,i=e.reStartTime,c=e.passwordServerError,o=e.password,u=Object(T.b)(),l=u.handleSendDigits,d=u.setState,p=Object(E.d)((function(){d({smsBackUpDisplay:!0})})),h=Object(E.d)((function(e){return d({digits:e})})),f=Object(E.d)((function(e){return d({password:e})}));return Object(s.c)(s.a,{children:["digits"===t&&Object(s.b)(s.a,{children:Object(s.b)(Y.a,{countDownEvent:l,countDownEndEvent:p,interceptTime:n,manualValidateError:a,smsType:r,reStartTime:i,onChange:h})}),"password"===t&&Object(s.b)(s.a,{children:Object(s.b)(J.a,{onChange:f,manualValidateError:c,defaultValue:o})})]})},W=n(1332),G=n(30),X=function(e){var t=e.smsBackUpName,n=e.smsBackUpDisplay,a=e.isOverSea,r=e.smsType,i=e.type,c=e.containerType,o=Object(T.b)(),u=o.handleChangeType,l=o.setState,d=Object(E.d)((function(){S.a.trackEvent(event.currentTarget,{id:4947}),S.a.trackEvent(void 0,{action:"Click",element:"Button",element_name:"ResetPassword"}),window.open("".concat(G.G,"/account/password_reset"),"_blank")})),p=Object(E.d)((function(e){S.a.trackEvent(e.currentTarget,{id:4941}),l({smsType:"text"===r?"voice":"text",smsBackUpName:"text"===r?"短信":"语音",reStartTime:Date.now()})})),h={configMap:{containerType:Object(W.b)(c)}};return Object(s.c)("div",{className:"Login-options",children:[Object(s.b)(v.a,{as:O.c,zaText:a?"邮箱帐号登录":"海外手机号登录",zaType:"Button",zaAction:"Expand",extra:h,preset:"plain",className:"Login-switchType",onClick:function(){"digits"!==i&&u(a?"email":"oversea")},children:"digits"!==i&&(a?"邮箱帐号登录":"海外手机号登录")}),Object(s.b)(O.c,{preset:"plain",className:"Login-cannotLogin",onClick:"digits"===i?p:d,children:"digits"===i?n&&Object(s.c)(v.e,{zaType:"Text",zaText:"免密码登录",extra:h,children:["接收",t,"验证码"]},"noPassword"):Object(s.b)(v.e,{zaType:"Text",zaText:"密码登录",extra:h,children:"忘记密码"},"forgetPassword")})]})},_=n(45),$=function(e){var t=e.submitDisabled,n=e.type,a=e.containerType;return Object(s.c)(s.a,{children:[Object(s.b)(v.a,{as:O.c,zaText:"登录",zaType:"Button",zaAction:"Signin",extra:{configMap:{containerType:Object(W.b)(a),signinType:n}},type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:t,children:_.a.allowSignUp&&"password"===n?"注册/登录":"登录"}),Object(s.b)("div",{className:"SignContainer-tip",children:Object(s.b)("div",{children:Object(s.c)("div",{children:[_.a.allowSignUp?"未注册手机验证后自动登录，注册即代表同意":"手机验证后自动登录，登录即代表同意",Object(s.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms",children:"《知乎协议》"}),Object(s.b)("a",{href:"https://www.zhihu.com/term/privacy",children:"《隐私保护指引》"})]})})})]})},ee=n(1060),te=n(158),ne=n(1244),ae=n(53),re=n.n(ae),ie=n(121),ce=n(943),oe=n(1172);function se(e,t){var n,a=e.onReady,r=e.onVerify,i=e.onClose,c=Object(f.useSelector)((function(e){return e.captcha})).v2,o=Object(d.useRef)(null),u=Object(ce.a)(),l=null==c||null===(n=c.script)||void 0===n?void 0:n[1],p=Object(d.useRef)(null),h=Object(d.useRef)(),g=Object(d.useRef)(),A=Object(d.useState)("init"),b=Object(C.a)(A,2),m=b[0],v=b[1];Object(d.useEffect)((function(){if(null!=c&&c.script){var e=l?re.a.parse(null==l?void 0:l.split("?")[1]).captchaId:"0";return p.current&&p.current!==e?(u.confirm("页面将自动刷新，请在刷新后重试",{title:"验证码已过期",ok:"刷新"}).then((function(){location.reload()})).catch((function(){o.current&&clearTimeout(o.current)})),o.current=setTimeout((function(){location.reload()}),5e3)):p.current=e,function(){o.current&&clearTimeout(o.current)}}}),[c,l,u]),Object(d.useImperativeHandle)(t,(function(){return{get required(){return Boolean(c)},get ready(){return Boolean(g.current)},get type(){var e;return(null===(e=g.current)||void 0===e?void 0:e.type)||"vendor"},show:function(){var e;null===(e=g.current)||void 0===e||e.show()},close:function(){var e;return null===(e=g.current)||void 0===e?void 0:e.close()},refresh:function(){var e;return null===(e=g.current)||void 0===e?void 0:e.refresh()}}}));var w=Object(E.d)((function(e){var t;if(null!==(t=e.script)&&void 0!==t&&t.length){v("loading");var n=e.script.map((function(e){return function(){return Object(ie.loadScript)(e)}}));Object(oe.b)(n).then((function(){return v("mount"),window.ZS_CAP.init({element:h.current,callback:function(e){null==r||r(e)},enableClose:!0,onClose:i})})).then((function(e){g.current=e,v("ready"),null==a||a()})).catch((function(e){var t;return null===(t=window.Raven)||void 0===t?void 0:t.captureException(e)}))}else v("bypass")}));return Object(d.useEffect)((function(){c&&"init"===m&&w(c)}),[c,m,w]),c?Object(s.b)("div",{ref:h}):null}var ue=p.a.memo(p.a.forwardRef(se)),le=function(e){var t=e.type,n=e.captchaV2,a=Object(f.useDispatch)();return Object(E.d)((function(){"qrcode"!==t&&(n&&a(Object(te.h)()),a(Object(te.d)("captcha_sign_in")))}))},de=function(e){var t=e.type,n=e.captchaV2Ref,a=e.onVerify,r=e.lastSubmittedTimestamp,i=Object(f.useDispatch)(),c=Object(T.b)(),o=c.continueActionRef,u=c.captchaV2,l=le({type:t,captchaV2:u});Object(d.useEffect)((function(){l(),b.a.increment("logIn.captcha.request.count")}),[l]),Object(ee.a)(["esc"],(function(){var e;null===(e=n.current)||void 0===e||e.close()}));return Object(d.useEffect)((function(){var e;r&&(-1!==r&&(console.log("captcha refresh!"),null===(e=n.current)||void 0===e||e.refresh()))}),[r,n]),Object(s.b)(ue,{ref:n,onVerify:function(e){if(e instanceof Error)return b.a.increment("logIn.captcha.wrong.count"),i(Object(B.h)(e.message||"验证失败","red"));if(null==e||!e.type||null==e||!e.result)return i(Object(B.h)("错误的验证方式","red"));var t=e.result;i(Object(te.g)(JSON.stringify(t),!0,"captcha_sign_in")).then((function(e){var t=e.payload;if(null!=t&&t.success){var r,i;if(null==a||a({result:"success"}),null!=o&&o.current)null===(i=o.current)||void 0===i||i.call(o);null===(r=n.current)||void 0===r||r.close()}})).catch((function(e){if(null==a||a({result:"fail"}),120001!==e.payload.code)throw i(Object(B.h)(Object(ne.b)(e),"red")),e;i(Object(B.h)("页面已过期，请刷新页面重试","red"))})).finally((function(){o&&(o.current=null)}))},onClose:function(){var e;r||(console.log("captcha refresh!"),null===(e=n.current)||void 0===e||e.refresh())}})},pe=n(1173),he=function(e){var t=e.props,n=e.setState,a=e.state,r=t.onChangeType,i=t.type,c=t.captchaV2,o=Object(f.useDispatch)(),s=a.username,u=le({props:t});return Object(E.d)((function(e){o(Object(I.f)()),r(e),"qrcode"!==e&&"password"!==e||S.a.trackEvent(null,{action:"Click",name:"qrcode"===e?"使用二维码登录":"使用密码登录"},{account:{type:"Zhihu"}}),"qrcode"!==e&&(n({username:"password"===i&&Object(pe.a)(s)?"":s,smsBackUpDisplay:!0}),c||u())}))},fe=function(e){var t,n=e.loginConfirmError,a=e.sendDigitsError,r=e.registerValidateErrors,i=(t=n,Object(d.useMemo)((function(){var e=t||{};return{loginUsernameServerError:e.username,passwordServerError:e.password,digitsServerError:e.digits,captchaServerError:e.captcha,undefinedLoginError:e.undefined,validateDigitsError:e.validateDigitsError}}),[t])),c=i.loginUsernameServerError,o=i.passwordServerError,s=i.digitsServerError,u=i.captchaServerError,l=i.undefinedLoginError,p=i.validateDigitsError,h=function(e){return Object(d.useMemo)((function(){var t=e||{};return{sendDigitsUsernameServerError:t.username,undefinedDigitsError:t.undefined}}),[e])}(a),f=h.sendDigitsUsernameServerError,g=h.undefinedDigitsError,A=function(e){return Object(d.useMemo)((function(){var t=e||{},n=t.fullname,a=(n=void 0===n?{}:n).message,r=t.password;return{fullnameError:a,registerPasswordServerError:(r=void 0===r?{}:r).message}}),[e])}(r),b=A.fullnameError,m=A.registerPasswordServerError;return{usernameServerError:f||c,passwordServerError:o||m,digitsServerError:s||p,captchaServerError:u,fullnameError:b,undefinedLoginError:l,undefinedDigitsError:g}},ge=function(e){var t=e.setState,n=Object(f.useDispatch)();return Object(E.d)((function(e,a){n(Object(I.f)()),t(Object(H.a)({},e,a))}))},Ae=function(e){var t=e.state,n=t.selectedCountry.code,a=t.username;return Object(E.d)((function(){return"+86"!==n||/^\d{11}$/.test(a)}))},be=n(289),me=n(1763);function Ce(e,t){if(!e)return{};var n,a=e=e.trim(),r=Object(pe.a)(e);if(!r){var i={hasCode:(n=e).startsWith("+")||n.startsWith("00"),parsedPhoneNo:n.startsWith("00")?"+".concat(n.slice(2)):n};a=i.hasCode?i.parsedPhoneNo:"".concat(t).concat(e)}return{value:a,isEmail:r}}var Ee=function(e){var t=e.props,n=e.setState,a=e.runBeforeResetValidateResult,r=e.runBeforeCheckCaptcha,i=e.testPhoneNo,c=e.continueActionRef,o=e.selectedCountry,s=e.captcha,u=e.customErrorInputMap,l=e.username,d=e.trackLoginSuccess,p=t.type,h=t.isOverSea,g=t.nextUrl,A=Object(f.useDispatch)();return Object(E.d)((function(e){S.a.trackEvent(void 0,{id:4948}),a((function(){if("digits"!==p&&!h||i()){b.a.increment("logIn.clickLogInBtn.count");var t=function(){var t=Object(be.c)(g),a=t.utm_source,r=t.utm_medium,i=Object.assign(Object.assign({},e),{},{username:Ce(e.username,o.code).value,captcha:s,utmSource:a,refSource:r});n({lastSubmittedTimestamp:Date.now()}),A(Object(I.h)(Object(me.a)(p,i))).then((function(e){var t;null!==(t=e.payload)&&void 0!==t&&t.accessToken&&(null==d||d())}))};c.current=t,r().then((function(e){e&&t()})).finally((function(){return n({submitDisabled:!1})}))}else n({customErrorInputMap:Object.assign(Object.assign({},u),{},{username:l?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}))}))},ve=function(e){var t=document.querySelectorAll(".yidun_modal"),n=function(e){var t,n=document.createElement("button");return n.style.position="absolute",n.style.top="15px",n.style.right="15px",n.style.fontSize="16px",n.innerText="✕",n.setAttribute("tabindex","0"),n.addEventListener("click",e),(t=n)&&(t.addEventListener("focus",(function(e){e.target.style.boxShadow="0 0 0 2px #ffffff, 0 0 0 4px rgb(0 102 255 / 30%)"}),!0),t.addEventListener("blur",(function(e){e.target.style.boxShadow="none"}),!0)),n}((function(){var t;return null===(t=e.current)||void 0===t?void 0:t.close()}));Array.from(t).forEach((function(e){e.appendChild(n),function(e){e.querySelector(".yidun_tips").removeAttribute("aria-live")}(e),function(e){var t=e.querySelector(".yidun_modal__title");t.setAttribute("tabindex","-1"),t.innerText="请完成安全验证，可使用语音验证",t.addEventListener("focus",(function(){t.style.outline="none"})),setTimeout((function(){t.focus()}),500)}(e)}))},we=function(e){var t=e.customErrorInputMap,n=e.smsType,a=e.selectedCountry.code,r=e.username,i=e.testPhoneNo,c=e.captchaV2Ref,o=e.runBeforeResetValidateResult,s=e.setState,u=e.captchaNeeded,l=e.continueActionRef,d=Object(f.useDispatch)();return Object(E.d)((function(e,p){return o((function(){var e;if(i()){var o=Ce(r,a).value,h=function(){d(Object(I.j)({username:o,smsType:n,type:"login"})),s({smsBackUpDisplay:!1})};if(!r||u){if(u&&null!==(e=c.current)&&void 0!==e&&e.required){c.current.show(),ve(c);return l.current=function(){h(),p()},!1}s({customErrorInputMap:Object.assign(Object.assign({},t),{},{username:r?"":"请输入手机号"})})}else h()}else s({customErrorInputMap:Object.assign(Object.assign({},t),{},{username:r?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}),!u)}))},Se={username:null,password:null,captcha:null,digits:null},Ie=function(e){var t=e.setState,n=Object(f.useDispatch)();return Object(E.d)((function(e,a){return n(Object(I.f)()),t({customErrorInputMap:Object.assign({},Se),validationResult:{needsRefresh:!1,timestamp:Date.now()}},e),a}))},Be=function(e){var t=e.props,n=e.captchaV2Ref,a=t.captchaValidated,r=t.captchaNeeded;return Object(E.d)((function(){if(!a&&r){var e;if(null!==(e=n.current)&&void 0!==e&&e.required)return n.current.show(),ve(n),Promise.resolve(!1);console.warn("Captcha is unavailable.")}return Promise.resolve(!0)}))},Oe=n(339),ye=n(509),je=function(e){var t=e.registerConfirmSucceeded,n=e.loginConfirmSucceeded,a=e.sendDigitsError,r=e.nextUrl,i=e.username,c=e.isInSignPage,o=e.loginConfirmError,s=e.captchaValidationMessage,u=e.setState,l=e.loginUnregisteredError,p=e.loginBindWechatError,h=e.type,g=e.verification,A=Object(f.useDispatch)();Object(d.useEffect)((function(){!o||l||p||(A(Object(te.i)(h)),A(Object(te.d)()))}),[o,l,p,u,A,h]),Object(d.useEffect)((function(){if(s){var e=s?{smsInputInterceptTime:Date.now()}:{};u(Object.assign({captchaValidated:!1,captchaNeeded:!0},e))}}),[s,u]),Object(d.useEffect)((function(){(n||t)&&(Object(ye.b)(i),null!=g&&g.isZombie&&Object(Oe.c)(g),r?location.href=r:c?location.href="/":location.reload())}),[n,t]),Object(d.useEffect)((function(){if(a||!1===n){var e=a?{smsInputInterceptTime:Date.now()}:{};u(Object.assign(Object.assign({},e),{},{captchaValidated:!1,captchaNeeded:!0}))}}),[a,n]),Object(d.useEffect)((function(){(s||a&&null===o)&&u({smsBackUpDisplay:!0})}),[s,a])},Qe="UPDATE_STATE",ke=function(e){return{smsType:"text",smsBackUpName:"语音",smsBackUpDisplay:!0,reStartTime:-1,supportedCountriesShown:!1,selectedCountry:e.selectedCountry,username:e.username,password:e.password,fullname:"",customErrorInputMap:Object.assign({},Se),submitDisabled:!1,lastSubmittedTimestamp:-1}},Re=function(e,t){var n=t.type,a=t.callback;if(n===Qe){var r=t.payload;return a&&a(e),Object.assign(Object.assign({},e),r)}return e},Te=n(493),Ne=function(e){var t=e.props,n=e.captchaV2Ref,a=e.continueActionRef,r=e.setState,i=e.selectedCountry.code,c=e.username,o=e.fullname,s=e.digits,u=e.password,l=Object(f.useDispatch)(),d=Be({props:t,captchaV2Ref:n});return Object(E.d)((function(){var e=function(){l(Object(Te.f)({source:"com.zhihu.web",registerType:"phone_digits",phoneNo:"".concat(i).concat(c),fullname:o,digits:s,password:u}))};a&&(a.current=e),r({submitDisabled:!0}),d().then((function(t){return t&&e()})).finally((function(){return r({submitDisabled:!1})}))}))},De=function(e){var t=e.isInSignPage,n=e.type,a=e.isOversea,r=e.needSMSIdentify,i=e.captchaV2,c=e.registerConfirmSucceeded,o=e.loginConfirmSucceeded,u=e.nextUrl,l=e.captchaNeeded,p=e.loginUnregisteredError,h=e.loginConfirmError,g=e.captchaValidationMessage,A=e.showSwitchTypeIcon,b=e.isSignPage,m=e.selectClassName,S=e.verification,O=e.containerType,y=Object(f.useDispatch)(),j=Object(d.useReducer)(Re,e,ke),R=Object(C.a)(j,2),N=R[0],D=R[1],M=N.selectedCountry,U=N.username,x=N.supportedCountriesShown,P=N.customErrorInputMap,z=N.smsInputInterceptTime,F=N.smsType,H=N.reStartTime,q=N.password,J=N.smsBackUpDisplay,Y=N.smsBackUpName,W=N.submitDisabled,G=N.captcha,_=N.fullname,ee=N.digits,te=N.lastSubmittedTimestamp,ne=Object(d.useRef)(null),ae=Object(d.useRef)(null),re=Object(d.useRef)(null),ie=Object(v.i)().trackEvent,ce=Object(E.d)((function(){b||ie({block:"".concat(n,"_loginSuccess")})})),oe=Object(E.d)((function(e,t){return D({type:Qe,payload:e,callback:t})})),se=fe(e),ue=se.usernameServerError,le=se.digitsServerError,pe=se.passwordServerError,be=se.undefinedLoginError,me=se.undefinedDigitsError;Object(d.useEffect)((function(){(be||me)&&y(Object(B.h)(be||me,"red"))}),[y,be,me]);var Ce=he({props:e,state:N,setState:oe,rootRef:re}),ve=ge({setState:oe}),Se=Ae({state:N}),Oe=Ie({setState:oe}),ye=we({customErrorInputMap:P,smsType:F,selectedCountry:M,username:U,runBeforeResetValidateResult:Oe,testPhoneNo:Se,setState:oe,captchaNeeded:l,captchaV2Ref:ae,continueActionRef:ne}),Te=Be({props:e,captchaV2Ref:ae}),De=Ee({props:e,selectedCountry:M,captcha:G,setState:oe,runBeforeResetValidateResult:Oe,runBeforeCheckCaptcha:Te,testPhoneNo:Se,continueActionRef:ne,customErrorInputMap:P,username:U,trackLoginSuccess:ce});je({registerConfirmSucceeded:c,loginConfirmSucceeded:o,nextUrl:u,username:U,isInSignPage:t,loginConfirmError:h,captchaValidationMessage:g,setState:oe,loginUnregisteredError:p,verification:S});var Me=Ne({props:e,captchaV2Ref:ae,continueActionRef:ne,setState:oe,selectedCountry:M,username:U,fullname:_,digits:ee,password:q});if(r)return Object(s.b)(Q,{ref:re,onBack:function(){return y(Object(I.f)())},phoneNo:"".concat(M.code).concat(U)});var Ue=null;if("qrcode"===n){var xe=Object(s.b)(v.e,{zaType:"Text",zaText:"二维码登录",extra:{configMap:{containerType:"登录页"}},children:Object(s.b)(k.a,{ref:re,isInSignPage:t,className:"SignInQrcode",onChangeType:function(){return Ce("password")},showSwitchTypeIcon:A,trackLoginSuccess:ce})});Ue=b?xe:Object(s.b)(v.e,{zaType:"Popup",zaBlock:n,children:xe},n)}else if(p&&"digits"==n)Ue=Object(s.b)(Z,{handleRegister:Me,setState:oe,submitDisabled:W,usernameServerError:ue,passwordServerError:pe});else{var Pe=Object(s.c)(w.b,{className:"SignFlow Login-content",onSubmit:De,children:[Object(s.b)(V,{type:n,showSwitchTypeIcon:A}),Object(s.b)(L,{type:n,isOversea:a,supportedCountriesShown:x,selectedCountry:M,username:U,usernameServerError:ue,customErrorInputMap:P}),Object(s.b)(K,{type:n,smsInputInterceptTime:z,digitsServerError:le,smsType:F,reStartTime:H,passwordServerError:pe,password:q}),Object(s.b)(X,{type:n,isOverSea:a,smsBackUpName:Y,smsBackUpDisplay:J,smsType:F,containerType:O}),Object(s.b)(de,{type:n,captchaV2Ref:ae,lastSubmittedTimestamp:te}),Object(s.b)($,{submitDisabled:W,type:n,containerType:O})]});Ue=b?Object(s.b)(v.e,{zaType:"Popup",zaBlock:n,children:Pe},n):Pe}return Object(s.b)(T.a,{handleChangeType:Ce,setState:oe,dispatch:D,selectClassName:m,handleChange:ve,testPhoneNo:Se,handleSendDigits:ye,continueActionRef:ne,captchaNeeded:l,captchaV2:i,children:Ue})};De.propTypes={validateAndLogin:l.a.func,resetLoginValidateResult:l.a.func,validateSendDigits:l.a.func,loginConfirmSucceeded:l.a.bool,loginConfirmError:l.a.object,selectClassName:l.a.string,sendDigitsError:l.a.object,captchaValidationMessage:l.a.string,captchaNeeded:l.a.bool,selectedCountry:l.a.object,username:l.a.string,password:l.a.string,type:l.a.oneOf(["password","digits","qrcode"]),onChangeType:l.a.func,isInSignPage:l.a.bool,showSwitchTypeIcon:l.a.bool},De.defaultProps={selectedCountry:{name:"中国",code:"+86"},username:"",password:""};var Me=Object(f.connect)(R)(De),Ue=n(195);function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var Pe=function(e){Object(i.a)(n,e);var t=xe(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={type:e.props.showQrcodeFirst?"qrcode":"digits",isOversea:!1,passwordType:"email"},e.handleSwitchLoginType=function(t){"email"!==t&&"oversea"!==t?(e.setState({type:t}),b.a.increment("logIn.type.switchTo.".concat(t,".count"))):e.setState({type:"password",isOversea:"oversea"===t,passwordType:t})},e}return Object(r.a)(n,[{key:"renderNotification",value:function(){var e=this.props,t=e.notification,n=e.account,a=n.isAppealed,r=n.spamLevel,i=a||r?G.M:G.L,c=null;return c=6===r?Object.assign(Object.assign({},t),{},{theme:"red"}):t,Object(s.b)(Ue.a,{notification:c.global,delay:i,className:"AppHeader-notification"})}},{key:"render",value:function(){var e=this.props,t=e.nextUrl,n=e.isInSignPage,a=e.showSwitchTypeIcon,r=e.isSignPage,i=e.selectClassName,c=void 0===i?"Select-popoverTarget":i,o=e.containerType,u=this.state,l=u.type,d=u.isOversea;return Object(s.c)(s.a,{children:[Object(s.b)(Me,{containerType:o,type:l,isInSignPage:n,isOversea:d,onChangeType:this.handleSwitchLoginType,nextUrl:t,showSwitchTypeIcon:a,isSignPage:r,selectClassName:c}),this.renderNotification()]})}}]),n}(d.Component);Pe.propTypes={nextUrl:l.a.string,isInSignPage:l.a.bool,showSwitchTypeIcon:l.a.bool,selectClassName:l.a.string};var ze=Object(h.compose)(g.withRouter,Object(f.connect)((function(e,t){var n=t.showQrcode,a=void 0===n||n,r=t.showQrcodeFirst,i=t.isInSignPage;return{showQrcodeFirst:a&&(r||i&&["1","2","3"].includes(Object(m.a)(e,"web_login"))),notification:e.notification,account:e.account,isSignPage:["/signin","/signup"].includes(t.router.location.pathname)}})))(Pe);t.a=ze},1484:function(e,t,n){"use strict";var a=n(14),r=n(15),i=n(17),c=n(18),o=n(7),s=n(1),u=n(3),l=n.n(u),d=n(0),p=n.n(d),h=n(20),f=n(21),g=n(48),A=n(58),b=n(13),m=n.n(b),C=n(26),E=n(44),v=n.n(E),w=n(441),S=n(12),I=Object.assign;function B(e){return p.a.createElement(S.a,I(I({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"CheckCircle24","data-old-api":"CheckCircle24"},e),{className:"ZDI ZDI--CheckCircle24"+(e.className?" ".concat(e.className):"")}),p.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},p.a.createElement("path",{d:"M12 20.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),p.a.createElement("path",{d:"M10.414 15.175a.75.75 0 010-1.06L15.16 9.37a.75.75 0 011.06 1.06l-4.744 4.745a.75.75 0 01-1.06 0z"}),p.a.createElement("path",{d:"M7.78 11.48a.75.75 0 011.061 0l2.634 2.634a.75.75 0 01-1.06 1.061L7.78 12.541a.75.75 0 010-1.06z"})))}var O=Object.assign;function y(e){return p.a.createElement(S.a,O(O({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ExclamationCircle24","data-old-api":"ExclamationCircle24"},e),{className:"ZDI ZDI--ExclamationCircle24"+(e.className?" ".concat(e.className):"")}),p.a.createElement("path",{d:"M12 20.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",fillRule:"evenodd",clipRule:"evenodd"}),p.a.createElement("path",{d:"M12 7a.75.75 0 01.75.75v5a.75.75 0 01-1.5 0v-5A.75.75 0 0112 7z",fillRule:"evenodd",clipRule:"evenodd"}),p.a.createElement("path",{d:"M13 16a1 1 0 11-2 0 1 1 0 012 0z"}))}var j=n(228),Q=n(460),k=n(45),R=n(1516),T=n(51),N=Object.assign;var D=function(e){return p.a.createElement(T.a,N({width:"52",height:"52",fill:"none"},e),p.a.createElement("mask",{id:"id-320414155-a",width:"52",height:"52",x:"0",y:"0",maskUnits:"userSpaceOnUse"},p.a.createElement("path",{fill:"#fff",d:"M0 0l52 52V0H0z"})),p.a.createElement("g",{mask:"url(#id-320414155-a)"},p.a.createElement("path",{fill:"#06F",d:"M0 0l52 52V0H0z"}),p.a.createElement("path",{fill:"#fff",d:"M22.125 4h13.75A4.125 4.125 0 0140 8.125v27.75A4.125 4.125 0 0135.875 40h-13.75A4.125 4.125 0 0118 35.875V8.125A4.125 4.125 0 0122.125 4zm6.938 34.222c1.139 0 2.062-.945 2.062-2.11 0-1.167-.923-2.112-2.063-2.112-1.139 0-2.062.945-2.062 2.111 0 1.166.923 2.111 2.063 2.111zM21 8.333v24h16v-24H21z",fillRule:"evenodd",clipRule:"evenodd"}),p.a.createElement("path",{fill:"#fff",d:"M46.996 15.482L39 19.064l-7.996-3.582A1.6 1.6 0 0132.6 14h12.8a1.6 1.6 0 011.596 1.482zM47 16.646V24.4a1.6 1.6 0 01-1.6 1.6H32.6a1.6 1.6 0 01-1.6-1.6v-7.754l8 3.584 8-3.584z",fillRule:"evenodd",clipRule:"evenodd"}),p.a.createElement("path",{fill:"#06F",d:"M31 15.483v1.17l8 3.577 8-3.577v-1.17l-8 3.581-8-3.581z"})))};function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var U={1:"a",2:"b",3:"c"};var x=function(e){Object(i.a)(n,e);var t=M(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).cancelCheckQrcodeScanStatus=function(){r.timer&&window.clearInterval(r.timer)},r.checkQrcodeScanStatus=function(e){var t=r.props,n=t.checkQrcodeScanStatus,a=t.trackEvent,i=t.isSignPage;r.timer=setInterval((function(){n({token:e}).then((function(e){var t;null!==(t=e.payload)&&void 0!==t&&t.accessToken&&!i&&(null==a||a({block:"qrcode_loginSuccess"}))}))}),2e3)},r.handleChangestatus=function(e,t){r.setState({status:e}),"init"!==e||t||r.getToken(),v.a.increment("logIn.qrcode.".concat(e,".count"))},r.handleChangeLoginType=function(){var e=r.props.onChangeType;r.cancelCheckQrcodeScanStatus(),e()},r.initTips=function(){var e=r.props,t=e.guideType,n=e.isInSignPage,a=e.isBlockType,i=r.state.enableSwitchGuide,c=!(n&&["2","3"].includes(t)||a),o=i?7300:1e3;i&&(r.showSwitchGuideTimeout=setTimeout((function(){r.setState({showSwitchGuide:!0}),r.hideSwitchGuideTimeout=setTimeout((function(){r.setState({showSwitchGuide:!1})}),3e3)}),1e3)),c&&(r.showTipsTimeout=setTimeout((function(){r.setState({showTips:!0}),r.hideTipsTimeout=setTimeout((function(){r.setState({showTips:!1})}),5e3)}),o))},r.state={type:"password",status:"init",errorMessage:"",showTips:!1,showSwitchGuide:!1,enableSwitchGuide:r.props.isInSignPage&&["1","2","3"].includes(r.props.guideType),guideTypeSymbol:U[r.props.guideType]||"d"},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.isInSignPage,t=this.state.guideTypeSymbol;e&&C.a.trackCardShow(null,{id:9214,name:t}),this.getToken().then(this.initTips)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.qrcodeLoginToken,a=t.qrcodeLoginScanStatus,r=e.qrcodeLoginToken,i=e.qrcodeLoginScanStatus,c=e.qrcodeLoginError,o=e.qrcodeLoginReturnNewToken;""!==r&&n!==r?(this.cancelCheckQrcodeScanStatus(),"init"!==this.state.status&&this.handleChangestatus("init",!0),this.checkQrcodeScanStatus(r)):a!==i?2!==i&&this.handleChangestatus(1===i?"success":"init",o||1===a&&0===i):c&&c.code&&(this.cancelCheckQrcodeScanStatus(),40321===c.code&&this.setState({status:"error",errorMessage:c.message}))}},{key:"componentWillUnmount",value:function(){this.cancelCheckQrcodeScanStatus(),clearTimeout(this.showTipsTimeout),clearTimeout(this.hideTipsTimeout),clearTimeout(this.showSwitchGuideTimeout),clearTimeout(this.hideSwitchGuideTimeout)}},{key:"getToken",value:function(){return this.props.getQrcodeLoginToken()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.qrcodeLoginToken,r=t.guideType,i=t.isInSignPage,c=t.showSwitchTypeIcon,o=t.isBlockType,u=this.state,l=u.status,p=u.errorMessage,h=u.showTips,f=u.showSwitchGuide,g=u.enableSwitchGuide,b=u.guideTypeSymbol,C=null;return C="init"===l?Object(s.c)("div",{className:"Qrcode-content",children:[Object(s.b)("div",{className:m()("Qrcode-img",{"Qrcode-img--hover":h}),children:a?Object(s.c)(s.a,{children:[Object(s.b)("img",{className:"Qrcode-qrcode",width:"150",height:"150",src:"//".concat(k.a.wwwHost,"/api/v3/account/api/login/qrcode/").concat(a,"/image").concat(i?"?utm_campaign=internal&utm_medium=qr&utm_source=login&utm_term=force_launch&utm_content=qrscan".concat(b):""),alt:"二维码"}),Object(s.b)("img",{alt:"使用手机知乎 APP，打开我的页面，点击左上角扫一扫，可以扫描本页的二维码",className:"Qrcode-tips",src:"https://pic1.zhimg.com/80/v2-3ca9dfefdc7ab9034c123abd69a57ae0.png"})]}):Object(s.b)(w.a,{count:3})}),"3"===r?Object(s.c)("p",{children:["使用"," ",Object(s.b)("a",{href:"https://www.zhihu.com/app/",target:"_blank",rel:"noopener noreferrer",children:"知乎 App"})," ","| 微信 扫一扫登录"]}):Object(s.c)("div",{className:"Qrcode-guide-message",children:[o&&Object(s.b)("div",{className:"Qrcode-title",children:"扫码登录"}),Object(s.c)("p",{children:["打开",Object(s.c)("a",{href:"https://www.zhihu.com/app/",target:"_blank",rel:"noopener noreferrer",children:[" ","知乎 App"]})]}),Object(s.b)("p",{children:"在「我的」页面顶部打开扫一扫"}),Object(s.b)("p",{children:"如扫码异常请下载最新版客户端"})]})]}):"success"===l?Object(s.c)(d.Fragment,{children:[Object(s.c)("div",{className:"Qrcode-content Qrcode-success",children:[Object(s.b)("div",{className:"Qrcode-scanResultStaus",children:Object(s.b)(B,{fill:"#2db370",size:58})}),Object(s.b)("p",{className:"Qrcode-scanResultTips",children:"扫描成功"}),Object(s.b)("p",{children:"请在手机上「确认登录」"})]}),Object(s.b)("div",{className:"Qrcode-cutButton",children:Object(s.b)("span",{role:"button",tabIndex:0,onClick:function(){return e.handleChangestatus("init")},children:"返回二维码"})})]}):Object(s.c)("div",{className:"Qrcode-content Qrcode-failure",children:[Object(s.b)("div",{className:m()({"Qrcode-scanResultStaus":o}),children:Object(s.b)(y,{fill:"#ffaa00",size:58})}),o&&Object(s.b)("p",{className:"Qrcode-scanResultTips",children:"扫描失败"}),Object(s.b)("p",{children:p})]}),Object(s.c)("div",{className:m()("Qrcode-container",n),children:[g&&Object(s.b)(A.Box,{color:"GBL01A",fontSize:"14px",height:"40px",width:"260px",mt:"-24px",mx:"auto",mb:"15px",css:function(e){return{textAlign:"center",lineHeight:"40px",backgroundColor:e.colorMod(e.colors.GBL01A).alpha(.1),borderRadius:"20px",borderTopRightRadius:"0",transformOrigin:"top right",transform:"scale(".concat(f?"1":"0",")"),opacity:f?"1":"0",transition:"transform 300ms cubic-bezier(0.4, 0, 0.2, 1), opacity 300ms linear"}},children:"点击使用手机号、帐号密码登录"}),Object(s.b)("div",{className:"Qrcode-title",children:"扫码登录"}),C,c&&Object(s.b)(D,{onClick:this.handleChangeLoginType})]})}}]),n}(d.Component);x.propTypes={type:l.a.string,isShowPasswordLogin:l.a.bool,onChangeType:l.a.func,getQrcodeLoginToken:l.a.func,checkQrcodeScanStatus:l.a.func,isInSignPage:l.a.bool,showSwitchTypeIcon:l.a.bool,isBlockType:l.a.bool},x.defaultProps={qrcodeLoginToken:"",qrcodeLoginScanStatus:"",onChangeType:function(){},showSwitchTypeIcon:!0,isBlockType:!1};t.a=Object(h.compose)(g.withRouter,R.a,Object(f.connect)((function(e,t){var n=e.login;return{qrcodeLoginToken:n.qrcodeLoginToken,qrcodeLoginTokenExpires:n.qrcodeLoginTokenExpires,qrcodeLoginScanStatus:n.qrcodeLoginScanStatus,qrcodeLoginError:n.qrcodeLoginError,qrcodeLoginReturnNewToken:n.qrcodeLoginReturnNewToken,edition:Object(j.b)(e),guideType:Object(j.a)(e,"web_login"),isSignPage:["/signin","/signup"].includes(t.router.location.pathname)}}),{getQrcodeLoginToken:Q.c,checkQrcodeScanStatus:Q.a}))(x)},1485:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var a=n(2),r=n(14),i=n(15),c=n(81),o=n(17),s=n(18),u=n(7),l=n(1),d=n(0),p=n(20),h=n(21),f=n(13),g=n.n(f),A=n(26),b=n(289),m=n(33),C=n(1170),E=n(433),v=n(30),w=n(493),S=n(158),I=n(305),B=n(1219),O=n(496),y=n(1500),j=n(1161),Q=n(1162),k=n(45);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var T={phoneNoError:null,fullnameError:null,passwordError:null,digitsError:null},N=function(e){Object(o.a)(n,e);var t=R(n);function n(e){var i;return Object(r.a)(this,n),(i=t.call(this,e)).handleCountDownEndEvent=function(){i.setState({smsBackUpDisplay:!0})},i.handleChange=function(e){return function(t){i.setState(Object(a.a)({},e,t))}},i.testPhoneNo=function(){var e=i.state,t=e.selectedCountry.code,n=e.phoneNo;return"+86"!==t||/^\d{11}$/.test(n)},i.handleBackUpDigits=function(){i.setState({smsType:"text"===i.state.smsType?"voice":"text",reStartTime:Date.now()})},i.sendDigits=function(){var e=i.props,t=e.sendDigits,n=e.validateRegisterForm;(0,e.resetRegisterValidateResult)();var a=i.state,r=a.phoneNo,c=a.selectedCountry,o=a.smsType,s="".concat(c.code).concat(r);n({phoneNo:s}).then((function(e){if(e.payload.success)return i.setState({smsBackUpDisplay:!1}),void t(s,o);i.setState({smsInputInterceptTime:Date.now()})}))},i.runBeforeCheckCaptcha=function(e){var t=i.state.captcha,n=i.props,a=n.captchaNeeded,r=n.checkCaptcha;if(!i.captchaValidated&&a)return t?void r(t,i.captchaIsChinese?"cn":"en").then((function(t){t.payload.success&&(i.captchaValidated=!0,e())})):void i.setState({validationResult:{message:i.captchaIsChinese?"请点击图中倒立的文字":"请输入验证码",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});e()},i.runBeforeResetValidateResult=function(e){i.props.resetRegisterValidateResult(),i.setState({customErrorInputMap:Object.assign({},T),validationResult:{needsRefresh:!1,timestamp:Date.now()}},(function(){e()}))},i.handleSendDigits=function(){A.a.trackEvent(Object(c.a)(i),{id:4940}),i.runBeforeResetValidateResult((function(){var e=i.state.phoneNo;i.testPhoneNo()?i.runBeforeResetValidateResult((function(){i.runBeforeCheckCaptcha((function(){i.sendDigits()}))})):i.setState({customErrorInputMap:Object.assign(Object.assign({},i.state.customErrorInputMap),{},{phoneNoError:e?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}))},i.parseErrorMessages=function(){var e=i.props,t=e.registerValidateErrors,n=void 0===t?{}:t,a=e.onChangeToSigin,r=n.phoneNo,c=void 0===r?{}:r,o=n.fullname,s=void 0===o?{}:o,u=n.password,d=void 0===u?{}:u,p=n.username,h=void 0===p?"":p,f=c.code,g=c.message;return{phoneNoError:f===v.t?Object(l.c)("span",{children:["该手机号已注册 · ",Object(l.b)(m.c,{preset:"plain",style:{color:"#3f3f3f"},onClick:function(){a()},children:"直接登录"})]}):g,fullnameError:s.message,passwordError:d.message,usernameError:h}},i.handlePhoneNumberFormSubmit=function(e){A.a.trackEvent(Object(c.a)(i),{id:4942}),i.runBeforeCheckCaptcha((function(){i.runBeforeResetValidateResult((function(){var t=e.digits,n=i.props,a=n.validateDigits,r=n.onSetShowHeader,c=i.state,o=c.phoneNo,s=c.selectedCountry;o&&t&&a("".concat(s.code).concat(o),t).then((function(e){e.payload.success?i.setState({digitsValidated:!0},(function(){r(!1)})):i.setState({customErrorInputMap:Object.assign(Object.assign({},i.state.customErrorInputMap),{},{digitsError:"验证码填写错误"})})}))}))}))},i.handleSetNameFormSubmit=function(e){i.runBeforeCheckCaptcha((function(){i.runBeforeResetValidateResult((function(){var t=i.state,n=t.phoneNo,a=t.digits,r=t.password,c=t.fullname,o=t.selectedCountry,s=i.props,u=s.confirmRegister,l=s.validateRegister,d=s.nextUrl,p={phoneNo:"".concat(o.code).concat(n),password:r,digits:a,fullname:c},h=Object(b.c)(d),f=h.utm_source,g=h.utm_medium;l(p).then((function(t){t.payload.success&&u({phoneNo:"".concat(o.code).concat(n),digits:a,password:r,fullname:c||e.fullname,registerType:"phone_digits",source:"com.zhihu.web",utmSource:f,refSource:g})}))}))}))},i.state={fullname:"",password:"",captcha:"",phoneNo:"",digits:"",smsType:"text",digitsValidated:!1,smsBackUpDisplay:!0,selectedCountry:{name:"中国",code:"+86"},validationResult:{},customErrorInputMap:Object.assign({},T),smsInputInterceptTime:-1,reStartTime:Date.now()},i.captchaIsChinese=Math.random()<.5,i}return Object(i.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.captchaValidationMessage,a=t.registerConfirmSucceeded,r=t.sendDigitsError,i=t.isInSignPage,c=t.nextUrl,o=e.captchaValidationMessage,s=e.registerConfirmSucceeded,u=e.sendDigitsError;if(!a&&s){var l=this.state,d=l.selectedCountry.code,p=l.phoneNo;return A.a.trackEvent(this,{action:"StatusReport",id:234},{status:{result:"Success",event:{action:"SignUp",element:"Button"}},account:{phone:"".concat(d).concat(p),type:"Zhihu"}}),void(c?location.href=c:i?location.href="/":location.reload())}if(!r&&u||a!==s&&!1===s){var h={};!r&&u&&(h={smsInputInterceptTime:Date.now(),smsBackUpDisplay:!0},this.captchaValidated=!1),this.setState(Object.assign(Object.assign({},h),{},{validationResult:{message:r,needsRefresh:!0,timestamp:Date.now()}}))}!n&&o&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:o,needsRefresh:Boolean(o),timestamp:Date.now()}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.phoneNo,a=t.smsType,r=t.password,i=t.reStartTime,c=t.digitsValidated,o=t.validationResult,s=t.smsBackUpDisplay,u=t.customErrorInputMap,p=t.smsInputInterceptTime,h=this.props,f=h.sendDigitsError,b=h.onSetShowHeader,E=this.parseErrorMessages(),v=E.phoneNoError,w=E.fullnameError,S=E.passwordError,R=E.usernameError,T=u.phoneNoError,N=u.digitsError;return Object(l.b)("div",{className:"Register",children:c?Object(l.c)("div",{className:"Register-padName",children:[Object(l.c)("div",{className:"Register-padNameHeader",children:[Object(l.b)(m.c,{onClick:function(){e.setState({digitsValidated:!1},(function(){b(!0)}))},children:Object(l.b)(C.a,{size:30})}),Object(l.b)("span",{className:"Register-padNameTitle",children:"设置用户名和密码"})]}),Object(l.c)(I.b,{onSubmit:this.handleSetNameFormSubmit,children:[Object(l.b)(Q.a,{name:"fullname",placeholder:"用户名",onChange:this.handleChange("fullname"),manualValidateError:w}),Object(l.b)(j.a,{defaultValue:r,onChange:this.handleChange("password"),manualValidateError:S}),Object(l.b)(m.c,{className:"Register-getIn",type:"submit",preset:"primary",color:"blue",children:"进入知乎"})]})]}):Object(l.b)(d.Fragment,{children:Object(l.c)("div",{className:"Register-content",children:[Object(l.c)(I.b,{onSubmit:this.handlePhoneNumberFormSubmit,children:[Object(l.b)(O.a,{type:"register",onChange:this.handleChange("phoneNo"),onSelect:this.handleChange("selectedCountry"),manualValidateError:v||T||R}),Object(l.b)(B.a,{className:"SignFlow-captchaContainer Register-captcha",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:Boolean(n),onUpdateInput:this.handleChange("captcha"),validationResult:o}),Object(l.c)("div",{className:"Register-SMSInput",children:[Object(l.b)(y.a,{smsType:a,reStartTime:i,onChange:this.handleChange("digits"),countDownEvent:this.handleSendDigits,countDownEndEvent:this.handleCountDownEndEvent,interceptTime:p,manualValidateError:N||f}),Object(l.b)("div",{className:g()("Register-smsBackUp",{"Register-hiddenSmsBackUp":!s}),children:Object(l.c)("span",{role:"button",tabIndex:0,onClick:this.handleBackUpDigits,children:["接收","text"===a?"语音":"短信","验证码"]})})]}),Object(l.b)(m.c,{className:"Register-submitButton",preset:"primary",color:"blue",type:"submit",children:"注册"})]}),Object(l.c)("div",{className:"Register-footer",children:[Object(l.c)("span",{className:"Register-declaration",children:["注册即代表同意",Object(l.b)("a",{href:"//".concat(k.a.wwwHost,"/term/zhihu-terms"),children:"《知乎协议》"}),Object(l.b)("a",{href:"//".concat(k.a.wwwHost,"/term/privacy"),children:"《隐私保护指引》"})]}),Object(l.b)("a",{className:"Register-org",href:"//".concat(k.a.wwwHost,"/org/signup"),onClick:function(e){return A.a.trackEvent(e.currentTarget,{id:4943})},children:"注册机构号"})]})]})})})}}]),n}(d.Component),D=(Object(p.compose)(Object(E.b)((function(){return{module:"SignUpForm",view:{id:233},trackCardShow:!0}})),Object(h.connect)((function(e){var t=e.captcha,n=t.captchaNeeded,a=t.captchaValidationMessage,r=e.register;return{captchaNeeded:n,sendDigitsError:r.sendDigitsError,registerValidateErrors:r.registerValidateErrors,captchaValidationMessage:a,registerConfirmSucceeded:r.registerConfirmSucceeded}}),{sendDigits:w.e,checkCaptcha:S.b,validateDigits:w.g,confirmRegister:w.a,validateRegister:w.h,validateRegisterForm:w.i,resetRegisterValidateResult:w.d}))(N),n(1325),n(159)),M=n.n(D),U=n(460),x=n(31),P=n(1763),z=n(304);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var F={phoneNoError:null,fullnameError:null,digitsError:null},L=function(e){Object(o.a)(n,e);var t=V(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,c=new Array(i),o=0;o<i;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={fullname:e.props.defaultFullname||"",avatarPath:"",phoneNo:"",digits:"",captcha:"",isRegister:null,smsBackUpDisplay:!0,smsType:"text",selectedCountry:{name:"中国",code:"+86"},smsInputInterceptTime:-1,reStartTime:-1,customErrorInputMap:Object.assign({},F),validationResult:{}},e.captchaIsChinese=Math.random()<.5,e.getSocialInfo=function(t){var n=t||e.props,a=n.getSocialInfo,r=n.socialType;r&&a(r).then((function(t){var n=t.payload,a=n.name,r=n.profileImageUrl;e.setState({avatarPath:r.split("/").reverse()[0],fullname:a})}))},e.testPhoneNo=function(){var t=e.state,n=t.selectedCountry.code,a=t.phoneNo;return"+86"!==n||/^\d{11}$/.test(a)},e.handleChange=function(t){return function(n){e.setState(Object(a.a)({},t,n))}},e.handleBackUpDigits=function(){e.setState({smsType:"text"===e.state.smsType?"voice":"text",reStartTime:Date.now()})},e.handleCountDownEndEvent=function(){e.setState({smsBackUpDisplay:!0})},e.parseServerError=function(t){var n=t||e.props,a=n.showNotification,r=n.registerValidateErrors,i=n.loginConfirmError,c=n.registerConfirmError,o=n.sendDigitsError,s=i||{},u=s.username,l=s.password,d=s.digits,p=s.captcha,h=c||{},f=h.username,g=h.password,A=h.digits,b=h.undefined;b&&a(b,"red");var m=o||{},C=m.username,E=m.captcha,v=(r||{}).fullname;return{usernameServerError:u||C,passwordServerError:l||g,digitsServerError:d||A,captchaServerError:p||E,fullnameServerError:(v=void 0===v?{}:v).message||f}},e.runBeforeCheckCaptcha=function(t){var n=e.state.captcha,a=e.props,r=a.captchaNeeded,i=a.checkCaptcha;if(!e.captchaValidated&&r)return n?void i(n,e.captchaIsChinese?"cn":"en").then((function(n){n.payload.success&&(e.captchaValidated=!0,t())})):void e.setState({validationResult:{message:e.captchaIsChinese?"请点击图中倒立的文字":"请输入验证码",needsRefresh:!1,timestamp:Date.now()},smsInputInterceptTime:Date.now()});t()},e.runBeforeResetValidateResult=function(t){e.setState({customErrorInputMap:Object.assign({},F),validationResult:{needsRefresh:!1,timestamp:Date.now()}},(function(){t()}))},e.handleSendDigits=function(){var t=e.state.phoneNo;t&&e.testPhoneNo()?e.runBeforeCheckCaptcha((function(){e.runBeforeCheckCaptcha(e.sendDigits)})):e.setState({customErrorInputMap:Object.assign(Object.assign({},e.state.customErrorInputMap),{},{phoneNoError:t?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})},e.sendDigits=function(){var t=e.state,n=t.selectedCountry,a=t.phoneNo,r=t.smsType,i=e.props.sendLoginDigits;e.props.validateRegisterForm({phoneNo:"".concat(n.code).concat(a)}).then((function(t){var c=t.payload;e.setState({smsBackUpDisplay:!1,isRegister:!(c.phoneNo&&c.phoneNo.code===v.t)}),i("".concat(n.code).concat(a),r)}))},e.handleSubmit=function(){e.runBeforeCheckCaptcha((function(){e.runBeforeResetValidateResult((function(){var t=e.state,n=t.selectedCountry,a=t.phoneNo,r=t.digits,i=t.isRegister,c=t.fullname,o=t.avatarPath,s=e.props,u=s.validateAndLogin,l=s.validateAndRegister,d=s.nextUrl,p=s.socialType,h=Object(b.c)(d),f=h.utm_source,g=h.utm_medium;i?l(Object.assign(Object.assign({source:"com.zhihu.web",registerType:"phone_digits",phoneNo:"".concat(n.code).concat(a),fullname:c,digits:r,refSource:g,utmSource:f},o&&{avatarPath:o}),p&&{socialRegisterType:p})):u(Object(P.a)("digits",{username:"".concat(n.code).concat(a),digits:r,refSource:g,utmSource:f}))}))}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){if(M.a.get("atoken")){this.getSocialInfo();var e=M.a.get("accountcallback");if(!this.state.fullname&&e){var t=JSON.parse(decodeURIComponent(e));this.setState({fullname:t.fullname})}}else this.props.onResetRegister()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.nextUrl,a=t.socialType,r=t.defaultFullname,i=t.sendDigitsError,c=t.loginConfirmError,o=t.loginConfirmSucceeded,s=t.registerConfirmSucceeded,u=t.captchaValidationMessage,l=e.socialType,d=e.defaultFullname,p=e.sendDigitsError,h=e.loginConfirmError,f=e.loginConfirmSucceeded,g=e.registerConfirmSucceeded,A=e.captchaValidationMessage;if(!a&&l&&this.getSocialInfo(e),r!==d&&this.setState({fullname:d}),!o&&f||!s&&g)n?location.href=n:location.reload();else{if(!c&&h&&h.validateDigitsError&&this.setState({customErrorInputMap:Object.assign(Object.assign({},this.state.customErrorInputMap),{},{digitsError:h.validateDigitsError}),smsInputInterceptTime:Date.now()}),!i&&p){var b=this.parseServerError(e).captchaServerError;this.setState({validationResult:{message:b,needsRefresh:!0,timestamp:Date.now()},smsInputInterceptTime:Date.now()})}!u&&A&&this.setState({smsInputInterceptTime:Date.now(),validationResult:{message:A,needsRefresh:Boolean(A),timestamp:Date.now()}})}}},{key:"render",value:function(){var e=this.state,t=e.smsInputInterceptTime,n=e.customErrorInputMap,a=e.smsBackUpDisplay,r=e.validationResult,i=e.reStartTime,c=e.isRegister,o=e.phoneNo,s=e.smsType,u=e.fullname,d=this.props.onResetRegister,p=n.phoneNoError,h=n.digitsError,f=this.parseServerError(),A=f.usernameServerError,b=f.fullnameServerError,E=f.digitsServerError,v=Object(l.c)(I.b,{className:"Register-content",onSubmit:this.handleSubmit,children:[Object(l.b)("div",{className:"Register-socialHeader",children:Object(l.c)("div",{className:"Register-socialTitle",children:[Object(l.b)(m.c,{onClick:d,children:Object(l.b)(C.a,{size:30})}),"绑定手机号"]})},"header"),Object(l.b)(Q.a,{className:g()("Register-socialName",{"Register-hiddenSocialName":!c}),name:"fullname",placeholder:"用户名",value:u,onChange:this.handleChange("fullname"),manualValidateError:b,validations:[]},"fullname"),Object(l.b)(O.a,{type:"register",onChange:this.handleChange("phoneNo"),onSelect:this.handleChange("selectedCountry"),manualValidateError:p||A}),Object(l.b)(B.a,{className:"SignFlow-captchaContainer",type:"register",isChinese:this.captchaIsChinese,canCaptchaShown:Boolean(o),onUpdateInput:this.handleChange("captcha"),validationResult:r}),Object(l.b)(y.a,{smsType:s,reStartTime:i,onChange:this.handleChange("digits"),countDownEvent:this.handleSendDigits,countDownEndEvent:this.handleCountDownEndEvent,interceptTime:t,manualValidateError:h||E}),Object(l.b)("div",{className:g()("Register-smsBackUp",{"Register-hiddenSmsBackUp":!a}),children:Object(l.c)("span",{role:"button",tabIndex:0,onClick:this.handleBackUpDigits,children:["接收","text"===s?"语音":"短信","验证码"]})}),Object(l.b)(m.c,{className:"Register-submitButton",type:"submit",preset:"primary",color:"blue",children:"进入知乎"})]});return Object(l.b)(z.a,{children:v})}}]),n}(d.Component),H=Object(h.connect)((function(e){var t=e.captcha,n=t.captchaNeeded,a=t.captchaValidationMessage,r=e.register,i=r.registerConfirmError,c=r.registerValidateErrors,o=r.registerConfirmSucceeded,s=e.login,u=s.loginConfirmSucceeded,l=s.validateDigitsError,d=s.loginConfirmError;return{captchaNeeded:n,sendDigitsError:s.sendDigitsError,registerConfirmError:i,registerValidateErrors:c,captchaValidationMessage:a,registerConfirmSucceeded:o,loginConfirmSucceeded:u,validateDigitsError:l,loginConfirmError:d}}),{showNotification:x.h,checkCaptcha:S.b,validateDigits:U.i,sendLoginDigits:U.g,validateAndLogin:U.h,validateAndRegister:w.f,getSocialInfo:w.c,validateRegisterForm:w.i,resetLoginValidateResult:U.f,resetRegisterValidateResult:w.d})(L)},1493:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var a=n(14),r=n(15),i=n(17),c=n(18),o=n(7),s=n(1),u=n(44),l=n.n(u),d=n(3),p=n.n(d),h=n(0),f=n(20),g=n(48),A=n(159),b=n.n(A),m=n(289),C=n(1245),E=n(1517),v=n(1246),w=n(72),S=n(33),I=n(26),B=n(169),O=n(1516),y=n(339),j={sina:"Weibo",qq:"QQ",wechat:"Wechat"};var Q=n(509);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.a)(e);if(t){var r=Object(o.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var R="/oauth/account_callback",T={qqconn:"/oauth/redirect/login/qqconn?next=",sina:"/oauth/redirect/login/sina?next=",wechat:"/oauth/redirect/login/wechat?next="};function N(e){return"sina"!==e||!/WindowsWechat/.test(navigator.userAgent)}var D=function(e){Object(i.a)(n,e);var t=k(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).handleCallbackMessage=function(t){var n=t.origin,a=t.data;/(\.)?(zhihu|vzuu)\.(com|dev)/.test(n)&&a&&(e.unsubscribeCallback(),e.accountCallback(a))},e.accountCallback=function(t){var n=e.props,a=n.onRegister,r=n.nextUrl,i=t.login,c=t.type,o=t.fullname,s=t.verification;null!=s&&s.isZombie&&Object(y.c)(s),i?(Object(Q.b)(e.clickedServiceName),e.handleLogSocialLoginSuccess(),r?location.href=r:location.reload()):a({bySocial:!0,socialType:c,fullname:o})},e.handleBuildSocialAuthLink=function(t){e.clickedServiceName=t,e.handleLogSingleSocialButtonClick(t),l.a.increment("logIn.clickSocial.".concat(t,".count"));var n=T[t],a=Object(m.c)(),r=a.utm_source,i=a.utm_medium;N(t)?(e.subscribeCallback(),window.open("https://www.zhihu.com".concat(n).concat(R).concat(r?"&utm_source=".concat(r):"","&ref_source=").concat(i),"_blank","top=200,left=400,width=600,height=550,directories=no,menubar=no,toolbar=no")):location.href="https://www.zhihu.com".concat(n).concat(R,"&from=").concat(encodeURIComponent(e.parseNextInfoFromUrl()))},e.handleEntranceButtonClick=function(t){e.props.onEntranceButtonClick&&e.props.onEntranceButtonClick(t),e.handleLogSocialLogin(),e.setState((function(e){return{socialButtonExpanded:!e.socialButtonExpanded}}))},e.parseNextInfoFromUrl=function(){var t=e.props.router.location.query.next,n="/";if(t)try{n=decodeURIComponent(t)}catch(e){n=unescape(t)}return n},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){if(document.referrer.startsWith("https://www.zhihu.com/oauth/callback/sina")){var e=b.a.get("atoken"),t=b.a.get("accountcallback");if(e&&t){var n=JSON.parse(decodeURIComponent(t));if(!n)return;var a=n.fullname,r=n.type;(0,this.props.onRegister)({fullname:a,socialType:r})}}}},{key:"componentWillUnmount",value:function(){this.unsubscribeCallback()}},{key:"subscribeCallback",value:function(){window.addEventListener("message",this.handleCallbackMessage,!1),window.NWEB={accountCallback:this.accountCallback},this.domain=document.domain,document.domain="zhihu.com"}},{key:"unsubscribeCallback",value:function(){if(window.removeEventListener("message",this.handleCallbackMessage,!1),window.NWEB&&"www.zhihu.com"===location.host){try{document.domain=this.domain}catch(e){}delete window.NWEB}}},{key:"handleLogSocialLogin",value:function(){I.a.trackEvent(this,{action:"Click",element:"Button",element_name:"SNSSignIn"})}},{key:"handleLogSingleSocialButtonClick",value:function(e){var t,n,a,r;t=this,n="SignIn",a={type:j[e]},I.a.trackEvent(t,{action:n,element:"Button",element_name:r},{account:a})}},{key:"handleLogSocialLoginSuccess",value:function(){var e,t,n,a,r=this.props,i=r.router,c=r.trackEvent;["/signin","/signup"].includes(i.location.pathname)||c({block:"".concat(this.clickedServiceName,"_loginSuccess")}),e=this,t="SignIn",n=this.clickedServiceName,I.a.trackEvent(e,{id:236,action:"StatusReport",element_name:a},{status:{result:"Success",event:{action:t,element:"Button"}},account:n})}},{key:"render",value:function(){var e=this;return Object(s.c)("div",{className:"Login-socialLogin",children:[Object(s.b)("span",{children:"社交帐号登录"}),Object(s.c)("span",{className:"Login-socialButtonGroup",children:[Object(s.c)(w.a,{as:S.c,zaText:"微信第三方登录",zaType:"Button",zaAction:"OpenUrl",extra:{link:{url:"https://open.weixin.qq.com/connect/qrconnect"}},className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("wechat")},children:[Object(s.b)(C.a,{className:"Login-socialIcon",fill:"#60c84d",size:20}),"微信"]}),Object(s.c)(w.a,{as:S.c,zaText:"QQ第三方登录",zaType:"Button",zaAction:"OpenUrl",extra:{link:{url:"https://graph.qq.com/oauth2.0/show"}},className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("qqconn")},children:[Object(s.b)(E.a,{className:"Login-socialIcon",fill:"#50c8fd",size:20}),"QQ"]}),Object(s.c)(w.a,{as:S.c,zaText:"微博第三方登录",zaType:"Button",zaAction:"OpenUrl",extra:{link:{url:"https://api.weibo.com/oauth2/authorize"}},className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("sina")},children:[Object(s.b)(v.a,{className:"Login-socialIcon",fill:"#fb6622",size:20}),"微博"]})]})]})}}]),n}(h.Component);D.propTypes={onRegister:p.a.func.isRequired,onEntranceButtonClick:p.a.func};var M=Object(f.compose)(g.withRouter,O.a)(D);function U(e){var t=Object(B.b)();return/bux/.test(t.origin)?null:Object(s.b)(M,Object.assign({},e))}},1500:function(e,t,n){"use strict";var a,r=n(172),i=n(32),c=n(14),o=n(15),s=n(17),u=n(18),l=n(7),d=n(1),p=n(3),h=n.n(p),f=n(0),g=n(523),A=n(517),b=n(312),m=["countDownEvent","countDownEndEvent","startAtOnce","interceptTime","isEmail","reStartTime","smsType"];function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.a)(this,n)}}var E=function(e){Object(s.a)(n,e);var t=C(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.countDownEvent,c=t.countDownEndEvent,o=t.startAtOnce,s=t.interceptTime,u=t.isEmail,l=t.reStartTime,p=t.smsType,h=Object(i.default)(t,m);return e=u?"邮箱":"voice"===p?"语音":"短信",Object(d.c)("div",{className:"SignFlow SignFlow-smsInputContainer",children:[Object(d.b)(b.a,Object.assign({name:"digits",className:"SignFlow-smsInput",type:"number",smsType:p,errorMessageClassName:"SignFlow-smsInputErrorMessage",placeholder:"输入 6 位".concat(e,"验证码"),validations:[{type:"required",message:"请输入".concat(e,"验证码"),className:"SignFlow-smsInputRequiredErrorMask"}]},h)),Object(d.b)(g.a,{className:"SignFlow-smsInputButton",preset:"plain",initialText:"获取".concat(e,"验证码"),resetText:"重新获取".concat(e,"验证码"),countingText:Object(A.a)(a||(a=Object(r.a)([""," 秒后可重发"])),"count"),startAtOnce:o,event:n,countDownEndEvent:c,interceptTime:s,reStartTime:l})]})}}]),n}(f.Component);E.propTypes={countDownEvent:h.a.func.isRequired,startAtOnce:h.a.bool,interceptTime:h.a.number,reStartTime:h.a.number,isEmail:h.a.bool,countDownEndEvent:h.a.func,smsType:h.a.string},E.defaultProps={startAtOnce:!1,isEmail:!1};t.a=E},1516:function(e,t,n){"use strict";var a=n(1),r=n(72),i=n(82),c=n.n(i);t.a=function(e){return c()((function(t){var n=Object(r.i)().trackEvent;return Object(a.b)(e,Object.assign({trackEvent:n},t))}),e)}},1517:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),i=n(12),c=Object.assign;function o(e){return r.a.createElement(i.a,c(c({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Qq24","data-old-api":"QQ"},e),{className:"Zi Zi--QQ"+(e.className?" ".concat(e.className):"")}),r.a.createElement("path",{d:"M12.003 2c-2.265 0-6.29 1.364-6.29 7.325v1.195S3.55 14.96 3.55 17.474c0 .665.17 1.025.281 1.025.114 0 .902-.483 1.748-2.072 0 0-.18 2.197 1.904 3.967 0 0-1.77.495-1.77 1.182 0 .686 4.078.43 6.29 0 2.239.425 6.288.687 6.288 0 0-.688-1.77-1.182-1.77-1.182 2.086-1.77 1.906-3.967 1.906-3.967.845 1.588 1.634 2.072 1.746 2.072.111 0 .283-.36.283-1.025 0-2.514-2.165-6.954-2.165-6.954V9.325C18.29 3.364 14.268 2 12.003 2z",fillRule:"evenodd",clipRule:"evenodd"}))}},1763:function(e,t,n){"use strict";var a=n(1817),r=n.n(a),i=(n(34),"c3cef7c66a1843f8b3a9e6a1e3160e20");"".concat("z_").concat("c0"),"".concat("SZYUpkoc0tvY").concat("Xh0V2E2UTB").concat("UID096dwe");t.a=function(e,t){var n=Date.now(),a=new r.a("SHA-1","TEXT");return a.setHMACKey("d1b964811afb40118a12068ff74a12f4","TEXT"),a.update(e),a.update(i),a.update("com.zhihu.web"),a.update(String(n)),Object.assign({clientId:i,grantType:e,timestamp:n,source:"com.zhihu.web",signature:a.getHMAC("HEX")},t)}},1817:function(e,t,n){"use strict";var a;!function(r){function i(e,t,n){var a,r,i,c,o,g,A,b,m,C=0,E=[],v=0,w=!1,S=[],I=[],B=!1,O=!1,y=-1;if(a=(n=n||{}).encoding||"UTF8",(m=n.numRounds||1)!==parseInt(m,10)||1>m)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)o=512,g=V,A=F,c=160,b=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(g=function(t,n){return L(t,n,e)},A=function(t,n,a,r){var i,c;if("SHA-224"===e||"SHA-256"===e)i=15+(n+65>>>9<<4),c=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");i=31+(n+129>>>10<<5),c=32}for(;t.length<=i;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=a,t[i]=4294967295&n,t[i-1]=n/4294967296|0,a=t.length,n=0;n<a;n+=c)r=L(t.slice(n,n+c),r,e);if("SHA-224"===e)t=[r[0],r[1],r[2],r[3],r[4],r[5],r[6]];else if("SHA-256"===e)t=r;else if("SHA-384"===e)t=[r[0].a,r[0].b,r[1].a,r[1].b,r[2].a,r[2].b,r[3].a,r[3].b,r[4].a,r[4].b,r[5].a,r[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[r[0].a,r[0].b,r[1].a,r[1].b,r[2].a,r[2].b,r[3].a,r[3].b,r[4].a,r[4].b,r[5].a,r[5].b,r[6].a,r[6].b,r[7].a,r[7].b]}return t},b=function(e){return e.slice()},"SHA-224"===e)o=512,c=224;else if("SHA-256"===e)o=512,c=256;else if("SHA-384"===e)o=1024,c=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");o=1024,c=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var j=6;if(g=H,b=function(e){var t,n=[];for(t=0;5>t;t+=1)n[t]=e[t].slice();return n},y=1,"SHA3-224"===e)o=1152,c=224;else if("SHA3-256"===e)o=1088,c=256;else if("SHA3-384"===e)o=832,c=384;else if("SHA3-512"===e)o=576,c=512;else if("SHAKE128"===e)o=1344,c=-1,j=31,O=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");o=1088,c=-1,j=31,O=!0}A=function(e,t,n,a,r){var i,c=j,s=[],u=(n=o)>>>5,l=0,d=t>>>5;for(i=0;i<d&&t>=n;i+=u)a=H(e.slice(i,i+u),a),t-=n;for(e=e.slice(i),t%=n;e.length<u;)e.push(0);for(e[(i=t>>>3)>>2]^=c<<i%4*8,e[u-1]^=2147483648,a=H(e,a);32*s.length<r&&(e=a[l%5][l/5|0],s.push(e.b),!(32*s.length>=r));)s.push(e.a),0==64*(l+=1)%n&&(H(null,a),l=0);return s}}i=f(t,a,y),r=z(e),this.setHMACKey=function(t,n,i){var s;if(!0===w)throw Error("HMAC key already set");if(!0===B)throw Error("Cannot set HMAC key after calling update");if(!0===O)throw Error("SHAKE is not supported for HMAC");for(t=(n=f(n,a=(i||{}).encoding||"UTF8",y)(t)).binLen,n=n.value,i=(s=o>>>3)/4-1,s<t/8&&(n=A(n,t,0,z(e),c));n.length<=i;)n.push(0);for(t=0;t<=i;t+=1)S[t]=909522486^n[t],I[t]=1549556828^n[t];r=g(S,r),C=o,w=!0},this.update=function(e){var t,n,a,c=0,s=o>>>5;for(e=(t=i(e,E,v)).binLen,n=t.value,t=e>>>5,a=0;a<t;a+=s)c+o<=e&&(r=g(n.slice(a,a+s),r),c+=o);C+=c,E=n.slice(c>>>5),v=e%o,B=!0},this.getHash=function(t,n){var a,i,o,f;if(!0===w)throw Error("Cannot call getHash after setting HMAC key");if(o=h(n),!0===O){if(-1===o.shakeLen)throw Error("shakeLen must be specified in options");c=o.shakeLen}switch(t){case"HEX":a=function(e){return s(e,c,y,o)};break;case"B64":a=function(e){return u(e,c,y,o)};break;case"BYTES":a=function(e){return l(e,c,y)};break;case"ARRAYBUFFER":try{i=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}a=function(e){return d(e,c,y)};break;case"UINT8ARRAY":try{i=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}a=function(e){return p(e,c,y)};break;default:throw Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}for(f=A(E.slice(),v,C,b(r),c),i=1;i<m;i+=1)!0===O&&0!=c%32&&(f[f.length-1]&=16777215>>>24-c%32),f=A(f,c,0,z(e),c);return a(f)},this.getHMAC=function(t,n){var a,i,f,m;if(!1===w)throw Error("Cannot call getHMAC without first setting HMAC key");switch(f=h(n),t){case"HEX":a=function(e){return s(e,c,y,f)};break;case"B64":a=function(e){return u(e,c,y,f)};break;case"BYTES":a=function(e){return l(e,c,y)};break;case"ARRAYBUFFER":try{a=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}a=function(e){return d(e,c,y)};break;case"UINT8ARRAY":try{a=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}a=function(e){return p(e,c,y)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return i=A(E.slice(),v,C,b(r),c),m=g(I,z(e)),a(m=A(i,c,o,m,c))}}function c(e,t){this.a=e,this.b=t}function o(e,t,n,a){var r,i,c,o,s;for(t=t||[0],i=(n=n||0)>>>3,s=-1===a?3:0,r=0;r<e.length;r+=1)c=(o=r+i)>>>2,t.length<=c&&t.push(0),t[c]|=e[r]<<8*(s+o%4*a);return{value:t,binLen:8*e.length+n}}function s(e,t,n,a){var r,i,c,o="";for(t/=8,c=-1===n?3:0,r=0;r<t;r+=1)i=e[r>>>2]>>>8*(c+r%4*n),o+="0123456789abcdef".charAt(i>>>4&15)+"0123456789abcdef".charAt(15&i);return a.outputUpper?o.toUpperCase():o}function u(e,t,n,a){var r,i,c,o,s="",u=t/8;for(o=-1===n?3:0,r=0;r<u;r+=3)for(i=r+1<u?e[r+1>>>2]:0,c=r+2<u?e[r+2>>>2]:0,c=(e[r>>>2]>>>8*(o+r%4*n)&255)<<16|(i>>>8*(o+(r+1)%4*n)&255)<<8|c>>>8*(o+(r+2)%4*n)&255,i=0;4>i;i+=1)s+=8*r+6*i<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c>>>6*(3-i)&63):a.b64Pad;return s}function l(e,t,n){var a,r,i,c="";for(t/=8,i=-1===n?3:0,a=0;a<t;a+=1)r=e[a>>>2]>>>8*(i+a%4*n)&255,c+=String.fromCharCode(r);return c}function d(e,t,n){t/=8;var a,r,i,c=new ArrayBuffer(t);for(i=new Uint8Array(c),r=-1===n?3:0,a=0;a<t;a+=1)i[a]=e[a>>>2]>>>8*(r+a%4*n)&255;return c}function p(e,t,n){t/=8;var a,r,i=new Uint8Array(t);for(r=-1===n?3:0,a=0;a<t;a+=1)i[a]=e[a>>>2]>>>8*(r+a%4*n)&255;return i}function h(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function f(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":e=function(e,t,a){var r,i,c,o,s,u,l=e.length;if(0!=l%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],s=(a=a||0)>>>3,u=-1===n?3:0,r=0;r<l;r+=2){if(i=parseInt(e.substr(r,2),16),isNaN(i))throw Error("String of HEX type contains invalid characters");for(c=(o=(r>>>1)+s)>>>2;t.length<=c;)t.push(0);t[c]|=i<<8*(u+o%4*n)}return{value:t,binLen:4*l+a}};break;case"TEXT":e=function(e,a,r){var i,c,o,s,u,l,d,p,h=0;if(a=a||[0],u=(r=r||0)>>>3,"UTF8"===t)for(p=-1===n?3:0,o=0;o<e.length;o+=1)for(c=[],128>(i=e.charCodeAt(o))?c.push(i):2048>i?(c.push(192|i>>>6),c.push(128|63&i)):55296>i||57344<=i?c.push(224|i>>>12,128|i>>>6&63,128|63&i):(o+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(o)),c.push(240|i>>>18,128|i>>>12&63,128|i>>>6&63,128|63&i)),s=0;s<c.length;s+=1){for(l=(d=h+u)>>>2;a.length<=l;)a.push(0);a[l]|=c[s]<<8*(p+d%4*n),h+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(p=-1===n?2:0,c="UTF16LE"===t&&1!==n||"UTF16LE"!==t&&1===n,o=0;o<e.length;o+=1){for(i=e.charCodeAt(o),!0===c&&(i=(s=255&i)<<8|i>>>8),l=(d=h+u)>>>2;a.length<=l;)a.push(0);a[l]|=i<<8*(p+d%4*n),h+=2}return{value:a,binLen:8*h+r}};break;case"B64":e=function(e,t,a){var r,i,c,o,s,u,l,d,p=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(i=e.indexOf("="),e=e.replace(/\=/g,""),-1!==i&&i<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],u=(a=a||0)>>>3,d=-1===n?3:0,i=0;i<e.length;i+=4){for(s=e.substr(i,4),c=o=0;c<s.length;c+=1)o|=(r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(s.charAt(c)))<<18-6*c;for(c=0;c<s.length-1;c+=1){for(r=(l=p+u)>>>2;t.length<=r;)t.push(0);t[r]|=(o>>>16-8*c&255)<<8*(d+l%4*n),p+=1}}return{value:t,binLen:8*p+a}};break;case"BYTES":e=function(e,t,a){var r,i,c,o,s,u;for(t=t||[0],c=(a=a||0)>>>3,u=-1===n?3:0,i=0;i<e.length;i+=1)r=e.charCodeAt(i),o=(s=i+c)>>>2,t.length<=o&&t.push(0),t[o]|=r<<8*(u+s%4*n);return{value:t,binLen:8*e.length+a}};break;case"ARRAYBUFFER":try{e=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}e=function(e,t,a){return o(new Uint8Array(e),t,a,n)};break;case"UINT8ARRAY":try{e=new Uint8Array(0)}catch(e){throw Error("UINT8ARRAY not supported by this environment")}e=function(e,t,a){return o(e,t,a,n)};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}return e}function g(e,t){return e<<t|e>>>32-t}function A(e,t){return 32<t?(t-=32,new c(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new c(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function b(e,t){return e>>>t|e<<32-t}function m(e,t){var n=null;n=new c(e.a,e.b);return 32>=t?new c(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new c(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function C(e,t){return 32>=t?new c(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new c(0,e.a>>>t-32)}function E(e,t,n){return e&t^~e&n}function v(e,t,n){return new c(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function w(e,t,n){return e&t^e&n^t&n}function S(e,t,n){return new c(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function I(e){return b(e,2)^b(e,13)^b(e,22)}function B(e){var t=m(e,28),n=m(e,34);return e=m(e,39),new c(t.a^n.a^e.a,t.b^n.b^e.b)}function O(e){return b(e,6)^b(e,11)^b(e,25)}function y(e){var t=m(e,14),n=m(e,18);return e=m(e,41),new c(t.a^n.a^e.a,t.b^n.b^e.b)}function j(e){return b(e,7)^b(e,18)^e>>>3}function Q(e){var t=m(e,1),n=m(e,8);return e=C(e,7),new c(t.a^n.a^e.a,t.b^n.b^e.b)}function k(e){return b(e,17)^b(e,19)^e>>>10}function R(e){var t=m(e,19),n=m(e,61);return e=C(e,6),new c(t.a^n.a^e.a,t.b^n.b^e.b)}function T(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function N(e,t,n,a){var r=(65535&e)+(65535&t)+(65535&n)+(65535&a);return((e>>>16)+(t>>>16)+(n>>>16)+(a>>>16)+(r>>>16)&65535)<<16|65535&r}function D(e,t,n,a,r){var i=(65535&e)+(65535&t)+(65535&n)+(65535&a)+(65535&r);return((e>>>16)+(t>>>16)+(n>>>16)+(a>>>16)+(r>>>16)+(i>>>16)&65535)<<16|65535&i}function M(e,t){var n,a,r;return n=(65535&e.b)+(65535&t.b),r=(65535&(a=(e.b>>>16)+(t.b>>>16)+(n>>>16)))<<16|65535&n,n=(65535&e.a)+(65535&t.a)+(a>>>16),new c((65535&(a=(e.a>>>16)+(t.a>>>16)+(n>>>16)))<<16|65535&n,r)}function U(e,t,n,a){var r,i,o;return r=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&a.b),o=(65535&(i=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(a.b>>>16)+(r>>>16)))<<16|65535&r,r=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&a.a)+(i>>>16),new c((65535&(i=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(a.a>>>16)+(r>>>16)))<<16|65535&r,o)}function x(e,t,n,a,r){var i,o,s;return i=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&a.b)+(65535&r.b),s=(65535&(o=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(a.b>>>16)+(r.b>>>16)+(i>>>16)))<<16|65535&i,i=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&a.a)+(65535&r.a)+(o>>>16),new c((65535&(o=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(a.a>>>16)+(r.a>>>16)+(i>>>16)))<<16|65535&i,s)}function P(e,t){return new c(e.a^t.a,e.b^t.b)}function z(e){var t,n=[];if("SHA-1"===e)n=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new c(3418070365,n[0]),new c(1654270250,n[1]),new c(2438529370,n[2]),new c(355462360,n[3]),new c(1731405415,n[4]),new c(41048885895,n[5]),new c(3675008525,n[6]),new c(1203062813,n[7])];break;case"SHA-512":n=[new c(t[0],4089235720),new c(t[1],2227873595),new c(t[2],4271175723),new c(t[3],1595750129),new c(t[4],2917565137),new c(t[5],725511199),new c(t[6],4215389547),new c(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)n[e]=[new c(0,0),new c(0,0),new c(0,0),new c(0,0),new c(0,0)]}return n}function V(e,t){var n,a,r,i,c,o,s,u=[];for(n=t[0],a=t[1],r=t[2],i=t[3],c=t[4],s=0;80>s;s+=1)u[s]=16>s?e[s]:g(u[s-3]^u[s-8]^u[s-14]^u[s-16],1),o=20>s?D(g(n,5),a&r^~a&i,c,1518500249,u[s]):40>s?D(g(n,5),a^r^i,c,1859775393,u[s]):60>s?D(g(n,5),w(a,r,i),c,2400959708,u[s]):D(g(n,5),a^r^i,c,3395469782,u[s]),c=i,i=r,r=g(a,30),a=n,n=o;return t[0]=T(n,t[0]),t[1]=T(a,t[1]),t[2]=T(r,t[2]),t[3]=T(i,t[3]),t[4]=T(c,t[4]),t}function F(e,t,n,a){var r;for(r=15+(t+65>>>9<<4);e.length<=r;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=n,e[r]=4294967295&t,e[r-1]=t/4294967296|0,t=e.length,r=0;r<t;r+=16)a=V(e.slice(r,r+16),a);return a}function L(e,t,n){var a,r,i,o,s,u,l,d,p,h,f,g,A,b,m,C,P,z,V,F,L,H,Z,Y=[];if("SHA-224"===n||"SHA-256"===n)h=64,g=1,H=Number,A=T,b=N,m=D,C=j,P=k,z=I,V=O,L=w,F=E,Z=q;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");h=80,g=2,H=c,A=M,b=U,m=x,C=Q,P=R,z=B,V=y,L=S,F=v,Z=J}for(n=t[0],a=t[1],r=t[2],i=t[3],o=t[4],s=t[5],u=t[6],l=t[7],f=0;f<h;f+=1)16>f?(p=f*g,d=e.length<=p?0:e[p],p=e.length<=p+1?0:e[p+1],Y[f]=new H(d,p)):Y[f]=b(P(Y[f-2]),Y[f-7],C(Y[f-15]),Y[f-16]),d=m(l,V(o),F(o,s,u),Z[f],Y[f]),p=A(z(n),L(n,a,r)),l=u,u=s,s=o,o=A(i,d),i=r,r=a,a=n,n=A(d,p);return t[0]=A(n,t[0]),t[1]=A(a,t[1]),t[2]=A(r,t[2]),t[3]=A(i,t[3]),t[4]=A(o,t[4]),t[5]=A(s,t[5]),t[6]=A(u,t[6]),t[7]=A(l,t[7]),t}function H(e,t){var n,a,r,i,o=[],s=[];if(null!==e)for(a=0;a<e.length;a+=2)t[(a>>>1)%5][(a>>>1)/5|0]=P(t[(a>>>1)%5][(a>>>1)/5|0],new c(e[a+1],e[a]));for(n=0;24>n;n+=1){for(i=z("SHA3-"),a=0;5>a;a+=1){r=t[a][0];var u=t[a][1],l=t[a][2],d=t[a][3],p=t[a][4];o[a]=new c(r.a^u.a^l.a^d.a^p.a,r.b^u.b^l.b^d.b^p.b)}for(a=0;5>a;a+=1)s[a]=P(o[(a+4)%5],A(o[(a+1)%5],1));for(a=0;5>a;a+=1)for(r=0;5>r;r+=1)t[a][r]=P(t[a][r],s[a]);for(a=0;5>a;a+=1)for(r=0;5>r;r+=1)i[r][(2*a+3*r)%5]=A(t[a][r],Z[a][r]);for(a=0;5>a;a+=1)for(r=0;5>r;r+=1)t[a][r]=P(i[a][r],new c(~i[(a+1)%5][r].a&i[(a+2)%5][r].a,~i[(a+1)%5][r].b&i[(a+2)%5][r].b));t[0][0]=P(t[0][0],Y[n])}return t}var q,J,Z,Y;J=[new c((q=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])[0],3609767458),new c(q[1],602891725),new c(q[2],3964484399),new c(q[3],2173295548),new c(q[4],4081628472),new c(q[5],3053834265),new c(q[6],2937671579),new c(q[7],3664609560),new c(q[8],2734883394),new c(q[9],1164996542),new c(q[10],1323610764),new c(q[11],3590304994),new c(q[12],4068182383),new c(q[13],991336113),new c(q[14],633803317),new c(q[15],3479774868),new c(q[16],2666613458),new c(q[17],944711139),new c(q[18],2341262773),new c(q[19],2007800933),new c(q[20],1495990901),new c(q[21],1856431235),new c(q[22],3175218132),new c(q[23],2198950837),new c(q[24],3999719339),new c(q[25],766784016),new c(q[26],2566594879),new c(q[27],3203337956),new c(q[28],1034457026),new c(q[29],2466948901),new c(q[30],3758326383),new c(q[31],168717936),new c(q[32],1188179964),new c(q[33],1546045734),new c(q[34],1522805485),new c(q[35],2643833823),new c(q[36],2343527390),new c(q[37],1014477480),new c(q[38],1206759142),new c(q[39],344077627),new c(q[40],1290863460),new c(q[41],3158454273),new c(q[42],3505952657),new c(q[43],106217008),new c(q[44],3606008344),new c(q[45],1432725776),new c(q[46],1467031594),new c(q[47],851169720),new c(q[48],3100823752),new c(q[49],1363258195),new c(q[50],3750685593),new c(q[51],3785050280),new c(q[52],3318307427),new c(q[53],3812723403),new c(q[54],2003034995),new c(q[55],3602036899),new c(q[56],1575990012),new c(q[57],1125592928),new c(q[58],2716904306),new c(q[59],442776044),new c(q[60],593698344),new c(q[61],3733110249),new c(q[62],2999351573),new c(q[63],3815920427),new c(3391569614,3928383900),new c(3515267271,566280711),new c(3940187606,3454069534),new c(4118630271,4000239992),new c(116418474,1914138554),new c(174292421,2731055270),new c(289380356,3203993006),new c(460393269,320620315),new c(685471733,587496836),new c(852142971,1086792851),new c(1017036298,365543100),new c(1126000580,2618297676),new c(1288033470,3409855158),new c(1501505948,4234509866),new c(1607167915,987167468),new c(1816402316,1246189591)],Y=[new c(0,1),new c(0,32898),new c(2147483648,32906),new c(2147483648,2147516416),new c(0,32907),new c(0,2147483649),new c(2147483648,2147516545),new c(2147483648,32777),new c(0,138),new c(0,136),new c(0,2147516425),new c(0,2147483658),new c(0,2147516555),new c(2147483648,139),new c(2147483648,32905),new c(2147483648,32771),new c(2147483648,32770),new c(2147483648,128),new c(0,32778),new c(2147483648,2147483658),new c(2147483648,2147516545),new c(2147483648,32896),new c(0,2147483649),new c(2147483648,2147516424)],Z=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0===(a=function(){return i}.call(t,n,t,e))||(e.exports=a)}()},943:function(e,t,n){"use strict";var a=n(47),r=n(32),i=n(1),c=n(0),o=n(58),s=n(96),u=n(33),l=n(117),d=n.n(l),p=n(169),h=n(459),f=["title","content","ok","cancel","onOk","onCancel"],g=function(e){var t=e.title,n=e.content,l=e.ok,d=e.cancel,h=e.onOk,g=e.onCancel,A=Object(r.default)(e,f),b=Object(c.useState)(!0),m=Object(a.a)(b,2),C=m[0],E=m[1],v=function(e){return function(){E(!1),e()}},w=Object(p.b)();return Object(i.b)(s.b,Object.assign(Object.assign({closeButton:null,maskClosable:!1,hotKeyClosable:!1,css:[{overflow:"hidden",maxWidth:"96vw",".Modal-content":{margin:0,padding:0}},w.Mobile&&{width:320,borderRadius:12,boxShadow:""}]},A),{},{children:C&&Object(i.c)(o.Box,{px:"36px",py:"24px",children:[t&&Object(i.b)(o.Text,{fontSize:"18px",lineHeight:"28px",fontWeight:"bold",textAlign:"center",children:t}),n&&Object(i.b)(o.Text,{mt:t?"16px":"0",fontSize:"14px",lineHeight:"normal",color:"GBK03A",maxHeight:"calc(67vh - 100px)",css:{wordBreak:"break-all",overflowY:"auto",WebkitOverflowScrolling:"touch",marginRight:-10,paddingRight:10},children:n}),Object(i.c)(o.Flex,{mt:"16px",css:{button:{padding:0,flex:1,height:36,lineHeight:1,fontSize:15,borderRadius:4,":active":{opacity:.6}}},fontWeight:"bold",children:[d&&Object(i.b)(u.c,{css:{marginRight:4},onClick:v(g),children:d}),Object(i.b)(u.c,{preset:"primary",color:"blue",onClick:v(h),children:l})]})]})}))};t.a=function(){var e=Object(h.b)(),t=e.addInstance,n=e.removeInstance,a=function(e){return setTimeout((function(){return n(e)}),300)};return{alert:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=r.title,o=r.ok;return new Promise((function(a){n=Object(i.b)(g,{content:e,title:c,ok:o||"确定",onOk:a,css:{textAlign:"center"}},d()("modal")),t(n)})).finally((function(){return a(n)}))},confirm:function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=r.title,o=r.ok,s=r.cancel;return new Promise((function(a,r){n=Object(i.b)(g,{content:e,title:c,ok:o||"确定",onOk:a,cancel:s||"取消",onCancel:r},d()("modal")),t(n)})).finally((function(){return a(n)}))}}}}}]);
//# sourceMappingURL=main.shared_d1ef5af0010fdbecda3e7215eeb794b639ace47a.a3507473b34d9c200096.js.map