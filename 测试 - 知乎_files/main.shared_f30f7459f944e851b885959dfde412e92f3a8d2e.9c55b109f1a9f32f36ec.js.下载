(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1002:function(e,t,n){"use strict";var a=n(32),o=n(14),r=n(15),i=n(17),c=n(18),l=n(7),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(20),p=n(21),h=n(13),m=n.n(h),v=n(219),g=n(435),O=n(33),j=n(1012),y=n(1077),C=n(439),w=n(26),x=n(218),k=n(30),S=n(191),R=n(151),A=["toggler","topic","id","isLoading","onRef"];function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var T=function(e){Object(i.a)(n,e);var t=I(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.dispatch,a=t.id;n(Object(S.A)(a))},e.track=function(){var t=e.props.topic;e.hoverCardElement&&t&&(w.a.setModule(e.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:t.id,item_num:t.questionsCount,follower_num:t.followersCount}}}),w.a.trackCardShow(e.hoverCardElement))},e.handleFollow=e.props.authRequired((function(){var t=!e.props.topic.isFollowing;w.a.trackEvent(e.hoverCardElement,{action:t?"Follow":"UnFollow",element:"Button"});var n=e.props,a=n.dispatch,o=n.id;a(Object(S.M)(o))}),k.Y.follow),e.handleOpen=function(){e.load(),e.track()},e}return Object(r.a)(n,[{key:"isTopicReady",value:function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,a=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.topic,r=t.id,i=t.isLoading,c=t.onRef,l=Object(a.default)(t,A),u=o||{},d=u.name,b=u.introduction,f=u.questionsCount,p=u.followersCount,h=u.bestAnswersCount,m=u.avatarUrl,v=u.isFollowing,g=u.headerCard,w="//www.zhihu.com/topic/".concat(r),x=g&&g.avatarUrl||m;return Object(s.c)(y.b,Object.assign(Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l),{},{onRef:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t},children:[Object(s.b)(y.a,{title:Object(s.b)("a",{target:"_blank",rel:"noopener noreferrer",href:w,children:d}),avatarUrl:x,avatarFit:"cover"}),b&&Object(s.b)("div",{children:Object(s.b)(C.a,{className:"HoverCard-description",html:b})}),Object(s.c)("div",{children:[this.isTopicReady()&&Object(s.c)(j.a,{children:[Object(s.b)(j.a.Item,{tag:R.a,preset:"plain",a:!0,to:"".concat(w,"/questions"),name:"问题",value:f,target:"_blank"}),Object(s.b)(j.a.Item,{tag:R.a,preset:"plain",a:!0,to:"".concat(w,"/top-answers"),name:"精华",value:h,target:"_blank"}),Object(s.b)(j.a.Item,{tag:R.a,preset:"plain",a:!0,to:"".concat(w,"/followers"),name:"关注者",target:"_blank",value:p})]}),Object(s.b)("div",{className:"HoverCard-buttons",children:o&&Object(s.b)(O.c,{preset:"primary",color:v?"grey":"blue",onClick:this.handleFollow,children:v?"已关注":"关注话题"})})]})]}))}}]),n}(b.Component),E=Object(f.compose)(x.a,Object(p.connect)((function(e,t){var n=t.id,a=e.entities.topics,o=e.loading.local;return{topic:a[n],isLoading:Boolean(o["topic/".concat(n)])}})))(T),N=n(63),B=["isMobile","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children","dispatch","trackEvent"];function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var L=function(e){Object(i.a)(n,e);var t=z(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,o=t.topic,r=o.name,i=o.avatarUrl,c=o.id,l=o.headerCard,u=t.avatar,d=t.avatarProps,b=t.noHoverCard,f=t.noLink,p=t.style,h=t.className,O=t.children,j=(t.dispatch,t.trackEvent,Object(a.default)(t,B)),y=void 0===b?n:b,C=l&&l.avatarUrl||i;e=u?Object(s.b)(v.a,Object.assign({className:"TopicLink-avatar",url:C,alt:r},d)):O||r,f||y||(e=Object(s.b)(E,{toggler:e,id:c}));var w=f?"span":g.b,x=f?"":"a";return Object(s.b)(w,Object.assign(Object.assign({style:p,className:m()("TopicLink",h),href:"//www.zhihu.com/topic/".concat(c),target:"_blank",as:x,zaBlock:"TopicLink"},j),{},{children:e}))}}]),n}(b.Component);L.propTypes={topic:d.a.object.isRequired,user:d.a.object,avatar:d.a.bool,avatarProps:d.a.object,noHoverCard:d.a.bool,noLink:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},L.defaultProps={avatar:!1,noLink:!1};t.a=Object(f.compose)(Object(p.connect)((function(e){return{isMobile:Object(N.d)(e,{includeTablet:!0})}})))(L)},1003:function(e,t,n){"use strict";var a=n(23),o=n.n(a),r=n(28),i=n.n(r),c=n(27),l=n.n(c),s=n(29),u=n.n(s),d=n(19),b=n.n(d),f=n(0),p=n(8);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b()(e);if(t){var o=b()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return u()(this,n)}}var m=function(e){l()(n,e);var t=h(n);function n(){return o()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){return Object(p.g)("svg",{width:"30",height:"30",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",className:"CircleLoadingBar","aria-hidden":"true"},Object(p.g)("g",null,Object(p.g)("circle",{className:"path",fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})))}}]),n}(f.Component);t.a=m},1009:function(e,t,n){"use strict";n.d(t,"a",(function(){return lr}));var a=n(47),o=n(4),r=n(14),i=n(15),c=n(81),l=n(17),s=n(18),u=n(7),d=n(8),b=n(1),f=n(0),p=n.n(f),h=n(20),m=n(58),v=n(3),g=n.n(v),O=n(13),j=n.n(O),y=n(21),C=n(36),w=n(48),x=n(71),k=n.n(x),S=n(904),R=n(899),A=n(1130),I=n(1636),T=n(896),E=n(26),N=n(33),B=n(914),z=n(131),L=n(171),P=n(41),M=n.n(P),_=n(177),D=n(88),F=[{code:32309,description:"收到大量反对"},{code:32301,description:"可能包含争议观点"},{code:32302,description:"可能存在事实性错误",placeholder:"为了避免对您造成误导，请谨慎甄别"},{code:32303,description:"可能涉及金钱往来",placeholder:"为保障您的财产安全，请谨慎判断"},{code:32304,description:"可能包含剧透"},{code:32306,description:"可能包含具体的医疗建议",placeholder:"网络上的医疗建议仅供参考，如有需要请咨询专业人士或前往医疗机构就医"},{code:32307,description:"可能包含令人不适的图片或视频",placeholder:"为保障您的阅读体验，请谨慎浏览"},{code:32308,description:"已有回应"},{code:32300,description:"其他"}];function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var V=function(e){Object(l.a)(n,e);var t=U(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.value,a=e.onChange,o=e.className;return Object(b.b)("div",{className:j()("RadioButtons",o),children:t.map((function(e,t){var o=e.value,r=e.text,i=e.placeholder;return Object(b.c)("label",{className:"RadioButtons-item",children:[Object(b.b)("span",{className:"RadioButtons-text",children:r}),Object(b.b)("input",{type:"radio",className:"RadioButtons-input",value:o,checked:n===o,onChange:function(){return a(o,i)}})]},t)}))})}}]),n}(f.PureComponent);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}V.propTypes={options:g.a.arrayOf(g.a.shape({value:g.a.string,text:g.a.string,placeholder:g.a.string})).isRequired,value:g.a.string,onChange:g.a.func,className:g.a.string};var q=function(){return Promise.all([n.e(1),n.e(3),n.e(64),n.e(67),n.e(2),n.e(5),n.e(19),n.e(20),n.e(85)]).then(n.bind(null,2853))},H=F.map((function(e){var t=e.code,n=e.description,a=e.placeholder;return{text:n,value:String(t),placeholder:a}})),K=function(e){Object(l.a)(n,e);var t=G(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={selectedReasonCode:null,isReasonDescriptionEmpty:!0},e.handleReasonCodeChange=function(t,n){e.setState({selectedReasonCode:Number(t),selectedReasonPlaceholder:n||""}),e.input&&e.input.resetWithValue(n||"")},e.handleAddAnnotation=function(){var t=e.props,n=t.addAnnotation,a=t.type,o=t.urlToken,r=t.showNotification,i=t.onClose;n(a,o,e.state.selectedReasonCode,e.input.toHTML()).then((function(){i(),r&&r("标记内容成功")}))},e.handleReasonDescriptionChange=function(t){e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,a=t.shown,o=t.className,r=this.state,i=r.selectedReasonCode,c=r.isReasonDescriptionEmpty,l=r.selectedReasonPlaceholder,s=function(e){var t=F.find((function(t){return t.code===e}));return t&&t.description}(i),u=32300===i;return Object(b.b)(D.b,{title:"标记内容",subtitle:"请选择标记原因",onClose:n,className:o,children:a&&Object(b.c)("div",{children:[Object(b.c)("div",{className:"AddAnnotationModal-body",children:[Object(b.b)(V,{options:H,onChange:this.handleReasonCodeChange,value:String(i)}),i&&Object(b.c)("div",{children:[Object(b.c)("div",{className:"AddAnnotationModal-description",children:[s,"（",u?"必填":"选填","）"]}),Object(b.b)(_.a,{getComponent:q,multiline:!0,richtext:!0,allowMention:!0,large:!0,spread:!0,minRows:2,onRef:function(t){e.input=t},defaultValue:l,placeholder:"请填写原因",onChange:this.handleReasonDescriptionChange})]})]}),Object(b.b)(D.a,{direction:"horizontal",className:"AddAnnotationModal-buttonGroup",children:Object(b.b)(N.c,{preset:"primary",color:"blue",onClick:this.handleAddAnnotation,size:"spread",disabled:!i||u&&c,children:"标记"})})]})})}}]),n}(f.PureComponent);K.propTypes={addAnnotation:g.a.func.isRequired,onClose:g.a.func.isRequired,shown:g.a.bool.isRequired,type:g.a.oneOf([0,1,2]).isRequired,urlToken:g.a.oneOfType([g.a.number,g.a.string]),showNotification:g.a.func,className:g.a.string};var W=n(60),Z=n(95),Q=n.n(Z),Y=n(140);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var X=function(e){Object(l.a)(n,e);var t=J(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isReasonDescriptionEmpty:!0},e.handleCancelAnnotation=function(){var t=e.props,n=t.cancelAnnotation,a=t.type,o=t.urlToken,r=t.showNotification,i=t.onClose;n(a,o,32305,e.input.value).then((function(){i(),r&&r("撤销标记成功")}))},e.handleReasonDescriptionChange=function(t){return e.setState({isReasonDescriptionEmpty:t.isEmpty})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,a=t.shown,o=t.className,r=this.state.isReasonDescriptionEmpty;return Object(b.b)(D.b,{title:"你确定要撤销这条内容的标记吗？",onClose:n,className:o,children:a&&Object(b.c)("div",{className:"CancelAnnotationModal",children:[Object(b.b)(Y.a,{multiline:!0,large:!0,spread:!0,onRef:function(t){e.input=t},placeholder:"请填写撤销原因（必填）",onChange:this.handleReasonDescriptionChange,className:"CancelAnnotationModal-Input"}),Object(b.c)(D.a,{direction:"horizontal",children:[Object(W.isBrowser)()&&!Q()(window.navigator.userAgent).Mobile&&Object(b.b)(N.c,{onClick:n,size:"spread",children:"取消"}),Object(b.b)(N.c,{preset:"primary",color:"blue",onClick:this.handleCancelAnnotation,size:"spread",className:"CancelAnnotationModal-CancelButton",disabled:r,children:"撤销标记"})]})]})})}}]),n}(f.PureComponent);X.propTypes={cancelAnnotation:g.a.func.isRequired,onClose:g.a.func.isRequired,shown:g.a.bool.isRequired,type:g.a.oneOf([0,1,2]).isRequired,urlToken:g.a.oneOfType([g.a.number.isRequired,g.a.string.isRequired]),showNotification:g.a.func,className:g.a.string};var $=n(289),ee=n(486),te=n(433),ne=n(1047),ae=n(30),oe=n(218),re=n(1658),ie=n(986),ce=n(1022),le=n(89),se=n(129),ue=n(2),de=n(5),be=n(38),fe=n(6),pe=Object.assign({},Object(fe.a)("collaboration",["ADD_ANNOTATION","CANCEL_ANNOTATION"])),he=function(e){return e===ae.e?"answers":e===ae.g?"pins":e===ae.f?"articles":null},me=n(31),ve=n(471),ge=n(63),Oe=n(274),je=n(46),ye=n(170),Ce=n(1295),we=n(380),xe=n(1076),ke=n(1297),Se=n(193),Re=n(1231),Ae=n(1291),Ie=n(1049),Te=n(1105),Ee=n(102),Ne=n.n(Ee),Be=n(23),ze=n.n(Be),Le=n(28),Pe=n.n(Le),Me=n(27),_e=n.n(Me),De=n(29),Fe=n.n(De),Ue=n(19),Ve=n.n(Ue),Ge=n(25),qe=n.n(Ge),He=n(37),Ke=n.n(He),We=n(152),Ze=n.n(We),Qe=n(34),Ye=n.n(Qe),Je=n(56),Xe=n.n(Je),$e=n(59),et=n.n($e),tt=n(40),nt=n(43),at=n(149),ot=n(2278),rt=n(2277),it=n(2805),ct=n(1579),lt=n(912),st=n(72),ut=n(169),dt=n(121),bt=n(436),ft=n(93),pt=n(66),ht=n(90),mt=n.n(ht),vt=["getProps","params","onRequestOpen","children","extra"],gt=["params","onRequestOpen","extra","as"],Ot=function(e){return/^(\w+:)?\/\//.test(e)||"undefined"==typeof window?e:location.origin+e},jt=function(e,t){var n=t.params,a=t.onRequestOpen,o=Object(ut.b)();return function(t){var r=e.href,i=e.onClick;if(i&&i(t),!t.defaultPrevented&&r){var c=function(e,t){if(!t)return e;var n=e.split("#"),a=qe()(n,2),o=a[0],r=a[1],i=o+(o.includes("?")?"&":"?")+t;return r?i+"#"+r:i}(Ot(r),n);if((null==o?void 0:o.ZhihuHybrid)||(null==o?void 0:o.Zhihu))return t.preventDefault(),void Object(nt.a)("base/openURL").dispatch({url:c});(null==a?void 0:a({ua:o,url:c}))&&t.preventDefault()}}},yt=function(e,t){var n=t.extra;return{zaType:"Button",zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:Boolean(e),extra:mt()({link:{get url(){return Ot(e)}}},n)}},Ct=function(e){var t=e.getProps,n=e.params,a=e.onRequestOpen,o=e.children,r=e.extra,i=Ye()(e,vt),c=function(e,t){return Object.assign(Object.assign({},e),"function"==typeof t&&t(e))}(o.props,t);return Object(f.cloneElement)(o,Object(st.j)(Object.assign(Object.assign(Object.assign({},yt(c.href,{extra:r})),i),{},{ref:o.ref,onClick:jt(c,{params:n,onRequestOpen:a})})))},wt=Object(f.forwardRef)((function(e,t){var n=e.params,a=e.onRequestOpen,o=e.extra,r=e.as,i=void 0===r?m.Link:r,c=Ye()(e,gt);return Object(pt.jsx)(st.c,Object.assign({as:i},yt(c.href,{extra:o}),c,{ref:t,onClick:jt(c,{params:n,onRequestOpen:a})}),void 0)})),xt=n(481),kt=n(53),St=n(179),Rt=n.n(St),At=n(498),It=n(50),Tt=n(261),Et=n(11),Nt=n(126),Bt=n(618),zt=n(284);function Lt(){var e=!1,t=[],n=new Set,a={subscribe:function(e){return n.add(e),function(){n.delete(e)}},start:function(a,o){if(e){var r=[];return n.forEach((function(e){r.push(Object(Bt.a)(e,a,{transitionOverride:o}))})),Promise.all(r)}return new Promise((function(e){t.push({animation:[a,o],resolve:e})}))},set:function(t){return Object(Nt.invariant)(e,"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook."),n.forEach((function(e){Object(zt.d)(e,t)}))},stop:function(){n.forEach((function(e){Object(Bt.b)(e)}))},mount:function(){return e=!0,t.forEach((function(e){var t=e.animation,n=e.resolve;a.start.apply(a,Object(Et.__spreadArray)([],Object(Et.__read)(t),!1)).then(n)})),function(){e=!1,a.stop()}}};return a}var Pt=n(134);var Mt=n(271),_t=n(153),Dt=["user","className","badgeSize","isHybrid"],Ft=["query","children","innerStyle","innerRef","onClick"],Ut=["name","className","defaultClassName","size","center"];function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ve()(e);if(t){var o=Ve()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Fe()(this,n)}}var Gt=function(e){var t=e.medalAvatarFrame,n=Object(ut.b)();return Object(xt.versionControl)(n,{IOS:"7.39",ANDROID:"7.39"})&&t?Object(b.b)("div",{css:{position:"absolute",width:"38px",height:"38px",pointerEvents:"none",top:"-4px",left:"-4px"},children:Object(b.b)(m.Image,{alt:"头像挂件",src:t})}):null},qt=function(e){var t=e.user,n=e.className,a=e.badgeSize,o=void 0===a?14:a,r=e.isHybrid,i=Ye()(e,Dt),c=t.avatarUrl,l=t.badge,s=t.badgeV2,u=t.isOrg,d=t.id,f=t.exposedMedal,p=Object(ft.e)(),h=r?30:24,v="0"===d||""===d,g=Object(b.c)(b.a,{children:[Object(b.b)(m.Image,{size:h,src:c,css:{borderRadius:r?"50%":"2px"},className:n}),(null!=s?s:l)&&r&&Object(b.b)(bt.c,{size:o,badge:null!=s?s:l,css:Object(bt.f)(2*o,o)})]});return v?Object(b.b)("span",Object.assign(Object.assign({},i),{},{children:g})):Object(b.c)(m.Box,{size:h,css:Object.assign({position:"relative"},p),className:n,children:[r&&(null==f?void 0:f.medalAvatarFrame)&&Object(b.b)(Gt,{medalAvatarFrame:f.medalAvatarFrame}),Object(b.b)(wt,{href:"https://www.zhihu.com/".concat(u?"org":"people","/").concat(d),zaType:"Image",css:{position:"relative"},onClick:function(e){E.a.trackEvent(e.target,{id:1200,action:"OpenUrl",element_name:"User"})},children:g})]})},Ht=!1,Kt=!1,Wt=function(){var e=Ze()(Ke.a.mark((function e(t){var n;return Ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Kt){e.next=3;break}return e.next=3,Kt=!0,nt.a.ready().catch((function(){Ht=!0}));case 3:if(!Ht){e.next=5;break}return e.abrupt("return",!0);case 5:return e.next=7,nt.a.dispatch("account/showLoginDialog",{next:t}).catch((function(e){return e}));case 7:if("object"!=typeof(n=e.sent)||"ERR_AUTH_ALREADYLOGIN"!==n.name&&"ERR_ACOUNT_NOTGUEST"!==n.name){e.next=11;break}return Ht=!0,e.abrupt("return",Ht);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zt=Object(f.createContext)({data:null,dispatch:et.a,authRequired:et.a}),Qt="LOAD_COMMENT_PREVIEW",Yt="TOGGLE_LIKE",Jt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,a=t.payload;if(n===Qt)return Object(de.camelizeKeys)(a);if(n===Yt){var o=a.id,r=a.nextAction,i=a.rootCommentId;return Object.assign(Object.assign({},e),{},{data:e.data.map((function(e){return i?i!==e.id?e:Object.assign(Object.assign({},e),{},{childComments:e.childComments.map((function(t){return t.id!==o?t:Object.assign(Object.assign({},t),{},{likeCount:e.likeCount+("like"===r?1:-1),liked:"like"===r})}))}):e.id!==o?e:Object.assign(Object.assign({},e),{},{likeCount:e.likeCount+("like"===r?1:-1),liked:"like"===r})}))})}return e},Xt=function(e){var t=e.children,n=e.resourceType,a=e.resourceId,o=e.redirectUrl,r=e.commentUnfoldable,i=e.showInteractions,c=void 0===i||i,l=e.showSecondaryComment,s=e.showSecondaryCommentButton,u=e.showLevelInfo,d=e.listHeight,p=e.maskTransparent,h=e.onAllCommentsShow,m=void 0===h?et.a:h,v=e.openInApp,g=void 0===v?et.a:v,O=Object(f.useReducer)(Jt,null),j=qe()(O,2),y=j[0],C=j[1],w=Object(At.b)(),x=Object(tt.d)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://www.zhihu.com";return function(t){return function(n){var a=n.target;return Wt(e).then((function(e){if(e)return t(a)}))}}}(o)),k=Object(tt.d)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return w.apply(void 0,["https://www.zhihu.com".concat(e)].concat(n))}));return Object(b.b)(Zt.Provider,{value:{data:y,dispatch:C,authRequired:x,fetcher:k,resourceType:n,resourceId:a,commentUnfoldable:r,showInteractions:c,showSecondaryComment:l,showSecondaryCommentButton:s,showLevelInfo:u,onAllCommentsShow:m,listHeight:d,maskTransparent:p,openInApp:g},children:t})};function $t(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=null;return function(){var o=Date.now();if(!n&&!a||o-a<t){a||(a=o);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return e.apply(this,i)}a=o}}var en=Object(f.forwardRef)((function(e,t){var n=e.query,a=void 0===n?{}:n,o=e.children,r=e.innerStyle,i=e.innerRef,c=e.onClick,l=Ye()(e,Ft),s=Object(f.useContext)(Zt),u=s.resourceType,d=s.resourceId,p=s.onAllCommentsShow,h=s.listHeight,m=s.maskTransparent,v=s.openInApp,g=a.rootCommentId,O=a.anchorCommentId,j=a.openEditor,y=a.replyAuthorName,C=Object(ut.b)(),w=Object(f.useMemo)((function(){var e=Object(kt.stringify)(Object(de.decamelizeKeys)(Rt()(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),g&&{isChild:!0}),{},{rootCommentId:void 0,isChild:void 0,anchorCommentId:null!=g?g:O},j&&{openEditor:!0,replyCommentId:O,replyRootCommentId:g,replyAuthorName:y}),h&&{listHeight:h,maskTransparent:!0}),void 0!==m&&{maskTransparent:m}),Boolean))),t=d,n=u;return a.resourceType&&a.resourceType!==u&&(n=a.resourceType,t=a.resourceId),"https://www.zhihu.com/comment/list/".concat(n,"/").concat(t,"?").concat(e)}),[a,u,d,O,g,y,j,h,m]);return Object(b.b)(wt,Object.assign(Object.assign({as:"div",ref:t,href:w,onClick:function(e){if(!C.ZhihuHybrid)return e.preventDefault(),void v();null==c||c(e),e.defaultPrevented||null==p||p()}},l),{},{children:Object(b.b)("div",{role:"link",tabIndex:0,ref:i,onClick:$t((function(e){e.stopPropagation()}),1e3),css:function(e){return Object.assign({":focus":{outline:"none"},":focus-visible":{outline:"".concat(e.colorMod(e.colors.GBL01A).alpha(.3)," auto 5px")}},r)},children:o})}))})),tn=function(e){_e()(n,e);var t=Vt(n);function n(){var e;ze()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleChange=function(t,n){var a=e.props,o=a.onObserve,r=a.onChange;o&&o(t),t.forEach((function(e){r&&r(e,n)}))},e}return Pe()(n,[{key:"componentDidMount",value:function(){var e=Object(It.findDOMNode)(this);e&&(this.observer=this.createObserver(),this.observer.observe(e))}},{key:"componentWillUnmount",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null)}},{key:"createObserver",value:function(){var e=this.props,t=e.root,n=e.rootMargin,a=e.threshold,o=e.trackVisibility,r=e.delay;return new window.IntersectionObserver(this.handleChange,{root:t,rootMargin:n,threshold:a,trackVisibility:o,delay:r})}},{key:"render",value:function(){return this.props.children}}]),n}(f.Component);function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}tn.propTypes={root:g.a.object,rootMargin:g.a.string,threshold:g.a.oneOfType([g.a.number,g.a.arrayOf(g.a.number)]),trackVisibility:g.a.bool,delay:g.a.number,onObserve:g.a.func,onChange:g.a.func};var an=function(e){_e()(n,e);var t=Vt(n);function n(){var e;ze()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),nn(Ne()(e),"trackCardShowTimer",null),nn(Ne()(e),"handleIntersectionChange",(function(t,n){if(t.isIntersecting&&t.intersectionRatio>0){n.disconnect();var a=e.props,o=a.view,r=void 0===o?{}:o,i=a.extra;e.trackCardShowTimer=setTimeout((function(){E.a.trackCardShow(Ne()(e),r,i)}))}})),e}return Pe()(n,[{key:"componentDidMount",value:function(){this.setModule()}},{key:"componentDidUpdate",value:function(){this.setModule()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.trackCardShowTimer)}},{key:"setModule",value:function(){var e=this.props,t=e.module,n=e.index,a=e.isAd,o=e.moduleName,r=e.content,i=e.list,c=e.card,l=e.attachedInfoBytes;if(t){var s=Object(It.findDOMNode)(this);s&&E.a.setModule(s,{module:t,index:n,is_ad:a,module_name:o},function(e,t,n,a){return Object.assign(Object.assign(Object.assign(Object.assign({},e&&{card:{content:e}}),t&&{card:t}),n&&{list:n}),a&&{attached_info_bytes:a})}(r,c,i,l))}}},{key:"render",value:function(){var e=this.props,t=e.visibleThreshold,n=e.trackCardShow,a=e.children;return n?Object(b.b)(tn,{threshold:t,onChange:this.handleIntersectionChange,children:a}):a}}]),n}(f.Component);nn(an,"propTypes",{id:g.a.string,module:g.a.string,moduleName:g.a.string,index:g.a.number,isAd:g.a.bool,content:g.a.object,extra:g.a.object,trackCardShow:g.a.bool,attachedInfoBytes:g.a.string}),nn(an,"defaultProps",{id:null,module:null,index:null,isAd:!1,content:null,extra:null,attachedInfoBytes:null,trackCardShow:!1,visibleThreshold:0});var on={avatarUrl:"https://pic1.zhimg.com/v2-abed1a8c04700ba7d72b45195223e0ff_s.jpeg",badge:null,id:"0"},rn=["1","0.7","0.4"],cn=["[666]","[谢邀]","[赞同]"],ln=function(e){var t=e.inputPlaceholder,n=e.commentStatus,a=e.emoticons,o=e.currentUserId,r=e.onInputShowTips,i=Object(ut.b)(),c=(null==i?void 0:i.ZhihuHybrid)||(null==i?void 0:i.Zhihu),l=Object(f.useState)([]),s=qe()(l,2),u=s[0],d=s[1],p=Object(f.useState)(on),h=qe()(p,2),v=h[0],g=h[1],O=n.type,j=n.text,y=n.induceText,C=4===O,w=5===O,x=C||w,k=x?j:t;Object(f.useEffect)((function(){a.length>0&&nt.a.dispatch("base/getFrequentlyUsedEmoticon",{count:3}).then((function(e){var t=null==e?void 0:e.data;return t&&0!==t.length||(t=cn),d(t.map((function(e){return function(e,t){return t.find((function(t){return t.placeholder===e}))}(e,a)})))}))}),[a]),Object(f.useEffect)((function(){o?nt.a.dispatch("base/getData",{type:"people",id:o}).then((function(e){var t=e.data;t&&g(Object(de.camelizeKeys)(t))})):nt.a.dispatch("account/me").then((function(e){if(null!=e&&e.url_token){var t=e.avatar_url,n=e.url_token,a=e.badge_v2,o=e.badge;g({avatarUrl:t,id:n,badgeV2:a,badge:o})}}))}),[o]);var S=Object(tt.d)((function(e){E.a.trackEvent(e.target,{id:1203,action:"Click"}),x&&e.preventDefault(),C&&Object(nt.a)("ui/showToast").dispatch({text:j}),w&&(null==r||r(y||"评论区功能升级中，暂时无法发送评论，可以使用「赞同并推荐」功能参与互动"))}));return Object(b.c)(m.Flex,{css:{width:"100%",alignItems:"center"},children:[Object(b.b)(qt,{user:v,isHybrid:c}),Object(b.b)(an,{module:"CommentEditView",children:Object(b.c)(en,{as:m.Flex,query:{openEditor:!0},css:function(e){return{flex:1,border:"1px solid ".concat(e.colors.GBK09A),marginLeft:"10px",borderRadius:"8px",height:"36px",paddingLeft:"10px",fontSize:"13px",color:e.colors.GBK06A}},innerStyle:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},onClick:S,children:[Object(b.b)(m.Text,{css:{lineHeight:"normal"},children:k||"写下你的评论..."}),u.length>0&&Object(b.b)(m.Flex,{css:{height:"34px",alignItems:"center",marginRight:"4px"},children:u.filter(Boolean).map((function(e,t){var n=e.static_image_url,a=e.title;return Object(b.b)("img",{alt:"icon",src:n,css:{width:"20px",height:"20px",marginRight:"4px",opacity:rn[t]}},a)}))})]})})]})},sn={hybrid:{username:{fontSize:14,color:"GBK02A"},authorTag:{fontSize:13},content:{lineHeight:"21px"},commentTag:{fontSize:12,height:20,lineHeight:"16px",color:"GBK06A",marginTop:"6px"}},web:{username:{fontSize:15,color:"GBK03A"},authorTag:{fontSize:15},content:{lineHeight:"24px"},commentTag:{fontSize:14,height:24,lineHeight:"24px",color:"GBL05A",marginTop:"4px"}}};function un(e){var t=e.name,n=e.nicknameColor,a=void 0===n?{}:n,o=e.showLevelInfo,r=e.isOrg,i=e.id,c=e.className,l=e.uaType,s=Object(ft.f)(),u=a.color,d=a.nightModeColor,f=Boolean(o&&u&&d&&!r),p=s.isDarkMode?d:u,h=s.isDarkMode?"#999999":"#1a1a1a",v=f?p:h,g="0"===i||""===i,O=g?m.Text:wt,j=sn[l].username,y=j.fontSize,C=j.color;return Object(b.b)(O,Object.assign(Object.assign({},!g&&{href:"https://www.zhihu.com/".concat(r?"org":"people","/").concat(i),as:m.Text}),{},{color:v||C,fontSize:y,fontWeight:"bold",lineHeight:"16px",css:[{flex:"0 1 auto"},Object(ft.d)(1)],className:c,children:t}))}function dn(e){var t=e.levelInfo,n=void 0===t?{}:t,a=n.level,o=n.iconInfo,r=o.url,i=o.nightModeUrl,c=Object(ft.f)().isDarkMode?i:r;return Object(b.b)("a",{href:"https://www.zhihu.com/level-detail",css:{marginLeft:6,height:16,display:"flex",alignItems:"center"},children:Object(b.b)(m.Image,{height:"14px",src:c,alt:"等级 ".concat(a)})})}var bn=["comment_gif","comment_img","comment_sticker"],fn=function(e,t){return e instanceof NodeList?Object(b.b)(b.a,{children:[].map.call(e,(function(e,n){return Object(b.b)(f.Fragment,{children:t(e,n)},n)}))}):t(e)},pn={class:"className"},hn=function(e,t){function n(e,t){return e.nodeType===Node.TEXT_NODE?e.nodeValue:e.nodeType===Node.ELEMENT_NODE?Object(f.createElement)("A"===e.nodeName&&t?wt:e.tagName.toLowerCase(),e.attributes?Array.from(e.attributes).reduce((function(e,t){return e[pn[t.name]||t.name]=t.value,e}),{}):{},e.childNodes.length?fn(e.childNodes,n):null):null}return fn(e,(function(e){return t(e,(function(t){return n(e,t)}))}))},mn=function(e,t){return e.replace(/(\[[^[^\]]+\])/g,(function(e){var n=t.find((function(t){return t.placeholder===e}));return n?"<img src=".concat(n.static_image_url,' class="sticker" />'):e}))},vn=Object(f.memo)((function(e){return function(e){if("undefined"==typeof DOMParser)return Object(b.b)("div",{dangerouslySetInnerHTML:{__html:e}});var t=(new DOMParser).parseFromString(e,"text/html");return hn(t.body.childNodes,(function(e,t){return e.nodeType===Node.ELEMENT_NODE?t(!0):e.textContent}))}(e.text)})),gn=function(e){var t=e.tagInfo,n=e.richText,a=e.responseLink,o=e.className,r=Object(Tt.b)().isDarkMode;if(!t)return null;var i=t.text,c=t.color,l=t.nightColor,s=t.hasBorder,u=t.borderColor,d=t.borderNightColor,p=t.targetLink,h=p&&a,m=Object(f.useContext)(Zt).openInApp,v=Object(ut.b)(),g=Object(tt.d)((function(e){h&&!v.ZhihuHybrid&&(e.preventDefault(),m())})),O=h?wt:"span";return Object(b.c)(O,Object.assign(Object.assign({css:function(e){return Object.assign(Object.assign(Object.assign({},s&&u&&Object(ft.c)({border:"1px solid ".concat(r?d:u),borderRadius:"4px"})),h&&{textDecoration:"none"}),{},{height:"14px",fontSize:"10px",lineHeight:"15px",boxSizing:"border-box",marginLeft:"4px",padding:"0 4px","& a":{color:e.colors.GBL01A,textDecoration:"none"}})},className:o,style:{color:r?l:c},onClick:g},Boolean(h)&&{href:p}),{},{children:[n?Object(b.b)(vn,{text:i}):i,Boolean(p)&&Object(b.b)(it.a,{css:function(e){return{fill:e.colors[c],marginRight:"-2px"}},center:!0,size:12})]}))},On={answer:"回答",article:"文章",pin:"想法"},jn=function(e){var t=e.vipInfo,n=t.vipIcon,a=(n=void 0===n?{}:n).url,o=t.isVip,r=Object(f.useContext)(Zt).resourceType;return Object(f.useEffect)((function(){E.a.trackCardShow(null,{id:3613,name:On[r]})}),[r]),a&&o?Object(b.b)(Ct,{shouldTrackShow:!0,zaType:"Image",zaBlock:"VIP",children:Object(b.b)(m.Flex,{as:"a",href:"https://www.zhihu.com/vip?entry_privileges_type=member_id",css:{marginLeft:"4px"},onClick:function(){E.a.trackEvent(null,{id:3612,action:"Click",name:On[r]})},children:Object(b.b)(m.Image,{src:a,css:{height:"14px",width:"14px"}})})}):null},yn=function(e){var t=e.medalId,n=e.avatarUrl,a=e.userToken,o=e.medalName,r=Object(ut.b)();return Object(xt.versionControl)(r,{IOS:"7.39",ANDROID:"7.39"})?Object(b.b)(m.Flex,{as:"button",onClick:function(e){e.preventDefault(),Object(nt.a)("base/openURL").dispatch({url:"zhihu://popup_container?"+new URLSearchParams({url:"https://www.zhihu.com/appview/v2/badge_center/detail?userToken=".concat(encodeURIComponent(a),"&badgeId=").concat(encodeURIComponent(t)),min_percent:"0.6",show_header:"false",cancelable:"true",enable_drag:"false",canchangeheight:"false"}).toString()})},css:{padding:0,marginLeft:"6px"},children:Object(b.b)(m.Image,{alt:o,css:{height:"14px",width:"14px"},src:n})}):null},Cn=function(e){var t=e.showLevelInfo,n=void 0!==t&&t,a=e.authorTags,o=void 0===a?[]:a,r=e.className,i=e.user,c=e.uaType,l=e.badgeSize,s=void 0===l?14:l,u=i.name,d=i.vipInfo,f=i.levelInfo,p=i.badge,h=i.badgeV2,v=i.isOrg,g=i.id,O=i.exposedMedal,j=void 0===O?null:O,y=i.urlToken,C=j&&j.avatarUrl&&j.medalId&&y;return Object(b.c)(m.Flex,{css:{alignItems:"center",lineHeight:"16px"},className:r,children:[Object(b.b)(un,Object.assign(Object.assign({name:u},f),{},{isOrg:v,id:g,showLevelInfo:n,uaType:c})),n&&f&&Object(b.b)(dn,{levelInfo:f}),o.map((function(e){return Object(b.b)(gn,{responseLink:!0,richText:!0,tagInfo:e},e.text)})),(null!=h?h:p)&&"hybrid"!==c&&Object(b.b)(bt.c,{size:s,badge:null!=h?h:p,css:{marginLeft:4}}),d&&Object(b.b)(jn,{vipInfo:d}),C&&Object(b.b)(yn,Object.assign({userToken:y},j))]})},wn=function(e){var t=e.onClick,n=Object(ft.f)().colors,a=n.GBK04A,o=n.GBK99A;return Object(b.c)("span",{role:"button",tabIndex:0,css:{position:"absolute",right:0,bottom:0,paddingLeft:18,backgroundImage:"linear-gradient(90deg, ".concat(Object(ft.b)(o).alpha(0),", ").concat(o," 25%, ").concat(o,")"),display:"inline-block",color:a},onClick:t,children:["展开",Object(b.b)(ct.a,{center:!0,color:a,css:{height:21}})]})},xn=function(e){var t=e.comment,n=t.content,a=t.collapsed,o=t.isDeleted,r=t.id,i=e.emoticons,c=e.className,l=e.rootCommentId,s=e.unfoldable,u=e.uaType,d=!a&&!o,p=Object(f.useRef)(),h=Object(f.useRef)(),v=Object(f.useState)(!1),g=qe()(v,2),O=g[0],j=g[1],y=Object(f.useState)(!1),C=qe()(y,2),w=C[0],x=C[1],k=Object(f.useMemo)((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("undefined"==typeof DOMParser)return Object(b.b)("div",{dangerouslySetInnerHTML:{__html:e}});var n=mn(e,t),a=new DOMParser,o=a.parseFromString(n,"text/html");return hn(o.body.childNodes,(function(e,t){return e.nodeType===Node.ELEMENT_NODE&&e.classList.contains("sticker")?t(!1):e.nodeType===Node.ELEMENT_NODE&&e.textContent.match("http")?t(!0):e.textContent}))}(n,null!=i?i:[])}),[n,i]),S=sn[u].content.lineHeight;Object(f.useLayoutEffect)((function(){var e,t;s&&!w&&(null===(e=p.current)||void 0===e?void 0:e.clientHeight)<(null===(t=h.current)||void 0===t?void 0:t.clientHeight)&&j(!0)}),[p,h,j,w,s]);var R=Object(tt.d)((function(e){E.a.trackEvent(e.target,{id:1201,action:"OpenUrl",element_name:"Body"});var t,n=e.target;if(bn.some((function(e){return n.classList.contains(e)}))){var a=n.href;a&&(t=a,nt.a.dispatch("base/openImage",{images:[t],index:0})),e.preventDefault()}})),A=Object(tt.d)((function(e){e.stopPropagation(),x(!0)}));return Object(b.c)(en,{ref:p,innerRef:h,as:m.Box,onClick:R,fontSize:"15px",lineHeight:S,color:d?"GBK03A":"GBK07A",mt:"6px",css:Object.assign(Object.assign(Object.assign({position:"relative",overflowWrap:"break-word"},!w&&Object(ft.d)(2)),s&&!w&&{display:"block",overflow:"hidden",maxHeight:42}),{},{img:{width:"1.24em",height:"1.24em",marginBottom:"-0.25em"}}),className:c,zaType:"Card",query:{rootCommentId:l,anchorCommentId:r},children:[k,O&&!w&&Object(b.b)(wn,{onClick:A})]})},kn=function e(t){var n=function(e,t){return Object.keys(t).reduce((function(e,n){var a=e[n];if(delete e[n],a){var o=t[n],r="function"==typeof o?o(e):o;return Object.assign(Object.assign(Object.assign({},e),r),r&&r.style&&{style:Object.assign(Object.assign({},e.style),r.style)})}return e}),Object.assign({},e))}(t,e.mapProps),a=n.name,o=n.className,r=n.defaultClassName,i=n.size,c=n.center,l=Ye()(n,Ut),s=Object(b.b)("svg",Object.assign(Object.assign({className:"".concat(r," ").concat(r,"--").concat(a).concat(o?" ".concat(o):"")},l),i&&{width:i,height:i}));return c?Object(b.c)("span",{style:e.strutStyle,children:["​",s]}):s};kn.defaultProps={defaultClassName:"Icon",fill:"currentColor"},kn.mapProps={text:{size:"1.2em"}},kn.strutStyle={display:"inline-flex",alignItems:"center"};var Sn=function(e){return Object(b.b)(kn,Object.assign(Object.assign({viewBox:"0 0 24 24"},e),{},{children:Object(b.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3C16.9706 3 21 7.02944 21 12C21 12.9242 20.7842 14.037 20.3617 15.3551C20.2673 15.6497 20.2603 15.9655 20.3417 16.264L20.4506 16.64C21.073 18.8462 21.1396 20.1542 20.6504 20.5641C20.1634 20.972 18.8358 20.9294 16.6675 20.4363L16.264 20.3417C15.9655 20.2603 15.6497 20.2673 15.3551 20.3617C14.037 20.7842 12.9242 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3ZM12 4.61093C7.9191 4.61093 4.6109 7.91913 4.6109 12C4.6109 16.0809 7.9191 19.3891 12 19.3891C12.7277 19.3891 13.6797 19.2071 14.8633 18.8277C15.4548 18.6381 16.0886 18.6241 16.6417 18.7757C17.687 19.0279 18.5219 19.1739 19.1295 19.2169L19.248 19.2241L19.349 19.228L19.3449 19.1745C19.2933 18.6329 19.1303 17.872 18.846 16.8877L18.7875 16.6878C18.6241 16.0886 18.638 15.4548 18.8276 14.8633C19.2071 13.6797 19.389 12.7277 19.389 12C19.389 7.91913 16.0808 4.61093 12 4.61093Z"})}))};Sn.defaultProps={name:"CommentLikeNormal"};var Rn=function(e){return Object(b.b)(kn,Object.assign(Object.assign({viewBox:"0 0 43 41"},e),{},{children:Object(b.b)("path",{fill:"currentColor",fillRule:"evenodd",d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z"})}))};Rn.defaultProps={name:"Star"};var An=function(e){return Object(b.b)(kn,Object.assign(Object.assign({viewBox:"0 0 43 41"},e),{},{children:Object(b.c)("g",{fillRule:"evenodd",children:[Object(b.b)("path",{d:"M19.417 35.624L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165a1.734 1.734 0 0 1 3.11 0l4.524 9.166a4.625 4.625 0 0 0 3.482 2.53l10.114 1.47a1.734 1.734 0 0 1 .961 2.957l-7.319 7.134a4.625 4.625 0 0 0-1.33 4.094l1.728 10.073a1.734 1.734 0 0 1-2.516 1.829l-9.047-4.756a4.625 4.625 0 0 0-4.304 0z",opacity:".2"}),Object(b.b)("path",{d:"M21.5.162v34.931c-.716.01-1.43.188-2.083.53L10.37 40.38a1.734 1.734 0 0 1-2.516-1.829l1.728-10.073a4.625 4.625 0 0 0-1.33-4.094L.933 17.25a1.734 1.734 0 0 1 .961-2.958l10.114-1.47a4.625 4.625 0 0 0 3.483-2.53l4.523-9.165c.29-.59.872-.94 1.486-.965z"})]})}))};An.defaultProps={name:"HalfStar"};var In=Xe()(Array(5)),Tn=function(e){var t=e.score/2,n=Object(ft.f)().colors.GRD10A,a=Object(ft.b)(n).alpha(.2);return Object(b.b)(m.Flex,{flexDirection:"row",height:"20px",alignItems:"center",mt:"2px",children:In.map((function(e,o){var r=function(e,t){return e-t>=0?1:e-t<=-1?0:.5}(t,o+1);return.5===r?Object(b.b)(An,{css:{marginRight:"2px"},color:n,size:12},"".concat(o,"-").concat(r)):Object(b.b)(Rn,{css:{marginRight:"2px"},color:r?n:a,size:12},"".concat(o,"-").concat(r))}))})},En=function(e){return Object(b.b)(kn,Object.assign(Object.assign({viewBox:"0 0 24 24"},e),{},{children:Object(b.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 4.07782C8.5 2.24411 10.4861 1.09899 12.0731 2.01775C13.7298 2.9769 14.663 4.82463 14.4516 6.72727L14.3379 7.74996H17.9194C20.4493 7.74996 22.2533 10.2038 21.4987 12.6185L19.6761 18.4508C19.1559 20.1155 17.5599 21.197 15.8279 21.0902C13.456 20.9438 9.78636 20.75 7 20.75H4.49936C3.53225 20.75 2.75 19.9658 2.75 19V9.49996C2.75 8.53346 3.5335 7.74996 4.5 7.74996H5.1371C6.55156 7.74996 7.81995 6.87883 8.32771 5.55864C8.4416 5.26254 8.5 4.94801 8.5 4.63076V4.07782ZM11.3215 3.31589C10.7346 2.97608 10 3.39961 10 4.07782V4.63076C10 5.13211 9.90771 5.62918 9.72773 6.09711C8.99716 7.99659 7.17222 9.24996 5.1371 9.24996H4.5C4.36193 9.24996 4.25 9.36189 4.25 9.49996V19C4.25 19.1386 4.36191 19.25 4.49936 19.25H7C9.83637 19.25 13.5459 19.4465 15.9203 19.593C16.9721 19.6579 17.9327 19.0008 18.2444 18.0034L20.067 12.1711C20.5198 10.7222 19.4374 9.24996 17.9194 9.24996H13.5C13.2867 9.24996 13.0834 9.15911 12.9412 9.00015C12.7989 8.84119 12.731 8.62916 12.7546 8.41713L12.9608 6.56162C13.1065 5.25035 12.4633 3.97693 11.3215 3.31589Z"})}))};En.defaultProps={name:"CommentLikeNormal"};var Nn=function(e){return Object(b.b)(kn,Object.assign(Object.assign({viewBox:"0 0 24 24"},e),{},{children:Object(b.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 4.07782C8.5 2.24411 10.4861 1.09899 12.0731 2.01775C13.7298 2.9769 14.663 4.82463 14.4516 6.72727L14.3379 7.74996H17.9194C20.4493 7.74996 22.2533 10.2038 21.4987 12.6185L19.6761 18.4508C19.1559 20.1155 17.5599 21.197 15.8279 21.0902C13.456 20.9438 9.78636 20.75 7 20.75H4.49936C3.53225 20.75 2.75 19.9658 2.75 19V9.49996C2.75 8.53346 3.5335 7.74996 4.5 7.74996H5.1371C6.55156 7.74996 7.81995 6.87883 8.32771 5.55864C8.4416 5.26254 8.5 4.94801 8.5 4.63076V4.07782Z",fill:"#0066FF"})}))};Nn.defaultProps={name:"CommentLikeActive"};var Bn=function(e){var t,n=e.comment,a=e.rootCommentId,o=n.likeCount,r=n.liked,i=Object(ut.b)(),c=Object(f.useRef)(!1),l=Object(f.useContext)(Zt),s=l.dispatch,u=l.fetcher,d=l.authRequired,p=l.openInApp,h=r?Nn:En,m=(t=Object(Pt.a)(Lt),Object(f.useEffect)(t.mount,[]),t),v=Object(tt.d)(Ze()(Ke.a.mark((function e(){return Ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout((function(){nt.a.dispatch("iOS/hapticFeedback")}),300),e.next=3,m.start({scale:1.3,transition:{type:"tween",duration:.2,ease:[0,0,.58,1]}});case 3:return e.next=5,m.start({scale:1,transition:{type:"tween",duration:.3,ease:[.42,0,.2,1.8]}});case 5:case"end":return e.stop()}}),e)})))),g=Object(tt.d)(function(){var e=Ze()(Ke.a.mark((function e(t){var o;return Ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.ZhihuHybrid){e.next=3;break}return p(),e.abrupt("return");case 3:if(!c.current){e.next=5;break}return e.abrupt("return");case 5:return c.current=!0,E.a.trackEvent(t,{action:r?"UnUpvote":"Upvote",id:r?1444:1202}),"like"===(o=r?"dislike":"like")&&v(),e.prev=9,e.next=12,u("/api/v4/comment_v5/comment/".concat(n.id,"/reaction/").concat(o),{method:"PUT"});case 12:s({type:Yt,payload:{nextAction:o,id:n.id,rootCommentId:a}}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),nt.a.dispatch("ui/showToast",{icon:"fail",text:e.t0&&e.t0.toastMsg||"操作失败"});case 18:return e.prev=18,c.current=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[9,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()),O=i.ZhihuHybrid?"":"赞";return Object(b.c)(b.a,{children:[Object(b.b)(st.a,{zaType:"Button",zaAction:r?"UnUpvote":"Upvote",as:Mt.a.button,css:function(){return{marginLeft:"16px",display:"flex",alignItems:"center",justifyContent:"center",padding:0,color:"inherit",font:"inherit",background:"none",outline:"none",border:"none",appearance:"none"}},initial:{scale:1},animate:m,onClick:d(g),children:i.ZhihuHybrid?Object(b.b)(h,{size:20,css:function(e){return{fill:e.colors.GBK06A}}}):Object(b.b)(ot.a,{size:16,css:function(e){return{fill:e.colors.GBL05A}}})}),Object(b.b)("span",{css:function(e){return{marginLeft:"4px",color:e.colors[r?"GBL01A":"GBK06A"]}},children:o>0?Object(at.cnNiceNumber)(o):O})]})},zn=function(e){var t=e.comment,n=e.editStatus,a=e.rootCommentId,o=e.className,r=e.uaType,i=e.isSecondary,c=t.score,l=t.createdTime,s=t.contentTag,u=t.commentTag,d=t.canLike,p=t.resourceId,h=t.resourceType,v=Object(f.useContext)(Zt).showInteractions,g=sn[r].commentTag,O=g.fontSize,j=g.color,y=g.height,C=g.lineHeight,w=g.marginTop,x="hybrid"===r;return Object(b.c)(m.Flex,{css:{flexDirection:"column"},className:o,children:[c>0&&Object(b.b)(Tn,{score:c}),Object(b.b)(m.Flex,{flexDirection:"row",children:s.map((function(e){return Object(b.b)(gn,{richText:!0,tagInfo:e,css:{height:"auto",padding:0,fontSize:"11px",lineHeight:"16px",marginTop:"6px","&:first-of-type":{marginLeft:0}}},e.text)}))}),Object(b.c)(m.Flex,{fontSize:O,justifyContent:"space-between",alignItems:"center",height:y,lineHeight:C,mt:w,color:j,children:[Object(b.c)(m.Flex,{css:{flexShrink:0,alignItems:"baseline"},children:[Object(b.c)("span",{children:[Object(_t.toSmartString)(l),Boolean(u.length)&&" · "]}),u.map((function(e){return Object(b.b)(gn,{tagInfo:e,css:{fontSize:O,paddingLeft:0,paddingRight:0}},e.text)}))]}),v&&Object(b.c)(m.Flex,{css:{flexShrink:0,alignItems:"center"},children:[Object(b.c)(en,{query:{openEditor:!0,anchorCommentId:t.id,rootCommentId:a,replyAuthorName:t.author.name,resourceId:p,resourceType:h},onClick:function(e){n&&!n.canReply&&n.toast&&(e.preventDefault(),Object(nt.a)("ui/showToast").dispatch({text:n.toast}))},children:[x?Object(b.b)(Sn,{size:20,center:!0}):Object(b.b)(rt.a,{size:18,center:!0}),!x&&!i&&Object(b.b)("span",{css:function(e){return{marginLeft:"4px",color:e.colors.GBL05A}},children:"回复"})]}),(!x||d)&&Object(b.b)(Bn,{comment:t,rootCommentId:a})]})]})]})},Ln=function(e){var t=e.comment,n=e.emoticons,a=e.rootCommentId,o=e.uaType,r=t.author,i=t.authorTag,c=t.index,l=t.id,s=t.replyToAuthor,u=t.replyAuthorTag,d=sn[o].authorTag.fontSize,f=Object(ut.b)(),p=(null==f?void 0:f.ZhihuHybrid)||(null==f?void 0:f.Zhihu);return Object(b.b)(m.Flex,{css:{flexDirection:"column"},children:Object(b.b)(st.b,{content:{type:"Comment",id:t.id},children:Object(b.b)(an,{module:"CommentItem",index:c,card:{content:{type:"Comment",id:l}},view:{id:1199},trackCardShow:!0,children:Object(b.c)(st.e,{as:m.Flex,zaType:"Card",css:{marginTop:"4px"},children:[Object(b.b)(qt,{user:r,css:{width:"24px",height:"24px"},badgeSize:13,isHybrid:p}),Object(b.c)(m.Flex,{css:{flex:1,flexDirection:"column",marginLeft:"8px"},children:[Object(b.c)("div",{css:function(e){return{display:"flex",fontSize:d,color:e.colors.GBK03A,alignItems:"center",fontWeight:"bold",lineHeight:"16px"}},children:[Object(b.b)("div",{children:r.name}),i.map((function(e){return Object(b.b)(gn,{tagInfo:e,css:{fontWeight:"normal"}},e.text)})),s&&Object(b.c)(b.a,{children:[Object(b.b)(it.a,{size:12,center:!0,css:function(e){return{marginRight:"4px",fill:e.colors.GBK06A}}}),Object(b.b)("div",{children:s.name}),u.map((function(e){return Object(b.b)(gn,{tagInfo:e},e.text)}))]})]}),Object(b.b)(xn,{comment:t,emoticons:n,rootCommentId:a,uaType:o,css:function(e){return{marginTop:"4px",color:e.colors.GBK04A}}}),Object(b.b)(zn,{comment:t,rootCommentId:a,css:{marginTop:"-4px"},uaType:o,isSecondary:!0})]})]})})})})},Pn=function(e){var t=e.id,n=e.count,a=e.offsetLeft,o=Object(ft.f)().colors;return n?Object(b.c)(en,{as:m.Text,css:{display:"flex",justifyContent:"flex-start",marginTop:"8px",marginLeft:a},innerStyle:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",fontSize:"12px",height:"28px",background:o.GBK10A,color:o.GBK03A,padding:"0 10px 0 16px",borderRadius:"14px"},query:{rootCommentId:t},children:[Object(b.c)("span",{children:["查看全部"," ".concat(Object(at.cnNiceNumber)(n)),"条回复"]}),Object(b.b)(lt.a,{center:!0,size:18,css:function(e){return{fill:e.colors.GBK03A}}})]}):null},Mn=function(e){var t=e.comments,n=e.count,a=e.emoticons,o=e.rootCommentId,r=e.uaType,i=Object(f.useContext)(Zt),c=i.showLevelInfo,l=i.showSecondaryComment,s=i.showSecondaryCommentButton;return!l&&!s||0===t.length?null:Object(b.c)(m.Flex,{css:{borderRadius:"8px",flexDirection:"column",marginTop:"6px",marginLeft:"40px"},children:[l&&t.map((function(e,t){return Object(b.b)(st.b,{content:{type:"Comment",id:e.id},children:Object(b.b)(an,{module:"CommentItem",content:{type:"Comment",id:e.id},index:t,view:{id:1199},trackCardShow:!0,children:Object(b.b)(Ln,{comment:e,showLevelInfo:c,emoticons:a,rootCommentId:o,uaType:r})})},e.id)})),s&&Object(b.b)(Pn,{id:o,count:n,offsetLeft:l?32:0})]})},_n=function(e){var t=e.comment,n=e.editStatus,a=e.showLevelInfo,o=e.showInteractions,r=e.emoticons,i=t.author,c=t.authorTag,l=t.childComments,s=void 0===l?[]:l,u=t.childCommentCount,d=t.index,p=t.id,h=Object(ut.b)(),v=(null==h?void 0:h.ZhihuHybrid)||(null==h?void 0:h.Zhihu),g=v?"hybrid":"web",O=Object(f.useContext)(Zt).commentUnfoldable;return Object(b.c)(m.Flex,{css:{flexDirection:"column"},children:[Object(b.b)(st.b,{content:{type:"Comment",id:t.id},children:Object(b.b)(an,{module:"CommentItem",index:d,card:{content:{type:"Comment",id:p}},view:{id:1199},trackCardShow:!0,children:Object(b.c)(st.e,{as:m.Flex,zaType:"Card",css:{marginTop:"16px"},children:[Object(b.b)(qt,{user:i,isHybrid:v}),Object(b.c)(m.Flex,{css:{flex:1,flexDirection:"column",marginLeft:"10px"},children:[Object(b.b)(Cn,{user:i,showLevelInfo:a,authorTags:c,uaType:g}),Object(b.b)(xn,{unfoldable:O,comment:t,emoticons:r,uaType:g}),Object(b.b)(zn,{comment:t,editStatus:n,showInteractions:o,uaType:g})]})]})})}),Object(b.b)(Mn,{comments:s,count:u,emoticons:r,rootCommentId:p,uaType:g})]})},Dn=function(e){var t,n=e.className,a=e.showLevelInfo,o=e.showInteractions,r=e.resourceType,i=e.resourceId,c=e.currentUserId,l=void 0===c?"":c,s=e.showCommentInput,u=e.inputPlaceholder,d=e.customHeader,p=e.customFooter,h=e.customCommentClosed,v=e.onCommentChange,g=e.commentType,O=void 0===g?"abstract_comment":g,j=e.onLoad,y=e.onInputShowTips,C=Object(f.useState)([]),w=qe()(C,2),x=w[0],k=w[1],S=Object(f.useContext)(Zt),R=S.fetcher,A=S.data,I=S.dispatch,T=Object(tt.j)(A),N=Object(tt.d)(v),B=Object(tt.d)((function(){R("/api/v4/comment_v5/".concat(r,"s/").concat(i,"/").concat(O)).then((function(e){return I({type:Qt,payload:e})}))}));Object(f.useEffect)(B,[B]),Object(f.useEffect)((function(){var e=Object(nt.a)("base/onMessage").listen((function(e){var t=e.type,n=e.data;if("comment/listChange"===t){var a=n.status;n.resourceType===r&&String(n.resourceId)===String(i)&&(B(),N(a))}}));return function(){return e()}}),[]);var z=1===(null==A||null===(t=A.commentStatus)||void 0===t?void 0:t.type);if(Object(f.useEffect)((function(){z||Object(dt.loadScript)("https://unpkg.zhimg.com/@cfe/emoticon@1.2.3/lib/emoticon.js").then((function(){return window.zh_emoticon?window.zh_emoticon.reduce((function(e,t){var n;return[].concat(Xe()(e),Xe()(null!==(n=t.stickers)&&void 0!==n?n:[]))}),[]):[]})).then(k)}),[z]),Object(f.useEffect)((function(){!T&&A&&(null==j||j())}),[T,A,j]),!A)return null;var L=A.counts,P=(L=void 0===L?{}:L).totalCounts,M=A.data,_=void 0===M?[]:M,D=A.editStatus,F=A.commentStatus,U=void 0===F?{}:F;if(z)return h||null;var V=P>0?Object(at.cnNiceNumber)(P):"";return Object(b.c)(m.Flex,{className:n,css:{margin:"0 16px 40px",flexDirection:"column"},children:[d?d(V):Object(b.b)(m.Box,{color:"GBK02A",css:{fontSize:"15px",fontWeight:500,marginBottom:"16px"},children:"评论 ".concat(V)}),s&&Object(b.b)(ln,{commentStatus:U,inputPlaceholder:u,emoticons:x,currentUserId:l,onInputShowTips:y}),_.map((function(e,t){return Object(b.b)(_n,{comment:e,editStatus:D,showLevelInfo:a,showInteractions:o,emoticons:x,index:t},e.id)})),_.length>0&&Object(b.b)(an,{module:"CommentList",children:Object(b.b)(en,{as:m.Flex,css:function(e){return{marginTop:"20px",color:e.colors.GBK06A,fontSize:"13px",width:"100%",justifyContent:"center",lineHeight:"normal",alignItems:"center"}},onClick:function(e){return E.a.trackEvent(e.target,{id:1204,action:"OpenUrl",element_name:"ViewAll"})},children:p?p(V):Object(b.c)(b.a,{children:[Object(b.b)("span",{css:{height:"18px"},children:"查看全部评论"}),Object(b.b)(lt.a,{size:18,center:!0,css:function(e){return{color:e.colors.GBK06A,marginLeft:"4px"}}})]})})})]})};Dn.propTypes={className:g.a.string,showCommentInput:g.a.bool,showLevelInfo:g.a.bool.isRequired,showSecondaryComment:g.a.bool,showSecondaryCommentButton:g.a.bool,listHeight:g.a.number,maskTransparent:g.a.bool,commentUnfoldable:g.a.bool,resourceType:g.a.string.isRequired,resourceId:g.a.string.isRequired,currentUserId:g.a.string,inputPlaceholder:g.a.string,redirectUrl:g.a.string,customHeader:g.a.func,customFooter:g.a.func,onCommentChange:g.a.func,onLoad:g.a.func,onInputShowTips:g.a.func,commentType:g.a.string,showInteractions:g.a.bool},Dn.defaultProps={showLevelInfo:!1,showInteractions:!0,showCommentInput:!0,showSecondaryComment:!0,showSecondaryCommentButton:!0,commentUnfoldable:!1,onCommentChange:et.a};var Fn=Object(f.forwardRef)((function(e,t){return Object(b.b)(Xt,Object.assign(Object.assign({},e),{},{children:Object(b.b)(st.b,{block:"Comment",children:Object(b.b)(Dn,Object.assign(Object.assign({},e),{},{ref:t}))})}))})),Un=n(501),Vn=n(1106),Gn=Object(w.withRouter)(Object(y.connect)(null,{loadComments:Un.e})((function(e){var t=Object(f.useState)([]),n=Object(a.a)(t,2),o=n[0],r=n[1],i=Object(ge.o)(),c=e.parent,l=c.type,s=c.id,u=c.question,d=e.loadComments,p=e.location.pathname,h=-1!==(null==p?void 0:p.indexOf("answer")),m=-1!==(null==p?void 0:p.indexOf("question")),v=Object(y.useSelector)((function(e){return Object(ge.j)(e,{type:h?"answer":m?"question":"",id:s||(null==u?void 0:u.id)})}));if(Object(f.useEffect)((function(){d(l,s).then((function(e){var t=e.payload;r(t.data)}))}),[s,l,d]),null==o||!o.length)return null;var g=function(e,t){e&&e.stopPropagation(),ae.D&&i||("zvideo"===l?Object($.e)(Object(we.a)({type:l,id:s},{launch_button:t})):v?location.href="zhihu://".concat(l,"/").concat(s,"?utm_app_name=zhihu_check"):Object($.e)(Object(we.a)({type:l,id:s},{launch_button:t})),e.preventDefault())};return Object(b.b)("div",{className:"CommentsForOia",children:Object(b.b)(Fn,{css:{margin:0},showInteractions:!1,resourceType:l,resourceId:String(s),showCommentInput:!1,openInApp:function(e){return g(e,Vn.b.comment_list)},customHeader:function(){return null},customFooter:function(e){return e<=2||ae.D?null:Object(b.b)(N.c,{color:"blue",preset:"primary",onClick:function(e){return g(e,Vn.b.comment_more)},children:"打开 App 查看更多评论"})}})})}))),qn=n(1426),Hn=n(1023),Kn=n(96),Wn=n(151),Zn=n(1288),Qn=n.n(Zn),Yn=n(1408),Jn=n.n(Yn),Xn=n(1629),$n=n.n(Xn),ea=n(2284),ta=n.n(ea),na={answerAdmireCouldOpen:{image:Jn.a,title:"开启「赞赏」权益",content:"你已经获得了「赞赏」权益，使用「赞赏」可以得到更多收益。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/reward/community",detailViewName:"admire",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},answerAdmireCouldUse:{image:Jn.a,title:"使用「赞赏」权益",content:"你可以为这篇内容开启「赞赏」。「赞赏」开启后，读者将可以付费支持你的创作。",buttonText:"开启赞赏",detailViewName:"admire",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},promotionCouldOpen:{image:ta.a,title:"开启「自定义推广」权益",content:"你已经获得了「自定义推广」权益，使用「自定义推广」可以让内容得到更多展示机会。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},promotionCouldUse:{image:ta.a,title:"使用「自定义推广」权益",content:"你可以使用「自定义推广」权益，使这篇内容获得更多展示机会。快去使用权益吧。",buttonText:"立即使用权益",buttonLink:"https://www.zhihu.com/creator/custom-promotion",detailViewName:"promotion",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929},recommendationCouldOpen:{image:$n.a,title:"开启「内容自荐」权益",content:"你已经获得了「内容自荐」权益，优质内容通过自荐后可以展示给更多人。快去开启权益吧。",buttonText:"立即开启",buttonLink:"https://www.zhihu.com/creator/recommend",detailViewName:"recommend",cardShowId:4922,buttonClickId:4924,readAlwaysId:4926,readNextId:4928},recommendationCouldUse:{image:$n.a,title:"使用「内容自荐」权益",content:"你可以使用「内容自荐」权益，让更多人看到这篇内容。快去使用权益吧。",buttonText:"立即自荐",detailViewName:"recommend",cardShowId:4923,buttonClickId:4925,readAlwaysId:4927,readNextId:4929}};var aa=function(e){var t=e.notification,n=void 0===t?{}:t,a=e.className,o=e.onRead,r=e.onUseAdmire,i=e.onUseRecommend,c=Object.keys(n).find((function(e){return n[e]})),l=na[c]||{},s=l.title,u=l.image,d=l.content,p=l.buttonText,h=l.buttonLink,m=l.detailViewName,v=l.cardShowId,g=l.buttonClickId,O=l.readAlwaysId,y=l.readNextId;return Object(f.useEffect)((function(){c&&E.a.trackCardShow(null,{id:v,name:m})}),[c,v,m]),Object(b.b)(Kn.b,{className:j()("CreatorRightsNotification",a),onClose:function(){o("next"),E.a.trackEvent(null,{id:y,name:m})},children:c&&Object(b.c)(f.Fragment,{children:[Object(b.b)("img",{className:"CreatorRightsNotification-background",src:Qn.a,alt:"blue background"}),Object(b.b)("img",{className:"CreatorRightsNotification-liukanshan",src:u,alt:"liukanshan image"}),Object(b.b)("div",{className:"CreatorRightsNotification-title",children:s}),Object(b.b)("div",{className:"CreatorRightsNotification-content",children:d}),Object(b.c)(Kn.a,{className:"CreatorRightsNotification-buttonGroup",children:[h?Object(b.b)(Wn.a,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",to:h,target:"_blank",onClick:function(){o("current"),E.a.trackEvent(null,{id:g,name:m})},children:p}):Object(b.b)(N.c,{className:"CreatorRightsNotification-button",preset:"primary",color:"blue",onClick:function(){o("current"),E.a.trackEvent(null,{id:g,name:m}),"answerAdmireCouldUse"===c&&r(),"recommendationCouldUse"===c&&i()},children:p}),Object(b.b)(N.c,{className:"CreatorRightsNotification-dismiss",preset:"plain",color:"grey",onClick:function(){o("always"),E.a.trackEvent(null,{id:O,name:m})},children:"不再提醒"})]})]})})},oa=n(1123),ra=n(1758),ia=n(1230),ca=n(922),la=n(962),sa=n(966),ua=n(960),da=n(298),ba=n(1659),fa=n(1474),pa=n(945),ha=n(1661),ma=n(301),va=n(1082),ga={up:1,neutral:0,down:-1};function Oa(e){var t=e.id,n=e.voteupCount,a=e.voting,o=e.isOwner,r=e.answer,i=e.currentUser,c=e.disabled,l=Object(y.useDispatch)();Object(f.useEffect)((function(){!c&&i&&l(Object(ma.b)(["opposeRight"]))}),[c,i,l]);var s=Object(y.useSelector)((function(e){var t=e.entities.questions[r.question.id];return null==t?void 0:t.voteDownReason})),u=Object(y.useSelector)((function(e){return Object(ma.d)(e)})),d=Object(f.useCallback)((function(e){l(Object(le.K)(r.id,ga[e],{zVideoId:t}))}),[t,l,r.id]);return Object(b.b)(va.a,{type:"zvideo",isShowVoteDownMenu:Boolean(!c&&i)&&u,count:n,voting:a,onVote:d,isOwner:o,voteDownReason:s,onLoadVoteDownReason:function(){l(Object(le.j)(r.id,r.question.id))},onSelectVoteDownReason:function(e){l(Object(le.C)(r.id,e.reasonId)).then((function(e){l(Object(me.h)(e.payload.message))}))},onSetVoteDownReason:function(e){l(Object(ma.e)(e))}})}var ja=n(973);function ya(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var Ca=function(e){Object(l.a)(n,e);var t=ya(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.activateReward;return Object(b.c)("div",{className:"Reward",children:[Object(b.b)("button",{className:"Reward-activateBtn",onClick:e,children:"开启赞赏"}),Object(b.b)("div",{className:"Reward-activateHint",children:"赞赏开启后，读者将可以付费支持你的创作。"})]})}}]),n}(f.Component);function wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}Ca.propTypes={activateReward:g.a.func};var xa=function(e){Object(l.a)(n,e);var t=wa(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.totalMoney,n=e.showRewarders;return Object(b.b)("div",{children:Boolean(t)&&Object(b.b)("div",{className:"Reward-money",children:Object(b.c)("span",{onClick:n,role:"button",tabIndex:0,children:["¥ ",t.toFixed(2)]})})})}}]),n}(f.Component);xa.propTypes={totalMoney:g.a.number,showRewarders:g.a.func};var ka=n(1331);function Sa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var Ra=function(e){Object(l.a)(n,e);var t=Sa(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.modalShown,n=e.onLoad,a=e.items,o=e.voteupCount,r=e.isRewardList,i=e.onClose,c=e.notice;return Object(b.b)(D.b,{size:"fullPage",onClose:i,children:t&&Object(b.b)(ka.a,{items:a,text:"赞赏了",isFetching:!1,isDrained:!1,voteupCount:o,onLoad:n,isRewardList:r,notice:c,type:"rewardPeople"})})}}]),n}(f.Component);Ra.propTypes={onLoad:g.a.func,modalShown:g.a.bool};var Aa=n(45);function Ia(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var Ta=function(e){Object(l.a)(n,e);var t=Ia(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hoverName:""},e.hoverUser=function(t){e.setState({hoverName:t.target.dataset.name})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,a=t.handleListShown,o=t.rewardMemberCount,r=t.onUserClick,i=this.state.hoverName,c=n.slice(0,5);return Object(b.c)("div",{className:"Reward-count",children:[Object(b.b)("p",{className:"Reward-User-text",onClick:a,children:"".concat(Object(at.formatNumber)(o)," 人已赞赏")}),Object(b.c)("div",{children:[c.map((function(t,n){return Object(b.b)(w.Link,{to:"//".concat(Aa.a.wwwHost,"/").concat(t.userType,"/").concat(t.urlToken),className:"Reward-User-img","data-hover-title":i,target:"_blank",onClick:r,children:Object(b.b)("img",{src:t.avatarUrl,className:"Reward-User-avatar","data-name":t.name,"data-index":n,onMouseOver:e.hoverUser,alt:"赞赏用户"})},n)})),o>6&&Object(b.c)("span",{className:"Reward-MoreUser",onClick:a,children:[Object(b.b)("i",{}),Object(b.b)("i",{}),Object(b.b)("i",{})]})]})]})}}]),n}(f.Component);Ta.propTypes={users:g.a.array,handleListShown:g.a.func,rewardMemberCount:g.a.number,onUserClick:g.a.func},Ta.defaultProps={users:[]};var Ea=Object(te.b)({module:"UserList",moduleName:"*** 人已赞赏"})(Ta);function Na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var Ba=function(e){Object(l.a)(n,e);var t=Na(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.rewardMemberCount,n=e.handleListShown,a=e.isAuthor,o=e.users,r=e.onUserClick;return t?Object(b.b)(Ea,{users:o,onUserClick:r,handleListShown:n,rewardMemberCount:t}):Object(b.b)("div",{className:"Reward-countZero",children:a?null:"还没有人赞赏，快来当第一个赞赏的人吧！"})}}]),n}(f.Component);function za(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}Ba.propTypes={rewardMemberCount:g.a.number,handleListShown:g.a.func,isAuthor:g.a.bool,users:g.a.array,onUserClick:g.a.func};var La=function(e){Object(l.a)(n,e);var t=za(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tagline,n=e.onClick;return Object(b.c)("div",{children:[Object(b.b)("div",{className:"Reward-tagline",children:t||ae.p}),Object(b.b)("button",{className:"Reward-rewardBtn",onClick:n,children:"赞赏"})]})}}]),n}(f.Component);function Pa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}La.propTypes={onClick:g.a.func,tagline:g.a.string};var Ma=function(){return n.e(75).then(n.bind(null,2888)).then((function(e){return e.TipjarDialog}))},_a=function(e){Object(l.a)(n,e);var t=Pa(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={TipjarRender:!1,modalShown:!1},e.onSubmitReward=function(t){M.a.set("isRewardable",!0),e.updateReward(t)},e.onPaySuccess=function(){var t=e.props,n=t.reward,a=t.currentUser,o=t.id,r=t.type,i=n[r][o].users,c=[a];Array.isArray(i)&&(i.push(a),c=i),e.props.onRewardSuccess(c,o,r),e.colseTijarDialog(),e.props.showNotification("你已赞赏成功！")},e.onLoad=function(t){"article"===e.props.type?"normal"===t?e.onLoadArticleRewardUser():e.onLoadArticleRewardUserDetails():e.onLoadRewardUser()},e.onLoadArticleRewardUser=function(){var t=e.props.id;e.props.getArticleRewardUser(t)},e.onLoadArticleRewardUserDetails=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getPagingArticleRewardUserDetails(n):e.props.getPagingArticleRewardUser(n)},e.onLoadRewardUser=function(){var t=e.props,n=t.id;t.isAuthor?e.props.getRewardUserDetails(e.props.id):e.props.getRewardUser(n).then((function(t){var n=t.payload.data;if(n.length>0){var a={};n.forEach((function(e){a[e.urlToken]=e})),e.props.updateEntitiesUsers(a)}}))},e.handleListShown=function(t){var n=e.props.onRewardUserMoreClick;n&&n(t),e.setState({modalShown:!0})},e.handleListHide=function(){e.setState({modalShown:!1})},e.updateReward=function(t){var n=e.props,a=n.type,o=n.id,r=n.rewardInfo.canOpenReward;if("article"===a){var i=!!r||void 0;e.props.updateArticleReward(o,t,i)}else e.props.updateAnswerReward(o,t)},e.activateReward=function(){e.onSubmitReward(ae.p)},e.showRewarders=function(){e.setState({modalShown:!0})},e.addReward=e.props.authRequired((function(t,n){var a=e.props,o=a.id;"article"===a.type?e.props.createArticleTipjar(o,t):e.props.createTipjar(o,t,n)}),void 0,me.b),e.handleRewardButtonClick=function(t){var n=e.props.onRewardButtonClick;n&&n(t),e.setState({TipjarRender:!0})},e.colseTijarDialog=function(){e.setState({TipjarRender:!1})},e.removeTradeNumber=function(){var t=e.props,n=t.id,a=t.type;e.props.removeTradeNumber(n,a)},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.rewardInfo;e&&e.isRewardable&&this.onLoad("normal"),this.props.imperativeRef&&(this.props.imperativeRef.current={activateReward:this.activateReward.bind(this)})}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.isAuthor,a=e.isMobile,o=e.id,r=e.reward,i=e.author,c=e.type,l=e.ua,s=e.rewardInfo,u=s.canOpenReward,d=s.isRewardable,f=s.tagline,p=s.rewardTotalMoney,h=s.rewardMemberCount,m=e.onRewardUserClick,v=e.balanceEnable;if(n&&t&&"organization"===t.userType)return null;var g=this.state,O=g.TipjarRender,j=g.modalShown;if(n&&u)return Object(b.b)("div",{children:Object(b.b)(Ca,{activateReward:this.activateReward})});if(d){var y=r&&r[c][o]||{},C=y.tradeNumber,w=y.users,x=y.notice,k=Object(b.b)(Ra,{modalShown:j,items:w,voteupCount:h,onLoad:this.onLoad,isRewardList:n,notice:x,onClose:this.handleListHide}),S=Object(b.b)(Ba,{rewardMemberCount:h,handleListShown:this.handleListShown,onUserClick:m,users:w,isAuthor:n});if(!n)return Object(b.c)("div",{className:"Reward",children:[Object(b.b)(La,{tagline:f,onClick:this.handleRewardButtonClick}),S,k,Object(b.b)(_.a,{getComponent:Ma,author:i,tagline:f,isMobile:a,ua:l,addReward:this.addReward,colseTijarDialog:this.colseTijarDialog,tradeNumber:C,removeTradeNumber:this.removeTradeNumber,onPaySuccess:this.onPaySuccess,TipjarRender:O,type:c,balanceEnable:v})]});var R=(Number(p)||0)/100;return Object(b.c)("div",{className:"Reward",children:[Object(b.b)(xa,{tagline:f,totalMoney:R,showRewarders:this.showRewarders}),k,S]})}return null}}]),n}(f.Component);_a.propTypes={reward:g.a.object,isAuthor:g.a.bool,author:g.a.object,id:g.a.number,rewardInfo:g.a.object,currentUser:g.a.object,ua:g.a.object,type:g.a.string,isMobile:g.a.bool,balanceEnable:g.a.bool,onRewardButtonClick:g.a.func,onRewardUserClick:g.a.func,onRewardUserMoreClick:g.a.func},_a.defaultProps={rewardInfo:{},type:"answer",balanceEnable:!0};var Da=Object(h.compose)(oe.a,Object(y.connect)(null,{updateAnswerReward:le.H,updateArticleReward:ve.l,createArticleTipjar:ve.b,getRewardUserDetails:ve.i,getPagingArticleRewardUser:ve.f,getPagingArticleRewardUserDetails:ve.g,getArticleRewardUser:ve.e,updateEntitiesUsers:ve.m,getRewardUser:ve.h,createTipjar:ve.c,removeTradeNumber:ve.k,onRewardSuccess:ve.j,showNotification:me.h}))(_a),Fa=n(972),Ua=n(12),Va=Object.assign;function Ga(e){return p.a.createElement(Ua.a,Va(Va({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowTurnRight24","data-old-api":"Jump"},e),{className:"Zi Zi--Jump"+(e.className?" ".concat(e.className):"")}),p.a.createElement("path",{d:"M14.528 4.47a.75.75 0 10-1.06 1.06l4.723 4.72H10c-2.125 0-3.699.54-4.643 2.114-.87 1.45-1.107 3.651-1.107 6.636a.75.75 0 001.5 0c0-3.015.263-4.814.893-5.864C7.2 12.21 8.125 11.75 10 11.75h8.187l-4.717 4.718a.75.75 0 101.06 1.06l6-6a.75.75 0 00-.008-1.068l-5.994-5.99z",fillRule:"evenodd",clipRule:"evenodd"}))}var qa=function(e){var t=e.className,n=e.commercial;if(!(n&&n.tail&&n.tail.url&&n.tail.message))return null;var a=n.tail,o=a.url,r=a.message;return Object(b.c)("a",{className:j()("CommercialQuestionTail",t),href:o,children:[r,Object(b.b)(Ga,{className:"CommercialQuestionTail-Icon",center:!0,text:!0})]})},Ha=n(1159),Ka=n(1232),Wa=n(42),Za=n.n(Wa),Qa=n(84),Ya=n.n(Qa),Ja=n(197),Xa=n.n(Ja),$a=n(461),eo=n(983),to=n(86),no=n(49);function ao(e,t){return e.length<=t?e:"".concat(e.substring(0,t),"...")}function oo(e){var t=e.logoUrl,n=e.productName,a=e.productDesc,o=e.link,r=void 0===o?"":o,i=e.btnText,c=void 0===i?"":i,l=e.className,s=void 0===l?"":l,u=e.productNameMaxLength,d=void 0===u?6:u,b=e.productDescMaxLength,f=void 0===b?15:b,h=e.btnTextMaxLength,m=void 0===h?4:h,v=e.type,g="".concat("pc"===v?"pc":"app","_EAnswerCard");return p.a.createElement("a",{ref:e.cardRef,onClick:e.onClick,href:r,target:"_blank",className:j()("".concat(g),s)},p.a.createElement(st.e,{zaType:"Card",zaBlock:"advertPluginCard"}),p.a.createElement("img",{src:t,className:"".concat(g,"-image"),alt:"logo"}),p.a.createElement("div",{className:"".concat(g,"-content")},p.a.createElement("div",{className:j()("".concat(g,"-content-appName")),style:{WebkitBoxOrient:"vertical",maxWidth:"".concat(d+1,"em")}},ao(n,d)),a&&p.a.createElement("div",{className:"".concat(g,"-content-desc"),style:{maxWidth:"".concat(f+1,"em")}},ao(a,f))),p.a.createElement("div",{className:"".concat(g,"-button"),style:{maxWidth:"".concat(m+1,"em")},onClick:e.onBtnClick},ao(c,m)),"app"===v&&p.a.createElement("div",{className:"app_EAnswerCard-bottom-close",onClick:function(t){return function(e,t){e.stopPropagation(),e.preventDefault(),t.onClose()}(t,e)}},"×"))}var ro=n(502),io=function(e){function t(e){var n;return ze()(this,t),(n=Fe()(this,Ve()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,E.a.trackCardShow(e,{id:5642}),Object($a.h)(e,{trackMethod:$a.i,tracks:t}))},n.addDSCListener=function(){try{var e=n.props.data.pluginType;if(/^android/i.test(e)){n.appPromotionUrl=null,n.downloadInfo=null,n.landingUrl=Object(no.e)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".landingUrl"),"");var t=Object(no.e)(n.props.data,"plugin.".concat(e,".plugin.").concat(e,".downloadInfo"),"{}"),a=Object(no.e)(JSON.parse(t.adjson||"{}"),"ads[0].creatives[0].asset.app_promotion_url","");a&&(ro.a({app_promotion_url:n.appPromotionUrl},"ad/getDownloadStatus").then((function(e){var t=e.status,a=e.data;t||console.log("下载插件 ad/getDownloadStatus 调用失败！"),n.setState({status:a.status})})).catch(console.log),n.appPromotionUrl||nt.a.listen("ad/downloadStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,a=void 0===t?"error":t;n.setState({status:a})}))),n.appPromotionUrl=a,n.downloadInfo=t}}catch(e){console.log(e)}},n.onBtnClick=function(e){"pc"!==Object(no.h)().os&&n.appPromotionUrl&&n.downloadInfo&&(e.stopPropagation(),e.preventDefault(),n.sendClickTrack(),ro.a(n.downloadInfo,"ad/downloadApk"))},n.sendClickTrack=function(){E.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object($a.a)({trackMethod:$a.i,tracks:n.track.click})},n.handleClick=function(e){e.stopPropagation(),n.sendClickTrack(),"pc"!==Object(no.h)().os&&n.landingUrl&&n.downloadInfo&&(e.preventDefault(),ro.a(n.downloadInfo,"ad/open"))},n.sessionId=Xa()(),n.init(e),n.viewShow=!1,n.state={status:"ready"},n}return _e()(t,e),Pe()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,a=t.suger,o=void 0===a?"":a,r=(n[t.pluginType]||{}).trackUrl,i=void 0===r?{}:r,c=Object(no.h)(),l={xSuger:o,sessionId:this.sessionId,os:c.os,cardType:"".concat(c.os,"_download")};this.track=Object(no.u)(i,l)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(no.h)();E.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_download")}),e&&this.onceViewTrack(this.card,this.track.view),this.addDSCListener()}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,a=void 0===n?{}:n,o=t.plugin,r=t.className,i=void 0===r?"":r,c=t.pluginType,l=(o[c]||{}).plugin,s=(void 0===l?{}:l)[c],u=Object(no.h)(),d=this.state.status,b=void 0===d?"ready":d,f={className:i,type:"pc"===u.os?"pc":"app",btnText:s.interaction||"立即下载",onClick:this.handleClick,productNameMaxLength:13,productDescMaxLength:15,btnTextMaxLength:4,onClose:this.props.onClose};return/^ios/i.test(c)?(f.logoUrl=s.icon,f.productName=s.name,s.score>0&&(f.productDesc="Appstore 评分：".concat(s.score)),f.link=s.landingUrl):/^android/i.test(c)&&(f.logoUrl=s.icon||a.avatarUrl||"",f.productName=s.name,f.link=s.landingUrl,f.onBtnClick=this.onBtnClick,to.d[b]&&(f.btnText=to.d[b])),f.link?p.a.createElement(st.c,Za()({as:oo,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},f)):null}}]),t}(p.a.Component);io.propTypes={data:g.a.object.isRequired};var co=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?p.a.createElement(eo.a,null,p.a.createElement(io,e)):null},lo=function(e){function t(e){var n;return ze()(this,t),(n=Fe()(this,Ve()(t).call(this,e))).onceViewTrack=function(e,t){n.viewShow||(n.viewShow=!0,E.a.trackCardShow(n.card,{id:5642}),Object($a.h)(e,{trackMethod:$a.i,tracks:t}))},n.handleClick=function(e){e.stopPropagation(),E.a.trackEvent(n.card,{id:5641,action:"OpenUrl"}),Object($a.a)({trackMethod:$a.i,tracks:n.track.click});var t=Object(no.e)(n.props.data,"plugin.leads.plugin.leads",{}),a=n.props.data,o=a.contentType,r=a.contentToken;t.isCanvas&&(e.preventDefault(),t.creativeId=Object(no.g)(),ro.a(t,"ad/openForm"));var i=t.cardType,c=t.hashId;if("message"===i){e.preventDefault();var l={inbox_id:c,initial_message:"",auto_focus:!0,title:"",source_type:o,source_id:r};ro.a(l,"base/openInbox")}},n.isHiddenEcommerceAd=function(e){return!(!e.isCanvas||e.adjson)||!(e.isCanvas||e.token||e.landingUrl)},n.sessionId=Xa()(),n.init(e),n.viewShow=!1,n}return _e()(t,e),Pe()(t,[{key:"init",value:function(e){var t=e.data,n=t.plugin,a=t.suger,o=void 0===a?"":a,r=t.pluginType,i=Object(no.e)(e.data,"plugin.leads.plugin.leads",{}).cardType,c=(n[r]||{}).trackUrl,l=void 0===c?{}:c,s=Object(no.h)().os,u={xSuger:o,sessionId:this.sessionId,os:s,cardType:i};this.track=Object(no.u)(l,u)}},{key:"componentDidMount",value:function(){var e=this.props.data.visible,t=Object(no.h)();E.a.setModule(this.card,{module:"Content",module_name:"".concat(t.os,"_leads")}),e&&this.onceViewTrack(this.card,this.track.view);var n=Object(no.e)(this.props.data,"plugin.leads.plugin.leads",{}),a=n.isCanvas,o=n.adjson;a&&ro.a({adjson:o},"ad/preload")}},{key:"componentWillReceiveProps",value:function(e){e.data.visible&&this.onceViewTrack(this.card,this.track.view)}},{key:"render",value:function(){var e=this,t=this.props.data,n=t.author,a=void 0===n?{}:n,o=t.plugin,r=void 0===o?{}:o,i=t.className,c=void 0===i?"":i,l=t.pluginType,s=Object(no.e)(r,"".concat(l,".plugin.").concat(l),{});return this.isHiddenEcommerceAd(s)?null:p.a.createElement(st.c,Za()({as:oo,shouldTrackClick:!0,zaType:"Card",zaAction:"OpenUrl",zaBlock:"advertPluginCard",cardRef:function(t){e.card=t}},{className:c,type:"app",logoUrl:a.avatarUrl,productName:a.name,productNameMaxLength:13,productDesc:s.desc,productDescMaxLength:15,link:s.landingUrl||"javascript:",btnText:s.interaction||"立即咨询",btnTextMaxLength:4,onClick:this.handleClick,onClose:this.props.onClose}))}}]),t}(p.a.Component);lo.propTypes={data:g.a.object.isRequired};var so=function(e){var t=e.data;return t&&t.plugin&&t.plugin[t.pluginType]?p.a.createElement(eo.a,null,p.a.createElement(lo,e)):null},uo=function(e){function t(){var e,n;ze()(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Fe()(this,(e=Ve()(t)).call.apply(e,[this].concat(o)))).state={display:!1},n.onClose=function(){n.setState({display:!0})},n.getContent=function(e){var t=e.data;if(!t||!t.plugin)return null;var a=(t=Object(no.b)(Object(de.camelizeKeys)(t))).plugin,o=Object(no.h)();if(a.androidDownload||a.iosDownload){var r="".concat(o.os,"Download");if("pc"===o.os)r=("mac"===o.pc?["iosDownload","androidDownload"]:["androidDownload","iosDownload"]).find((function(e){return a[e]}))||"";return p.a.createElement(co,Za()({},e,{data:Ya()({},t,{pluginType:r}),onClose:n.onClose}))}return a.leads&&"pc"!==o.os?p.a.createElement(so,Za()({},e,{data:Ya()({},t,{pluginType:"leads"}),onClose:n.onClose})):null},n}return _e()(t,e),Pe()(t,[{key:"render",value:function(){var e=this.props.data,t=this.state.display;return e&&e.plugin&&!t?p.a.createElement(p.a.Fragment,null,this.getContent({data:e})):null}}]),t}(p.a.Component),bo=n(438),fo=n(610);function po(e){var t=e.loadBrandContentPlugin,n=e.contentType,a=e.contentToken,o=e.author,r=e.plugin,i=Object(f.useCallback)((function(){t(n,a)}),[n,a,t]),c="organization"===o.userType&&!r;if(Object(f.useEffect)((function(){c&&i()}),[c,i]),!r)return null;var l={contentType:n,contentToken:a,suger:{},author:o,plugin:r,visible:!0};return Object(b.b)("div",{className:"OrgEquityPlugin",children:Object(b.b)(uo,{data:l})})}po.propTypes={contentType:g.a.oneOf(["answer","article"]).isRequired,contentToken:g.a.oneOfType([g.a.number,g.a.string]).isRequired,author:g.a.object.isRequired};var ho=Object(h.compose)(Object(bo.a)(null),Object(y.connect)((function(e,t){var n=t.contentType,a=t.contentToken;return{plugin:Object(fo.c)(e,{contentType:n,contentToken:a})}}),{loadBrandContentPlugin:fo.b}))(po),mo=n(1301),vo=n(1149),go=n(1327),Oo=[{title:"知乎",imageSrc:"https://pic4.zhimg.com/80/v2-88158afcff1e7f4b8b00a1ba81171b61_720w.png",description:"有问题，就会有回答",button:"打开"},{title:"浏览器",imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",description:"",button:"继续"}],jo={uc:{imageSrc:"https://pic4.zhimg.com/80/v2-eb129ee601fe0521fbc05703a615ddd5_1440w.png",title:"UC 浏览器"},qq:{imageSrc:"https://pic1.zhimg.com/80/v2-211dd15e1000c599f5b89ecf4e1eb3b6_1440w.png",title:"QQ 浏览器"},wx:{imageSrc:"https://pic1.zhimg.com/80/v2-05fe05b84411fc88790189e95d7e84aa_1440w.png",title:"微信"},huawei:{imageSrc:"https://pic1.zhimg.com/80/v2-88a3ad0d3764917daaf92f5133a7024d_1440w.jpeg",title:"华为浏览器"},safari:{imageSrc:"https://pic2.zhimg.com/80/v2-da7d9e4b6a7ddba507299bcf5a4d0600_1440w.png",title:"Safari"},chrome:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"Chrome"},default:{imageSrc:"https://picb.zhimg.com/80/v2-a448b133c0201b59631ccfa93cb650f3_1440w.png",title:"浏览器"}},yo=function(e){var t=e.show,n=e.onCancel,a=e.onSubmit,o=e.id,r=e.type,i=Object(ut.b)(),c=i.origin.toLowerCase(),l=i.Android?jo.chrome.imageSrc:jo.safari.imageSrc,s=M.a.get("question:firstCheckedTrue");Object(f.useEffect)((function(){s&&t&&!i.Wechat&&(location.href="zhihu://".concat(r,"/").concat(o))}),[s,t,r,o,i.Wechat]);var u="";return u=i.UC?"uc":i.Wechat?"wx":i.MQQBrowser?"qq":/huawei|honor/g.test(c)?"huawei":/chrome/g.test(c)||/crios/g.test(c)?"chrome":i.Safari?"safari":"default",Oo[1].title=jo[u].title,Oo[1].imageSrc="default"===u?l:jo[u].imageSrc,Object(b.c)(go.a,{className:"ModalWrap",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:[t&&Object(b.b)(vo.a,{className:"ModalWrap-body"}),Object(b.c)("div",{className:"ModalWrap-content",children:[Object(b.b)("div",{className:"ModalWrap-title",children:"继续浏览内容"}),Oo.map((function(e,t){return Object(b.c)("div",{className:"ModalWrap-item",children:[e.imageSrc&&Object(b.b)("div",{className:"ModalWrap-itemImg",children:Object(b.b)("img",{src:e.imageSrc,alt:""})}),Object(b.c)("div",{className:"ModalWrap-itemContent",children:[Object(b.b)("div",{className:"ModalWrap-itemTitle",children:e.title}),e.description&&Object(b.b)("div",{className:"ModalWrap-itemDesc",children:e.description})]}),Object(b.b)("div",{className:"ModalWrap-itemBtn",role:"button",tabIndex:0,onClick:function(){return function(e){0===e?(M.a.set("question:firstCheckedTrue","true"),a()):n()}(t)},children:e.button})]},t)}))]})]})},Co=function(e){var t=e.show,n=e.onCancel,a=e.onSubmit,o=Object(st.i)().trackEvent;return Object(b.b)(go.a,{className:"SkipModal",show:t,onCancel:n,hideIcon:!0,maskClosable:!1,children:t&&Object(b.c)(st.e,{zaType:"Block",zaBlock:"expandBlockModal",zaText:"展开阅读全文弹窗",children:[Object(b.b)("div",{className:"title",children:"即将打开“知乎App”继续阅读"}),Object(b.c)("div",{className:"button_container",children:[Object(b.b)(N.c,{preset:"plain",onClick:function(){o({eventType:"Click",block:"expandModal_cancel",elementLocation:{type:"Button"}}),n()},children:"取消"}),Object(b.b)(N.c,{preset:"primary",onClick:function(){o({eventType:"Click",action:"OpenUrl",block:"expandModal_open",elementLocation:{type:"Button"}}),a()},children:"打开App"})]})]})})},wo=n(490),xo=n(1003),ko=function(e){var t=e.show,n=e.children,a=e.className,o=Object(f.useRef)();return Object(f.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=Object(wo.a)(o.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),Object(b.b)("div",{className:a,children:Object(b.c)("div",{ref:o,children:[Object(b.b)("div",{className:j()({"ModalLoading-background":t})}),Object(b.c)("div",{className:j()("ModalLoading-content",{"ModalLoading-modalShow":t}),children:[n,Object(b.b)(xo.a,{})]})]})})},So=n(1489),Ro=n(1424),Ao=n(1322);function Io(e){var t=e.questionId,n=e.title,a=e.href,o=e.zaTitleId,r=e.showStickyMark,i=e.showHeightLight,c=e.onClick;return Object(b.c)("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0,children:[Object(b.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(t)}),Object(b.b)("meta",{itemProp:"name",content:n}),r&&Object(b.b)(Ao.a,{}),Object(b.b)(w.Link,Object.assign(Object.assign({to:a,target:"_blank","data-za-detail-view-element_name":"Title"},o&&{"data-za-detail-view-id":o}),{},{onClick:c,children:i?Object(b.b)("span",{dangerouslySetInnerHTML:{__html:n},className:"AnswerItem-highlight"}):n}))]})}Io.propTypes={questionId:g.a.number.isRequired,title:g.a.string.isRequired,href:g.a.string.isRequired,zaTitleId:g.a.number,showStickyMark:g.a.bool,onClick:g.a.func};var To=n(32),Eo=n(1019),No=n(1746);function Bo(e){var t=e.markInfo,n=ae.I[t.markType];if(!n)return null;var a=t.roundtable&&"https://www.zhihu.com/roundtable/".concat(t.roundtable.urlToken);return a?Object(b.b)("a",{href:a,children:n}):Object(b.b)("span",{children:n})}var zo=["id","voteupCount","markInfos","actorToken","action","concernedUpvoters"];function Lo(e){var t=e.markInfos,n=Object(f.useMemo)((function(){return t.filter((function(e){return ae.I[e.markType]})).map((function(e,t){return Object(b.c)(f.Fragment,{children:[0!==t&&"、",Object(b.b)(Bo,{markInfo:e})]},t)}))}),[t]);return n.length?Object(b.c)(Eo.CJKSpace,{children:["收录于",n]}):null}function Po(e){var t,n=e.id,a=e.voteupCount,o=e.markInfos,r=e.actorToken,i=e.action,c=e.concernedUpvoters,l=Object(To.default)(e,zo);return Object(b.b)(te.a,{trackCardShow:!0,view:{id:8257},children:Object(b.c)(m.Text,Object.assign(Object.assign({color:"GBL05A",fontSize:14,mt:"16px"},l),{},{children:[o&&Object(b.c)(b.a,{children:[Object(b.b)(Lo,{markInfos:o}),Boolean(a)&&" · "]}),Object(b.b)("span",{onClick:function(){return E.a.trackEvent(null,{id:8258,action:"Click"})},children:Object(b.b)(No.a,{id:n,type:"answer",voteupCount:a,upvotedFollowees:null!==(t=null==c?void 0:c.filter((function(e){return r!==e.urlToken})))&&void 0!==t?t:[],too:"voted"===i})})]}))})}var Mo=n(1752),_o=n(1425);var Do=function(e){var t=e.shouldExpand,n=e.showPlayer,a=e.campaign,o=e.answer,r=e.videoAnswerData,i=e.meta,c=e.videoRef,l=e.alwaysShowVolumeButton,s=!e.hideCoCreationFeature&&Object(Ie.isCoCreateRelation)(null==r?void 0:r.creationRelationship);return Object(b.c)(b.a,{children:[n&&Object(b.b)(Mo.a,Object.assign({itemId:o.id,itemType:o.type,videoRef:c,alwaysShowVolumeButton:l,shouldExpandState:t},r)),i,t&&Object(b.c)(m.Flex,{mt:"14px",children:[s&&Object(b.b)(Ie.CoCreationLabel,{mr:"12px"}),Object(b.b)(_o.a,{my:"0px"})]}),t&&a&&Object(b.b)(Ka.a,{item:Object.assign(Object.assign({},o),{},{campaign:a,collapseReason:null,type:"zvideo"})})]})},Fo=n(1728),Uo=n(1759),Vo=n(1422),Go=n(1148),qo=n(1498),Ho=n(1410),Ko=function(){return Object(b.c)("div",{className:"SelfVisibleLable-wrap",children:[Object(b.b)(Ho.a,{className:"SelfVisibleLable-lockIcon",width:16,center:!0}),"仅自己可见"]})},Wo=function(e){var t=e.answer,n=e.canCollapse,a=e.showReviewingLabel,o=t.collapsedBy,r=t.reviewInfo,i=(r=void 0===r?{}:r).isReviewing,c=r.tips,l=t.isVisible,s=t.relationship,u=(s=void 0===s?{}:s).isAuthor,d=t.visibleOnlyToAuthor;return u&&d?Object(b.b)(Ko,{}):i&&l?Object(b.b)("div",{className:"AnswerItem-status",children:c},"negativeLabels"):a&&!1===l&&u?Object(b.b)("div",{children:Object(b.b)(qo.a,{})},"negativeLabelsReviewing"):"org"!==o||n?null:Object(b.c)("div",{className:"AnswerItem-status",children:["回答被提问机构移至隐藏区（",Object(b.b)("a",{href:"/org-intro#org-question",target:"_blank",children:"为什么？"}),"）"]},"negativeLabels")},Zo=function(e){var t=e.isNormal,n=void 0===t||t,a=e.collapsedBy,o=e.suggestEdit,r=e.collapseReason,i=e.isCollapsed,c=e.question,l=(c=void 0===c?{}:c).brand,s=(l=void 0===l?{}:l).isPuQuestion;return!n&&null!=o&&o.unnormalDetails?{abnormalDetailProps:{abnormalDetail:o.unnormalDetails}}:("community"===a||s)&&i?{collapseReasonProps:{collapseReason:r}}:null},Qo=function(e){var t=e.answer,n=e.canCollapse,a=e.hideCommercialInviteLabel,o=t.collapsedBy,r=t.relevantInfo,i=(r=void 0===r?{}:r).relevantType,c=r.brandSpecialExtra,l=void 0===c?{}:c;if(Object(le.l)(t)||Object(le.m)(t)||"org"===o&&!n){if("brand_special"===i&&!a)return{type:"answer",data:l};if("brand_best"===i)return{data:l}}return null},Yo=function(e){var t=e.annotationDetail,n=e.reviewInfo,a=(n=void 0===n?{}:n).isReviewing,o=e.isNormal,r=void 0===o||o,i=e.collapsedBy;return!a&&r&&"community"!==i&&t?{annotationDetail:t}:null},Jo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.contentExpanded,a=t.unescapable,o=e.labelInfo,r=e.hermesLabel;return Object(b.b)(f.Fragment,{children:!n&&!a&&Object(b.b)(Ha.a,{labelInfo:o||r})})};n(1666);function Xo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var $o=function(e){return"plain"===e||"special-plain"===e},er=$o,tr=function(e){return"special-plain"===e},nr={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},ar=function(e){var t;if(e.videoAnswerData)return e;if(null!==(t=e.attachment)&&void 0!==t&&t.video){var n=e.attachment.video,a=n.title,o=n.subVideoId,r=n.parentVideoId,i=n.zvideoId,c={videoId:o,zvideoId:i,title:a,playCount:n.playCount,voteupCount:n.voteupCount,isComplete:!i||r===o,startTime:n.startTime,creationReferences:n.creationReferences};return Object.assign(Object.assign({},e),{},{videoAnswerData:c})}return e};function or(e){var t=Object(Vo.a)(e);return t?e.videoAnswerData&&"object"==typeof e.videoAnswerData?Object.assign(Object.assign({},e),{},{creationRelationship:t,videoAnswerData:Object.assign(Object.assign({},e.videoAnswerData),{},{creationRelationship:t})}):Object.assign(Object.assign({},e),{},{creationRelationship:t}):e}var rr=["zhi-hu-ri-bao-51-41"],ir=Object(C.createSelector)((function(e,t){return Object.assign(Object.assign({},t.answerFromProps?t.answer:e.entities.answers[t.answer.id]||t.answer),{},{videoAnswerData:t.answer.videoAnswerData})}),(function(e,t){return e.entities.questions[t.answer.question.id]}),(function(e,t){return t?Object.assign(Object.assign({},e),{},{question:Object.assign(Object.assign({},e.question),t)}):e})),cr=function(e){Object(l.a)(n,e);var t=Xo(n);function n(){var e,a,i,l,s,u,d,p;Object(r.a)(this,n);for(var h=arguments.length,v=new Array(h),g=0;g<h;g++)v[g]=arguments[g];return(e=t.call.apply(t,[this].concat(v))).state={commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,collapseModalShown:!1,favlistsShown:!1,editing:!1,commentPattern:"fixed",addAnnotationModalShown:!1,cancelAnnotationModalShown:!1,guideShown:!1,shareVideoQuery:e.getShareVideoId(),shouldShowVideoDetails:!1,contentExpanded:e.props.expanded,hasFetchedLabels:!1,showWechatExpand:!1,skipModalShow:!1,autoExpand:!1,shownLoadingBar:!1,wxIsReady:!1},e.answerFormRef=Object(f.createRef)(),e.rewardContainerRef=Object(f.createRef)(),e.richContentRef=Object(f.createRef)(),e.loadEntityWords=k()((function(){var t=e.props,n=t.answer,a=(n=void 0===n?{}:n).id;(0,t.loadAnswerEntityWords)(a)})),e.handleLoadedNext=function(){e.setState({wxIsReady:!0}),e.state.shownLoadingBar&&e.createOpenInAppHandler(e.state.autoExpand?"expand_answer2":"expand_answer1")(),e.setState({shownLoadingBar:!1})},e.showOiaModal=function(){var t=e.props,n=t.blockReading,a=t.itemProp,o=t.isBaidu,r=t.shouldAllAutoExpand;("mainEntityOfPage"===a||"acceptedAnswer"===a)&&(document.referrer.includes("zhihu.com")&&r||!o&&!document.referrer.includes("sm.cn")&&n)&&e.setState({showWechatExpand:!0,autoExpand:!0})},e.onCloseReward=function(){var t=e.props.answer.id;M.a.set("isRewardable",!1),e.props.updateAnswerReward(t,"")},e.openModal=function(t,n){e.setState(Object.assign({},n))},e.openDeleteModal=function(){setTimeout((function(){e.setState({deleteModalShown:!0})}))},e.closeModal=function(){e.setState({commentsShown:!1});var t=e.props.onCloseComment;"function"==typeof t&&t()},e.closeDeleteModal=function(){e.setState({deleteModalShown:!1})},e.disableAuth=(a=e.props,i=a.router,l=(i=void 0===i?{}:i).location,s=(l=void 0===l?{}:l).pathname,u=a.isBaidu,d=a.isMobile,p=a.currentUser,d&&!p&&!u&&!s.startsWith("/topic")),e.loadAnswerConcernedVoters=function(){var t=e.props,n=t.concernedUpvoters,a=t.answer,o=t.loadAnswerConcernedVoters,r=t.currentUser;!n&&r&&o(a.id)},e.handleExpand=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.trackUserAction,o=void 0===a||a,r=e.props,i=r.onToggleExpand,c=r.trackPromotionClick;i&&i(t),t&&e.loadAnswerConcernedVoters(),o&&t&&c&&c(),e.setState({contentExpanded:t})},e.handleReshipmentSettings=function(t){var n=e.props,a=n.answer.id,o=n.updateAnswerReshipmentSettings,r=n.fillCurrentUserIfNeeded;"need_payment"===t?Promise.resolve(r(["caEnabled"])).then((function(){e.props.currentUser.caEnabled?o(a,t):window.open("/copyright/invite")})):o(a,t)},e.handleLoadAnswerForSettings=function(){var t=e.props,n=t.answer.id;(0,t.loadAnswerForSettings)(n)},e.handleDeleteAnswer=function(){var t=e.props,n=t.answer.id;(0,t.deleteAnswer)(n)},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleCollapseModalShow=function(){e.setState({collapseModalShown:!0})},e.handleCollapseModalHide=function(){e.setState({collapseModalShown:!1})},e.handleUpdateAnswerCollapsed=function(){var t=e.props,n=t.answer,a=n.id,o=n.collapsedBy,r=t.updateAnswerCollapsed,i=t.showNotification;return"community"===o?i("该回答因违反社区规范已被管理员折叠，暂无法公开","red"):r(a)},e.handleUpdateAnswerStick=function(){var t=e.props,n=t.answer.id;return(0,t.updateAnswerStick)(n)},e.handleRestoreAnswer=function(){var t=e.props,n=t.answer,a=n.id,o=n.question;(0,t.restoreAnswer)(o.id,a)},e.setEditingState=function(t,n){"function"==typeof e.props.onEditingStateChange&&e.props.onEditingStateChange(t),e.setState({editing:t},n)},e.handleStartEditAnswer=function(){var t=e.props,n=t.draftStatus,a=t.hasPublishingDraft,o=t.isMobile,r=t.isAnswerPage,i=t.answer,c=i.id,l=i.question.id;n&&n.loading?L.a.alert("草稿正在加载中……"):a?L.a.alert("你有一份对该回答的修改正在发布中，请等待发布完成后再次修改。"):o?e.context.startAddAnswer(e.props.answer.id):r?Object(Go.d)()?Object(Go.h)(l,c):e.setEditingState(!0,(function(){var t,n;null===(t=e.answerFormRef.current)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t)})):Object(Go.h)(l,c)},e.handleCancelEditAnswer=function(){e.setEditingState(!1);var t=e.props,n=t.onCloseEditing,a=t.onCloseComment;"function"==typeof a&&a(),"function"==typeof n&&n()},e.handleSubmitAnswer=function(t){var n=e.props,a=n.answer.id,o=n.updateAnswer;return e.handleCancelEditAnswer(),o(a,t).then((function(t){return E.a.trackEvent(e.contentItem,{action:"StatusReport"},{status:{result:"Success",event:{action:"Edit"}}}),t}))},e.handleReportOpen=function(){var t=e.props.zaInfos.report;E.a.trackEvent(e.contentItem,Object.assign({action:"Report",element:"Button",is_intent:!0},t&&{id:t})),e.props.authRequired((function(){return e.setState({reportModalShown:!0})}),ae.Y.report)()},e.handleReportHide=function(){e.setState({reportModalShown:!1})},e.handleFavlistsShown=function(t){var n=e.props,a=n.shouldOia,o=n.zaInfos.favlists;E.a.trackEvent(e.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},o&&{id:o})),a?e.createOpenInAppHandler("collect_answer")(t):e.disableAuth?e.handleToggleGuide():e.props.authRequired((function(){return e.setState({favlistsShown:!0})}),ae.Y.favlists)()},e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleLogMoreClick=function(){var t=e.props.zaInfos.options;E.a.trackEvent(e.contentItem,Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))},e.handleShowAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!0})},e.handleCloseAddAnnotationModal=function(){return e.setState({addAnnotationModalShown:!1})},e.handleShowCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!0})},e.handleCloseCancelAnnotationModal=function(){return e.setState({cancelAnnotationModalShown:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.handleClickVideoMoreButton=function(){e.setState({shouldShowVideoDetails:!1})},e.startEditing=function(){var t=e.props,n=t.isAuthor,a=t.editable;t.currentUser&&n&&a&&e.handleStartEditAnswer()},e.addRewardTagline=function(t){var n=e.props.answer.id;Object(ve.a)(t,n)},e.createOpenInAppHandler=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=e.props,o=a.answer,r=o.type,i=o.id,l=a.blockReading,s=a.isSpecialQuestionOrAnswer;return function(a,o){if(a&&a.preventDefault(),!ae.D)if(l&&E.a.trackEvent(Object(c.a)(e),{id:5550,action:"Click"},{button:{text:"openapp"}}),s)location.href="zhihu://".concat(r,"/").concat(i,"?utm_app_name=zhihu_check");else{var u=Vn.a[o]||Vn.a[t],d=Object.assign(Object.assign({},l&&{yyb_ckey:"CK1430255776739"}),{},{preventToOIA:n});Vn.b[u]&&(d.launch_button=Vn.b[u]),Object($.e)(Object(we.a)({type:r,id:i}),d)}}},e.renderLabels=function(){var t=e.props.answer,n=t.isNormal;if((void 0===n||n)&&e.isPaidAnswer)return{labels:[],editingLabels:[]};var a=e.props,o=a.useNewLabels,r=a.canCollapse,i=a.relatedTo,c=a.showReviewingLabel,l=a.hideCommercialInviteLabel,s=e.state,u=s.contentExpanded,d=s.editing,f=Wo({answer:t,canCollapse:r,showReviewingLabel:c}),p=Zo(t),h=Qo({answer:t,canCollapse:r,hideCommercialInviteLabel:l}),m=Yo(t);if(!o){var v=Object(b.b)(Ka.a,Object.assign(Object.assign({useOldLabels:!0,item:{isLabeled:!0}},p),{},{commercialProps:h,annotationProps:m,showLegacyPositiveLabel:Object(le.m)(t),editing:d}));return{labels:[f,v],editingLabels:[v]}}if(f||p)return{labels:[f,Object(b.b)(Ka.a,Object.assign({item:{isLabeled:!0}},p),"labels")],editingLabels:[]};var g=[Object(b.b)(Ka.a,{item:t,commercialProps:h,annotationProps:m,editing:d},"labels")];return{labels:u||i?g:[],editingLabels:g}},e.renderPrefix=function(){var t=e.props,n=t.answer,a=t.relatedTo,o={contentExpanded:e.state.contentExpanded,unescapable:Boolean(a)};return e.isVideoAnswer&&!e.contentDisplayed&&e.coCreate?Object(b.b)(Ie.CoCreationLabel,{mb:"4px"}):Jo(n,o)},e.renderVoteButton=function(){var t=e.props,n=t.answer,a=t.shouldOia,o=t.zaInfos,r=o.voteUp,i=o.voteDown,c=t.isMuteSpecial,l=t.isMuteFreeze,s=t.isAuthor,u=t.currentUser,d=e.state.positionStatus,f=n.question,p=f.questionType,h=f.isMuted,m=n.relationship,v=(m=void 0===m?{}:m).isRecognized,g=m.voting,O=n.attachment,j=n.voteupCount,y="commercial"===p&&h||c||l;return e.isLegacyVideoAnswer?Object(b.b)(Oa,{answer:n,id:O.attachmentId,voteupCount:j,voting:g,isOwner:s,disabled:y,currentUser:u}):Object(b.b)(ha.a,Object.assign(Object.assign({answer:n,disabled:y,isOwner:s},a&&{onClick:e.createOpenInAppHandler("vote_answer")}),{},{disableAuth:e.disableAuth,isRecognized:v,handleToggleGuide:e.handleToggleGuide,positionStatus:d,zaIds:{voteUp:r,voteDown:i}}),"vote")},e.renderAuthorInfo=function(){var t=e.props,n=t.preset,a=t.relatedTo,o=t.answer,r=o.id,i=o.author,c=o.creationRelationship;if(e.coCreate){var l=!tr(n);return Object(Ie.renderDualAuthor)(n,i,c,l)}return!tr(n)&&Object(b.b)(pa.a,{className:j()("AnswerItem-authorInfo",{"AnswerItem-authorInfo--related":a}),preset:er(n)?"plain":"default",author:i,relatedTo:a,id:r,userLinkV2:!0},"authorInfo")},e.renderMetaAndBeforeContent=function(){var t,n,a=e.props,r=a.preset,i=a.answer.creationRelationship,c=e.renderAuthorInfo(),l=e.renderAnswerExtraInfo(),s=e.renderLabels().labels,u=null==i||null===(t=i.coCreation)||void 0===t?void 0:t.refBy,d=null==i||null===(n=i.reference)||void 0===n?void 0:n.refBy,f=e.contentDisplayed&&(u||d)&&Object(b.b)(m.Box,{my:"16px",children:Object(b.b)(Ie.CoCreationLinkCard,{type:"answer",coCreationRefBy:u,referenceRefBy:d})});return $o(r)?[[c].concat(Object(o.a)(s),[f]),l]:[[c].concat(Object(o.a)(s),[f,l]),null]},e}return Object(i.a)(n,[{key:"isPaidAnswer",get:function(){return"paid"===this.props.answer.answerType}},{key:"isVideoAnswer",get:function(){var e=this.props.answer.attachment;return 2===(null==e?void 0:e.type)||"zvideo"===(null==e?void 0:e.type)||"video"===(null==e?void 0:e.type)}},{key:"isLegacyVideoAnswer",get:function(){var e=this.props.answer.attachment;return"zvideo"===(null==e?void 0:e.type)}},{key:"isAuthorInGeneral",get:function(){var e=this.props,t=e.isAuthor,n=e.isSubAuthor,a=e.hideCoCreationFeature;return t||n&&!a}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.expanded,a=t.byComment,o=t.editing,r=t.loadVideoDetails,i=t.isSearchSpecialSource,c=t.isMobile,l=t.isWechat,s=this.state.shareVideoQuery;if(s&&r(s).then((function(){e.setState({shouldShowVideoDetails:!0})})),n&&(this.loadAnswerConcernedVoters(),this.loadEntityWords()),a&&setTimeout((function(){return e.setState({commentsShown:Boolean(a)})})),o&&this.startEditing(),c&&!i&&this.showOiaModal(),c&&l)if(document.addEventListener("WeixinJSBridgeReady",(function(){e.handleLoadedNext()})),"complete"===document.readyState)this.handleLoadedNext();else{window.addEventListener("load",(function t(){window.removeEventListener("load",t),e.handleLoadedNext()}))}}},{key:"componentDidUpdate",value:function(e,t){!t.contentExpanded&&this.state.contentExpanded&&this.loadEntityWords(),!this.props.editing||e.editing||this.state.editing||this.startEditing()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props.answer,a=n.reshipmentSettings,o=n.commentPermission,r=e.answer,i=r.reshipmentSettings,c=r.commentPermission;!a&&i&&!o&&c&&setTimeout((function(){return t.settingsTogglerEl.click()}))}},{key:"getShareVideoId",value:function(){var e=this.props,t=e.location;return e.isMobile?t.query.preview_video_id:null}},{key:"renderReshipmentSettings",value:function(e){var t=this,n=this.props.currentUser;return Object.keys(nr).map((function(a){return"need_payment"===a&&null!=n&&n.isOrg?null:Object(b.b)(ke.a,{onClick:function(){return t.handleReshipmentSettings(a)},checked:a===e,children:nr[a]},a)}))}},{key:"renderAnswerExtraInfo",value:function(){var e=this.props,t=e.answer,n=e.actor,a=e.action,o=e.concernedUpvoters,r=e.isHuman,i=e.useNewLabels,c=e.isMobile,l=t.id,s=t.voteupCount,u=t.markInfos,d=t.isNormal;if(!((!r||!c)&&(void 0===d||d)))return null;var f=(null==u?void 0:u.length)>0&&!i;return f||s?Object(b.b)(Po,{id:l,voteupCount:s,markInfos:f&&u,actorToken:null==n?void 0:n.urlToken,action:a,concernedUpvoters:o},"AnswerItemExtraInfo"):null}},{key:"renderSettings",value:function(){var e=this,t=this.props,n=t.answer,a=n.id,o=n.collapsedBy,r=n.reshipmentSettings,i=n.commentPermission,c=n.question.questionType,l=n.rewardInfo,s=(l=void 0===l?{}:l).isRewardable,u=void 0!==s&&s,d=n.relevantInfo,f=n.creationRelationship,p=t.answer,h=t.canCollapse,m=t.isMobile;if(!t.currentUser||!this.isAuthorInGeneral)return null;var v=Object(b.c)(b.a,{children:[this.renderReshipmentSettings(r),Object(b.b)(z.a,{}),Object(b.b)(xe.c,{className:"AnswerItem-selectMenuItem",target:p,onChange:this.props.updateAnswerCommentPermission,current:i}),Object(b.b)(z.a,{}),u&&Object(b.b)(z.b,{onClick:this.onCloseReward,children:"关闭赞赏"}),Object(b.b)(z.b,{onClick:this.openDeleteModal,children:"删除"}),"commercial"===c&&h&&"nobody"===o&&(!d||"brand_special"!==d.relevantType)&&[Object(b.b)(z.a,{},"MenuDivider"),Object(b.b)(z.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"},"MenuItem")]]});if(r&&i){var g,O,j=null==f||null===(g=f.coCreation)||void 0===g||null===(O=g.bizInfo)||void 0===O?void 0:O.canCancelPermission;return Object(b.b)(z.c,{arrowed:Boolean(j),toggler:Object(b.b)(N.c,{preset:"plain",onRef:function(t){e.settingsTogglerEl=t},icon:S.a,label:!m&&"设置"}),reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selectMenuItem",children:j?Object(b.b)(z.b,{children:Object(b.b)(Ie.CancelCoCreation,{contentType:"answer",contentId:a})}):v},"settings")}return Object(b.b)(N.c,{preset:"plain",onClick:this.handleLoadAnswerForSettings,icon:S.a,label:!m&&"设置"},"settings")}},{key:"renderReshipment",value:function(e,t){var n=this;return"need_payment"===t?Object(b.b)(z.b,{onClick:function(){E.a.trackEvent(n.contentItem,{action:"Authorize",element:"Button",is_intent:!0})},tag:"a",href:"/copyright/apply?answer=".concat(e),target:"_blank",children:"申请授权"}):"disallowed"===t?Object(b.b)(z.b,{tag:"a",target:"_blank",href:"/term/zhihu-terms#sec-licence-6",children:"禁止转载"}):null}},{key:"renderOptions",value:function(){var e=this;if(!this.props.currentUser||this.isAuthorInGeneral)return null;var t=this.props,n=t.answer,a=t.canCollapse,o=t.renderExtraOptions,r=t.permission.canBrandAdminEdit,i=t.isMobile,c=t.isAuthor,l=n.id,s=n.reshipmentSettings,u=n.collapsedBy,f=n.question,p=f.questionType,h=f.brand,m=(h=void 0===h?{}:h).isPuQuestion,v=n.annotationAction,g=void 0===v?[]:v,O=n.annotationDetail,j={toggler:Object(b.b)(N.c,{preset:"plain",className:"OptionsButton",icon:R.a,"aria-label":"更多"}),reversed:!0,onOpen:this.handleLogMoreClick,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"},y="commercial"===p,C="nobody"!==u;return c?null:Object(d.e)(z.c,Object.assign(Object.assign({},j),{},{key:"options"}),i&&Object(b.b)(So.a,{answer:n}),a&&!y&&Object(b.b)(z.b,{onClick:C?this.handleUpdateAnswerCollapsed:this.handleCollapseModalShow,children:C?"取消隐藏":"隐藏"}),r&&y&&!C&&!m&&Object(b.b)(z.b,{onClick:this.handleUpdateAnswerCollapsed,children:"隐藏"}),g&&g.some((function(e){return ae.d.add===e}))&&!O&&Object(b.b)(z.b,{onClick:this.handleShowAddAnnotationModal,children:"标记内容"}),g&&g.some((function(e){return ae.d.cancel===e}))&&O&&Object(b.b)(z.b,{onClick:this.handleShowCancelAnnotationModal,children:"撤销标记"}),Object(b.b)(z.b,{onClick:this.handleReportOpen,children:"举报"}),this.renderReshipment(l,s),o&&o({itemClassName:"AnswerItem-selfMenuItem",getContainer:function(){return e.contentItem}}))}},{key:"renderMeta",value:function(){var e=function(e){var t=e.thumbnail,n=e.voteupCount,a=e.question.id,o=e.id,r=e.createdTime,i=e.updatedTime,c=e.commentCount;return{image:t,upvoteCount:n,url:"https://www.zhihu.com/question/".concat(a,"/answer/").concat(o),dateCreated:new Date(1e3*r).toISOString(),dateModified:new Date(1e3*i).toISOString(),commentCount:c}}(this.props.answer);return Object.keys(e).map((function(t){return Object(b.b)("meta",{itemProp:t,content:e[t]},t)}))}},{key:"renderBrandQuestionPrizeTip",value:function(){var e=this.props.answer,t=e.id,n=e.question.prize,a=(n=void 0===n?{}:n).winnersAnswerTokens,o=n.prizes;if(!n.status)return null;var r=["一","二","三"],i=null;return o&&a&&a.forEach((function(e,n){e.includes(t)&&null===i&&(i=o&&o[1]&&o[1].name?"得".concat(r[n],"等奖"):"奖")})),i&&Object(b.c)("div",{className:"AnswerItem-brandQuestionPrizeTip",children:["该回答在有奖问答中获",i]})}},{key:"renderBrandEntityTrack",value:function(){var e=this.state.contentExpanded,t=this.props,n=t.answer,a=t.expanded,o=t.isBrandAnswer,r=n.question;return(a||e)&&(r&&"commercial"===r.questionType||o)?Object(b.b)(ra.a,{type:n.type,id:n.id}):null}},{key:"renderEditTime",value:function(){var e,t,n,a=this.props,o=a.shouldOia,r=a.answer,i=r.id,c=r.createdTime,l=r.updatedTime,s=r.question.id,u=r.playCount,d=r.attachment,f=u||(null==d||null===(e=d.zvideo)||void 0===e?void 0:e.playCount)||(null==d||null===(t=d.video)||void 0===t||null===(n=t.videoInfo)||void 0===n?void 0:n.playCount)||0,p="".concat(ae.G,"/question/").concat(s,"/answer/").concat(i);return Object(b.b)(ja.a,Object.assign(Object.assign({created:c,updated:l,href:p},this.isVideoAnswer&&f>0&&{videoPlayCount:Number(f)}),o&&{onClick:this.createOpenInAppHandler("click_answer")}))}},{key:"contentDisplayed",get:function(){var e=this.props.relatedTo,t=this.state.contentExpanded;return Boolean(e||t)}},{key:"coCreate",get:function(){var e=this.props,t=e.answer.creationRelationship,n=e.hideCoCreationFeature;return Boolean(!n&&Object(Ie.isCoCreateRelation)(t))}},{key:"render",value:function(){var e,t,n,o=this,r=this.props,i=r.answer,c=r.reward,l=r.answer,s=l.id,u=l.isNormal,d=void 0===u||u,f=l.isDelete,p=l.question,h=l.rewardInfo,v=void 0===h?{}:h,g=l.question,O=g.title,y=g.id,C=g.questionType,w=g.commercial,x=g.brand,k=(x=void 0===x?{}:x).isPuQuestion,S=l.author,R=l.excerpt,E=l.content,z=l.enableConvert,P=l.editableContent,M=l.commentCount,_=l.adminClosedComment,D=l.collapsedBy,F=l.isSticky,U=l.thumbnail,V=l.thumbnailExtraInfo,G=l.reviewInfo,q=(G=void 0===G?{}:G).isReviewing,H=G.editType,W=l.relevantInfo,Z=(W=void 0===W?{}:W).relevantType,Q=l.annotationDetail,Y=l.paidInfo,J=void 0===Y?{}:Y,$=l.creatorRightsNotification,ee=l.attachment,te=l.vessayInfo,ne=l.videoAnswerData,oe=r.relatedTo,ce=r.editable,le=r.byComment,se=r.draft,ue=r.expanded,de=r.lastreadTouchable,be=r.canCollapse,fe=r.canStick,pe=r.itemProp,he=void 0===pe?"answer":pe,me=r.addAnnotation,ve=r.cancelAnnotation,ge=r.showNotification,Oe=r.dataZaIndex,je=r.blockReading,ye=r.isWechat,xe=r.isHuaweiBrowser,ke=r.isHonor,Ie=r.lessExcerpt,Te=r.isHuman,Ee=r.ua,Ne=r.shouldSpecialOia,Be=r.shareVideoDetail,ze=r.trackPromotionClick,Le=r.formatContent,Pe=r.zaInfos,Me=Pe.expand,_e=Pe.title,De=Pe.thank,Fe=Pe.toggleComment,Ue=Pe.share,Ve=Pe.getCommentAction,Ge=r.handleToggleSticky,qe=r.renderActionButtons,He=r.permission.canBrandAdminEdit,Ke=r.readContentRightsNotification,We=r.ecommerce,Ze=r.isMobile,Qe=r.canAbstract,Ye=r.isBaidu,Je=r.isMuteSpecial,Xe=r.isMuteFreeze,$e=r.isAuthor,et=r.isTopic,tt=r.xiaomi,nt=r.showCommentForOia,at=r.pathname,ot=r.richContentKey,rt=r.useVessayV2,it=r.shouldAlwaysShowPlayer,ct=r.isShenma,lt=r.isRecommend,st=r.videoRef,ut=r.alwaysShowVolumeButton,dt=r.showHeightLight,bt=void 0!==dt&&dt,ft=r.truncateDisabled,pt=void 0!==ft&&ft,ht=r.forceCommentOia,mt=void 0!==ht&&ht,vt=r.hideCoCreationFeature,gt=r.entityWords,Ot=r.isAnswerPage,jt=r.currentUser,yt=r.blockStrategies,Ct=Object(Ro.b)([Object(Ro.a)(yt)],qe),wt="function"==typeof Ge,xt="".concat(ae.G,"/question/").concat(y,"/answer/").concat(s),kt=this.state,St=kt.reportModalShown,Rt=kt.deleteModalShown,At=kt.collapseModalShown,It=kt.favlistsShown,Tt=kt.editing,Et=kt.commentsShown,Nt=kt.commentsAutoFocus,Bt=kt.commentPattern,zt=kt.addAnnotationModalShown,Lt=kt.cancelAnnotationModalShown,Pt=kt.positionStatus,Mt=kt.shareVideoQuery,_t=kt.shouldShowVideoDetails,Dt=kt.contentExpanded,Ft=kt.showWechatExpand,Ut=kt.skipModalShow,Vt=kt.autoExpand,Gt=kt.shownLoadingBar,qt=kt.wxIsReady,Ht=null==ee||null===(e=ee.video)||void 0===e?void 0:e.campaign,Kt=Mt&&_t?{title:Be.title,thumbnail:Be.coverUrl,isLens:!0,id:Mt,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(Mt)}:null;if(f)return Object(b.c)("div",{className:"AnswerItem-deleted",children:["你已经删除了该问题的回答，如果需要修改，请先  ",Object(b.b)("a",{role:"button",tabIndex:0,onClick:this.handleRestoreAnswer,children:"撤销删除"})]});var Wt=!(q&&"create"===H),Zt="commercial"===C,Qt="nobody"!==D,Yt=U||(null==ee||null===(t=ee.video)||void 0===t||null===(n=t.videoInfo)||void 0===n?void 0:n.thumbnail);if(Tt){var Jt,Xt=fa.a,$t=Object(b.c)("div",{children:[Object(b.c)(m.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return[{borderBottom:"1px solid ".concat(e.colors.GBK09A),".Tabs":{border:"none"}},{background:e.colors.GBK99A}]},children:[Object(b.b)("div",{css:function(e){return[{fontWeight:"bold",fontSize:15,color:e.colors.GBK03A,borderBottom:"1px solid ".concat(e.colors.GBK10A)},{borderBottom:"none",paddingLeft:20}]},children:this.isVideoAnswer?"本回答为视频回答":"本回答为图文回答"}),Object(b.b)(ba.a,{handleClick:null===(Jt=this.answerFormRef.current)||void 0===Jt?void 0:Jt.toggleFullscreen})]}),Object(b.b)(Xt,{className:"AnswerItem-form",isReediting:!0,imperativeRef:this.answerFormRef,question:p,answer:i,defaultValue:P,onDeleteDraft:this.handleCancelEditAnswer,onCancel:this.handleCancelEditAnswer,onSubmit:this.handleSubmitAnswer,isRewardable:v.isRewardable,addRewardTagline:this.addRewardTagline,useMediumEditor:!0})]});return Ot?Object(b.b)(re.a,{children:Object(b.b)(B.d,{css:{overflow:"visible"},children:Object(b.c)("div",{css:function(e){return{background:e.colorMod(e.colors.GBK10C).alpha(.45)}},children:[Object(b.b)(ie.a,{}),$t]})})}):$t}var en=this.renderMetaAndBeforeContent(),tn=Object(a.a)(en,2),nn=tn[0],an=tn[1],on="mainEntityOfPage"===he||"acceptedAnswer"===he,rn=Ne&&!on,cn=!Kt&&this.renderEditTime(),ln=J.type,sn=J.content,un=this.isPaidAnswer,dn=un?sn:E,bn=!oe&&Object(b.b)(Io,{questionId:y,title:O,href:xt,zaTitleId:_e,showStickyMark:wt&&this.props.isSticky,showHeightLight:bt,onClick:ze}),fn=d||$e,pn=tt&&at.match(/\/question\/\d+$/g),hn=Le?Le(dn||R,i):dn||R||"",mn=Boolean(z||(null==te?void 0:te.enableVideoTranslate)),vn=ne&&(it||this.contentDisplayed),gn=lt&&this.isVideoAnswer;return Object(b.c)(ca.e,{onRef:function(e){return o.contentItem=e},className:"AnswerItem","data-za-index":Oe,"data-zop":JSON.stringify({authorName:S.name,itemId:s,title:O,type:"answer"}),data:i,link:xt,meta:gn?null:nn,title:bn,lastreadTouchable:de,name:s,itemProp:he,itemType:"http://schema.org/Answer",itemScope:!0,children:[d&&(!et||Dt)&&Object(b.b)(Fo.b,{answer:i}),this.renderMeta(),Zt&&this.renderBrandQuestionPrizeTip(),this.renderBrandEntityTrack(),fn?Object(b.c)(b.a,{children:[this.isVideoAnswer&&Object(b.b)(Do,Object.assign(Object.assign({shouldExpand:this.contentDisplayed,showPlayer:vn,campaign:Ht,answer:i,videoAnswerData:ne,videoRef:st,alwaysShowVolumeButton:ut},gn?{meta:nn}:{}),{},{hideCoCreationFeature:vt})),Object(b.c)(ja.b,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({entityWords:gt,richContentKey:ot,className:j()({"RichContent-mobileBaidu":Ye,"RichContent-hasCatalog":Object(Ae.a)(i,"answer"),"AnswerItem-highlight":bt}),truncateDisabled:pt,imperativeRef:this.richContentRef,canAbstract:Qe,onToggleExpend:this.handleExpand},rn&&{expandText:"阅读全文"}),je&&on&&{expandText:"展开阅读全文"}),Ze&&Te&&!on&&{collapsedHeight:180}),{},{cover:this.isVideoAnswer&&it?null:Yt,hasVideo:!it&&Boolean(V&&"video"===V.type)||this.isVideoAnswer,videoData:Kt,handleClickVideoMoreButton:this.handleClickVideoMoreButton,unescapable:Boolean(oe),expanded:ue,onPositionStatusChange:this.handlePositionStatusChange,before:an,excerpt:Le?Le(R,i):R,html:hn,prefix:this.renderPrefix(),isNovel:"interactive_novel"===ln,ecommerce:We,isVideoAnswer:this.isVideoAnswer,after:Object(b.c)("div",{children:[Object(b.b)(Fo.a,{answer:i,ua:Ee}),Object(b.b)(qa,{className:"AnswerItem-CommercialQuestionTail",commercial:w}),!Ze&&Dt&&Object(b.b)(ho,{contentType:"answer",contentToken:s,author:S}),cn,jt&&$e&&ce&&Object(b.b)(Se.a,{children:Object(b.c)("a",{className:"AnswerItem-editButton",role:"button",tabIndex:0,onClick:this.handleStartEditAnswer,children:[Object(b.b)(A.a,{text:!0,center:!0})," ",Object(b.c)("span",{className:"AnswerItem-editButtonText",children:["修改",se&&se.editableContent&&"（有未发布的编辑草稿）"]})]})}),!Ze&&jt&&Object(b.b)(Da,{imperativeRef:this.rewardContainerRef,reward:c,currentUser:jt,rewardInfo:v,isAuthor:$e,id:s,author:S,ua:Ee,balanceEnable:!1})]}),data:i,onClick:je&&on?function(){(pn||ye||ct)&&Ze?(o.setState({autoExpand:!1}),o.richContentRef.current.handleExpand()):Ze?ae.D?(o.setState({autoExpand:!1}),o.richContentRef.current.handleExpand()):o.setState({skipModalShow:!0,autoExpand:!1}):o.setState({showWechatExpand:!0,autoExpand:!1})}:rn?ae.D&&Ze?function(){o.richContentRef.current.handleExpand()}:o.createOpenInAppHandler("expand_answer"):o.disableAuth&&je&&o.handleToggleGuide},Ie?{limit:74}:{}),this.coCreate?{limitWithImage:74}:{}),{},{zaIds:{expand:Me},children:[Wt&&He&&Zt&&Qt&&!k&&Object(b.b)(N.c,{className:j()("ContentItem-rightButton AnswerItem-mainAction AnswerItem-open",{"AnswerItem-mainAction--disabled":"community"===D}),onClick:this.handleUpdateAnswerCollapsed,children:"公开回答"}),Wt&&fe&&!Qt&&"brand_special"!==Z&&Object(b.b)(N.c,{className:"ContentItem-rightButton AnswerItem-mainAction AnswerItem-brandQuestionButton",onClick:this.handleUpdateAnswerStick,children:F?"取消精选":"设为精选"}),!this.props.isBaidu&&Ct({componentList:[{name:"vote",component:Wt&&this.renderVoteButton()},{name:"comment",component:Wt&&!(Ze&&ae.D)&&Object(b.b)(sa.a,Object.assign(Object.assign({onInstance:function(e){return o.commentButton=e},onClick:this.openModal},(Ze&&Te&&Ne||mt)&&{onClick:this.createOpenInAppHandler("comment_answer")}),{},{commentsShown:Et,commentClosed:_,count:M,positionStatus:Pt,zaInfos:{toggleComment:Fe,getCommentAction:Ve}}),"comment")},{name:"share",component:Wt&&!Ze&&Object(b.b)(la.a,{disabled:Je||Xe,id:s,type:"answer",title:O,authorName:S&&S.name,href:xt,positionStatus:Pt,zaShareId:Ue},"share")},{name:"favlist",component:Wt&&!Ze&&(!jt||!jt.isOrg)&&Object(b.b)(oa.a,{onRef:function(e){return o.favButtonRef=e},onClick:this.handleFavlistsShown,label:Ze?"":"收藏",disabled:Je||Xe},"favlist")},!Ze&&{name:"thank",component:Wt&&!$e&&Object(b.b)(So.a,Object.assign({zaInfo:De,answer:i,disabled:Je||Xe},this.isLegacyVideoAnswer&&{zVideoId:ee.attachmentId}),"thank")},{name:"sticky",component:!Ze&&wt&&$e&&Object(Ce.a)(jt)&&Object(b.b)(N.c,{preset:"plain",onClick:Ge,icon:this.props.isSticky?I.b:T.b,label:this.props.isSticky?"取消置顶":"置顶"},"sticky")},{name:"vessay",component:!Ze&&$e&&mn&&Object(b.b)(Uo.a,{type:"answer",id:s,useVessayV2:rt,isAuthor:$e},"vessay")},{name:"options",component:Ze&&Te||Wt&&this.renderOptions()},{name:"settings",component:Ze&&Te||this.renderSettings()},{name:"annotation",component:!Dt&&Object(b.b)(ia.a,{annotationDetail:Q},"annotation")}]})]}))]}):cn,fn&&!un&&Object(b.b)(mo.a,{content:dn,type:"answer",urlToken:String(s)}),nt&&at.startsWith("/question")&&!ae.D&&Object(b.b)("div",{children:Object(b.b)(Gn,{parent:i})}),Object(b.b)(ua.a,{shown:Et,parent:i,byComment:le,commentPattern:Bt,autoFocus:Nt,onClose:this.closeModal}),Object(b.b)(da.a,{type:"answer",urlToken:s,shown:St,onClose:this.handleReportHide,zaEnabled:!0}),Object(b.b)(K,{addAnnotation:me,onClose:this.handleCloseAddAnnotationModal,shown:zt,type:ae.e,urlToken:s,showNotification:ge}),Object(b.b)(X,{cancelAnnotation:ve,onClose:this.handleCloseCancelAnnotationModal,shown:Lt,type:ae.e,urlToken:s,showNotification:ge}),jt&&$e&&Object(b.b)(Fa.a,{title:"你确定要删除自己的答案吗？",subtitle:"答案内容不会被永久删除，你还可以撤消本次删除操作。",shown:Rt,onCancel:this.closeDeleteModal,onSubmit:this.handleDeleteAnswer}),be&&Object(b.b)(Fa.a,{title:"隐藏答案",subtitle:"隐藏后该回答将不展示也不流通，是否确定隐藏？",shown:At,onCancel:this.handleCollapseModalHide,onSubmit:this.handleUpdateAnswerCollapsed}),Object(b.b)(Hn.a,{id:s,type:"answer",shown:It,onClose:this.handleFavlistHide,zaEnabled:!0}),Ze&&this.state.guideShown&&Object(b.b)(Re.a,{redirectUrl:xt,buttons:[ye?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],urlScheme:Object(we.a)({type:"answer",id:s}),onClose:this.handleToggleGuide}),Object(b.b)(aa,{notification:$,onRead:function(e){Ke("answer",s,e)},onUseAdmire:function(){o.rewardContainerRef.current.activateReward()},onUseRecommend:function(){var e=o.props.postToolsRecommend;L.a.confirm(Object(b.b)("div",{style:{textAlign:"center"},children:"该推荐将使用本月的 1 次推荐次数。"}),{title:"确定是否推荐？"}).then((function(){return e("answer",String(s))}),(function(){}))}}),Object(b.b)(yo,{show:Ft&&!pn&&Ze&&!ye&&!ae.D,id:i.id,type:i.type,onCancel:function(){o.setState({showWechatExpand:!1},(function(){Vt||o.richContentRef.current.handleExpand()}))},onSubmit:function(){o.setState({showWechatExpand:!1}),ye?qt?o.createOpenInAppHandler(Vt?"expand_answer2":"expand_answer1")():o.setState({shownLoadingBar:!0}):o.createOpenInAppHandler(Vt?"expand_answer2":"expand_answer1")()}}),Object(b.b)(Co,{show:Ut&&!ae.D,id:i.id,type:i.type,onCancel:function(){o.setState({skipModalShow:!1},(function(){o.richContentRef.current.handleExpand()}))},onSubmit:function(){o.createOpenInAppHandler("expand_answer",xe||ke)()}}),Object(b.b)(ko,{show:Gt&&Ze})]})}}]),n}(f.PureComponent);cr.contextTypes={startAddAnswer:g.a.func},cr.propTypes={relatedTo:g.a.oneOf(["question","answer"]),editable:g.a.bool,preset:g.a.oneOf(["special-plain","plain","primary"]),lessExcerpt:g.a.bool,shareVideoDetail:g.a.object,formatContent:g.a.func,renderExtraOptions:g.a.func,zaInfos:g.a.object,onToggleExpand:g.a.func,useNewLabels:g.a.bool,renderActionButtons:g.a.func,canAbstract:g.a.bool,trackPromotionClick:g.a.func,isSearchSpecialSource:g.a.bool,hideCommercialInviteLabel:g.a.bool,hideCoCreationFeature:g.a.bool},cr.defaultProps={editable:!1,canAbstract:!1,isSearchSpecialSource:!1,preset:"primary",zaInfos:{},renderActionButtons:So.b,shouldAlwaysShowPlayer:!1,hideCoCreationFeature:!1};var lr=Object(h.compose)(Object(ce.a)((function(e){var t=e.answer;return{content:{type:"Answer",token:String(t.id)}}})),Object(te.b)((function(e){var t=e.answer,n=e.trackCardShow,a=void 0===n||n,o=e.zaInfos,r=void 0===o?{}:o;return Object.assign(Object.assign(Object.assign({module:"AnswerItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Answer",token:t.id&&t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:new Date(t.createTime).getTime(),parent_token:t.question&&t.question.id.toString(),author_member_hash_id:t.author&&t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}},content:{type:"Answer",token:t.id}},r.index&&{index:r.index}),r.cardShow&&{view:{id:r.cardShow}}),{},{trackCardShow:a})})),w.withRouter,oe.a,Object(ne.d)({dataPath:"answer"}),ne.c,Object(y.connect)((function(e,t){var n,a,o=e.entities.drafts,r=void 0===o?{}:o,i=e.question,c=(i=void 0===i?{}:i).draftStatus,l=e.answers,s=(l=void 0===l?{}:l).paidContent,u=void 0===s?{}:s,d=l.entityWords,b=void 0===d?{}:d,f=e.reward,p=e.switches,m=e.video,v=(m=void 0===m?{}:m).shareVideoDetail,g=e.env,O=g.edition,j=g.userAgent,y=t.answer,C=t.relatedTo,w=t.location.pathname,x=w.split("/"),k=!1,S=!0;!x[1]||"org"!==x[1]&&"people"!==x[1]||(k=x[2]&&-1!==rr.indexOf(x[2]),S=!1);var R=Object(h.compose)(or,ar)(ir(e,t)),A=Object(je.b)(e),I=["question","answer"].includes(C),T=Object(ge.c)(e)&&I,E=Object(ge.i)(e),N=j.Mobile,B=j.Qzone,z=N&&E&&!B,L=Object(Te.c)(R.creationRelationship),P=Object(je.i)(e,L),M=(null!==(n=null===(a=y.relationship)||void 0===a?void 0:a.isAuthor)&&void 0!==n?n:Object(je.i)(e,y.author))&&!P;return{entityWords:b[y.id],draft:y&&r["question_".concat(y.question.id)],draftStatus:null==c?void 0:c[y.question.id],answer:R,ua:Object(ge.l)(e),pathname:w,xiaomi:O.xiaomi,isShenma:O.shenma||/quark/gi.test(e.env.userAgent.origin)||j.UC,reward:f,switches:p,isHuman:T,shouldOia:Object(ge.h)(e)&&!k,shouldSpecialOia:Object(ge.i)(e)&&!k,isSpecialQuestionOrAnswer:Object(ge.j)(e,{type:I&&C,id:I?"answer"===C?y.id:y.question.id:""}),shouldAllAutoExpand:"1"===Object(ge.a)(e,"web_mweb_launch"),useVessayV2:Object(ge.a)(e,qn.b)===qn.a,isMobile:Object(ge.d)(e),isWechat:e.env.userAgent.Wechat,isHuaweiBrowser:/huaweibrowser/gi.test(e.env.userAgent.origin)||/huawei/gi.test(e.env.userAgent.origin)&&!e.env.userAgent.UC&&!e.env.userAgent.Wechat&&!e.env.userAgent.MQQBrowser&&!/quark/gi.test(e.env.userAgent.origin)&&!/baidu/gi.test(e.env.userAgent.origin),isHonor:/honor/gi.test(e.env.userAgent.origin)&&/MQQBrowser/gi.test(e.env.userAgent.origin),concernedUpvoters:Object(le.f)(e,{id:y.id}),currentUser:A,shareVideoDetail:v,isBrandAnswer:Object(le.k)(y),permission:Object(se.cb)(e),ecommerce:Object(ee.c)(e,{type:"answer",urlToken:String(y.id)}),isBaidu:Object(ge.h)(e)&&O.baidu,showCommentForOia:Object(ge.h)(e),blockReading:z,paidContent:u,isMuteSpecial:Object(se.E)(R.question),isMuteFreeze:Object(se.D)(R.question),isAuthor:M,isSubAuthor:P,abTestShowMobileSignInModal:"1"===Object(ge.a)(e,"h5_signin"),isQuestionPage:S}}),{updateAnswerReshipmentSettings:le.G,updateAnswerCommentPermission:le.F,updateAnswerCollapsed:le.E,updateAnswerStick:le.I,deleteAnswer:le.h,restoreAnswer:le.A,updateAnswer:le.D,loadAnswerForSettings:le.t,showNotification:me.h,addAnnotation:function(e,t,n,a){return{API:{types:pe.ADD_ANNOTATION,endpoint:"v3/collaboration/annotation",method:"POST",body:Object(be.a)(Object(de.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:a}))},UPDATE:{success:function(n){var a=he(e);return a?Object(ue.a)({},a,Object(ue.a)({},t,n)):null}}}},cancelAnnotation:function(e,t,n,a){return{API:{types:pe.CANCEL_ANNOTATION,endpoint:"v3/collaboration/annotation_cancel",method:"POST",body:Object(be.a)(Object(de.decamelizeKeys)({objectType:e,urlToken:t,reason:n,detail:a}))},UPDATE:{success:function(n){var a=he(e);return a?Object(ue.a)({},a,Object(ue.a)({},t,Object.assign(Object.assign({},n),{},{annotationDetail:null}))):null}}}},addRewardTagline:ve.a,updateAnswerReward:le.H,getVoteDownReason:le.j,selectVoteDownReason:le.C,loadAnswerConcernedVoters:le.p,fillCurrentUserIfNeeded:je.e,loadVideoDetails:Oe.d,readContentRightsNotification:ye.Vc,postToolsRecommend:ye.Qc,showMobileSignInModal:se.ib,loadAnswerEntityWords:le.r}),Ha.c)(cr)},1010:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n(47),o=n(14),r=n(15),i=n(17),c=n(18),l=n(7),s=n(1),u=n(0),d=n(53),b=n(3),f=n.n(b),p=n(13),h=n.n(p),m=n(1201),v=n(113),g=n.n(v),O="function"==typeof ResizeObserver?function(e,t){var n=new ResizeObserver((function(e){return t(e[0].contentRect)}));return n.observe(e),function(){n.disconnect()}}:function(e,t){var n,a=function(){var a=e.getBoundingClientRect();!(n&&["left","top","width","height"].every((function(e){return n[e]===a[e]})))&&(n=a,t(a))},o=new(window.MutationObserver||window.WebKitMutationObserver)(g()(a,100));return o.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),a(),function(){o.disconnect()}};function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var y={auto:"auto",yes:"scroll",no:"hidden"},C=function(e){Object(i.a)(n,e);var t=j(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={locationHref:"",iframeHeight:900},e.iframe=null,e.iframeMessenger=null,e.iframeObserver=null,e.handleIframeLoad=function(){e.iframe.contentDocument&&(e.unlistenResize=O(e.iframe.contentDocument.body,(function(t){e.setState({iframeHeight:t.height})})))},e.handleMessage=function(t){var n=e.props.onMessage;t.type===m.b.CHANGE_IFRAME_HEIGHT&&e.setState({iframeHeight:t.payload}),t.type===m.b.REDIRECT_URL&&(window.location.href=t.payload),n&&n(t)},e}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.setState({locationHref:window.location.href,timestamp:Date.now()}),this.iframeMessenger=new m.a({beforeMessage:function(e){return e.origin.endsWith("zhihu.com")},onMessage:this.handleMessage})}},{key:"componentWillUnmount",value:function(){this.iframeMessenger.close(),this.unlistenResize&&this.unlistenResize()}},{key:"render",value:function(){var e=this,t=this.props,n=t.src,o=t.className,r=t.scrolling,i=t.withParentUrl,c=t.withTimestamp,l=this.state,u=l.locationHref,b=l.timestamp,f=l.iframeHeight,p=n.split("?"),m=Object(a.a)(p,2),v=m[0],g=m[1],O=Object(d.parse)(g);return i&&(O.parent_url=u),c&&(O.ts=b),Object(s.b)("iframe",{className:h()("Iframe",o),src:"".concat(v,"?").concat(Object(d.stringify)(O)),ref:function(t){return e.iframe=t},height:f,onLoad:this.handleIframeLoad,scrolling:r,style:{border:"none",display:"block",overflow:y[r],width:"100%"}})}}]),n}(u.Component);C.defaultProps={scrolling:"auto",withParentUrl:!0,withTimestamp:!1},C.propTypes={className:f.a.string,src:f.a.string,scrolling:f.a.oneOf(["auto","yes","no"]),onMessage:f.a.func};var w=C},1012:function(e,t,n){"use strict";var a=n(23),o=n.n(a),r=n(28),i=n.n(r),c=n(27),l=n.n(c),s=n(29),u=n.n(s),d=n(19),b=n.n(d),f=n(34),p=n.n(f),h=n(42),m=n.n(h),v=n(3),g=n.n(v),O=n(0),j=n(13),y=n.n(j),C=n(149),w=n(33),x=n(8),k=["className","tag","name","value"],S=["className","divider","children","items"];function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b()(e);if(t){var o=b()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return u()(this,n)}}function A(e){var t=e.className,n=e.tag,a=e.name,o=e.value,r=p()(e,k),i="div";return n?i=n:r.href?i="a":r.onClick&&(i=w.c),Object(x.g)(i,m()({className:y()("NumberBoard-item",t)},r),Object(x.g)("div",{className:"NumberBoard-itemInner"},Object(x.g)("div",{className:"NumberBoard-itemName"},a),Object(x.g)("strong",{className:"NumberBoard-itemValue",title:o},Object(C.formatNumber)(o))))}var I=function(e){l()(n,e);var t=R(n);function n(){return o()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.divider,a=e.children,o=e.items,r=p()(e,S);return Object(x.g)("div",m()({className:y()("NumberBoard",t,{"NumberBoard--divider":n})},r),a||o.map((function(e){return Object(x.g)(A,m()({key:e.name},e))})))}}]),n}(O.Component);I.propTypes={divider:g.a.bool},I.defaultProps={divider:!1},I.Item=A;var T=I;t.a=T},1013:function(e,t,n){"use strict";var a=n(47),o=n(32),r=n(1),i=n(0),c=n.n(i),l=n(58),s=n(946),u=n(176),d=n(117),b=n.n(d),f=n(874),p=n(51),h=Object.assign;var m=function(e){return c.a.createElement(p.a,h({width:"49",height:"48",viewBox:"0 0 49 48"},e),c.a.createElement("path",{fill:"currentColor",d:"M24 36a4 4 0 110 8 4 4 0 010-8zm3-32c1.105 0 1.91.9 1.801 1.993l-2.593 26.009c-.055.551-.55.998-1.099.998h-2.218a1.127 1.127 0 01-1.1-.998L19.2 5.993c-.11-1.1.688-1.993 1.8-1.993H27z"}))},v=n(459),g=["text","icon","onClose","delay","color"],O={success:Object(r.b)(f.a,{size:24}),fail:Object(r.b)(m,{size:24})},j=function(e){var t=e.text,n=e.icon,c=e.onClose,u=e.delay,d=void 0===u?2e3:u,b=e.color,f=void 0===b?"GBK04A":b,p=Object(o.default)(e,g),h=Object(i.useState)(!0),m=Object(a.a)(h,2),v=m[0],j=m[1],y=Object(s.e)(v,null,{from:{opacity:0},enter:{opacity:1},leave:{opacity:0}});return n="string"==typeof n?O[n]:n,Object(i.useEffect)((function(){setTimeout((function(){j(!1),c&&c()}),d)}),[d,c]),y.map((function(e){var a=e.item,o=e.props,i=e.key;return a?Object(r.b)(s.a.div,{style:o,children:Object(r.c)(l.Flex,Object.assign(Object.assign({},p),{},{role:"alert",p:"18px",alignItems:"center",justifyContent:"center",flexDirection:"column",color:f,css:function(e){return{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",borderRadius:"14px",maxWidth:200,background:e.colorMod(e.colors.GBK99A).alpha(.85),pointerEvents:"none",textAlign:"center"}},children:[n,Object(r.b)(l.Text,{fontWeight:"bold",css:[{lineHeight:"20px"},n&&{marginTop:"8px"}],children:t})]}))},i):null}))};t.a=function(){var e=Object(v.b)(),t=e.addInstance,n=e.removeInstance;return Object(i.useCallback)((function(e){var a,o=e.icon,i=e.text,c=e.delay,l=e.color;return new Promise((function(e){a=Object(r.b)(u.a,{children:Object(r.b)(j,{icon:o,text:i,onClose:e,delay:c,color:l})},b()("toast")),t(a)})).finally((function(){return function(e){return setTimeout((function(){return n(e)}),300)}(a)}))}),[t,n])}},1016:function(e,t,n){e.exports=n(73)(222)},1017:function(e,t,n){},1019:function(e,t,n){e.exports=n(220),e.exports.CJKSpace=n(1188).CJKSpace},1020:function(e,t,n){var a=n(1098),o=n(971),r=n(1099);e.exports=function(e){return o(e)?r(e):a(e)}},1021:function(e,t,n){var a=n(1403);function o(){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=o=Reflect.get,e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,n){var o=a(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(this,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},1022:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(1),o=n(72),r=n(82),i=n.n(r),c=function(e){return function(t){return i()((function(n){var r=n.zaInfos,i=void 0===r?{}:r;return Object(a.b)(o.b,Object.assign(Object.assign({},"function"==typeof e?e(n):e),{},{children:Object(a.b)(o.e,Object.assign(Object.assign({zaType:"Card"},void 0!==i.index&&{view:{elementLocation:{card:{index:Number(i.index)}}}}),{},{children:Object(a.b)(t,Object.assign({},n))}))}))}),t)}}},1023:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var a=n(2),o=n(14),r=n(15),i=n(17),c=n(18),l=n(7),s=n(32),u=n(1),d=n(0),b=n(20),f=n(21),p=n(36),h=n(177),m=n(542),v=n(214),g=n(145);var O=n(135),j=n(532),y=function(e,t){var n=t.urlToken;return e.people.allFavlistsByUser[n]||{}},C=function(e){return e.currentUser},w=(Object(O.a)(v.a.GET_ALL_FAVLISTS,(function(e,t,n){return function(a,o){var r=o();if(e=e||C(r),!t){var i=y(r,{urlToken:e}),c=i.offset,l=void 0===c?0:c,s=i.limit;t={offset:l,limit:void 0===s?10:s}}return{action:Object.assign(Object.assign({urlToken:e,paging:t},g.a.enableSchema&&{schema:j.b}),{},{extra:n}),fetcher:function(e,t){var n=t.next,a=t.offset,o=void 0===a?0:a,r=t.limit,i=void 0===r?10:r;return n?g.a.http(n):g.a.http("/api/v4/people/".concat(e,"/collections"),{query:{include:"data[*].updated_time,answer_count,follower_count,creator,is_public",offset:o,limit:i}})}(e,t)}}})),Object(O.a)(v.a.GET_ALL_FAVLISTS_WITH_RELATIONS,(function(e,t,n,a,o){return function(r,i){var c=i();if(e=e||C(c),!a){var l=y(c,{urlToken:e}),s=l.offset,u=void 0===s?0:s,d=l.limit;a={offset:u,limit:void 0===d?10:d}}var b=Object.assign(Object.assign({contentType:t,contentId:n,urlToken:e,paging:a},g.a.enableSchema&&{schema:j.b}),{},{extra:o});return{action:b,fetcher:function(e){var t=e.contentType,n=e.contentId,a=e.paging,o=(a=void 0===a?{}:a).next,r=a.offset,i=void 0===r?0:r,c=a.limit,l=void 0===c?10:c;return o?g.a.http(o):g.a.http("/api/v4/collections/contents/".concat(t,"/").concat(n),{query:{offset:i,limit:l}})}(b)}}}))),x=n(218),k=["ids"],S=["currentUser","authRequired"];function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var A=function(){return n.e(75).then(n.bind(null,1158)).then((function(e){return e.FavlistsModal}))},I={ids:[],isFetching:!1,isDrained:!1},T=Object(p.createSelector)((function(e){return e.people.allFavlistsByUser[e.currentUser]||I}),(function(e){return e.entities.favlists}),(function(e,t){var n=e.ids,a=Object(s.default)(e,k);return Object.assign(Object.assign({},a),{},{items:n.map((function(e){return t[e]}))})}));var E=function(e){Object(i.a)(n,e);var t=R(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).onFavlistAdd=function(){for(var t=e.props,n=t.urlToken,a=t.onFavlistAdd,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return a.apply(void 0,r.concat([{urlToken:n}]))},e.onLoad=function(){for(var t=e.props,n=t.onLoad,o=t.type,r=t.id,i=t.urlToken,c=t.onUpdateReaction,l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];return n.apply(void 0,[i,o,r].concat(s)).then((function(e){c({contentType:o,contentId:r,relations:e.payload.data.reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(a.a)({},t.id,t.isFavorited))}),{})})}))},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.authRequired,a=Object(s.default)(e,S);return Object(u.b)(h.a,Object.assign(Object.assign({getComponent:A},a),{},{authRequired:n,isUserActive:Boolean(null==t?void 0:t.isActive),onLoad:this.onLoad,onFavlistAdd:this.onFavlistAdd}))}}]),n}(d.Component),N=Object(b.compose)(x.a,Object(f.connect)((function(e,t){var n=t.id,a=t.type,o=e.favlists.relations,r=e.currentUser,i=T(e);return{isFetching:i.isFetching,isDrained:i.isDrained,items:i.items,relations:o["".concat(a,"_").concat(n)],zaEnabled:!0,urlToken:r}}),(function(e,t){return{onUpdateFav:function(){return e(m.b.apply(void 0,arguments))},onFavlistAdd:t.onFavlistAdd||function(){return e(m.a.apply(void 0,arguments))},onLoad:function(){return e(w.apply(void 0,arguments))},onUpdateReaction:function(){return e(m.c.apply(void 0,arguments))}}})))(E)},1031:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(2),o=n(6),r=n(31),i=n(30),c=Object(o.a)("user",["UPDATE_FOLLOWERS_PIN"]).UPDATE_FOLLOWERS_PIN;function l(e,t,n){return function(o,l){var s=l(),u=s.entities.users,d=s.currentUser,b=u[e];return o(n?Object(r.h)(i.W.blocked,"red"):{urlToken:d,userUrlToken:e,expect:t,API:{types:c,endpoint:"members/".concat(e,"/followers"),method:t?"POST":"DELETE"},UPDATE:{request:{users:Object(a.a)({},e,{isFollowing:t})},failure:{users:Object(a.a)({},e,b)},success:function(t){return{users:Object(a.a)({},e,t)}}}})}}},1032:function(e,t,n){var a=n(1096),o=n(1020),r=n(382),i=n(463);e.exports=function(e,t,n){e=i(e);var c=(t=r(t))?o(e):0;return t&&c<t?a(t-c,n)+e:e}},1036:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return q})),n.d(t,"c",(function(){return H}));var a=n(25),o=n.n(a),r=n(1),i=n(0),c=n.n(i),l=n(72),s=n(43),u=n(169),d=n(1016),b=n.n(d);function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var h=Object.prototype.hasOwnProperty,m=Object.getOwnPropertySymbols,v=Object.prototype.propertyIsEnumerable,g=Object.assign,O=function e(t){var n=t.size,a=t.text,o=t.center,r=function(e,t){var n={};for(var a in e)h.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&m){var o,r=f(m(e));try{for(r.s();!(o=r.n()).done;){a=o.value;t.indexOf(a)<0&&v.call(e,a)&&(n[a]=e[a])}}catch(e){r.e(e)}finally{r.f()}}return n}(t,["size","text","center"]);a&&(n="1.2em");var i=c.a.createElement("svg",g(g({},r),n&&{width:n,height:n}));return o?c.a.createElement("span",{style:e.strutStyle},"​",i):i};O.defaultProps={fill:"currentColor"},O.strutStyle={display:"inline-flex",alignItems:"center"};var j=O,y=Object.assign;var C=function(e){return c.a.createElement(j,y(y({width:"12",height:"12",viewBox:"0 0 12 12"},e),{className:"ZDI ZDI--Arrow12"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M3.823 1.676l.354-.353a.25.25 0 01.354 0l4.316 4.323a.5.5 0 010 .707L4.53 10.676a.25.25 0 01-.354 0l-.354-.353a.25.25 0 010-.353L7.61 6.176a.25.25 0 000-.353L3.823 2.03a.25.25 0 010-.354z",fillRule:"evenodd",clipRule:"evenodd"}))},w=n(93),x=n(5);function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var R={RICHCONTENT:'<a data-draft-node="block" data-draft-type="edu-card" data-edu-card-id="1"></a>',IDAttr:"data-edu-card-id",TYPE:"edu-card",WebInsertCommand:"insert-edu-card:",HybridInsertCommand:"editor/insertEduCard",AvailableCardID:"1470725970378772481",EDU_CARD_LIMIT:30},A={1:"production",2:"text",3:"picture-text"},I=function(e){var t=e.id,n=e.url,a=e.eduCardShowId,o=e.contentType,c=e.templateType,d=e.token,f=e.materialId,p=e.missionId,h=e.skuId,m=Object(u.b)(),v=Object(l.i)().trackEvent,g=Object(i.useRef)(null);Object(i.useEffect)((function(){g.current=document.createElement("a"),g.current.setAttribute("target","_blank")}),[]);var O={id:(null==t?void 0:t.toString())||"",materialId:(null==f?void 0:f.toString())||"",missionId:(null==p?void 0:p.toString())||"",templateType:A[c]||"",skuId:(null==h?void 0:h.toString())||"",contentType:(null==o?void 0:o.toString())||"",token:(null==d?void 0:d.toString())||""};return Object(r.b)(l.b,{content:{type:"Training"},children:Object(r.b)(l.e,{as:"div",shouldTrackShow:!0,shouldTrackClick:!1,zaType:"Card",zaBlock:"edu_card_".concat(o||"unknow","_show"),extra:{configMap:O},onClick:function(){if(n&&t){var e="".concat(a||"").concat(+new Date);v({action:"OpenUrl",eventType:"Click",block:"edu_card_".concat(o||"unknow","_click"),elementLocation:{type:"Card",content:{type:"Training"}}},{configMap:Object.assign(Object.assign({},O),{},{click_id_fe:e})});var r=n.split("?")[0],i=b.a.parse(n.split("?")[1]),c="".concat(r,"?").concat(b.a.stringify(Object.assign(Object.assign({},i),{},{edu_card_id:t,edu_click_id_fe:e,refer:window.location.href})));m.ZhihuHybrid?Object(s.a)("base/openURL").dispatch({url:c}).catch((function(e){return console.error(e)})):g.current&&(g.current.href=c,g.current.click())}},css:{display:"block",margin:"1em auto",maxWidth:"390px",cursor:"pointer",":hover":{textDecoration:"none"}},"data-draft-node":"block","data-draft-type":"edu-card","data-edu-card-id":t,children:e.children},void 0)},void 0)},T={display:"flex",justifyContent:"space-between",flexWrap:"nowrap",alignItems:"center"},E={display:"flex",flexDirection:"column",justifyContent:"space-around",height:"100%"},N=function(e){var t;return{boxSizing:"border-box",padding:"12px",background:(null===(t=null==e?void 0:e.colors)||void 0===t?void 0:t.GBK10A)||"#F6F6F6",backdropFilter:"blur(27.1828px)",borderRadius:"8px"}},B=function(e){var t;return Object.assign({flex:"0 0 auto",width:"100%",lineHeight:"20px",fontWeight:700,fontSize:"15px",wordBreak:"break-word",color:(null===(t=null==e?void 0:e.colors)||void 0===t?void 0:t.GBK02A)||"#121212"},Object(w.d)(2))},z=function(e){var t;return Object.assign({flex:"0 0 auto",width:"100%",lineHeight:"18px",fontSize:"13px",wordBreak:"break-word",color:(null===(t=null==e?void 0:e.colors)||void 0===t?void 0:t.GBK06A)||"#999999"},Object(w.d)(1))},L=function(e){return function(t){var n,a,o=(null===(n=null==t?void 0:t.colors)||void 0===n?void 0:n.GBK06A)||"#999999",r=(null===(a=null==t?void 0:t.colors)||void 0===a?void 0:a[e])||e;return{display:"flex",justifyContent:"flex-end",alignItems:"center",flex:"0 0 auto",textAlign:"right",fontSize:"13px",lineHeight:"17px",fontWeight:700,color:e?r:o}}},P=function(e){var t=e.title,n=e.subtitle,a=e.enableButton,o=e.buttonText,i=e.buttonTextColor;return Object(r.c)("div",{css:function(e){return Object.assign(Object.assign(Object.assign({},T),N(e)),{},{height:"84px"})},children:[Object(r.c)("div",{css:function(){return Object.assign({},E)},children:[Object(r.b)("span",{css:B,children:t},void 0),n&&Object(r.b)("span",{css:z,children:n},void 0)]},void 0),Object(r.b)("div",{css:{flex:"0 1 12px"}},void 0),Object(r.c)("div",{css:L(a&&i||""),children:[a?o:"",Object(r.b)(C,{},void 0)]},void 0)]},void 0)},M=function(e){var t=e.title,n=e.subtitle,a=e.thumbnail,o=e.enableButton,i=e.buttonText,c=e.buttonTextColor,l=function(){return Object.assign(Object.assign({},E),{},{justifyContent:"center",width:"100%"})},s=function(){return Object(r.b)("span",{css:{display:"block",content:'""',flex:"0 1 auto",height:"20px",width:"100%"}},void 0)};return Object(r.c)("div",{css:function(e){return Object.assign(Object.assign(Object.assign({},T),N(e)),{},{height:"99px"})},children:[Object(r.b)("div",{css:function(e){return Object.assign(Object.assign({},Object.assign(Object.assign({},{flex:"0 0 auto",marginRight:"12px",borderRadius:"6px",backgroundColor:"#E2E2E2",backgroundSize:"100% 100%",img:{borderRadius:"6px",width:"100%",height:"100%"}}),{},{width:"75px",height:"75px"})),{},{backgroundImage:a?"url(".concat(a,")"):""})}},void 0),Object(r.b)("div",{css:function(){return Object.assign(Object.assign({},T),{},{flex:"1 1 auto",height:"100%"})},children:o?Object(r.c)("div",{css:l,children:[Object(r.b)("span",{css:B,children:t},void 0),n&&Object(r.b)("span",{css:z,children:n},void 0),Object(r.b)(s,{},void 0),Object(r.c)("span",{css:L(c||""),children:[Object(r.b)("span",{children:i},void 0),Object(r.b)(C,{},void 0)]},void 0)]},void 0):Object(r.c)(r.a,{children:[Object(r.c)("div",{css:l,children:[Object(r.b)("span",{css:B,children:t},void 0),n&&Object(r.c)(r.a,{children:[Object(r.b)(s,{},void 0),Object(r.b)("span",{css:z,children:n},void 0)]},void 0)]},void 0),Object(r.b)("div",{css:{flex:"0 1 12px"}},void 0),Object(r.b)("div",{css:L(""),children:Object(r.b)(C,{},void 0)},void 0)]},void 0)},void 0)]},void 0)},_=function(e){var t=e.title,n=e.subtitle,a=e.thumbnail,o=e.buttonText,i=e.buttonTextColor;return Object(r.c)("div",{css:function(e){return Object.assign(Object.assign(Object.assign({},T),N(e)),{},{height:"124px"})},children:[Object(r.b)("div",{css:function(e){return Object.assign(Object.assign({},Object.assign(Object.assign({},{flex:"0 0 auto",marginRight:"12px",borderRadius:"6px",backgroundColor:"#E2E2E2",backgroundSize:"100% 100%",img:{borderRadius:"6px",width:"100%",height:"100%"}}),{},{width:"75px",height:"100px"})),{},{backgroundImage:a?"url(".concat(a,")"):""})}},void 0),Object(r.b)("div",{css:function(){return Object.assign(Object.assign({},T),{},{flex:"1 1 auto",height:"100%"})},children:Object(r.c)("div",{css:function(){return Object.assign(Object.assign({},E),{},{justifyContent:"center",width:"100%"})},children:[Object(r.b)("span",{css:B,children:t},void 0),Object(r.b)((function(){return Object(r.b)("span",{css:{display:"block",content:'""',flex:"0 1 auto",height:"30px",width:"100%"}},void 0)}),{},void 0),Object(r.c)("div",{css:function(){return Object.assign(Object.assign({},T),{},{"span:first-of-type":{fontSize:"15px"}})},children:[Object(r.b)("span",{css:L("GRD10A"),children:n},void 0),Object(r.c)("span",{css:L(i||""),children:[o,Object(r.b)(C,{},void 0)]},void 0)]},void 0)]},void 0)},void 0)]},void 0)},D=function(e){var t=e.templateType,n=e.className;return Object(r.b)("div",{css:{margin:"0 auto",maxWidth:"390px",borderRadius:"8px"},className:n,children:3===t?Object(r.b)(M,Object.assign({},e),void 0):2===t?Object(r.b)(P,Object.assign({},e),void 0):1===t?Object(r.b)(_,Object.assign({},e),void 0):null},void 0)},F=function(e,t){return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))},U="https://api.zhihu.com",V=U.indexOf("ming.in.zhihu.com")>0?"".concat(U,"/api/mocks/education-card.web/edu_cards"):"".concat(U,"/education-card/edu-cards"),G=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(i.useState)(null),a=o()(n,2),r=a[0],c=a[1];return Object(i.useEffect)((function(){e&&t&&F("".concat(V,"?card_ids=").concat(e)).then((function(e){e&&e.data&&c(Object(x.camelizeKeys)(e.data))})).catch((function(){}))}),[e,t]),r},q=i.memo((function(e){var t=e.id,n=e.position,a=void 0===n?"editor":n,o=e.originData,i=e.contentType,c=e.token,l=e.className,s=e.onData,u=!(o||!t),d=G((null==t?void 0:t.toString())||"",u),b=o||(null==d?void 0:d[t]);return"function"==typeof s&&s(b),b?"editor"===a?Object(r.b)(D,Object.assign(Object.assign({},b),{},{className:l}),void 0):Object(r.b)(I,Object.assign(Object.assign({},b),{},{contentType:i,token:c,id:t,children:Object(r.b)(D,Object.assign(Object.assign({},b),{},{className:l}),void 0)}),void 0):null})),H=function(e){var t=e.root,n=e.eduCardProps,a=e.createLinkCardPortal,c=Object(i.useState)([]),l=o()(c,2),s=l[0],u=l[1];Object(i.useEffect)((function(){var e,n,a=t&&t.querySelectorAll("*[data-draft-type=".concat(R.TYPE,"]"));if(a&&0!==a.length){var o,r=[],i=k(a.keys());try{for(i.s();!(o=i.n()).done;){var c=null===(n=null===(e=a[o.value])||void 0===e?void 0:e.dataset)||void 0===n?void 0:n.eduCardId;c&&r.push(c)}}catch(e){i.e(e)}finally{i.f()}u(r)}}),[t]);var d=G(s.join(","),!!s.length),b=function(e){return Object(r.b)(q,Object.assign(Object.assign({},e),{},{position:"content"}),void 0)},f=Object(i.useMemo)((function(){return a({idAttr:R.IDAttr,selector:"a[".concat(R.IDAttr,"]"),targetClassName:"RichText-EduCardContainer",component:b,getCardProps:function(e){return{id:e.id,originData:d&&d[e.id]}}})}),[d,a]);return d&&Object(r.b)(f,Object.assign(Object.assign({},n),{},{root:t}),void 0)}},1037:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(47),o=n(40),r=n(969),i=n(0),c=new(n(1203).EventEmitter),l=Symbol("useAllowOnePlayer/startPlay"),s=!1,u=function(e){var t=e.videoId,n=e.iframeRef,u=Object(i.useState)(null==n?void 0:n.current),d=Object(a.a)(u,2),b=d[0],f=d[1],p=Object(o.f)({threshold:.5}),h=Object(a.a)(p,2),m=h[0],v=h[1],g=Object(i.useState)(Object(r.c)(t,"*",!0)),O=Object(a.a)(g,2),j=O[0],y=O[1],C=Object(i.useRef)(!1),w=Object(o.d)((function(){!v&&null!=b&&b.contentWindow&&C.current&&!s&&j.dispatchMessage(null==b?void 0:b.contentWindow,r.a.PAUSE,{dontApplyOnFullScreen:!0})})),x=Object(o.d)((function(e){var n=e.sourceId;t!==n&&null!=b&&b.contentWindow&&j.dispatchMessage(b.contentWindow,r.a.PAUSE)})),k=Object(o.d)((function(){C.current=!0,c.emit(l,{sourceId:t})})),S=Object(o.d)((function(){C.current=!1})),R=Object(o.k)(Object(o.d)((function(){C.current&&w()})),100),A=Object(o.d)((function(){s=!0})),I=Object(o.d)((function(){s=!1}));Object(i.useEffect)((function(){var e=[j.subscribeMessage(r.b.PLAY,k).unsubscribe,j.subscribeMessage(r.b.PAUSE,S).unsubscribe,j.subscribeMessage(r.b.ENTER_PIP,A).unsubscribe,j.subscribeMessage(r.b.EXIT_PIP,I).unsubscribe];return c.on(l,x),window.addEventListener("scroll",R),function(){c.removeListener(l,x),e.forEach((function(e){return e()}))}}),[S,k,R,x,j,A,I]),Object(i.useEffect)((function(){m(b)}),[b,m]),Object(i.useEffect)((function(){w()}),[v,b,w]),Object(i.useEffect)((function(){!b&&null!=n&&n.current&&t&&(f(n.current),y(Object(r.c)(t,"*",!0)))}))}},1045:function(e,t,n){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";return e.length>t?e.slice(0,t)+n:e}function o(e,t){for(var n,a=0,o="",r=e.length,i=0;i<r&&((n=e[i]).charCodeAt(0)<128?a+=1:a+=2,o+=n,!(a>=t-1));i+=1);return o}n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c}));var r=null;function i(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"undefined"==typeof document?t=o(n=e.replace(/<.+?>/g,""),a):((r=r||document.createElement("div")).textContent=e,t=o(n=r.textContent.replace(/<.+?>/g,""),a));var l=!1;return t!==n&&(l=!0,t=t.slice(0,t.length-i.length),t+=i),c?{output:t,truncated:l}:t}function c(e){return/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g.test(e)}},1046:function(e,t,n){"use strict";function a(e){var t=String(e);return t.length<2&&(t="0"+t),t}function o(e){if(!isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(a(n),":").concat(a(t))}n.d(t,"a",(function(){return o}))},1047:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return C}));var a=n(24),o=n.n(a),r=n(25),i=n.n(r),c=n(66),l=n(0),s=n(82),u=n.n(s),d=n(132),b=n.n(d),f=n(5),p=[["REACTION_AGREE_DISAGREE","isBlockingVote"],["REACTION_ATTENTION_QUESTION","isBlockingFollowQuestion"],["REACTION_BIND_TOPIC","isBlockingBindTopic"],["REACTION_COLLECT","isBlockingCollect"],["REACTION_COMMENT","isBlockingComment"],["REACTION_GOOD_QUESTION","isBlockingLikeQuestion"],["REACTION_GRATITUDE","isBlockingLike"],["REACTION_REWARD","isBlockingReward"],["REACTION_SHARE","isBlockingShare"],["REACTION_VOTE","isBlockingPoll"]],h={isBlockingVote:!1,isBlockingLike:!1,isBlockingCollect:!1,isBlockingComment:!1,isBlockingShare:!1,isBlockingFollowQuestion:!1,isBlockingLikeQuestion:!1,isBlockingBindTopic:!1,isBlockingPoll:!1,isBlockingReward:!1};function m(e){return p.map((function(t){var n=i()(t,2),a=n[0],o=n[1];return e===a||e===Object(f.camelize)(a)?o:""})).filter(Boolean)[0]}function v(e){var t;return!!(null===(t=e)||void 0===t?void 0:t.reactionInstruction)}function g(e,t){if(v(e))return e.reactionInstruction;if("string"==typeof t){var n=b()(e,t);if(v(n))return n.reactionInstruction}if(Array.isArray(t))for(var a=0;a<t.length;a++){var o=b()(e,t[a],null);if(v(o))return o.reactionInstruction}}var O=Object(l.createContext)({getBlockStrategies:function(){return h}}),j=function(e){var t=e.data,n=e.dataPath,a=e.passThrough;return Object(c.jsx)(O.Provider,Object.assign({value:Object(l.useState)({getBlockStrategies:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dataPath,a=g(e,n),r=Object.assign({},h);return a?Object.keys(a).reduce((function(e,t){return"HIDE"===a[t]?Object.assign(Object.assign({},e),{},o()({},m(t),!0)):e}),r):r}(t,{dataPath:n});return a?a(e,t):e}})[0]},{children:e.children}),void 0)},y=function(){return{blockStrategies:(0,Object(l.useContext)(O).getBlockStrategies)()}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return u()((function(n){var a=e.dataPath,o=e.passThrough;return Object(c.jsx)(j,Object.assign({data:n,dataPath:a,passThrough:o},{children:Object(c.jsx)(t,Object.assign({},n),void 0)}),void 0)}),t)}},w=function(e){return u()((function(t){var n=y().blockStrategies;return Object(c.jsx)(e,Object.assign({},t,{blockStrategies:n}),void 0)}),e)}}).call(this,n(293))},1048:function(e,t,n){var a=n(226),o=n(101),r=n(143);e.exports=function(e){return"string"==typeof e||!o(e)&&r(e)&&"[object String]"==a(e)}},1049:function(e,t,n){"use strict";var a=n(1105);n.d(t,"getReferencedContent",(function(){return a.d})),n.d(t,"isCoCreateRelation",(function(){return a.e})),n.d(t,"isReferenceRelation",(function(){return a.f}));var o=n(1648);n.d(t,"CoCreationLabel",(function(){return o.a}));var r=n(1649);n.o(r,"CancelCoCreation")&&n.d(t,"CancelCoCreation",(function(){return r.CancelCoCreation})),n.o(r,"CoCreationLinkCard")&&n.d(t,"CoCreationLinkCard",(function(){return r.CoCreationLinkCard})),n.o(r,"CreationRelationshipBar")&&n.d(t,"CreationRelationshipBar",(function(){return r.CreationRelationshipBar})),n.o(r,"renderDualAuthor")&&n.d(t,"renderDualAuthor",(function(){return r.renderDualAuthor}));var i=n(1748);n.d(t,"CreationRelationshipBar",(function(){return i.a}));var c=n(1650);n.d(t,"CoCreationLinkCard",(function(){return c.a}));var l=n(1651);n.d(t,"renderDualAuthor",(function(){return l.a}));var s=n(1762);n.d(t,"CancelCoCreation",(function(){return s.a}))},1050:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return i}));var a=n(30),o=50,r={expand:2765,title:2812,voteUp:2756,voteDown:2761,toggleComment:2757,share:2758,favlists:2759,thank:2767,options:2760,report:2796,ignore:2821,follow:2797,getCommentAction:function(e){return e?"Expand":"Collapse"}},i=a.i+10},1059:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var a=n(34),o=n.n(a),r=n(23),i=n.n(r),c=n(28),l=n.n(c),s=n(27),u=n.n(s),d=n(29),b=n.n(d),f=n(19),p=n.n(f),h=n(42),m=n.n(h),v=n(0),g=n(13),O=n.n(g),j=n(8),y=["className"];function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return b()(this,n)}}var w=function(e){u()(n,e);var t=C(n);function n(){return i()(this,n),t.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=o()(e,y);return Object(j.g)("textarea",m()({},n,{className:O()(t,"TextArea")}))}}]),n}(v.Component)},1062:function(e,t,n){"use strict";var a=n(1),o=n(21),r=n(46),i=n(45),c=n(41),l=n.n(c),s=n(151);t.a=Object(o.connect)((function(e){var t;return{vipInfo:null===(t=Object(r.b)(e))||void 0===t?void 0:t.vipInfo}}))((function(e){var t=e.widget,n=e.className,o=e.vipInfo,r=t.id,c=t.url;return Object(a.b)(s.a,{className:n,onClick:function(){var e;(null==o||null===(e=o.widget)||void 0===e?void 0:e.id)!=="".concat(r)&&(l.a.set("widgetId",r),l.a.set("widgetUrl",c))},preset:"link",a:!0,to:"https://".concat(i.a.wwwHost,"/settings/stickers"),children:Object(a.b)("img",{src:c,style:{width:"100%"},alt:""})})}))},1067:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(141),o=n(87),r=n(61);function i(e,t){Object(r.a)(2,arguments);var n=Object(o.a)(e),i=Object(a.a)(t);if(isNaN(i))return new Date(NaN);if(!i)return n;var c=n.getDate(),l=new Date(n.getTime());l.setMonth(n.getMonth()+i+1,0);var s=l.getDate();return c>=s?l:(n.setFullYear(l.getFullYear(),l.getMonth(),c),n)}},1068:function(e,t,n){var a=n(488);e.exports=function(e,t,n){var o=e.length;return n=void 0===n?o:n,!t&&n>=o?e:a(e,t,n)}},1069:function(e,t,n){var a=n(1100),o=n(971),r=n(1101);e.exports=function(e){return o(e)?r(e):a(e)}},1075:function(e,t,n){"use strict";var a,o=n(4),r=n(32),i=n(47),c=n(1),l=n(0),s=n.n(l),u=n(20),d=n(486),b=n(44),f=n.n(b),p=n(24),h=n.n(p),m=n(449),v=n.n(m),g=n(37),O=n.n(g),j=n(56),y=n.n(j),C=n(152),w=n.n(C),x=n(25),k=n.n(x),S=n(23),R=n.n(S),A=n(28),I=n.n(A),T=n(34),E=n.n(T),N=n(59),B=n.n(N),z=n(931),L=n(3),P=n.n(L),M=n(13),_=n.n(M),D=n(70),F=n.n(D),U=n(150),V=n(5),G=n(388),q=n.n(G),H=n(149),K=n(2021),W=n(2022),Z=n(2276),Q=n.n(Z),Y=n(72),J=n(40),X=n(918),$=n(26),ee=n(50),te=n(93),ne=(n(671),n(8)),ae=n(71),oe=n.n(ae),re=n(674),ie=n.n(re),ce=n(53),le=n.n(ce),se=n(1735),ue=["text","target","url","image","imageWidth","imageHeight","component","className","size","children"],de=["inEditor","data-text","href","zaBlock"],be=["root"],fe=["as","tag","className","html","clearBoth","richContentKey","root","Portal","useHooks"],pe=["src","useWebP","useMp4","onRef","onLoadStateChange"],he=["html","css","options","linkCardInfo"],me=["lazyLoadImageOptions","useGifPortalOption"];var ve=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){"function"==typeof t?t(e):t&&(t.current=e)}))}};function ge(e){var t=this;return e.length?function(n,a){for(var o=e.length-1,r=n;o>=0;)r=e[o].call(t,r,a),o--;return r}:B.a}var Oe=s.a.forwardRef((function(e,t){var n=F()(e,["entityType","entityData","notCommerce"]),a=n.text,o=n.target,r=n.url,i=n.image,l=n.imageWidth,s=n.imageHeight,u=n.component,d=n.className,b=n.size,f=n.children,p=E()(n,ue),h=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return"180x120";if(n<=.8)return"120x160"}return"ipico"}(l,s),m=Object(U.imgUrl)(i,h);return Object(c.b)(u,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({ref:t,target:o,href:r,"data-draft-node":"block","data-draft-type":"link-card"},m&&{"data-image":m}),l&&{"data-image-width":l}),s&&{"data-image-height":s}),b&&{"data-size":b}),a!==r&&a&&{"data-text":a}),{},{className:_()("LinkCard new",d)},p),{},{children:f||Object(c.c)(c.a,{children:[Object(c.c)("span",{className:"LinkCard-contents",children:[Object(c.b)("span",{className:"LinkCard-title loading","data-text":!0}),Object(c.b)("span",{className:"LinkCard-desc loading"})]}),Object(c.b)("span",{className:"LinkCard-image LinkCard-image--default"})]})}))}));Oe.propTypes={component:P.a.oneOfType([P.a.string,P.a.func]),target:P.a.string,url:P.a.string.isRequired,text:P.a.string,image:P.a.string,imageWidth:P.a.oneOfType([P.a.string,P.a.number]),imageHeight:P.a.oneOfType([P.a.string,P.a.number])},Oe.defaultProps={component:"a",target:"_blank"};var je={answer:"回答",article:"文章",zvideo:"视频",question:"问题",collection:"收藏夹",roundtable:"圆桌",topic:"话题"},ye={voteupCount:"赞同",commentCount:"评论",playCount:"播放",followerCount:"关注",answerCount:"回答",visitCount:"浏览"},Ce={answer:["voteupCount","commentCount"],article:["voteupCount","commentCount"],zvideo:["playCount","voteupCount"],question:["followerCount","answerCount"],collection:["visitCount","followerCount"],default:["followerCount","visitCount"]},we=function(e){var t=e.twoLine,n=e.children;return Boolean(n)&&Object(c.b)("span",{className:_()("LinkCard-title",{"two-line":t}),children:n})},xe=function(e){var t=e.data,n=t.objectType,a=(Ce[n]||Ce.default).map((function(e){var n=t[e];return"".concat(Object(H.cnNiceNumber)(n)).concat(ye[e])})).filter(Boolean).join(" · ");return Object(c.c)("span",{className:"LinkCard-desc",children:[a,Object(c.b)("span",{className:"LinkCard-tag",children:je[n]})]})},ke=function(e){var t=e.url,n=Object(l.useMemo)((function(){var e=null,n=q()(t,!0);return"link.zhihu.com"===n.hostname&&(e=n.query.target),(e||t).replace(/^https?:\/\//,"")}),[t]);return Object(c.c)("span",{className:"LinkCard-desc",children:[Object(c.b)(K.a,{size:14,center:!0}),n]})},Se=function(e){var t=e.url,n=e.isVideo,a=e.ratio,o=void 0===a?1:a,r=e.onClick;return Boolean(t)&&Object(c.c)("span",{className:"LinkCard-image",style:{height:60*o},children:[Object(c.b)("img",{src:t,onClick:r,alt:n?"点击可播放视频":""}),n&&Object(c.b)("span",{className:"LinkCard-image--video",children:Object(c.b)(W.a,{size:10,center:!0})})]})},Re=function(e,t){var n=e.url,a=e.data,o=e.onClick,r=e.onClickImage,i=a.title,l=a.thumbnail,s=a.objectType;return Object(c.c)(c.a,{children:[Object(c.c)("span",{ref:t,className:"LinkCard-contents",onClick:o,children:[Object(c.b)(we,{twoLine:!0,children:i}),s?Object(c.b)(xe,{data:a}):Object(c.b)(ke,{url:n})]}),Object(c.b)(Se,{url:l,isVideo:"zvideo"===s,onClick:r})]})},Ae=s.a.forwardRef(Re),Ie=function(e){var t=e.className,n=e.html;return n?Object(c.b)("span",{className:"LinkCard-richText ".concat(t),dangerouslySetInnerHTML:{__html:"<object>".concat(n,"</object>")}}):null},Te=function(e){var t=e.data,n=t.title,a=t.desc,o=t.url,r=t.image,i=t.ratio,l=t.isVideo;return Object(c.c)(c.a,{children:[Object(c.c)("span",{className:"LinkCard-contents",children:[Object(c.b)(we,{twoLine:!0,children:n},"title"),Object(c.b)(Ie,{className:"LinkCard-desc",html:a}),!a&&Object(c.b)(ke,{url:o},"url")]}),Object(c.b)(Se,{url:r,ratio:i,isVideo:l})]})},Ee={ANSWER:"Answer",ARTICLE:"Column",ZVIDEO:"Zvideo",QUESTION:"Question",COLLECTION:"Collection",ROUNDTABLE:"Roundtable",SPECIAL:"Special",TOPIC:"Topic"},Ne=function(e){var t=Object(l.useMemo)((function(){return function(e){var t={};if(e.data){var n=Object(V.camelizeKeys)(JSON.parse(e.data)),a=n.source,o=void 0===a?{}:a,r=n.display,i=void 0===r?{}:r,c=n.zaData,l=void 0===c?{}:c,s=i.cardOpenUrl,u=i.title,d=i.content,b=i.desc,f=i.image||{};t={source:o,url:s,title:u,content:d,desc:b,image:f.imageUrl,ratio:f.ratio,isVideo:f.isVideo,zaAttachInfo:l.attachInfo}}return Object.assign(Object.assign(Object.assign({},t),e),{},{title:e.text||t.title,image:t.image||e.image})}(e)}),[e]),n=t.source,a=t.target,o=t.title,r=t.url,i=t.zaAttachInfo;return Object(c.b)(Oe,{notCommerce:!0,target:a,text:o,url:r,"data-za-attach-info":i,"data-za-content-type":Ee[null==n?void 0:n.contentType]||"Unknown",className:"static",children:Object(c.b)(Te,{data:t})})},Be=/([-\w]+)(="([^"]+)"|='([^']+)')?/g,ze=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.decodeValue,o=void 0!==a&&a,r={};t=Be.exec(e);){var i=t[1],c=t[3]||t[4];r[i]=(o?Pe(c):c)||""}return r},Le=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#34;/g,'"').replace(/&#13;/g,"\r")}function Me(){return Math.max(window.innerHeight/10,100)}var _e=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var n=document.defaultView.getComputedStyle(t);if([n.overflow,n.overflowY,n.overflowX].some((function(e){return"scroll"===e||"auto"===e})))return t;t=t.parentNode||t.parentElement}return window};function De(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=_e(e),o=e.getBoundingClientRect().top+(a.pageYOffset||a.scrollTop||0)-(n?Me():0)-t;a.scrollTo({top:o,behavior:"smooth"})}var Fe=/<a\b([^>]*data-draft-type="link-card"[^>]*)>(.*?)<\/a>/g,Ue=function(e){var t=e.target,n=e.url,a=e.component,o=e.className;return Object(c.b)(a,{target:t,href:n,"data-draft-node":"block","data-draft-type":"link-card","data-is-ecommerce":"1",className:_()("LinkCard",o),children:Object(c.c)("span",{className:"LinkCard-content LinkCard-ecommerceLoadingCard",children:[Object(c.b)("div",{className:"LinkCard-ecommerceLoadingCardAvatarWrapper",children:Object(c.b)("img",{src:"https://pic2.zhimg.com/v2-1b0bbef27f0496a58468f92d94c8a80e_l.png",className:"LinkCard-ecommerceLoadingCardNetwork"})}),Object(c.c)("div",{className:"LinkCard-ecommerceLoadingCardLoadingbar",children:[Object(c.b)("span",{}),Object(c.b)("span",{})]})]})})};Ue.defaultProps={component:"a",target:"_blank"};var Ve=/<a\b([^>]*BIZ(=|%3D)ECOMMERCE[^>]*)>(.*?)<\/a>/g;var Ge=function(){function e(t){var n,a,o,r=this;R()(this,e),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.url||(r.url=e),e!==r.url)throw new Error("mismatch url\n".concat(e,"\n").concat(r.url),e,r.url);return new Promise((function(e,n){r.addToQueue({options:t,resolve:e,reject:n})}))},(a="fetch")in(n=this)?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o,this.instance=null,this.customFetch=t,this.delay=200,this.maxDelay=1e3,this.url="",this.queueMaxLength=10,this.queue=[],this.startTime=Date.now(),this.timeout=null,this.initialized=!1}var t;return I()(e,[{key:"initConfig",value:function(e){var t=e.delay,n=e.maxDelay,a=e.maxBatchCount;t&&(this.delay=t),n&&(this.maxDelay=n),a&&(this.maxBatchCount=a),this.initialized=!0}},{key:"buildFetchParams",value:function(e){var t=k()(e,1)[0].options,n=e.reduce((function(e,t){var n,a;return(null===(n=(a=t.options).dataBuilder)||void 0===n?void 0:n.call(a,e,t))||e}),{}),a=this.url,o=!t.method||"GET"===t.method.toUpperCase();if(o){var r=q()(a,!0);r.query=Object.assign(Object.assign({},r.query),n),a=r.toString()}return[a,Object.assign(Object.assign({},t),{},{data:o?null:Object.assign(Object.assign({},t.data),n)})]}},{key:"doFetch",value:(t=w()(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.queue.length){e.next=2;break}return e.abrupt("return");case 2:return t=this.queue,this.queue=[],e.prev=4,e.next=7,this.customFetch.apply(this,y()(this.buildFetchParams(t)));case 7:n=e.sent,t.forEach((function(e){var t=e.options,a=e.resolve;t.resultBuilder?a(t.resultBuilder(n)):a(n)})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t.forEach((function(t){return t.reject(e.t0)}));case 14:case"end":return e.stop()}}),e,this,[[4,11]])}))),function(){return t.apply(this,arguments)})},{key:"addToQueue",value:function(e){var t=this;this.initialized||this.initConfig(e.options),clearTimeout(this.timeout),(Date.now()-this.startTime>this.maxDelay||this.queue.length>=this.maxBatchCount)&&(this.startTime=Date.now(),this.doFetch()),this.queue.push(e),setTimeout((function(){t.startTime=Date.now(),t.doFetch()}),this.delay)}}]),e}(),qe=null,He=function(){throw new Error("Not implemented")},Ke=function(){return function(e){return function(t,n){return qe||(qe=new Ge(e)),qe.fetch(t,n)}}(function(e){return function(){var t=w()(O.a.mark((function t(n,a){var o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n,a);case 2:return o=t.sent,t.t0=V.camelizeKeys,t.next=6,o.json();case 6:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}("undefined"!=typeof fetch?fetch:He))},We={},Ze=function(e,t,n){var a=e["data-text"],o=e.href,r=e.zvideoLinkCardProps;Object(l.useEffect)((function(){n&&Object(X.onViewedOnce)(t.current,(function(){return e=t.current,void $.a.trackCardShow(e,{id:7844},{button:{text:"inlinezvideo"}});var e}))}),[n,t]);var i=Object(J.d)((function(e){!function(e,t,n){var a;$.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)}(e,{title:a,url:o,video:{}})})),c=Object(J.d)((function(e){!function(e,t,n){var a;$.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)}(e,r,{title:a,url:o})}));return n?{handleImageClick:i,handleInfoClick:c}:{}},Qe={answer:"Answer",article:"Column",zvideo:"Zvideo",question:"Question",collection:"Collection",roundtable:"Roundtable",topic:"Topic"},Ye=s.a.forwardRef((function(e,t){var n=F()(e,["zvideoLinkCardProps"]),a=n.inEditor,o=n["data-text"],r=n.href,i=n.zaBlock,s=E()(n,de),u=Object(l.useRef)(),d=function(e){var t=Object(l.useRef)(0),n=e.inEditor,a=e["data-offset-key"],o=e["data-text"],r=e["data-image"],i=e.href,c=Object(l.useState)((function(){return n&&We[a]||null})),s=k()(c,2),u=s[0],d=s[1],b=Object(J.f)({once:!0}),f=k()(b,2),p=f[0],h=f[1],m=Object(J.d)((function(e){var t=e||u;if(!t||0===Object.keys(t).length)return{objectType:null,title:o||i,thumbnail:r};t.title=o||t.title||i,t.thumbnail=r||t.thumbnail;var c=Object.assign(Object.assign({},t),{},{cached:!0});return n&&(We[a]=c),c})),v=Object(J.d)(Ke()),g=Object(J.d)(w()(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.current+=1,e.prev=1,e.next=4,v("https://www.zhihu.com/api/v4/link_card_infos",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},dataBuilder:function(e){return e.urls="".concat(e.urls?e.urls+",":"").concat(i),e},resultBuilder:function(e){return e[i]}});case 4:n=e.sent,d(m(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.current<=1?g():d(m());case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))));return Object(l.useEffect)((function(){!h||u&&u.cached||g()}),[h,u,g]),Object(l.useEffect)((function(){n&&d(m())}),[n,m,o,r]),[p,u]}(e),b=k()(d,2),f=b[0],p=b[1],h=Ze(e,u,"zvideo"===(null==p?void 0:p.objectType)),m=h.handleImageClick,v=h.handleInfoClick,g=Object(l.useCallback)(ve(t,f,u),[]),j=a?Ae:Y.a,y=a?null:{as:Ae,shouldTrackShow:!0,zaText:!0,zaType:"Button",zaAction:"OpenUrl",zaBlock:i,extra:{link:{url:r}},"data-za-module":"Content"},C=Object(c.b)(j,Object.assign(Object.assign({},y),{},{url:r,data:p,onClick:v,onClickImage:m}));return Object(c.b)(Oe,Object.assign(Object.assign({ref:g,text:o,url:r,component:"a"},s),{},{children:Boolean(p)&&Object(c.b)(Y.b,{content:{type:Qe[p.objectType]||"Unknown"},children:C})}))})),Je=function(e){return function(t){var n=Object(l.useState)(null),a=k()(n,2),o=a[0],r=a[1],i=e.idAttr,s=e.selector,u=e.component,d=e.targetClassName,b=e.cardDataFilter,f=e.getCardProps,p=t.root,h=E()(t,be),m=i&&s&&d&&Object(l.useCallback)((function(e){return function(e){var t=e.idAttr,n=e.targetClassName;return function(e){var a=e.getAttribute(t),o=document.createElement("div");return o.className=n,e.parentNode.replaceChild(o,e),{data:{id:a},target:o}}}({idAttr:i,targetClassName:d})(e)}),[i,d]),v=Object(l.useMemo)((function(){return m?function(e){return Array.from(e.querySelectorAll(s)).map(m)}:B.a}),[m,p,s]);return Object(l.useEffect)((function(){if(p||s&&b){var e=(b||v)(p).map((function(e){var t=e.data,n=e.target,a=null;return"function"==typeof f&&(a=f(t)),Object(ee.createPortal)(Object(c.b)(u,Object.assign(Object.assign({id:t.id},a),h),t.id),n)}));e.length>0&&r(e)}}),[p]),o}},Xe=Je({cardDataFilter:function(e){return Array.from(e.querySelectorAll("a.LinkCard[data-draft-type=link-card]:not([data-is-ecommerce])")).map((function(e){var t,n=(t=e.attributes,Array.from(t).reduce((function(e,t){return"class"===t.name?e.className=t.value:e[t.name]=t.value,e}),{})),a=document.createElement("div");return a.className="RichText-LinkCardContainer",e.parentNode.replaceChild(a,e),{data:n,target:a}}))},getCardProps:function(e){return e.href&&e.href.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)?e.zaBlock="ZTextZVideoLinkCard":e.zaBlock="ZTextLinkCard",e},component:Ye}),$e=function(e){return{position:"relative",display:"flex",alignItems:"center",justifyContent:"space-between",padding:12,borderRadius:"inherit",height:80,boxSizing:"border-box",background:e.colorMod(e.colors.GBK10A).alpha(.88),color:e.colors.GBK08A}},et=function(e){return{width:60,height:60,background:e.colors.GBK09A,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6,marginRight:10}},tt=function(e){return{height:60,flex:1,display:"flex",flexDirection:"column",span:{height:16,display:"inline-block",background:e.colors.GBK09A},"span:nth-of-type(1)":{width:60,marginBottom:4},"span:nth-of-type(2)":{width:127}}},nt=function(e){return{".LinkCard.old":{position:"relative",display:"block",margin:"1em auto",width:390,boxSizing:"border-box",borderRadius:12,maxWidth:"100%",overflow:"hidden","&,&:hover":{textDecoration:"none",border:"none !important",color:"inherit !important"}},".LinkCard-ecommerceLoadingCard":$e(e),".LinkCard-ecommerceLoadingCardAvatarWrapper":et(e),".LinkCard-ecommerceLoadingCardNetwork":{width:20,height:20},".LinkCard-ecommerceLoadingCardLoadingbar":tt(e)}},at=function(e){return{position:"relative",display:"flex",boxSizing:"border-box",flexDirection:"row",alignItems:"center",width:390,minHeight:84,borderRadius:8,maxWidth:"100%",overflow:"hidden",margin:"16px auto",padding:"12px 12px 9px 12px",backgroundColor:e.colors.GBK10A,"&, &:hover":{textDecoration:"none",border:"none !important",color:"inherit !important"},".LinkCard-contents":{display:"block",flex:"1 1 auto",position:"relative",".loading":{height:14,background:e.colors.GBK09A,borderRadius:7},"&.withTitle":{marginBottom:3}},".LinkCard-title":Object.assign(Object.assign({display:"block",fontSize:15,fontWeight:500,lineHeight:1.4,marginBottom:2,color:e.colors.GBK02A},Object(te.d)(1)),{},{"&.two-line":Object.assign({lineHeight:"20px"},Object(te.d)(2)),"&.loading":{marginBottom:8,width:"80%","&.withTitle":{marginBottom:6}},"&.loadingTitle":{marginBottom:5}}),".LinkCard-excerpt":Object.assign(Object.assign({display:"block",textOverflow:"ellipsis",fontSize:13,lineHeight:"18px",color:e.colors.GBK06A,marginBottom:4},Object(te.d)(1)),{},{".LinkCard-author":{color:e.colors.GBK03A}}),".LinkCard-desc":Object.assign(Object.assign({display:"block",fontSize:13,height:18,lineHeight:"18px",color:e.colors.GBK06A,wordBreak:"break-all"},Object(te.d)(1)),{},{".LinkCard-tag,.tag":{display:"inline-block",fontSize:11,marginLeft:8,padding:"0 4px",borderRadius:3,background:e.colorMod(e.colors.GBK08A).alpha(.3)},"&.loading":{width:"40%"},svg:{marginRight:2}}),".LinkCard-image":{flex:"0 0 auto",backgroundColor:e.colors.GBK09A,backgroundSize:"cover",backgroundPosition:"center",position:"relative",display:"block",width:60,height:60,marginLeft:20,objectFit:"cover",borderRadius:"inherit",overflow:"hidden","&.LinkCard-image--default":{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.colors.GBK09A,color:e.colors.GBK08A,svg:{color:e.colors.GBK06A}},img:{width:"100%",height:"100%",objectFit:"cover"},".LinkCard-image--video":{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)",width:24,height:24,borderRadius:12,background:e.colorMod(e.colors.GBK99C).alpha(.9),pointerEvents:"none",svg:{color:e.colors.GBK03A}}},".LinkCard-richText":{".text":{color:e.colors.GBK03A},".bold":{fontWeight:e.fontWeights.bold},".tag":{marginLeft:4}}}},ot=function(e){return{".LinkCard.new":at(e)}},rt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then((function(e){return e.json()}))},it=function(e){return Object.assign(Object.assign({},nt(e)),ot(e))},ct=function(e){return Object.assign(Object.assign({},ot(e)),nt(e))},lt="function"==typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)},st=function(e){var t=Object(l.useRef)(null);Object(l.useEffect)((function(){if(e)return lt((function(){e&&(t.current=function(e){var t=new IntersectionObserver((function(e){e.forEach(n)}),{threshold:[.1]});function n(e){if(0!==e.intersectionRatio){var n=e.target;n.dataset.zaDetailViewId=n.cardShowViewId,$.a.trackCardShow(n,{},{link:{url:n.href}}),t.unobserve(n),n.clickViewId&&(n.dataset.zaDetailViewId=n.clickViewId)}}return[{cardShowViewId:1042,clickViewId:1043,selector:"a.external, a.internal"},{cardShowViewId:1044,clickViewId:1045,selector:"a.member_mention, a.UserLink-link"},{cardShowViewId:174,clickViewId:175,selector:"a.video-box"},{cardShowViewId:171,clickViewId:172,selector:'a[data-draft-type="link-card"]'},{cardShowViewId:7692,selector:"a.FileLinkCard .FileLinkCard-info"},{cardShowViewId:9744,selector:".Catalog"}].forEach((function(n){var a=n.selector,o=n.cardShowViewId,r=n.clickViewId;Array.from(e.querySelectorAll(a)).forEach((function(e){e.cardShowViewId=o,e.clickViewId=r,t.observe(e)}))})),function(){t.disconnect()}}(e))})),function(){t.current&&t.current()}}),[e])},ut=function(e){return{elementLocation:{type:"Button",content:{type:e.dataset.zaContentType}}}},dt=function(e){return{attachedInfoBytes:e.dataset.zaAttachInfo}},bt=[{selector:"a.external, a.internal",zaBlock:"ZTextLink"},{selector:"a.member_mention, a.UserLink-link",zaBlock:"ZTextMention"},{selector:"a.video-box",zaBlock:"ZTextVideoCard"},{selector:'a.LinkCard.old[data-draft-type="link-card"]',zaBlock:"ZTextLinkCard"},{selector:'a.LinkCard.new.static[data-draft-type="link-card"]:not([data-za-content-type="Zvideo"])',zaBlock:"ZTextLinkCard",viewInfoBuilder:ut,extraInfoBuilder:dt},{selector:'a.LinkCard.new.static[data-draft-type="link-card"][data-za-content-type="Zvideo"]',zaBlock:"ZTextZVideoLinkCard",viewInfoBuilder:ut,extraInfoBuilder:dt},{selector:"a.FileLinkCard",zaBlock:"ZTextFileLinkCard"}],ft=function(e){var t,n,a=e.element,o=e.config,r=null===(t=o.viewInfoBuilder)||void 0===t?void 0:t.call(o,a,o),i=Object.assign({elementLocation:{type:"Button"},block:o.zaBlock},r),c=Object.assign({action:"OpenUrl",elementLocation:{type:"Button"},block:o.zaBlock,eventType:"Click"},r),s=Object.assign({link:{url:a.href}},null===(n=o.extraInfoBuilder)||void 0===n?void 0:n.call(o,a,o)),u=Object(Y.i)().trackEvent,d=Object(Y.h)(i,s),b=Object(J.d)((function(e){u(c,s),"ZTextLinkCard"===o.zaBlock&&a.dataset.isEcommerce&&e.preventDefault()}));return Object(l.useEffect)((function(){return a.addEventListener("click",b),function(){a.removeEventListener("click",b)}}),[]),Object(l.useEffect)((function(){return d(a),function(){return d(null)}}),[]),null},pt=function(e){var t=e.root,n=Object(l.useState)([]),a=k()(n,2),o=a[0],r=a[1];return Object(l.useEffect)((function(){if(t){var e=[];bt.forEach((function(n){var a=n.selector;Array.from(t.querySelectorAll(a)).forEach((function(t){e.push({el:t,config:n})}))})),r(e)}}),[t]),Object(c.b)(l.Fragment,{children:o.map((function(e,t){var n=e.el,a=e.config;return Object(c.b)(ft,{element:n,config:a},t)}))})},ht=/<p><br><\/p>/g,mt=/<[^<>\s]+(\s|>)/,vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"solid";return{borderBottom:"1px ".concat(t," ").concat(e.colors.GBK05A)}},gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"solid";return{borderBottom:"1px ".concat(t," ").concat(e.colors.GBL07A)}},Ot=function(e){return{color:e.colors.GBL07A,"&:hover":gt(e)}},jt=Object(ne.h)(a||(a=v()(["\n   from {\n    opacity: 0;  \n   }\n   \n   to {\n    opacity: 1;\n  }\n"]))),yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[data-focus-visible]";return h()({outline:"none",transition:"box-shadow 0.3s"},"html".concat(t," &"),{boxShadow:"0 0 0 2px ".concat(e.colors.GBK99A,", 0 0 0 4px ").concat(e.colorMod(e.colors.GBL01A).alpha(.3))})},Ct={"--zFontSansSerif":"-apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', 'Source Han Sans SC', 'Noto Sans CJK SC', 'WenQuanYi Micro Hei', sans-serif","--zFontMonospace":"Menlo, Monaco, Consolas, 'Andale Mono', 'lucida console', 'Courier New', monospace"},wt=[function(e){return e?e.replace(ht,'<p class="ztext-empty-paragraph"><br /></p>'):e},function(e){return e?e.replace(mt,(function(e,t){return e.replace(t," data-first-child".concat(t))})):e}],xt=Object(l.forwardRef)((function(e,t){var n,a=e.as,o=e.tag,r=e.className,i=e.html,l=e.clearBoth,s=void 0!==l&&l,u=e.richContentKey,d=e.root,b=e.Portal,f=e.useHooks,p=E()(e,fe),h=ge(wt);f(d);var m=null!==(n=null!=a?a:o)&&void 0!==n?n:"div";return Object(c.c)(c.a,{children:[b&&Object(c.b)(b,{root:d}),Object(c.b)(m,Object.assign({ref:t,css:function(e){return Object.assign(Object.assign(Object.assign(Object.assign({},function(e){return{"a.UserLink-link":Ot(e),"lazy[data-lazy-status]":{backgroundColor:e.colors.GBK10A},'lazy[data-lazy-status="ok"]':{backgroundColor:"transparent",animation:"".concat(jt," 0.5s ease-in")}}}(e)),function(e){return{wordBreak:"break-word",lineHeight:"1.6","> [data-first-child]":{marginTop:0},"> :last-child":{marginBottom:0},"h1,h2":{clear:"left",marginTop:"calc((".concat("1.4em"," * 2) / 1.2)"),marginBottom:"calc(".concat("1.4em"," / 1.2)"),fontSize:"1.2em",lineHeight:1.5,fontWeight:e.fontWeights.bold},"h3,h4,h5,h6":{clear:"left",marginTop:"calc((".concat("1.4em"," * 1.5) / 1.1)"),marginBottom:"calc(".concat("1.4em"," / 1.1)"),fontSize:"1.1em",lineHeight:"1.5",fontWeight:e.fontWeights.bold},u:Object.assign({textDecoration:"none"},vt(e,"dashed")),b:{fontWeight:e.fontWeights.bold},sup:{fontSize:"0.8em"},"sup[data-draft-type='reference']":{color:e.colors.GBL07A},"a:focus":yt(e),"a.ztext-link,a.internal,a.external":Object.assign(Object.assign({textDecoration:"none",cursor:"pointer"},vt(e)),{},{"&:hover":Object.assign({color:e.colors.GBL07A},gt(e))," > .ellipsis::after":{content:"'...'"},"> .invisible":{font:"0/0 a",color:"transparent",textShadow:"none",backgroundColor:"transparent"},u:{border:"none"}}),"a.member_mention":Ot(e),p:{margin:"".concat("1.4em"," 0")},"p.ztext-empty-paragraph":{margin:"calc((".concat("2.8em","- (").concat("1.4em"," * 2 + 1.6em)) / 2) 0"),"+ .ztext-empty-paragraph":{margin:"".concat("1.4em"," 0")}},hr:{margin:"4em auto",width:"240px",maxWidth:"100%",border:"none",borderTop:"1px solid ".concat(e.colors.GBK08A)},"img[eeimg]":Object.assign({maxWidth:" 100%",verticalAlign:"middle"},e.isDarkMod&&{filter:"invert(1)"}),'img[eeimg="1"]':{margin:"0 3px",display:"inline-block"},'img[eeimg="2"]':{margin:"".concat("1.4em"," 0"),display:"block"},blockquote:{margin:"".concat("1.4em"," 0"),paddingLeft:"1em",color:e.colors.GBK04A,borderLeft:"3px solid ".concat(e.colors.GBK08A)},"ol,ul":{margin:"".concat("1.4em"," 0"),padding:0,"ol,ul":{margin:0},"> ol, > ul":{display:"table-row","&::before":{display:"table-cell",content:"''"}}},ul:{display:"table","&>li":{display:"table-row",listStyle:"none","&::before":{display:"table-cell",content:"'•  '",whiteSpace:"pre"}}},ol:{display:"table",counterReset:"ol","> li":{display:"table-row",listStyle:"none","&::before":{display:"table-cell",textAlign:"right",counterIncrement:"ol",content:"counter(ol) '. '",whiteSpace:"pre"}}},"ol ol":{counterReset:"ol2","li::before":{counterIncrement:"ol2",content:"counter(ol2) '. '"}},"ol ol ol":{counterReset:"ol3","li::before":{counterIncrement:"ol3",content:"counter(ol3) '. '"}},"ol ol ol ol":{counterReset:"ol4","li::before":{counterIncrement:"ol4",content:"counter(ol4) '. '"}},figure:{margin:"".concat("1.4em"," 0"),".content_image,.origin_image":{margin:"0 auto"},figcaption:{marginTop:"calc(0.6em / 0.9)",padding:"0 1em",fontSize:"0.9em",lineHeight:"1.5",textAlign:"center",color:e.colors.GBK06A},"& + figure":{marginTop:"calc(".concat("1.4em"," * 1.6)")},"&[data-size='small'],&:not([data-size]) > [data-size='small']":{clear:"both"},"&[data-size='left'],&:not([data-size]) > [data-size='left']":{float:"left",margin:"0 20px 20px 0",maxWidth:"33%"},"&[data-size='right'],&:not([data-size]) > [data-size='right']":{float:"right",margin:"0 0 20px 20px",maxWidth:"33%"},"&[data-size='collapse']":{marginBottom:0,"& + figure":{marginTop:0}}},".content_image, .origin_image":{display:"block",maxWidth:"100%",margin:"".concat("1.4em"," auto"),"&[data-size='small']":{maxWidth:"40%"},"&.zh-lightbox-thumb":{cursor:"zoom-in"}},code:{margin:"0 2px",padding:"3px 4px",borderRadius:"3px",fontFamily:Ct.zFontMonospace,fontSize:"0.9em",backgroundColor:e.colors.GBK10A},pre:{margin:"".concat("1.4em"," 0"),padding:"calc(0.8em / 0.9)",fontSize:"0.9em",wordBreak:"initial",wordWrap:"initial",whiteSpace:"pre",overflow:"auto",WebkitOverflowScrolling:"touch",background:e.colors.GBK10A,borderRadius:"4px",code:{margin:0,padding:0,fontSize:"inherit",borderRadius:0,backgroundColor:"inherit"}},"li pre":{whiteSpace:"pre-wrap"},"table[data-draft-type='table']":{borderCollapse:"collapse",fontSize:"15px",margin:"".concat("1.4em"," auto"),maxWidth:"100%",tableLayout:"fixed",textAlign:"left",width:"100%","&[data-size='small']":{minWidth:"260px",width:"40%"},"&[data-row-style='striped'] tr:nth-of-type(2n + 1)":{background:e.colors.GBK10A},"td,th":{border:"1px solid ".concat(e.colors.GBK08A),lineHeight:"24px",height:"24px",padding:"3px 12px"},th:{background:e.colors.GBK09A,color:e.colors.GBK02A,fontWeight:500}},"& .video-box, & .link-box":{position:"relative",display:"flex",justifyContent:"space-between",margin:"".concat("1.4em"," 0"),overflow:"auto",whiteSpace:"normal",cursor:"pointer",border:"solid 1px ".concat(e.colors.GBK09A),borderRadius:"4px"}}}(e)),function(e){return{"& .highlight":{margin:"1em 0",pre:{margin:0},".hll":{backgroundColor:e.colors.GBK12A},".c":{fontStyle:"italic",color:e.colors.GBK06A},".err":{color:e.colors.GRD03A},".k":{fontWeight:e.fontWeights.bold},".o":{fontWeight:e.fontWeights.bold},".cm":{fontStyle:"italic",color:e.colors.GBK06A},".cp":{fontWeight:e.fontWeights.bold,color:e.colors.GBK06A},".c1":{fontStyle:"italic",color:e.colors.GBK06A},".cs":{fontStyle:"italic",fontWeight:e.fontWeights.bold,color:e.colors.GBK06A},".gd":{color:e.colors.GRD01A},".ge":{fontStyle:"italic"},".gr":{color:e.colors.GRD03A},".gh":{color:e.colors.GBK06A},".gi":{color:"#12b370"},".go":{color:e.colors.GBK05A},".gp":{color:e.colors.GBK04A},".gs":{fontWeight:e.fontWeights.bold},".gu":{color:e.colors.GBK06A},".gt":{color:e.colors.GRD03A},".kc":{fontWeight:e.fontWeights.bold},".kd":{fontWeight:e.fontWeights.bold},".kn":{fontWeight:e.fontWeights.bold},".kp":{fontWeight:e.fontWeights.bold},".kr":{fontWeight:e.fontWeights.bold},".kt":{fontWeight:e.fontWeights.bold,color:e.colors.GBL07A},".m":{color:e.colors.GBL01A},".s":{color:e.colors.GRD03A},".na":{color:e.colors.GBL01A},".nb":{color:e.colors.GBL01A},".nc":{fontWeight:e.fontWeights.bold,color:e.colors.GBL07A},".no":{color:e.colors.GBL01A},".ni":{color:e.colors.GRD07A},".ne":{fontWeight:e.fontWeights.bold,color:e.colors.GRD03A},".nf":{fontWeight:e.fontWeights.bold,color:e.colors.GRD03A},".nn":{color:e.colors.GBK04A},".nt":{color:e.colors.GBL07A},".nv":{color:e.colors.GBL01A},".ow":{fontWeight:e.fontWeights.bold},".w":{color:e.colors.GBK07A},".mf":{color:e.colors.GBL01A},".mh":{color:e.colors.GBL01A},".mi":{color:e.colors.GBL01A},".mo":{color:e.colors.GBL01A},".sb":{color:e.colors.GRD03A},".sc":{color:e.colors.GRD03A},".sd":{color:e.colors.GRD03A},".s2":{color:e.colors.GRD03A},".se":{color:e.colors.GRD03A},".sh":{color:e.colors.GRD03A},".si":{color:e.colors.GRD03A},".sx":{color:e.colors.GRD03A},".sr":{color:e.colors.GYL02A},".s1":{color:e.colors.GRD03A},".ss":{color:e.colors.GRD03A},".bp":{color:e.colors.GBK06A},".vc":{color:e.colors.GBL01A},".vg":{color:e.colors.GBL01A},".vi":{color:e.colors.GBL01A},".il":{color:e.colors.GBL01A},"&::-webkit-scrollbar":{width:"6px",height:"6px"},"&::-webkit-scrollbar-thumb:horizontal":{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.5),borderRadius:"6px","&:hover":{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.6)}}}}}(e)),s&&{"&::before, &::after":{clear:"both",content:'""',display:"block"}})},className:_()("RichText","ztext",r,{"RichText--clearBoth":s}),dangerouslySetInnerHTML:{__html:h(i)}},p),u||i)]})}));xt.propTypes={as:P.a.string,tag:P.a.string,html:P.a.string.isRequired,clearBoth:P.a.bool,ref:P.a.func,Portal:P.a.func,useHooks:P.a.func},xt.defaultProps={useHooks:B.a};var kt=s.a.memo(xt),St=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.rootMargin,o=n.threshold,r=n.once,i=void 0===r||r;e=Array.isArray(e)?e:e?[e]:[];var c=Object(l.useRef)(null),s=Object(J.d)(t);Object(l.useEffect)((function(){if(e.length)return c.current&&e.forEach((function(e){return c.current.unobserve(e)})),c.current=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0&&(s(e),i&&c.current.unobserve(e.target))}))}),{rootMargin:a,threshold:o}),e.forEach((function(e){return c.current.observe(e)})),function(){e.forEach((function(e){return c.current.unobserve(e)}))}}),[e,a,JSON.stringify(o),i])},Rt=n(142);var At="function"==typeof Image,It={},Tt=At?Rt((function(e){return new Promise((function(t){return n=e,a=function(e,n){It[e]=n,t(n)},(o=new Image).onload=function(){var e=o.width>0&&o.height>0;a(n,e)},o.onerror=function(){a(n,!1)},void(o.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[n]);var n,a,o}))})):function(){return Promise.resolve(!1)},Et=function(e){var t=It[e],n=Object(l.useState)(t),a=k()(n,2),o=a[0],r=a[1];return At&&void 0===t&&Tt(e).then(r),o},Nt=oe()((function(){return/Mobile/.test(navigator.userAgent)}));function Bt(e,t){var n={monitor:{type:"Event",imgResourceErrorInfo:{error_description:t,img_url:e,img_from:"web"}}};$.a.trackMonitor({name:t},n)}var zt=function(e){var t=e.onLoadStateChange,n=e.enableWebP,a=e.size,o=e.quality;return function(e){var r=e.target,i=function(e){var t=e.image,n=e.enableWebP,a=e.size,o=e.quality,r=void 0===o?80:o,i=t.dataset,c=i.actualsrc,l=i.actualgif;return n&&l&&l.match(/.gif$/i)?c:(a||(a="720w",!Nt()&&window.devicePixelRatio>=1.5&&(a="1440w"),Nt()&&window.devicePixelRatio*window.innerWidth>=1080&&(a="1440w")),Object(U.imgUrl)(c,{quality:r,size:a}))}({image:r,enableWebP:n,size:a,quality:o});if(n&&(i=function(e){return e.replace(/\.(jpg|png|jpeg|gif)/,".webp")}(i)),r.src=i,r.complete)r.dataset.lazyStatus="ok";else{t&&r.addEventListener("loadstart",(function(){t("loadstart",i)})),r.dataset.lazyStatus="loading";var c=setTimeout((function(){r.complete||Bt(r.url,"image_web_timeout_image"),t&&t("timeout",i)}),15e3);r.addEventListener("load",(function(){r.dataset.lazyStatus="ok",clearTimeout(c),Bt(r.url,"image_web_success_image"),t&&t("load",i)})),r.addEventListener("error",(function(){clearTimeout(c),Bt(r.url,"image_web_fail_image"),t&&t("error",i)}))}}},Lt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useWebP,a=void 0===n||n,o=t.disabled,r=void 0!==o&&o,i=t.onLoadStateChange,c=t.size,s=t.quality,u=Object(l.useState)([]),d=k()(u,2),b=d[0],f=d[1],p=Et("lossless");St(b,zt({onLoadStateChange:i,enableWebP:p&&a,size:c,quality:s}),{rootMargin:"300px"}),Object(l.useEffect)((function(){if(e&&!r){var t=Array.from(e.querySelectorAll("img.lazy:not([data-thumbnail])"));t.length&&f(t)}}),[e,r])},Pt=function(e,t){$.a.trackEvent(e,{action:"StatusReport",element:"Card"},{status:{result:t}})},Mt=function(e,t){var n,a,o;null===(n=window)||void 0===n||null===(a=n.Raven)||void 0===a||null===(o=a.captureException)||void 0===o||o.call(a,e,{fingerprint:["gif2mp4"],extra:t})},_t=function(e){var t=e.src,n=e.useWebP,a=void 0===n?"auto":n,o=e.useMp4,r=void 0!==o&&o,i=e.onRef,s=e.onLoadStateChange,u=E()(e,pe),d=Object(l.useState)(""),b=k()(d,2),p=b[0],h=b[1],m=Object(l.useState)(null),v=k()(m,2),g=v[0],O=v[1],j=Object(l.useState)(Date.now()),y=k()(j,2),C=y[0],w=y[1],x=Object(l.useState)(!1),S=k()(x,2),R=S[0],A=S[1],I=Object(l.useState)(null),T=k()(I,2),N=T[0],z=T[1],L=Et("animation"),P=Object(l.useCallback)((function(){var e=(Object(re.imgPathParse)(t)||{}).hash;r&&Object(X.onViewedOnce)(g,(function(){var t;(t=e,fetch("https://api.zhihu.com/gif2mp4/".concat(t),{credentials:"include",headers:{"X-Requested-With":"Fetch"}}).then((function(e){return e.json()}))).then((function(e){var t,n,a=e.playlist,o=(null==a||null===(t=a.SD)||void 0===t?void 0:t.play_url)||(null==a||null===(n=a.LD)||void 0===n?void 0:n.play_url);o&&f.a.increment("Gif2Mp4Player.mp4.fetch.success.count"),h(o)})).catch(B.a)}))}),[g,t,r]);Object(l.useEffect)(P,[t,r,g]),Object(l.useEffect)((function(){g&&$.a.setModule(g,{module:"GifItem"})}),[g]),St(g,(function(){$.a.trackCardShow(g,{element:"Card"})})),Object(J.l)((function(){f.a.increment("Gif2Mp4Player.mp4.play.failure.count"),Mt(new Error("Gif2Mp4 play timeout"),{src:t,videoUrl:p}),A(!1)}),R?2e3:null),Object(J.l)((function(){f.a.increment("Gif2Mp4Player.mp4.play.success.count"),f.a.timing("Gif2Mp4Player.mp4.first_frame_time",Date.now()-C-100),A(!1),z(null)}),N);var M=ie()(t,{extension:("auto"===a?L:a)?"webp":"gif"});return Object(c.b)(se.a,Object.assign({videoUrl:p,src:M,onRef:Object(l.useCallback)(ve(i,O),[]),onPlayChange:function(e){e||(w(Date.now()),p&&(f.a.increment("Gif2Mp4Player.mp4.click.count"),A(!0)),$.a.trackEvent(g,{action:"Click",element:"Image"}))},onLoadStart:function(){if(p){var e=le.a.parse(p).expiration;e&&Number(e)<Date.now()/1e3+900&&P()}w(Date.now()),s&&s("loadstart",M)},onSuccess:function(){Pt(g,"Success"),p?R&&z(100):f.a.timing("Gif2Mp4Player.gif.first_frame_time",Date.now()-C),s&&s("load",M)},onFailed:function(e){Pt(g,"Fail"),p&&(R&&(f.a.increment("Gif2Mp4Player.mp4.play.failure.count"),A(!1),z(null)),Mt(e,{videoUrl:p,src:t})),s&&s("error",M)}},u))},Dt=function(e){var t=e.dataset,n=t.thumbnail,a={src:n,poster:n,size:t.size},o=document.createElement("div");return o.className="RichText-gifPlaceholder",e.parentNode.replaceChild(o,e),{data:a,target:o}},Ft=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.Component,a=void 0===n?_t:n,o=Object(l.useState)(null),r=k()(o,2),i=r[0],s=r[1];return Object(l.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll("img.origin_image[data-thumbnail],img.content_image[data-thumbnail]"));if(t.length){var n=t.map((function(e){return Dt(e)})).map((function(e,t){var n=e.data,o=e.target;return Object(ee.createPortal)(Object(c.b)(a,Object.assign({},n),t),o)}));s(n)}}}),[e]),i},Ut=ge([function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.linkCardInfo;return e?e.replace(Fe,(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=ze(t,{decodeValue:!0}),r=o.target,i=void 0===r?"_blank":r,l=o.href,s=void 0===l?"":l,u=o["data-image"],d=o["data-image-width"],b=o["data-image-height"],f=o["data-entity-type"],p=o["data-entity-data"],h=o["data-size"],m=o["data-is-ecommerce"];if(m)return e;var v=a.replace(/<[^>]*>/g,"");v=Pe(v),s.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)&&!v&&(v="知乎视频");var g=n?Ne:Oe;return Object(z.renderToStaticMarkup)(Object(c.b)(g,Object.assign({text:v,url:s,target:i,image:u,imageWidth:d,imageHeight:b,entityType:f,entityData:Le(p),size:h},n&&{data:n[s]})))})):e},function(e){return e?e.replace(Ve,(function(e,t){var n=ze(t,{decodeValue:!0}),a=n["data-draft-type"],o=n.href,r=n.class;return"link-card"!==a?e:Object(z.renderToStaticMarkup)(Object(c.b)(Ue,{url:o,className:Q()(r,{old:!0,new:!1,static:!1})}))})):e}]),Vt=Object(l.forwardRef)((function(e,t){var n=Object(l.useState)(null),a=k()(n,2),o=a[0],r=a[1],i=e.html,s=e.css,u=e.options,d=void 0===u?{}:u,b=e.linkCardInfo,f=E()(e,he),p=d.lazyLoadImageOptions,h=d.useGifPortalOption,m=E()(d,me);Lt(o,p),st(o);var v=[it,ct,s].reduce((function(e,t){return t||(t={}),"function"==typeof t?function(n){return Object.assign(Object.assign({},e(n)),t(n))}:function(n){return Object.assign(Object.assign({},e(n)),t)}}),(function(e){return{}})),g=Object(l.useCallback)(ve(t,r),[]);return Object(c.c)(l.Fragment,{children:[!b&&Object(c.b)(Xe,{css:ct,root:o}),Ft(o,h),Object(c.b)(pt,{root:o}),Object(c.b)(kt,Object.assign({ref:g,html:Ut(i,{linkCardInfo:b}),css:v,root:o,options:m},f))]})})),Gt=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g,qt=/<img\b[^<>]*?\bsrc="[^<>]*?"[^<>]*?(\beeimg+)[^<>]*?>/g,Ht=function(e){return e?e.replace(qt,(function(e){return e.replace(/(.*)(\beeimg)/,'$1loading="lazy" $2')})):e},Kt=n(43),Wt=n(169),Zt=function(e){var t=Object(Wt.b)(),n=Object(l.useCallback)((function(n){t.ZhihuHybrid&&function(e,t){var n=t.root;if(!e.defaultPrevented){var a=e.target;if("img"===a.tagName.toLowerCase()&&(a.src.includes("zhimg")||!a.src.includes("equation"))&&(!a.classList.contains("ztext-gif")||a.parentNode.classList.contains("isPlaying"))){var o=Array.from(n.querySelectorAll(["img"])).filter((function(e){return e.src.includes("zhimg")&&!e.src.includes("equation")})),r=o.indexOf(a);if(-1!==r){e.preventDefault();var i=o.map((function(e){return e.dataset.thumbnail&&e.src.replace(/\.jpg|\.webp/,".gif")||e.dataset.src||e.src||""})).map((function(e){return Object(U.imgUrl)(e,Object.assign({quality:""},e.endsWith("webp")&&{extension:"jpg"}))}));Object(Kt.a)("base/openImage").dispatch({images:i,index:r})}}}}(n,{root:e})}),[e,t.ZhihuHybrid]);Object(l.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},Qt=n(193);function Yt(e){var t=e.content,n=e.className,a=Object(Wt.b)(),o={"KfeCollection-NovelDisplayBlock-Dark":Object(te.f)().isDarkMode,"KfeCollection-NovelDisplayBlock-Pc":!a.Mobile};return Object(l.useEffect)((function(){var e=Array.from(document.querySelectorAll('img[data-novel="role-image"]')),t=a.Mobile?"openInApp":"zh-lightbox-thumb";e.forEach((function(e){e.className="".concat(e.className," ").concat(t)}))}),[a.Mobile]),s.a.createElement("div",{className:_()("KfeCollection-NovelDisplayBlock",n,o),dangerouslySetInnerHTML:{__html:t}})}Yt.propTypes={content:P.a.string.isRequired};var Jt=Yt,Xt=function(e){var t=e.className,n=e.html,a=e.lazyLoadImageProps,o=Object(l.useState)(null),r=Object(i.a)(o,2),s=r[0],u=r[1];return Lt(s,a),Object(c.b)("div",{ref:u,children:Object(c.b)(Jt,{className:t,content:n})})};var $t=function(e){var t=this;return e.length?function(n,a){for(var o=e.length-1,r=n;o>=0;)r=e[o].call(t,r,a),o--;return r}:B.a};function en(e){var t=e.id,a=e.parentType,o=e.parentId,r=e.suger,i=e.data,c=e.isEditor,l=void 0!==c&&c,s=Object(J.e)((function(){return Promise.all([n.e(17),n.e(27)]).then(n.bind(null,2889))}),t),u=Object(J.e)((function(){return n.e(29).then(n.bind(null,2887))}),t);return t.startsWith("fee_")&&u?Object(ne.g)(u,{id:t,isEditor:l}):s?Object(ne.g)(s,{id:t,parentType:a,urlToken:o,suger:r,data:i,isEditor:l}):null}en.propTypes={id:P.a.string.isRequired,parentType:P.a.oneOf(["answer","article"]),parentId:P.a.string,suger:P.a.object,data:P.a.object,isEditor:P.a.bool};var tn=Je({idAttr:"data-ad-id",selector:"a[data-ad-id]",targetClassName:"RichText-ADLinkCardContainer",component:en}),nn=n(196),an=n.n(nn),on=function(e){var t=e.referenceList,n=e.onClick,a=e.listRef;return Object(ne.g)(l.Fragment,null,Object(ne.g)("h2",null,"参考"),Object(ne.g)("ol",{className:"ReferenceList",onClick:n,ref:a},an()(t,"refKey").map((function(e){var n=t.filter((function(t){return t.refKey===e.refKey})),a=n.length>1?Object(ne.g)(s.a.Fragment,null,Object(ne.g)("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map((function(e,t){var n="".concat(e.refKey,"_").concat(t);return Object(ne.g)("sup",{key:n,className:"ReferenceList-backLink"},Object(ne.g)("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))}))):Object(ne.g)("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return Object(ne.g)("li",{id:e.refKey,key:e.refKey,tabIndex:0},a,e.text&&Object(ne.g)("span",null,e.text),e.text&&e.url&&" ",e.url&&Object(ne.g)("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))}))))},rn=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g,cn=function(e){return function(t){return function(e,t){if(!e)return e;var n=e,a=[];return n=n.replace(rn,(function(e,n){var o=ze(n,{decodeValue:!0}),r=o["data-text"],i=void 0===r?"":r,c=o["data-url"],l=void 0===c?"":c,s=o["data-numero"],u=t?"ref_".concat(t,"_").concat(s):"ref_".concat(s),d=a.filter((function(e){return e.refKey===u})),b="".concat(u,"_").concat(d.length);a.push({refKey:u,text:i,url:l,numero:s});var f=[i,l].filter(Boolean).join(" ");return Object(z.renderToStaticMarkup)(Object(ne.g)("sup",{"data-text":i,"data-url":l,"data-numero":s,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":f,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip"},Object(ne.g)("a",{id:b,href:"#".concat(u),"data-reference-link":!0,"aria-labelledby":u},"[",s,"]")))})),a.length?n=n.concat(Object(z.renderToStaticMarkup)(Object(ne.g)(on,{referenceList:a}))):n}(t,e)}},ln=function(e,t){var n=Object(J.d)((function(n){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var a=e.target.getAttribute("href"),o=t.querySelector(a);if(o){if(e.preventDefault(),n.onReferenceClick&&e.target.hasAttribute("aria-labelledby"))return void n.onReferenceClick(e);o.focus({preventScroll:!0}),De(o),document.documentElement.setAttribute("data-focus-visible","")}}}(n,e,t)}));Object(l.useEffect)((function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}}),[e,n])},sn=[{extensionList:["doc","docx","txt"],type:"doc"},{extensionList:["jpg","jpeg","png","bmp"],type:"image"},{extensionList:["mp3","aac"],type:"music"},{extensionList:["pdf"],type:"pdf"},{extensionList:["xls","xlsx","csv"],type:"table"},{extensionList:["torrent"],type:"torrent"},{extensionList:["mp4","flv"],type:"video"},{extensionList:["zip","rar","7z"],type:"zip"},{extensionList:[""],type:"folder"}];function un(e){var t=e.className,n=e.isDirectory,a=void 0!==n&&n,o=e.extension,r=function(e){return"https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_".concat(e,".svg")}(a?"folder":function(e){var t=sn.find((function(t){return t.extensionList.includes(e)}));return t?t.type:"other"}(o));return Object(ne.g)("img",{className:_()("FileExtensionIcon",t),src:r})}var dn={baidu:"百度网盘"};function bn(e){var t=e.component,n=void 0===t?"a":t,a=e.className,o=e.href,r=e.type,i=void 0===r?"file":r,c=e.name,s=e.extension,u=e.size,d=e.source,b=e.onRef,f=e.onClick,p=e.onMouseDown,h=Number(u);return Object(ne.g)(n,{className:_()("FileLinkCard",a),href:o,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":7693,ref:b,onClick:f,onMouseDown:p},Object(ne.g)(un,{className:"FileLinkCard-icon",isDirectory:"directory"===i,extension:s}),Object(ne.g)("div",{className:"FileLinkCard-info"},Object(ne.g)("div",{className:"FileLinkCard-name"},c),Object(ne.g)("div",{className:"FileLinkCard-meta"},Boolean(h)&&Object(ne.g)("div",{className:"FileLinkCard-size"},Object(H.unitPrefix)(h)),Boolean(h)&&d&&Object(ne.g)(l.Fragment,null," · "),d&&Object(ne.g)("div",{className:"FileLinkCard-source"},function(e){return dn[e]||e}(d)))))}var fn=/<a\b([^>]*data-draft-type="file-link-card"[^>]*)>(.*?)<\/a>/g,pn=function(e){return e?e.replace(fn,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=ze(t,{decodeValue:!0}),o=a.href,r=void 0===o?"":o,i=a["data-file-type"],c=a["data-file-extension"],l=a["data-file-size"],s=a["data-file-source"],u=Pe(n);return Object(z.renderToStaticMarkup)(Object(ne.g)(bn,{href:r,name:u,type:i,extension:c,size:l,source:s}))})):e},hn=function(e){return{alignItems:"center",backgroundColor:e.colorMod(e.colors.GBK10A).alpha(.88),borderRadius:"12px",boxSizing:"border-box",display:"flex",margin:"1em auto",maxWidth:"100%",overflow:"hidden",padding:"12px",position:"relative",width:"390px"}},mn=function(e){return Object.assign({color:e.colors.GBK02A,fontSize:"15px",fontWeight:500,lineHeight:"21px"},Object(te.d)(2))},vn=function(e){return{color:e.colors.GBK06A,fontSize:"12px",display:"flex",lineHeight:"14px",marginTop:"5px"}},gn=n(58),On=n(2805),jn=n(1579),yn=n(1348),Cn=n(912),wn=n(261),xn=n(257),kn=n.n(xn),Sn=n(96);function Rn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return An(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function An(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var In=Object.prototype.hasOwnProperty,Tn=Object.getOwnPropertySymbols,En=Object.prototype.propertyIsEnumerable,Nn=Object.assign,Bn=function e(t){var n=t.size,a=t.text,o=t.center,r=function(e,t){var n={};for(var a in e)In.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&Tn){var o,r=Rn(Tn(e));try{for(r.s();!(o=r.n()).done;){a=o.value;t.indexOf(a)<0&&En.call(e,a)&&(n[a]=e[a])}}catch(e){r.e(e)}finally{r.f()}}return n}(t,["size","text","center"]);a&&(n="1.2em");var i=s.a.createElement("svg",Nn(Nn({},r),n&&{width:n,height:n}));return o?s.a.createElement("span",{style:e.strutStyle},"​",i):i};Bn.defaultProps={fill:"currentColor"},Bn.strutStyle={display:"inline-flex",alignItems:"center"};var zn=Bn,Ln=Object.assign;var Pn,Mn=function(e){return s.a.createElement(zn,Ln(Ln({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"ZDI ZDI--Catalog24"+(e.className?" ".concat(e.className):"")}),s.a.createElement("path",{d:"M10 5a1 1 0 011-1h10a1 1 0 110 2H11a1 1 0 01-1-1zm4 6a1 1 0 100 2h7a1 1 0 100-2h-7zm0 7a1 1 0 100 2h7a1 1 0 100-2h-7zm-8.335.25a.915.915 0 01-.915-.915V12.75H10a.75.75 0 000-1.5H4.75V6.665c0-.505.41-.915.915-.915H7a.75.75 0 000-1.5H5.665A2.415 2.415 0 003.25 6.665v10.67a2.415 2.415 0 002.415 2.415H10a.75.75 0 000-1.5H5.665z"}))},_n=["children","pl","targetId","handleScroll","index"],Dn=["className"],Fn=["className"],Un=["children","targetId","active","setCursor"],Vn=["children","pl","targetId","handleScroll","handleAction","index","status","className","isCollapsed","inEditor","active"],Gn=["className"],qn=["className"],Hn=["isCollapsed","inEditor","catalogRef","contentRoot","catalogLength","contentRootLeft","shouldCollapse"],Kn=function(e){var t=e.children,n=e.pl,a=e.targetId,o=e.handleScroll,r=e.index,i=E()(e,_n);return Object(c.b)(gn.Text,Object.assign(Object.assign({flexShrink:0,display:"flex",alignItems:"center",color:"GBK02A",fontSize:"12px",height:"20px",lineHeight:"19px",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"6px"}}},i),{},{children:Object(c.c)(gn.Flex,{pl:n,css:{cursor:"pointer",alignItems:"center"},"data-catalog-target-id":a,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",onClick:function(e){o(e,r)},children:[Object(c.b)(gn.Text,{css:[Object(te.d)(1),{pointerEvents:"none",wordBreak:"break-all"}],dangerouslySetInnerHTML:{__html:t}}),Object(c.b)(On.a,{size:"20px",css:function(e){var t;return{color:null===(t=e.colors)||void 0===t?void 0:t.GBK08A,flex:"0 0 auto",pointerEvents:"none"}}})]})}))},Wn=function(e){var t=e.className,n=E()(e,Dn);return Object(c.b)(Kn,Object.assign({className:_()(t,"Catalog-FirstLevelTitle"),fontWeight:"bold",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"6px"}}},n))},Zn=s.a.forwardRef((function(e,t){var n=e.isFold,a=e.onClick,o=n?jn.a:yn.a,r=n?"展开目录":"收起目录";return Object(c.c)(c.a,{children:[Boolean(n)&&Object(c.b)("div",{className:"bottom-shadow",css:function(e){return{position:"absolute",bottom:"25px",width:"100%",height:"40px",background:"linear-gradient(to bottom, ".concat(e.colorMod(e.colors.GBK99A).alpha(0),", ").concat(e.colors.GBK99A,")")}}}),Object(c.c)(gn.Flex,{ref:t,alignItems:"center",justifyContent:"center",height:"25px",fontSize:"12px",color:"GBL05A",css:{cursor:"pointer"},onClick:a,children:[r,Object(c.b)(o,{size:18,css:{marginTop:"1px"}})]})]})})),Qn={1:Wn,2:function(e){var t=e.className,n=E()(e,Fn);return Object(c.b)(Kn,Object.assign({className:_()(t,"Catalog-SecondLevelTitle"),pl:"10px",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"12px"},"&+.Catalog-SecondLevelTitle":{marginTop:"0px"}}},n))}},Yn=function(e){var t=e.catalog,n=e.className,a=e.canFold,o=e.inEditor,r=e.scrollOffset,i=void 0===r?0:r,s=a&&!o&&(null==t?void 0:t.length)>3,u=Object(l.useCallback)((function(e,t){if(o){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var a=Array.from(n.querySelectorAll("h2,h3"))[t];a&&requestAnimationFrame((function(){return De(a,i)}))}}}),[o,i]);return null!=t&&t.length?Object(c.c)(gn.Box,{className:_()(n,"Catalog"),mb:"48px",css:{"& .Catalog-wrapper":{position:"relative"}},"data-za-detail-view-name":"正文",children:[Object(c.b)("h2",{css:{marginBottom:"18px !important",marginTop:"0px !important"},children:"目录"}),Object(c.c)(gn.Box,{className:"Catalog-wrapper",children:[Object(c.b)(gn.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",overflow:"hidden",height:s?"84px":"auto",children:t.map((function(e){var t=e.titleLevel,n=e.text,a=e.targetId,o=e.index,r=Qn[t]||Wn;return Object(c.b)(r,{targetId:a,handleScroll:u,index:o,children:n},String([a,o]))}))}),Boolean(s)&&Object(c.b)(Zn,{isFold:!0})]})]}):o?Object(c.c)(gn.Flex,{flexDirection:"column",alignItems:"center",mb:"18px",children:[Object(c.b)(gn.Box,{size:"160px",mb:"10px",children:Object(c.b)(gn.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})}),Object(c.b)(gn.Text,{color:"GBK06A",fontSize:"17px",lineHeight:"24px",textAlign:"center",children:"在内容中设置标题将会在此处同步展示"})]}):null},Jn=function(e){var t=e.contentHTML,n=Object(l.useState)(!0),a=k()(n,2),o=a[0],r=a[1],i=Object(J.d)((function(){r(!o)}));return Object(c.c)(Y.b,{block:"ZTextCatalog",children:[Object(c.b)(Y.e,{as:gn.Flex,zaType:"Block",className:"Catalog-content",flexDirection:"column",css:{fontSize:"12px",overflow:"hidden"},style:{height:o?"84px":"auto"},dangerouslySetInnerHTML:{__html:t}}),Object(c.b)(Y.a,{as:Zn,zaType:"Button",zaAction:o?"Expand":"Collapse",isFold:o,onClick:i})]})},Xn=function(e){var t=e.root,n=Object(l.useState)(null),a=k()(n,2),o=a[0],r=a[1];return Object(l.useEffect)((function(){if(t){var e=t.querySelector(".Catalog-wrapper");if(e&&e.querySelector(".bottom-shadow")){var n=e.querySelector(".Catalog-content").innerHTML,a=document.createElement("div");a.className="Catalog-wrapper",e.parentNode.replaceChild(a,e),r(Object(ee.createPortal)(Object(c.b)(Jn,{contentHTML:n}),a))}}}),[t]),o},$n="removed",ea="added",ta=/<(h2|h3)[^>]*>(.*?)<\/\1>/g,na={h2:1,h3:2},aa=function(e,t){return"h_".concat(e||"editor","_").concat(t)},oa=function(e){return e.replace(Gt,"").replace(/<[^>]*>/g,"")},ra=function(e){return na[e]},ia=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return{catalog:[],html:e};var a=[];return t=t||"editor",n="function"==typeof n?n:function(){return String(n)},e=e.replace(ta,(function(e,o){var r,i,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=oa(c),s=ra(o),u=aa(t,a.length),d=(null===(r=e.match(/(data-into-catalog-status=\\{0,1}"\S{1,}\\{0,1}")/))||void 0===r||null===(i=r[0])||void 0===i?void 0:i.indexOf($n))>-1?$n:"";return a.push({text:l,titleLevel:s,Tag:o,targetId:u,status:d}),n({text:l,titleLevel:s,targetId:u,Tag:o,originText:c,status:d})})),{catalog:a,html:e}},ca=function(e){var t=e.originText,n=e.targetId,a=e.Tag,o=e.status;return Object(z.renderToStaticMarkup)(Object(c.b)(a,{id:n,"data-into-catalog-status":o,dangerouslySetInnerHTML:{__html:t}}))},la=function(e){return function(t,n){var a=n.sourceId,o=n.theme,r=n.shouldShowCatalog,i=n.shouldFoldCatalog;if(!t)return t;if(!r)return t;var l=ia(t,a,ca),s=l.catalog,u=l.html;return s.length?e?u:Object(z.renderToStaticMarkup)(Object(c.b)(wn.a,{theme:o,children:Object(c.b)(Yn,{catalog:s,canFold:i})})).concat(u):u}},sa=function(e,t,n){var a=Object(Y.i)().trackEvent,o=Object(l.useCallback)((function(o){!function(e,t,n,a){if(!e.defaultPrevented){var o=e.target.getAttribute("data-catalog-target-id");if(o){n({action:"OpenUrl",block:"ZTextCatalog",eventType:"Click",elementLocation:{type:"Button",text:e.target.innerText}},{link:{url:window.location.href}}),$.a.trackEvent(e.target);var r=t.querySelector("#"+o);r&&(e.preventDefault(),De(r,10+a,!1))}}}(o,t||e,a,n)}),[e,t,a,n]);Object(l.useEffect)((function(){if(e)return e.addEventListener("click",o),function(){e.removeEventListener("click",o)}}),[e,o])},ua=function(e){var t=e.children,n=e.targetId,a=e.active,o=e.setCursor,r=E()(e,Un);return Object(c.b)(Y.a,Object.assign(Object.assign({as:gn.Text,zaType:"Text",color:a?"GBL01A":"GBK02A",fontWeight:a?"bold":"normal",css:{fontSize:"14px"}},r),{},{children:Object(c.c)(gn.Flex,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(){var e=document.querySelector("#"+n);o(n),e&&De(e)},children:[Object(c.b)(gn.Text,{css:Object(te.d)(1),children:t}),Object(c.b)(Cn.a,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})}))},da=function(e){return Object(c.b)(ua,Object.assign({},e))},ba={1:da,2:function(e){return Object(c.b)(ua,Object.assign({pl:"20px"},e))}},fa=function(e){var t=e.catalog,n=e.className,a=Object(l.useState)(null),o=k()(a,2),r=o[0],i=o[1];return Object(l.useEffect)((function(){if(null!=t&&t.length){var e=null,n=Me();t.forEach((function(t){var a=document.querySelector("#"+t.targetId);(null==a?void 0:a.getBoundingClientRect().top)<=n+2&&(e=t.targetId)})),i(e)}}),[]),null!=t&&t.length?Object(c.b)(Y.b,{block:"Popup",children:Object(c.b)(Y.e,{zaType:"Popup",as:gn.Box,className:_()(n),children:Object(c.b)(gn.Flex,{flexDirection:"column",css:{fontSize:"12px"},children:t.map((function(e){var t=e.titleLevel,n=e.text,a=e.targetId,o=ba[t]||da;return Object(c.b)(o,{targetId:a,active:r===a,setCursor:i,children:n},a)}))})})}):null},pa=function(e){var t=e.className,n=e.shown,a=e.onClose,o=e.zaContent,r=e.catalog;return Object(c.b)(Sn.b,{wrapperClassName:"CatalogModal-wrapper",className:_()("CatalogModal",t),title:"目录",onClose:a,children:n&&Object(c.b)(fa,{css:{paddingBottom:"16px"},catalog:r,zaContent:o})})},ha=function(e){var t=e.children,n=e.pl,a=e.targetId,o=e.handleScroll,r=e.handleAction,i=e.index,l=e.status,s=e.className,u=e.isCollapsed,d=e.inEditor,b=e.active,f=E()(e,Vn);return Object(c.b)(Y.a,Object.assign(Object.assign({as:gn.Text,zaType:"Text",className:_()(s,"Catalog-Title"),flexShrink:0,display:"flex",alignItems:"center",color:"GBL05A",fontSize:"12px",height:"20px",lineHeight:"20px",pl:"30px",css:function(e){return{position:"relative",height:"30px",lineHeight:"30px","&.Catalog-FirstLevelTitle, &.Catalog-SecondLevelTitle":{position:"relative",height:"30px",color:b?e.colors.GBL01A:e.colors.GBL05A,"&::before":{content:'" "',position:"absolute",backgroundColor:b?e.colors.GBL01A:e.colors.GBL05A,display:"inline-block",borderRadius:"50%",top:"12px",marginRight:"12px"},"&:hover::before":{backgroundColor:e.colors.GBL01A}},"&.Catalog-FirstLevelTitle::before":{left:u?"78px":"16px",width:"6px",height:"6px"},"&.Catalog-SecondLevelTitle::before":{left:u?"79px":"17px",width:"4px",height:"4px"},".Catalog-TitleIcon":Object.assign({position:"absolute",right:"10px",width:"12px",height:"12px",objectFit:"contain"},("toAdd"!==l||!t)&&{display:"none"}),"&::after":{content:'" "',display:"block",position:"absolute",left:u?"81px":"19px",top:0,transform:"translateX(-50%)",width:"2px",height:"40px",marginTop:"12px",background:e.colorMod(e.colors.GBL05A).alpha(.12)},"&:last-child":{"&::after":{height:0}}}}},f),{},{onClick:function(e){o(e,i)},children:!u&&Object(c.c)(gn.Flex,{px:"10px",ml:n,css:function(e){return Object.assign(Object.assign({cursor:"pointer",alignItems:"center",width:"100%"},"toAdd"===l&&Boolean(t)&&{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px"}),{},{"&:hover":{color:e.colors.GBL01A,background:e.colors.GBK09A,borderRadius:"4px",".Catalog-TitleIcon":{display:"block"}}})},"data-catalog-target-id":a,"data-za-detail-view-id":"9745","data-za-detail-view-action":"Click","data-za-detail-view-name":"正文",children:[Object(c.b)(gn.Text,{css:[Object(te.d)(1),{pointerEvents:"none",wordBreak:"break-all",width:"calc(100% - 22px)"}],dangerouslySetInnerHTML:{__html:t}}),d&&("toAdd"===l?Object(c.b)(gn.Image,{src:"https://pic3.zhimg.com/v2-b01c062116d91b98059d7c90bb1139d2.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),r(e,i,ea)}}):Object(c.b)(gn.Image,{src:"https://pic2.zhimg.com/v2-4bf4e045dbe37447d257b72b5a79b05c.png",className:"Catalog-TitleIcon",onClick:function(e){e.stopPropagation(),r(e,i,$n)}}))]})}))},ma=function(e){var t=e.className,n=E()(e,Gn);return Object(c.b)(ha,Object.assign({className:_()(t,"Catalog-FirstLevelTitle"),fontWeight:"500",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"4px"},"&+.Catalog-SecondLevelTitle":{marginTop:"4px"}}},n))},va={1:ma,2:function(e){var t=e.className,n=E()(e,qn);return Object(c.b)(ha,Object.assign({className:_()(t,"Catalog-SecondLevelTitle"),pl:"10px",fontWeight:"400",css:{"&+.Catalog-FirstLevelTitle":{marginTop:"4px"},"&+.Catalog-SecondLevelTitle":{marginTop:"4px"}}},n))}},ga=function(){return Object(c.c)(gn.Flex,{flexDirection:"column",alignItems:"center",mb:"18px",children:[Object(c.b)(gn.Box,{size:"160px",mb:"10px",children:Object(c.b)(gn.Image,{size:"100%",src:"https://pic1.zhimg.com/v2-acf70e51e6f95a027a65a9209fd6a330_r.png"})}),Object(c.b)(gn.Text,{color:"GBK05A",fontSize:"12px",lineHeight:"19px",textAlign:"center",children:"在内容中设置标题会在此展示"})]})},Oa=function(e){var t=e.isCollapsed,n=e.isCollapsedChange,a=e.contentRootLeft,o=e.inEditor,r=e.onClose,i=e.setShownCatalogModal,l=e.shouldCollapse;return Object(c.c)(gn.Flex,{px:"10px",py:"8px",bg:"GBK99A",alignItems:"center",justifyContent:"space-between",color:"GBL05A",css:Object.assign({width:"100%",height:"40px",borderRadius:t?!o&&!l&&a>=190?"4px 0px 0px 4px":"0px 4px 4px 0px":"4px",zIndex:"1",boxShadow:"0px 1px 3px rgba(18, 18, 18, 0.1)"},t&&(l||a<190)?{position:"relative",top:"50px"}:{position:"sticky",top:"0"}),children:[Object(c.c)(gn.Flex,{alignItems:"center",children:[Object(c.b)(Mn,{size:15,text:!0,center:!0}),Object(c.b)(Y.c,{as:gn.Text,zaType:"Button",zaText:!0,shouldTrackShow:!0,shouldTrackClick:t,ml:"10px",fontSize:"14px",css:t&&{cursor:"pointer",whiteSpace:"nowrap"},onClick:function(){t&&(l||a<190?i(!0):n(!1))},children:t&&!o&&!l&&a>=190?"展开目录":"目录"})]}),o&&Object(c.b)(gn.Image,{src:"https://pic1.zhimg.com/v2-6264c104a2b3efcd0bd3c4876232aec3.png",onClick:r,css:{width:"15px",height:"15px",cursor:"pointer"}}),!o&&!t&&Object(c.b)(Y.a,{as:gn.Text,zaType:"Button",zaText:"收起目录",p:"2px 6px",bg:"GBK10A",color:"GBL05A",fontSize:"12px",lineHeight:"16px",css:{borderRadius:"10px",cursor:"pointer"},onClick:function(){n(!0)},children:"收起"})]})},ja=function(e){var t,n,a=e.isCollapsed,o=e.inEditor,r=e.catalogRef,i=e.contentRoot,s=e.catalogLength,u=e.contentRootLeft,d=e.shouldCollapse,b=E()(e,Hn),f=Object(l.useState)(0),p=k()(f,2),h=p[0],m=p[1];return Object(l.useEffect)((function(){var e,t=null===(e=r.current)||void 0===e?void 0:e.clientHeight;o||m(-t)}),[r,o,u]),Object(l.useEffect)((function(){if(o)if(0===s)-267!==h&&m(-267);else{var e=76+34*s,t=parseInt(getComputedStyle(r.current).maxHeight),n=-Math.min(t,e);h!==n&&m(n)}}),[o,s,r,h]),o||i?(o?(t=180,n=-180):u<190||d?(t=76,n=-20):a?(t=100,n=-120):n=-(t=Math.min(u-40,250))-30,Object(c.b)(Y.b,{block:o?"EditPage":"AnswerPage",children:Object(c.b)(Y.e,Object.assign({ref:r,zaType:"Block",as:gn.Box,css:{position:"sticky",top:0,width:t,marginLeft:n,marginBottom:h,zIndex:1}},b))})):null},ya=function(e){var t=e.catalogContainerRef,n=e.isShowScrollerArrow,a=e.catalog,o=e.isCollapsed,r=e.cursor,i=e.handleScroll,s=e.handleAction,u=e.inEditor,d=e.maskGradientColor,b=Object(l.useState)(!1),f=k()(b,2),p=f[0],h=f[1],m=Object(l.useState)(!1),v=k()(m,2),g=v[0],O=v[1],j=kn()((function(){var e;(null===(e=t.current)||void 0===e?void 0:e.scrollTop)<20?h(!1):h(!0);var n=t.current||{},a=n.scrollHeight,o=n.clientHeight,r=n.scrollTop;O(!(a-o-r<20))}),100);return Object(l.useEffect)((function(){var e=t.current;if(e)return e.addEventListener("scroll",j),function(){return e.removeEventListener("scroll",j)}}),[t,j]),Object(c.b)(gn.Box,{mt:"20px",ref:t,css:function(e){return Object.assign({maxHeight:"calc(100vh - 200px)",overflow:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},n&&{"&::before, &::after":{content:'" "',position:"absolute",width:"calc(100% - 15px)",height:"36px",pointerEvents:"none",marginLeft:"15px",zIndex:1,transition:"opacity .2s ease-in-out"},"&::before":{opacity:p?1:0,top:"60px",background:"linear-gradient(180deg, ".concat(e.colors[d]," 0%, ").concat(e.colorMod(e.colors[d]).alpha(0)," 100%)")},"&::after":{opacity:g?1:0,bottom:"20px",background:"linear-gradient(180deg, ".concat(e.colorMod(e.colors[d]).alpha(0)," 0%, ").concat(e.colors[d]," 100%)")}})},children:Object(c.b)(gn.Flex,{className:"Catalog-content",flexDirection:"column",fontSize:"12px",children:a.map((function(e){var t=e.titleLevel,n=e.text,a=e.targetId,l=e.status,d=e.index,b=va[t]||ma;return l!==$n?Object(c.b)(b,{targetId:a,handleScroll:i,handleAction:s,index:d,status:l,isCollapsed:o,inEditor:u,active:r===(a||d),children:n},String([a,d])):null}))})})},Ca=function(e){var t=e.catalog,n=e.className,a=e.inEditor,o=e.scrollOffset,r=void 0===o?0:o,i=e.onClose,s=e.contentRoot,u=e.onChange,d=e.catalogRef,b=e.shouldCollapse,f=e.maskGradientColor,p=void 0===f?"GBK10A":f,h=Object(l.useRef)(),m=Object(l.useRef)(),v=d||h,g=Object(l.useState)(!a),O=k()(g,2),j=O[0],y=O[1],C=Object(l.useState)(0),w=k()(C,2),x=w[0],S=w[1],R=Object(l.useState)(!1),A=k()(R,2),I=A[0],T=A[1],E=Object(l.useState)(null),N=k()(E,2),B=N[0],z=N[1],L=Object(l.useState)(!1),P=k()(L,2),M=P[0],D=P[1];sa(null==v?void 0:v.current,s,r);var F=Object(l.useCallback)((function(e,t){if(a){var n=document.querySelector(".DraftEditor-editorContainer");if(n){var o=Array.from(n.querySelectorAll("h2,h3"))[t];o&&requestAnimationFrame((function(){return De(o,r)}))}}}),[a,r]),U=Object(l.useCallback)((function(e,n,a){var o=document.querySelector(".DraftEditor-editorContainer");if(o){var r=Array.from(o.querySelectorAll("h2,h3"))[n].getAttribute("data-offset-key").split("-")[0];t[n].status=$n,u(r,a)}}),[t,u]);Object(l.useEffect)((function(){if(!b&&s){var e=s.getBoundingClientRect().left;S(e),e>=190&&y(!1)}}),[s,b]);var V=null==m?void 0:m.current;Object(l.useEffect)((function(){V&&V.scrollHeight>V.clientHeight&&D(!0)}),[V]);var G=Object(l.useMemo)((function(){return null==t?void 0:t.filter((function(e){return e.status!==$n}))}),[t]),q=G.length,H=kn()((function(){var e,n,o,r;if(!q||a||j||(o=null,r=Me(),t.forEach((function(e){if(e.status!==$n){var t=document.querySelector("#"+e.targetId);(null==t?void 0:t.getBoundingClientRect().top)<=r+2&&(o=e.targetId)}})),o!==B&&(z(o),null===(n=document.querySelector('[data-catalog-target-id="'.concat(o,'"]')))||void 0===n||n.scrollIntoViewIfNeeded())),null!=v&&v.current){var i=null!=s?s:null==v||null===(e=v.current)||void 0===e?void 0:e.parentElement;if(i&&null!=v&&v.current){var c=i.getBoundingClientRect(),l=c.bottom,u=c.height,d=getComputedStyle(i),b=d.paddingTop,f=d.marginTop,p=v.current.getBoundingClientRect(),h=p.bottom,m=p.height;l-h<Math.min(0,u-(m+parseInt(b)+parseInt(f)))?v.current.style.visibility="hidden":v.current.style.visibility="visible"}}}),100);return Object(l.useEffect)((function(){return document.addEventListener("scroll",H),function(){document.removeEventListener("scroll",H)}}),[s,H]),a||q&&s?Object(c.c)(ja,{catalogRef:v,catalogLength:q,inEditor:a,isCollapsed:j,contentRoot:s,contentRootLeft:x,shouldCollapse:b,className:_()(n,"Catalog","isCatalogV2",{isCollapsed:j}),pb:"20px","data-za-detail-view-name":"正文",children:[Object(c.b)(Oa,{inEditor:a,isCollapsed:j,contentRootLeft:x,setShownCatalogModal:T,shouldCollapse:b,isCollapsedChange:y,onClose:i}),(x>=190||b||a)&&(q?Object(c.b)(ya,{catalogContainerRef:m,isShowScrollerArrow:M,catalog:t,isCollapsed:j,cursor:B,handleScroll:F,handleAction:U,inEditor:a,maskGradientColor:p}):Object(c.b)(ga,{})),Object(c.b)(pa,{shown:I,catalog:G,onClose:function(){return T(!1)}})]}):null},wa=n(1154),xa=n(1239),ka=n(66),Sa=Je({idAttr:"data-mcn-id",selector:"a[data-mcn-id]",targetClassName:"RichText-MCNLinkCardContainer",component:wa.a}),Ra=function(e){var t=e.contentType,n=e.token,a=e.root,o=e.mcnLinkCardProps,r=e.isAuthor,i=e.urlOrigin,c=void 0===i?"":i,s=Object(l.useState)(null),u=k()(s,2),d=u[0],b=u[1],f=Object(l.useState)(!1),p=k()(f,2),h=p[0],m=p[1];return Object(l.useEffect)((function(){var e=a&&a.querySelector("*[data-draft-type=mcn-link-card]");["answer","article"].includes(t)&&e&&rt("".concat(c,"/api/v4/mcn/v2/linkcards?content_type=").concat(t,"&token=").concat(n)).then((function(e){var t=e.data;t&&(b(t),m(!0))})).catch((function(){m(!0)}))}),[a]),h&&Object(ka.jsx)(xa.a,{children:Object(ka.jsx)(Sa,Object.assign(Object.assign({},o),{},{originalData:d,root:a,isAuthor:r}))})},Aa=n(1036),Ia=n(220),Ta=n.n(Ia),Ea=n(62),Na=n.n(Ea),Ba=n(1055),za=n(219),La=n(1236),Pa=n(961),Ma=["onRef"],_a=["id","shouldUseOldLinkCard"];function Da(e){var t=String(e);return t.length<2&&(t="0"+t),t}function Fa(e){if(!Number.isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(Da(n),":").concat(Da(t))}var Ua=function(){return{borderRadius:"8px",boxSizing:"border-box",display:"block",margin:"1em auto",maxWidth:"100%",overflow:"hidden",position:"relative","&,&:hover":{border:"none !important",color:"inherit !important",textDecoration:"none"}}},Va=function(){return{position:"relative",paddingBottom:"56%"}},Ga=function(){return{left:"0",height:"100%",position:"absolute",top:"0",width:"100%"}},qa=function(){return{backgroundSize:"cover",backgroundPosition:"center",position:"relative",paddingBottom:"56%"}},Ha=function(){return{left:"50%",position:"absolute",top:"50%",transform:"translate(-50%, -50%)",width:"60px"}},Ka=function(){return{bottom:"10px",color:"#fff",fontSize:"14px",lineHeight:"16px",position:"absolute",right:"12px"}},Wa=function(e){return{backgroundColor:e.colors.GBK10A,padding:"12px"}},Za=function(e){return{color:e.colors.GBK02A,fontSize:"16px",lineHeight:"22px",fontWeight:e.fontWeights.bold}},Qa=function(e){return{alignItems:"center",color:e.colors.GBK06A,display:"flex",fontSize:"14px",lineHeight:"20px",marginTop:"6px"}},Ya=function(){return{height:"20px",marginRight:"8px",width:"20px"}},Ja=function(e){return{background:e.colors.GBK10A,borderRadius:"8px",boxSizing:"border-box",display:"block",margin:"1em auto",maxWidth:"100%",overflow:"hidden",paddingBottom:"56%",position:"relative"}},Xa=function(e){return{alignItems:"center",color:e.colors.GBK06A,display:"flex",fontSize:"28px",left:"50%",lineHeight:"40px",position:"absolute",textAlign:"center",transform:"translate(-50%, -50%)",top:"50%"}},$a=Object.freeze({__proto__:null,ZVideoLinkCard:Ua,ZVideoLinkCardPlayerContainer:Va,ZVideoLinkCardPlayer:Ga,ZVideoLinkCardImage:qa,ZVideoLinkCardPlayIcon:Ha,ZVideoLinkCardDuration:Ka,ZVideoLinkCardInfo:Wa,ZVideoLinkCardTitle:Za,ZVideoLinkCardAuthor:Qa,ZVideoLinkCardAvatar:Ya,ZVideoLinkErrorCard:Ja,ZVideoLinkErrorCardMessage:Xa}),eo=function(e){var t,n,a=null==e||null===(t=e.refTo)||void 0===t||null===(n=t.contents)||void 0===n?void 0:n[0];return null==a?void 0:a[null==a?void 0:a.type]},to=function(e){var t=e.onRef,n=E()(e,Ma),a=Object(l.useRef)();return Object(l.useLayoutEffect)((function(){t(a)}),[a,t]),Object(c.b)(Ba.a,Object.assign({ref:a},n))},no=function(e){var t=e.enableInlinePlay,n=e.onImageClick,a=e.zvideo,o=e.zaButtonText,r=e.getVideoUrl,i=e.zaProps,s=e.onLinkCardPlayerLoaded,u=a.imageUrl,d=a.video,b=d.videoId,f=d.duration,p=Object(l.useCallback)((function(e){$.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:o}}),n(e,a)}),[n,a,o]),h=Object(J.d)((function(e){"function"==typeof s&&e&&s({videoId:b,videoIframeRef:e})}));return Object(c.b)(c.a,{children:t?Object(c.b)(La.a,{placeholder:Object(c.b)("div",{className:"ZVideoLinkCard-playerContainer",css:Va}),children:Object(c.b)("div",{className:"ZVideoLinkCard-playerContainer",css:Va,children:Object(c.b)(to,{onRef:h,type:"video",className:"ZVideoLinkCard-player",css:Ga,src:r?r(b):"https://www.zhihu.com/video/".concat(b),iframeProps:{allowFullScreen:!0},zaProps:i})})}):Object(c.c)("div",{className:"ZVideoLinkCard-image",css:qa,style:{backgroundImage:"url(".concat(u,")")},onClick:p,children:[Object(c.b)(Pa.a,{className:"ZVideoLinkCard-playIcon",css:Ha}),Boolean(f)&&Object(c.b)("div",{className:"ZVideoLinkCard-duration",css:Ka,children:Fa(f)})]})})},ao=function(e){var t=e.onInfoClick,n=e.zvideo,a=e.zaButtonText,o=e.showReferenceInfo,r=e.showCoCreationInfo,i=e.subAuthor,s=void 0===i?{}:i,u=n.title,d=n.url,b=n.author,f=n.playCount,p=Object(l.useCallback)((function(e){$.a.trackEvent(e.target,{id:7847,action:"OpenUrl"},{button:{text:a}}),t(e,n)}),[t,n,a]);return Object(c.c)("div",{className:"ZVideoLinkCard-info",css:Wa,onClick:p,children:[Object(c.b)("div",{className:"ZVideoLinkCard-title",css:Za,children:u}),Boolean(d)&&Object(c.c)("div",{className:"ZVideoLinkCard-author",css:Qa,children:[r?Object(c.c)(c.a,{children:[Object(c.b)(za.a,{url:b.avatarUrl,alt:"",size:20,round:!0,css:{zIndex:1}}),Object(c.b)(za.a,{url:s.avatarUrl,alt:"",size:20,round:!0,css:{marginLeft:-4,marginRight:8}}),Object(c.b)("div",{children:"".concat(b.name,"、").concat(s.name," 联合创作")})]}):Object(c.c)(c.a,{children:[Object(c.b)(za.a,{className:"ZVideoLinkCard-avatar",css:Ya,url:b.avatarUrl,alt:"",size:20,round:!0}),Object(c.b)("div",{children:o?"".concat(b.name," 引用创作"):Ta()(Pn||(Pn=v()(["","的视频"])),b.name)})]}),Boolean(f)&&Object(c.c)("div",{children:[" · ",Object(H.cnNiceNumber)(f),"播放"]})]})]})};function oo(e){var t,n=Object(l.useRef)(null),a=e.component,o=void 0===a?"a":a,r=e.getVideoUrl,i=e.className,s=e.onClick,u=e.onMouseDown,d=e.zvideo,b=e.enableInlinePlay,f=void 0!==b&&b,p=e.onImageClick,h=void 0===p?B.a:p,m=e.onInfoClick,v=void 0===m?B.a:m,g=e.renderInjection,O=e.zaProps,j=e.onLinkCardPlayerLoaded,y=d.id,C=d.url,w=d.video,x=w.videoId,k=w.status,S=d.creationRelationship,R=!C?"inlinezvideo":"zvideo",A=eo(null==S?void 0:S.coCreation),I=Boolean(A),T="ZTextZVideoLinkCard";if(I?T="ZTextCoCreationZVideoLinkCard":(T="ZTextReferenceZVideoLinkCard",t=Boolean(eo(null==S?void 0:S.reference))),Object(l.useEffect)((function(){g||Object(X.onViewedOnce)(n.current,(function(){$.a.trackCardShow(n.current,{id:7844},{button:{text:R}})}))}),[R,g]),g){if("function"!=typeof g)throw new Error("renderInjection must be function");return g(e)}return"converting_failure"===k?Object(c.b)(ro,{error:"视频转码失败，请重新上传视频"}):Object(c.b)(l.Fragment,{children:Object(c.c)(Y.c,{as:o,shouldTrackClick:!0,shouldTrackShow:!0,zaAction:"OpenUrl",zaEventType:"Click",zaBlock:T,zaType:"Card",view:{elementLocation:{content:{type:"Zvideo",id:y},card:{index:0}}},extra:{link:{url:C}},className:_()("ZVideoLinkCard",i),css:Ua,ref:n,href:C,target:"_blank",rel:"noopener noreferrer",onClick:s,onMouseDown:u,"data-za-not-track-link":!0,"data-za-module":"Content","data-za-module-info":JSON.stringify({card:{content:{type:"Zvideo",token:y,video_id:x}}}),children:[Object(c.b)(no,{zvideo:d,enableInlinePlay:f,zaButtonText:R,onImageClick:h,getVideoUrl:r,zaProps:Object.assign({token:y},O),onLinkCardPlayerLoaded:j}),Object(c.b)(ao,{zvideo:d,zaButtonText:R,onInfoClick:v,showReferenceInfo:t,showCoCreationInfo:I,subAuthor:null==A?void 0:A.author})]})})}function ro(e){var t=e.error;return Object(c.b)("div",{className:"ZVideoLinkErrorCard",css:Ja,children:Object(c.b)("div",{className:"ZVideoLinkErrorCard-message",css:Xa,children:t.message||"视频加载错误"})})}function io(e){var t=e.id,n=e.shouldUseOldLinkCard,a=E()(e,_a),o=Object(l.useState)(null),r=k()(o,2),i=r[0],s=r[1],u=Object(l.useState)(null),d=k()(u,2),b=d[0],f=d[1];return Object(l.useEffect)((function(){if(n){var e=new URLSearchParams({include:Na()({creation_relationship:!0})}),a="https://www.zhihu.com/api/v4/zvideos/".concat(t,"/card?").concat(e.toString());rt(a).then((function(e){return Object(V.camelizeKeys)(e)})).then((function(e){e.error?f(e.error):s(e)})).catch((function(e){f(e)}))}}),[n,t]),n?b?Object(c.b)(ro,{error:b}):i?Object(c.b)(oo,Object.assign({zvideo:i,css:$a},a)):null:Object(c.b)(Ye,Object.assign({inEditor:!0,href:"https://www.zhihu.com/zvideo/".concat(t)},a))}io.defaultProps={shouldUseOldLinkCard:!0};var co=Je({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map((function(e){var t,n=e.getAttribute("href"),a="link-card"===e.getAttribute("data-draft-type");if(!n||!a)return null;var o=null===(t=n.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/))||void 0===t?void 0:t[1];if(o){var r=document.createElement("div");return r.className="RichText-ZVideoLinkCardContainer",e.parentNode.replaceChild(r,e),{data:{id:o},target:r}}return null})).filter(Boolean)},component:io}),lo=function(e,t,n){var a=Object(l.useRef)(n),o=Object(J.d)((function(e){var n=e.currentTarget,a={title:n.dataset.text,href:n.href};"IMG"===e.target.tagName?function(e,t,n){var a;$.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)}(e,t,Object.assign(Object.assign({},a),{},{video:{}})):function(e,t,n){var a;$.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:"inlinezvideo"}}),null==t||null===(a=t.onImageClick)||void 0===a||a.call(t,e,n)}(e,t,a)}));Object(l.useEffect)((function(){if(e&&a.current){var t=Array.from(e.querySelectorAll(".LinkCard.new.static.zvideo"));return t.forEach((function(e){Object(X.onViewedOnce)(e,(function(){return t=e,void $.a.trackCardShow(t,{id:7844},{button:{text:"inlinezvideo"}});var t})),e.addEventListener("click",o)})),function(){t.forEach((function(e){e.removeEventListener("click",o)}))}}}),[e,a,o])},so=n(964),uo=n.n(so),bo=Je({idAttr:"data-sku-id",selector:"a[data-sku-id]",targetClassName:"RichText-MkSkuLinkCardContainer",component:function(e){var t=e.id,n=e.onClick,a=Object(l.useRef)(!1),o=Object(l.useState)({}),r=k()(o,2),i=r[0],c=r[1],s=Object(l.useState)(!1),u=k()(s,2),d=u[0],b=u[1];return Object(l.useEffect)((function(){rt("https://www.zhihu.com/api/v4/market/km_sku_card/".concat(t),{credentials:"same-origin"}).then((function(e){var n=Object(V.camelizeKeys)(e)||{},a=n.title,o=n.desc,r=n.cover,i=n.button,l=n.resourceId,s=n.resourceName,u=n.price,d=n.error,f={};!uo()(e)&&uo()(d)&&(f=h()({},t,{id:t,skuId:l,source:2,productType:1,cardType:"cpsCommonCard",goods:{title:a,subtitle:o,price:{price:u},goodsImg:{imgUrl:r,imgShape:"rectangle",cornerText:s},goodsUrl:{url:null==i?void 0:i.url},btnText:"去查看"}})),c(f),b(!0)})).catch((function(){b(!0)}))}),[]),d&&!uo()(i)?Object(ka.jsx)(xa.a,{children:Object(ka.jsx)(wa.a,Object.assign(Object.assign({id:t,ref:function(e){e&&!e.classList.contains("GoodsRecommendCard-placeholder")&&!1===a.current&&($.a.setModule(e,{module:"Content"},{card:{content:{id:t}}}),Object(X.onViewedOnce)(e,(function(){$.a.trackCardShow(e,{id:7203})})),a.current=!0)},originalBlockText:"ZTextMkSKuLinkCard",originalData:i},{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1}),{},{onClick:function(e){$.a.trackEvent(e.target,{id:7204,action:"OpenUrl"}),n&&n(e)}}))}):null}}),fo=n(1477),po=n(45),ho=n(1037),mo=["root","isVideoAnswer","parentType","parentId"],vo=function(e){var t=e.root,n=e.isVideoAnswer,a=e.parentType,o=e.parentId,s=Object(r.default)(e,mo),u=Object(l.useState)(),d=Object(i.a)(u,2),b=d[0],f=d[1];Object(ho.a)({videoId:null==b?void 0:b.videoId,iframeRef:null==b?void 0:b.videoIframeRef});var p=Object(J.d)((function(e){var t="";return[fo.a.zvideo,fo.a.answer].includes(a)&&(t="?".concat(new URLSearchParams([["itemId",o],["itemType",a]]).toString())),"https://".concat(po.a.videoHost,"/video/").concat(e).concat(t)})),h=Object(J.d)((function(e){var t=e.videoId,n=e.videoIframeRef;t&&null!=n&&n.current&&f({videoId:t,videoIframeRef:n})}));return Object(c.b)(c.a,{children:Object(c.b)(co,Object.assign(Object.assign({onLinkCardPlayerLoaded:h,getVideoUrl:p,shouldUseOldLinkCard:!n},s),{},{root:t}))})},go=["onRef","htmlProcessors","linkCardInfo","zvideoLinkCardProps","adLinkCardProps","mcnLinkCardProps","eduCardProps","mkSkuLinkCardProps","html","sourceId","shouldShowCatalog","shouldCatalogCollapse","shouldFoldCatalog","referenceLinkProps","lazyLoadImageProps","useGifProps","useCatalogV2","isAuthor","maskGradientColor","isVideoAnswer"],Oo=function(e){var t=e.onRef,n=e.htmlProcessors,a=void 0===n?[]:n,s=e.linkCardInfo,u=e.zvideoLinkCardProps,d=e.adLinkCardProps,b=e.mcnLinkCardProps,f=e.eduCardProps,p=e.mkSkuLinkCardProps,h=e.html,m=e.sourceId,v=e.shouldShowCatalog,g=e.shouldCatalogCollapse,O=e.shouldFoldCatalog,j=e.referenceLinkProps,y=e.lazyLoadImageProps,C=e.useGifProps,w=e.useCatalogV2,x=e.isAuthor,k=e.maskGradientColor,S=e.isVideoAnswer,R=void 0!==S&&S,A=Object(r.default)(e,go),I=d||{},T=I.parentType,E=I.parentId,N=Object(l.useState)(null),B=Object(i.a)(N,2),z=B[0],L=B[1],P=Object(te.f)(),M=$t([].concat(Object(o.a)(a),[cn(),pn,la(w)]));lo(z,u,s),ln(z,j),sa(z),function(e){Object(l.useEffect)((function(){e&&Array.from(e.querySelectorAll("img[eeimg]")).forEach((function(e){e.setAttribute("data-formula",e.alt),e.alt="[公式]"}))}),[e])}(z);var _=Object(l.useMemo)((function(){return ia(h,m)}),[h,m]).catalog;return Object(c.c)(c.a,{children:[v&&O&&Object(c.b)(Xn,{root:z}),Object(c.b)(tn,Object.assign(Object.assign({},d),{},{root:z})),Object(c.b)(bo,Object.assign(Object.assign({},p),{},{root:z})),Object(c.b)(vo,Object.assign(Object.assign({parentId:E,parentType:T,isVideoAnswer:R},u),{},{root:z})),Ra({root:z,mcnLinkCardProps:b,contentType:T,token:E,isAuthor:x}),Object(Aa.c)({root:z,createLinkCardPortal:Je,eduCardProps:f}),v&&w&&(null==_?void 0:_.length)>0&&Object(c.b)(Ca,{catalog:_,inEditor:!1,scrollOffset:52,contentRoot:z,shouldCollapse:g,maskGradientColor:k}),Object(c.b)(Vt,Object.assign({ref:Object(J.h)(t,L),options:{lazyLoadImageOptions:y,useGifPortalOption:C},css:function(e){return function(e){return{".FileLinkCard":hn(e),".FileLinkCard-icon":{flexShrink:0,height:"30px",width:"30px"},".FileLinkCard-info":{marginLeft:"12px"},".FileLinkCard-name":mn(e),".FileLinkCard-meta":vn(e),".FileLinkCard-source":{whiteSpace:"pre"}}}(e)},html:M(h,{sourceId:m,theme:P,shouldShowCatalog:v,shouldFoldCatalog:O,linkCardInfo:s})},A))]})},jo=n(923),yo=function(e){var t=e.getAttribute("data-hash"),n=e.textContent.replace(/^@/,""),a=document.createElement("span");return e.parentNode.replaceChild(a,e),{target:a,data:{id:t,name:n}}},Co=function(e){var t=Object(l.useState)(null),n=Object(i.a)(t,2),a=n[0],o=n[1];return Object(l.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".member_mention"));if(t.length){var n=t.map(yo).map((function(e,t){var n=e.data,a=e.target;return Object(ee.createPortal)(Object(c.c)(jo.a,{user:n,children:["@",n.name]},t),a)}));o(n)}}}),[e]),a},wo=n(1126),xo=function(e){var t=e.getAttribute("data-poster"),n="data:,"===t?"":t,a={title:e.getAttribute("data-name"),thumbnail:n,url:e.getAttribute("href"),src:e.getAttribute("data-src")};a=e.getAttribute("data-lens-id")?Object.assign(Object.assign({},a),{},{isLens:!0,id:e.getAttribute("data-lens-id"),isPlayable:!0}):Object.assign(Object.assign({},a),{},{isLens:!1,id:e.getAttribute("data-video-id"),isPlayable:"true"===e.getAttribute("data-video-playable")}),e.hasAttribute("data-lens-status")&&(a=Object.assign(Object.assign({},a),{},{error:{status:e.getAttribute("data-lens-status"),message:e.getAttribute("data-description")}}));var o=document.createElement("div");return e.parentNode.replaceChild(o,e),{target:o,data:a}},ko=function(e,t){var n=t.hideWatermark,a=Object(l.useState)(null),o=Object(i.a)(a,2),r=o[0],s=o[1];return Object(l.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll(".video-box, .video-link, .unprocessable_video"));if(t.length){var a=t.map(xo).map((function(e,t){var a=e.data,o=e.target;return Object(ee.createPortal)(Object(c.b)(wo.a,{data:a,hideWatermark:n},t),o)}));s(a)}}}),[e,n]),r},So=n(90),Ro=n.n(So),Ao=["params","onRequestOpen","extra","as"],Io=function(e){return/^(\w+:)?\/\//.test(e)||"undefined"==typeof window?e:location.origin+e},To=function(e,t){var n=t.params,a=t.onRequestOpen,o=Object(Wt.b)();return function(t){var r=e.href,i=e.onClick;if(i&&i(t),!t.defaultPrevented&&r){var c=function(e,t){if(!t)return e;var n=e.split("#"),a=k()(n,2),o=a[0],r=a[1],i=o+(o.includes("?")?"&":"?")+t;return r?i+"#"+r:i}(Io(r),n);if((null==o?void 0:o.ZhihuHybrid)||(null==o?void 0:o.Zhihu))return t.preventDefault(),void Object(Kt.a)("base/openURL").dispatch({url:c});(null==a?void 0:a({ua:o,url:c}))&&t.preventDefault()}}},Eo=function(e,t){var n=t.extra;return{zaType:"Button",zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:Boolean(e),extra:Ro()({link:{get url(){return Io(e)}}},n)}},No=Object(l.forwardRef)((function(e,t){var n=e.params,a=e.onRequestOpen,o=e.extra,r=e.as,i=void 0===r?gn.Link:r,c=E()(e,Ao);return Object(ka.jsx)(Y.c,Object.assign({as:i},Eo(c.href,{extra:o}),c,{ref:t,onClick:To(c,{params:n,onRequestOpen:a})}),void 0)})),Bo=function(e,t){if(null==e||!e.length)return function(e){return e};return(t||{}).hasSorted?function t(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{val:0};if(!n)return n;if(e.length===a.val)return n;for(var o=n.length,r=0,i=0,c=e[a.val],l=c.mention,s=c.matchorder,u=s-1;i<=o;){if(-1===(i=n.indexOf(l,i)))return n;r+=1;var d=i+l.length;if(r-1===u){a.val++;var b=t(n.slice(0,i),a),f='<span data-search-entity="'.concat(a.val-1,'">').concat(l,"</span>"),p=t(n.slice(d),a);return b+f+p}i=d}return n}:function(t){return t?e.reduce((function(e,t,n){var a=t.matchorder,o=t.mention;return function(e,t,n,a){if(null==e||!e.length)return e;for(var o=e.length,r=0,i=0;i<=o;){if(-1===(i=e.indexOf(t,i)))return e;if((r+=1)-1===n)return e.slice(0,i)+a+e.slice(i+t.length);i+=t.length}return e}(e,o,a-1,'<span data-search-entity="'.concat(n,'">').concat(o,"</span>"))}),t):t}},zo=function(e){var t=e.size,n=e.className;return Object(c.b)("svg",{width:t,height:t,viewBox:"0 0 10 10",className:n,children:Object(c.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.64422 2.0701C5.43934 2.02495 5.22835 2.00107 5.01435 2.00024L5.01881 1C6.77895 1.00679 8.38723 2.18375 8.8647 3.96569C8.96467 4.33879 9.00845 4.71371 9.00122 5.08146L8.00058 5.08592C8.00545 4.91135 7.99501 4.73455 7.96827 4.55722C7.92244 4.24814 7.82948 3.95442 7.69691 3.68362C7.48242 3.24345 7.16768 2.87255 6.78903 2.59189C6.45425 2.34299 6.06581 2.16222 5.64422 2.0701ZM1.13729 6.03624C0.659821 4.2543 1.46415 2.43088 2.98508 1.54493L3.48906 2.40894C3.17129 2.59405 2.89522 2.83372 2.67003 3.11208C2.36422 3.48898 2.14798 3.94151 2.05373 4.43727C1.99759 4.72965 1.98457 5.0335 2.0198 5.33994C2.06383 5.73147 2.18322 6.10019 2.36312 6.43126C2.40015 6.49969 2.43967 6.56631 2.48152 6.63103L1.61207 7.12786C1.40517 6.79796 1.24334 6.43202 1.13729 6.03624ZM2.90011 8.40484L3.39642 7.53631C3.69079 7.72299 4.0199 7.85981 4.37186 7.9349C4.70489 8.0066 5.05386 8.02217 5.40538 7.97391C5.73677 7.92924 6.051 7.83047 6.33889 7.68677C6.78065 7.46729 7.15162 7.14642 7.43027 6.76141C7.55152 6.59389 7.65528 6.41424 7.7398 6.22551L8.60733 6.73154C8.11978 7.74635 7.20905 8.55042 6.03627 8.86467C4.92852 9.16149 3.80474 8.96295 2.90011 8.40484ZM4.08193 5.92023C3.83814 5.67643 3.70117 5.34577 3.70117 5.00099C3.70117 4.65621 3.83814 4.32555 4.08193 4.08175C4.32573 3.83795 4.65639 3.70099 5.00117 3.70099C5.34595 3.70099 5.67661 3.83795 5.92041 4.08175C6.16421 4.32555 6.30117 4.65621 6.30117 5.00099C6.30117 5.34577 6.16421 5.67643 5.92041 5.92023C5.67661 6.16402 5.34595 6.30099 5.00117 6.30099C4.65639 6.30099 4.32573 6.16402 4.08193 5.92023Z",fill:"currentColor"})})},Lo=function(e){var t=e.size,n=e.className;return Object(c.b)("svg",{width:t,height:t,viewBox:"0 0 15 15",className:n,children:Object(c.b)("path",{d:"M10.89 9.477l3.06 3.059a1 1 0 0 1-1.414 1.414l-3.06-3.06a6 6 0 1 1 1.414-1.414zM6 10a4 4 0 1 0 0-8 4 4 0 0 0 0 8z",fill:"currentColor"})})},Po=function(e){var t=e.word,n=e.sourceType,a=e.sourceId,o=e.link,r=void 0===o?{linkType:0,linkUrl:"",topicToken:""}:o,i=e.attachedInfoBytes,s=e.entityAB,u=e.hasKnowledgeTopic,d=e.onClick,b=Object(te.f)().colors,f=Object(Wt.b)(),p=f.Zhihu||f.ZhihuHybrid,h=0!==r.linkType,m=1===r.linkType,v=p&&(!h||m)&&"1"===s,g=Object(l.useMemo)((function(){return h?r.linkUrl:function(e,t,n){var a=new URLSearchParams({q:e,search_source:"Entity",hybrid_search_source:"Entity",hybrid_search_extra:JSON.stringify({sourceType:t,sourceId:n})});return"https://www.zhihu.com/search?".concat(a.toString())}(t,n,a)}),[r,t,n,a]),O=Object(J.d)((function(e){v&&(e.preventDefault(),function(e,t,n,a,o){var r=0===t.linkType?"/search/".concat(encodeURIComponent(e)):"/knowledge/".concat(t.topicToken),i=new URLSearchParams({sourceType:n,sourceId:a}),c="https://www.zhihu.com/appview/entity-word".concat(r,"?").concat(i.toString()),l=new URLSearchParams({url:c,show_header:"false",show_drag:"true",enable_close:"true",min_percent:"1",title:e,enable_drag:String(Boolean(o.iOS))});Object(Kt.a)("base/openURL").dispatch({url:"zhihu://popup_container?".concat(l.toString())})}(t,r,n,a,f)),d(e,r,g)}));if(!function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=0===t.linkType,r=1===t.linkType;return e?"0"===a?o:!n||r:o}(p,r,u,s||"0"))return Object(c.b)(l.Fragment,{children:t});var j=h?zo:Lo;return Object(c.c)(No,{as:p?"span":"a",shouldTrackShow:!0,zaText:t,zaBlock:h?"KnowledgeEntity":"SearchEntity",extra:{attachedInfoBytes:i},"data-za-not-track-link":!0,css:{color:b.GBL07A,textDecoration:"none",cursor:"pointer",":active":{padding:"3.5px 0",backgroundColor:b.GBK09A,borderRadius:"4px"}},href:g,target:"_blank",onClick:O,children:[t,Object(c.b)(j,{size:"10px",css:{position:"relative",verticalAlign:"top",top:"4px"}})]})},Mo=function(e,t){var n=t.type,a=t.sourceId,o=t.entityWords,r=void 0===o?[]:o,i=t.entityAB,s=t.onClick,u=void 0===s?B.a:s,d=Object(l.useState)(null),b=k()(d,2),f=b[0],p=b[1],h=Object(J.d)(u);return Object(l.useEffect)((function(){if(e){var t=Array.from(e.querySelectorAll("span[data-search-entity]"));if(t.length){var o=!1,l=t.map((function(e){var t,n=e.getAttribute("data-search-entity"),a=r[Number(n)]||{},i=a.mention,c=a.link,l={word:i,link:c,attachedInfoBytes:a.attachedInfoBytes};1===(null==c?void 0:c.linkType)&&(o=!0);var s=document.createElement("span");return null===(t=e.parentNode)||void 0===t||t.replaceChild(s,e),{data:l,target:s}})).map((function(t,r){var l=t.data,s=t.target;return e.contains(s)?Object(ee.createPortal)(Object(c.b)(Po,Object.assign({sourceType:n,sourceId:a,entityAB:i,hasKnowledgeTopic:o,onClick:h},l),r),s):null}));p(l)}}}),[e]),f},_o=n(21),Do=n(159),Fo=n.n(Do),Uo=n(1669),Vo=function(e){var t=e.goodsCardId,a=e.handleClose,o=Object(_o.useSelector)((function(e){return e.currentUser})),r=Object(J.e)((function(){return n.e(30).then(n.bind(null,2881))})),i=Object(Uo.a)(),l=Object(J.d)((function(e){var t=e.id,n=e.sourceId,a=e.url,o=e.app_schema_ios,r=e.app_schema_android;i({id:t,source:n,url:a,appSchemaIos:o,appSchemaAndroid:r})}));return t?Object(c.b)(r,{showModal:Boolean(t),id:t,userId:o,clientId:Fo.a.get("_zap"),onClose:a,onSelectCard:l}):null},Go=["className","ecommerce","html","shouldShowCatalog","sourceId","sourceType","isExpanded","entityWords","isVideoAnswer","hideWatermark"],qo=["isNovel"],Ho={},Ko=function(e,t){var n=function(e){return e.split("/").reverse()[0]}(t),a=n.split("."),o=Object(i.a)(a,2),r=o[0],c=o[1],l=r.split("_"),s=Object(i.a)(l,2)[1],u="webp"===c||"gif"===c?c:"image",d=Object(b.statGenerator)({appName:"heifetz"})("".concat(u,".").concat(s,".unknown.RichText"));switch(e){case"loadstart":Ho[n]=Date.now();break;case"load":if(Ho[n]){var p="".concat(d,".success");f.a.increment({raw:"".concat(p,".count")}),f.a.timing(p,Date.now()-Ho[n]),delete Ho[n]}break;case"timeout":Ho[n]&&(f.a.increment({raw:"".concat(d,".timeout.count")}),delete Ho[n]);break;case"error":Ho[n]&&(f.a.increment({raw:"".concat(d,".failure.count")}),delete Ho[n])}},Wo=function(e){return Object(c.b)(_t,Object.assign(Object.assign({onLoadStateChange:Ko},e),{},{useMp4:!0}))},Zo=function(e){var t=e.root,a=e.ecommerce,o=e.sourceType,r=e.sourceId,i=e.entityWords,l=e.hideWatermark;return Object(c.c)(c.a,{children:[ko(t,{hideWatermark:l}),Co(t),Object(c.b)(Qt.a,{target:"ecommercePortal",replacement:null,children:Object(d.d)(t,{ecommerce:a,getComponent:function(){return Promise.all([n.e(17),n.e(26)]).then(n.bind(null,1475))}})}),Mo(t,{type:o,sourceId:r,entityWords:i})]})},Qo=function(e){var t=e.className,n=e.ecommerce,a=e.html,s=e.shouldShowCatalog,d=e.sourceId,b=e.sourceType,f=e.isExpanded,p=void 0===f||f,h=e.entityWords,m=e.isVideoAnswer,v=e.hideWatermark,g=Object(r.default)(e,Go),O=Object(l.useState)(null),j=Object(i.a)(O,2),y=j[0],C=j[1],w=Object(l.useMemo)((function(){return a?u.compose.apply(void 0,Object(o.a)([Bo(h),Ht].filter(Boolean)))(a):""}),[a,h]);Zt(y);var x=function(){var e=Object(l.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1];return[n,Object(J.d)((function(e){var t=e.currentTarget.dataset.mcnId;a(t)})),Object(J.d)((function(){return a(null)}))]}(),k=Object(i.a)(x,3),S=k[0],R=k[1],A=k[2];return Object(c.c)(c.a,{children:[Object(c.b)(Oo,Object.assign(Object.assign({},g),{},{className:t,html:p?w:a,onRef:C,lazyLoadImageProps:{onLoadStateChange:Ko,useWebP:!1},useGifProps:{Component:Wo},adLinkCardProps:{parentId:d,parentType:b},mcnLinkCardProps:{onClick:R},mkSkuLinkCardProps:{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1},eduCardProps:{token:d,contentType:b},zvideoLinkCardProps:{enableInlinePlay:!0},shouldShowCatalog:s,sourceId:d,useCatalogV2:!0,isVideoAnswer:m})),Object(c.b)(Zo,{root:y,ecommerce:n,sourceId:d,sourceType:b,entityWords:h,hideWatermark:v}),Object(c.b)(Vo,{goodsCardId:S,handleClose:A})]})};t.a=function(e){var t=e.isNovel,n=Object(r.default)(e,qo);if(t){var a=n.className,o=n.html;return Object(c.b)(Xt,{className:a,html:o,lazyLoadImageProps:{onLoadStateChange:Ko,useWebP:!1}})}return Object(c.b)(Qo,Object.assign({},n))}},1076:function(e,t,n){"use strict";n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return L}));var a=n(47),o=n(172),r=n(1),i=n(0),c=n.n(i),l=n(21),s=n(40),u=n(12),d=Object.assign;function b(e){return c.a.createElement(u.a,d(d({width:"16",height:"16",viewBox:"0 0 16 16","data-new-api":"ArrowClockwise16","data-old-api":"ArrowClockwise16"},e),{className:"ZDI ZDI--ArrowClockwise16"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M9.75 1.777A6.65 6.65 0 107.124 14.76a.65.65 0 10.142-1.292 5.35 5.35 0 114.77-1.987l-.117-1.07a.65.65 0 00-1.292.14l.254 2.324a.85.85 0 001.01.741l2.379-.472a.65.65 0 10-.253-1.275l-.759.15A6.649 6.649 0 009.75 1.778z",fillRule:"evenodd",clipRule:"evenodd"}))}var f,p=n(8),h=n(131),m=n(505),v=n(516),g=n(1297),O=n(118),j=Object(p.h)(f||(f=Object(o.a)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]))),y=function(e){var t=e.className,n=e.isLoading;return Object(r.c)(h.b,{className:t,css:function(e){return{display:"inline-flex",alignItems:"center",color:e.colors.GBK06A}},children:[Object(r.b)("span",{css:{display:"inline-flex",alignItems:"center",width:24,marginLeft:-24},children:Object(r.b)(b,{css:n?{animation:"".concat(j," 1s linear 600ms infinite")}:{}})}),n?"加载中...":"加载失败，点击「设置」重试"]})},C=function(e){var t=e.className,n=e.current,a=e.permissionItem,o=e.onClick,i=a.permission,c=a.text,l=a.disable,s=a.disableAlert;return i!==m.b||n===i||Object(m.c)()?Object(r.b)(g.a,{className:t,onClick:function(){l?Object(O.b)(s,{theme:"red-ghost"}):o(i,c)},checked:n===i,children:c}):null};function w(e){var t=e.current,n=e.target,o=e.type,c=e.onChange,u=e.className,d=Object(s.a)(!1),b=Object(a.a)(d,2),f=b[0],p=b[1],h=Object(s.a)(!0),g=Object(a.a)(h,2),j=g[0],w=g[1],x=Object(l.useDispatch)(),k=n.type,S=n.id,R=o||k,A=Object(l.useSelector)((function(e){var t;return null===(t=e.commentPermission[R])||void 0===t?void 0:t[S]}))||[];Object(i.useEffect)((function(){f||x(Object(v.b)(R,S)).finally((function(){w.off(),p.on()}))}),[x,R,S,f,p,w]),Object(i.useEffect)((function(){t!==m.b||Object(m.c)()||Object(m.e)()}),[t]);var I=function(e,a){if(e!==t)if(n){var o=n.id;n.adminClosedComment?Object(O.b)("此内容无法更改评论权限",{theme:"red-ghost"}):e===m.a||t===m.a?Object(O.a)("你确定要更改评论权限吗？",{content:e===m.a?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来"}).then((function(){return c(o,e,a)})).catch((function(){return null})):c(o,e,a)}else c(e)};return j?Object(r.b)(y,{className:u,isLoading:!0}):j||!f||A.length?Object(r.b)(r.a,{children:A.map((function(e){return Object(r.b)(C,{className:u,permissionItem:e,onClick:I,current:t},e.permission)}))}):Object(r.b)(y,{className:u})}var x=n(14),k=n(15),S=n(17),R=n(18),A=n(7),I=n(96),T=n(2283),E=n.n(T),N=n(433);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(A.a)(e);if(t){var o=Object(A.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(R.a)(this,n)}}var z=function(e){Object(S.a)(n,e);var t=B(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(k.a)(n,[{key:"render",value:function(){return Object(r.b)("img",{src:E.a,style:{maxWidth:"200px",marginTop:"30px"},alt:"delete-comment-success"})}}]),n}(i.Component);z.showModal=function(e){I.b.open((function(t){var n=(e||{}).reportText;return setTimeout(t,2e3),Object(r.b)(I.b,{title:"举报成功",onClose:t,children:Object(r.c)("div",{style:{textAlign:"center"},children:[Object(r.b)("div",{children:n||"你的举报我们已经收到，处理完成后将会私信告知处理结果。"}),Object(r.b)(z,{})]})})}))};var L=Object(N.b)({view:{id:3038},trackCardShow:!0})(z),P=n(33),M=n(298);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(A.a)(e);if(t){var o=Object(A.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(R.a)(this,n)}}var D=function(e){Object(S.a)(n,e);var t=_(n);function n(){var e;Object(x.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={reportModalShown:!1},e.handleSubmit=function(){var t=e.props,n=t.id,a=t.onDelete,o=t.onClose;a(n),o()},e.handleReportModalOpen=function(){return e.setState({reportModalShown:!0})},e.handleReportModalClose=function(){e.setState({reportModalShown:!1}),e.handleSubmit()},e.handleSuccess=function(){e.handleSubmit()},e}return Object(k.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.shown,a=e.onClose,o=e.reportAndDeleteExperiment;return Object(r.c)(i.Fragment,{children:[Object(r.b)(I.b,{title:"你确定要删除这条评论吗？",closeButton:null,maskClosable:!1,hotKeyClosable:!1,onClose:a,footer:o&&Object(r.c)("div",{className:"CommentDeleteAndReport-extra",children:["评论若构成举报条件可以",Object(r.b)(P.c,{preset:"link",onClick:this.handleReportModalOpen,children:"删除并举报"})]}),children:n&&Object(r.c)(I.a,{direction:"horizontal",children:[Object(r.b)(P.c,{onClick:a,children:"取消"}),Object(r.b)(P.c,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:"确定"})]})}),Object(r.b)(M.a,{title:"删除成功，请选择举报理由",subtitle:"",shown:this.state.reportModalShown,type:"comment",urlToken:t,zaEnabled:!0,onSuccess:this.handleSuccess,onClose:this.handleReportModalClose})]})}}]),n}(i.Component)},1077:function(e,t,n){"use strict";n.d(t,"b",(function(){return B})),n.d(t,"a",(function(){return d}));var a=n(3),o=n.n(a),r=n(0),i=n(13),c=n.n(i),l=n(219),s=n(8),u=function(e){var t=e.title,n=e.subtitle,a=e.attrInfo,o=e.coverUrl,r=e.avatarUrl,i=e.avatarFit;return Object(s.g)("div",null,o&&Object(s.g)("div",{className:"HoverCard-coverContainer"},Object(s.g)("img",{className:"HoverCard-cover",src:o,alt:"cover"})),Object(s.g)("div",{className:c()("HoverCard-titleContainer",{"HoverCard-titleContainer--noAvatar":!o})},r&&Object(s.g)(l.a,{size:68,className:"HoverCard-avatar",url:r,imgFit:i}),Object(s.g)("div",{className:c()("HoverCard-titleText",{"HoverCard-titleText--noAvatar":!r})},Object(s.g)("div",{className:"HoverCard-title"},t),n&&Object(s.g)("div",{className:"HoverCard-subtitle"},n)),a&&Object(s.g)("div",{className:"HoverCard-attrInfo"},a)))};u.propTypes={title:o.a.node,subtitle:o.a.node,attrInfo:o.a.node,coverUrl:o.a.string,avatarUrl:o.a.string,avatarFit:o.a.oneOf(["fill","contain","cover","none","scale-down"])};var d=u,b=n(34),f=n.n(b),p=n(23),h=n.n(p),m=n(28),v=n.n(m),g=n(27),O=n.n(g),j=n(29),y=n.n(j),C=n(19),w=n.n(C),x=n(42),k=n.n(x),S=n(70),R=n.n(S),A=n(441),I=n(173),T=["toggler","children","isLoading","onRef","size"];function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var o=w()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return y()(this,n)}}var N=function(e){O()(n,e);var t=E(n);function n(){var e;h()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={opened:!1,placement:null,loaderStyle:null},e.handleOpen=function(t){var n=t.arrowStyle,a=t.placement,o=e.props.onOpen;o&&o(),e.setState({opened:!0,placement:a,loaderStyle:n})},e.handleClose=function(){var t=e.props.onClose;t&&t(),e.setState({opened:!1})},e}return v()(n,[{key:"render",value:function(){var e=R()(this.props,["onOpen","onClose"]),t=e.toggler,n=e.children,a=e.isLoading,o=e.onRef,i=e.size,l=f()(e,T),u=this.state,d=u.opened,b=u.loaderStyle;return Object(s.g)(I.a,k()({noLayer:!0,toggler:Object(s.g)("div",null,t),toggleEvent:"hover",targetClassName:"HoverCard-popoverTarget",placement:"bottom-left",onOpen:this.handleOpen,onClose:this.handleClose},l),Object(s.g)("div",{className:c()("HoverCard-container",{"HoverCard-container--large":"large"===i}),ref:o},a&&Object(s.g)("div",{className:"HoverCard-loading",style:b},Object(s.g)(A.a,null)),Object(s.g)("div",{className:c()("HoverCard",{"HoverCard--isLoading":a||!d})},r.Children.map(n,(function(e){return e&&("string"==typeof e?Object(s.g)("div",{className:"HoverCard-item"},e):Object(r.cloneElement)(e,{className:c()("HoverCard-item",e.props.className)}))})))))}}]),n}(r.Component);N.propTypes={toggler:o.a.node.isRequired,isLoading:o.a.bool,onOpen:o.a.func,onClose:o.a.func,size:o.a.oneOf(["default","large"])},N.defaultProps={margin:16,align:"left",topExcludedHeight:60,size:"default"};var B=N},1080:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(24),o=n.n(a),r=n(23),i=n.n(r),c=n(28),l=n.n(c),s=n(27),u=n.n(s),d=n(29),b=n.n(d),f=n(19),p=n.n(f),h=n(0),m=n.n(h),v=n(13),g=n.n(v),O=n(8);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return b()(this,n)}}var y=function(e){u()(n,e);var t=j(n);function n(e){var a;i()(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({checked:e.target.checked});var t=a.props.onChange;"function"==typeof t&&t(e)},a.handleFocus=function(){a.setState({focused:!0})},a.handleBlur=function(){a.setState({focused:!1})};var o=e.checked;return a.state={checked:Boolean(o),focused:!1},a}return l()(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.checked,a=t.forceControlled;if(!a){var o=e.forceControlled,r=e.checked;if(!o||a){if(void 0!==n){var i=this.state.checked;r!==n&&n!==i&&this.setState({checked:n})}}else this.setState({checked:Boolean(n)})}}},{key:"render",value:function(){var e,t=this.props,n=t.id,a=t.style,r=t.className,i=t.preset,c=t.onClick,l=t.onChange,s=t.name,u=t.value,d=t.checked,b=t.disabled,f=t.forceControlled,p=this.state,h=p.focused,m=p.checked,v=f?d:m,j=f?l:this.handleChange;return Object(O.g)("label",{className:g()("Switch",r,(e={},o()(e,"Switch--".concat(i),"normal"!==i),o()(e,"Switch--focused",h),o()(e,"Switch--disabled",b),o()(e,"Switch--checked",Boolean(v)),e)),style:a},Object(O.g)("input",{id:n,className:"Switch-input",type:"checkbox",onClick:c,onChange:j,onFocus:this.handleFocus,onBlur:this.handleBlur,name:s,value:u,checked:Boolean(v),disabled:b}))}}]),n}(m.a.Component);y.defaultProps={preset:"normal"}},1081:function(e,t,n){"use strict";var a=n(47),o=n(14),r=n(15),i=n(81),c=n(17),l=n(18),s=n(7),u=n(1),d=n(0),b=n(20),f=n(13),p=n.n(f),h=n(3),m=n.n(h),v=n(48),g=n(21),O=n(58),j=n(1636),y=n(896),C=n(1231),w=n(486),x=n(433),k=n(33),S=n(1228),R=n(150),A=n(26),I=n(289),T=n(435),E=n(1047),N=n(218),B=n(2),z=n(6),L=Object(z.a)("brand",["GET_URL"]),P=n(385),M=n.n(P);function _(e,t){var n=e.trackUrl,a=void 0===n?[]:n,o=e.id;if(0===a.length)return null;var r="other";t.Android?r="android":t.iOS&&(r="ios");var i=M()();return a.forEach((function(e){(new Image).src=e.replace("__OS__",r).replace("__ADPLATFORM__",r).replace("__REQUESTID__",i).replace("__SESSIONID__",i).replace("__ATOKEN__",o).replace("__PAGETYPE__","article")})),{os:r,pageId:o,sessionId:i,pageType:"article"}}var D=n(63),F=n(473),U=n(1295),V=n(1422),G=n(1123),q=n(1667),H=n(1760),K=n(1291),W=n(1049),Z=n(1759),Q=n(341),Y=n(1426),J=n(1022),X=n(945),$=n(962),ee=n(1224),te=n(1082),ne=n(1159),ae=n(1232),oe=n(1746),re=n(1230),ie=n(30),ce=n(380),le=n(966),se=n(960),ue=n(469),de=n(922),be=n(973),fe=n(1023),pe=n(1322),he=n(1301),me=n(1489),ve=n(1424);n(1668);function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var Oe=function(e){return"plain"===e||"special-plain"===e},je=Oe,ye=function(e){return e.thumbnailExtraInfo&&"video"===e.thumbnailExtraInfo.type?{cover:e.thumbnail,hasVideo:!0}:{cover:e.imageUrl||e.thumbnail,hasVideo:!1}};function Ce(e){var t=Object(V.b)(e);return t?Object.assign(Object.assign({},e),{},{creationRelationship:t}):e}var we=function(e){Object(c.a)(n,e);var t=ge(n);function n(){var e,a,r,c,l,s,d;Object(o.a)(this,n);for(var b=arguments.length,f=new Array(b),p=0;p<b;p++)f[p]=arguments[p];return(e=t.call.apply(t,[this].concat(f))).state={commentsShown:!1,commentsAutoFocus:!0,favlistsShown:!1,commentPattern:"fixed",positionStatus:null,guideShown:!1,contentExpanded:!1,hasFetchedLabels:!1,shownCatalogModal:!1},e.disableAuth=(a=e.props,r=a.router,c=(r=void 0===r?{}:r).location,l=(c=void 0===c?{}:c).pathname,s=a.isMobile,d=a.currentUser,s&&!d&&!l.startsWith("/topic")),e.handleCommentsShown=function(t,n){e.props.shouldOia?e.createOpenInAppHandler("comment_article")(t):e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e.handlePositionStatusChange=function(t){e.setState({positionStatus:t})},e.handleFavButtonClick=function(t){var n=e.props,a=n.zaInfos.favlists;n.shouldOia?e.createOpenInAppHandler("comment_article")(t):(A.a.trackEvent(e.favButtonRef,Object.assign({action:"Collect",element:"Button",is_intent:!0},a&&{id:a})),e.disableAuth?e.handleToggleGuide():e.handleFavlistsShown())},e.handleFavlistsShown=e.props.authRequired((function(){return e.setState({favlistsShown:!0})}),ie.Y.favlists),e.handleFavlistHide=function(){e.setState({favlistsShown:!1})},e.handleToggleGuide=function(){e.setState({guideShown:!e.state.guideShown})},e.toggleCatalogModal=function(){e.setState({shownCatalogModal:!e.state.shownCatalogModal})},e.handleVote=function(t){var n=e.props,a=n.article.id;(0,n.updateArticleVote)(a,t)},e.handleLogMoreClick=function(){var t=e.props.zaInfos.options;A.a.trackEvent(Object(i.a)(e),Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))},e.loadArticleConcernedVoters=function(){var t=e.props,n=t.concernedUpvoters,a=t.article,o=t.loadArticleConcernedVoters,r=t.currentUser;!n&&r&&o(a.id)},e.handleToggleExpand=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.trackUserAction,o=void 0===a||a,r=e.props,i=r.onToggleExpand,c=r.getTrackUrl,l=r.article,s=r.ua,u=r.trackPromotionClick;if(i&&i(t),t&&(e.loadArticleConcernedVoters(),o)){var d=l.trackUrl?Promise.resolve():c(l.id);d.then((function(){return _(e.props.article,s)})),u&&u()}e.setState({contentExpanded:t})},e.renderPrefix=function(){var t=e.props.article,n=t.labelInfo,a=t.hermesLabel,o=e.state.contentExpanded;return!n&&!a||o?null:Object(u.b)(ne.a,{labelInfo:n||a})},e.createOpenInAppHandler=function(t){var n=e.props.article.id;return function(e){e.preventDefault(),ie.D||Object(I.e)(Object(ce.a)({type:"article",id:n}),{utm_content:t})}},e.handleLike=function(t){return!!e.props.shouldOia&&(e.createOpenInAppHandler("like_article")(t),!0)},e}return Object(r.a)(n,[{key:"renderLabels",value:function(){if(!this.state.contentExpanded)return null;var e=this.props,t=e.article,n=e.useNewLabels,a=t.annotationDetail,o=t.reviewInfo,r=(o=void 0===o?{}:o).isReviewing,i=o.tips;return r?Object(u.b)("div",{className:"ArticleItem-status",children:i}):Object(u.b)(ae.a,{useOldLabels:!n,annotationProps:a&&{annotationDetail:a},item:t})}},{key:"renderArticleExtraInfo",value:function(){var e=this.props,t=e.actor,n=e.action,a=e.article,o=a.voteupCount,r=a.id,i=a.type,c=e.concernedUpvoters,l=void 0===c?[]:c,s=t&&t.urlToken;return o?Object(u.b)("div",{className:"ArticleItem-extraInfo",children:Object(u.b)(oe.a,{id:r,type:i,voteupCount:o,upvotedFollowees:null==l?void 0:l.filter((function(e){return s!==e.urlToken})),too:"voted"===n})},"articleExtraInfo"):null}},{key:"renderMeta",value:function(){var e=function(e){var t=e.title,n=e.id,a=e.created,o=e.updated,r=e.commentCount,i=e.imageUrl,c=e.thumbnail;return{headline:t,url:"".concat(ie.m,"/p/").concat(n),datePublished:new Date(1e3*a).toISOString(),dateModified:new Date(1e3*o).toISOString(),commentCount:r,image:i||c}}(this.props.article);return Object.keys(e).map((function(t){return Object(u.b)("meta",{itemProp:t,content:e[t]},t)}))}},{key:"renderSuggestEdit",value:function(){var e=this.props.article,t=e.isNormal,n=void 0===t||t,a=e.suggestEdit,o=(a=void 0===a?{}:a).title,r=a.status,i=a.reason;return r&&!n?Object(u.c)("div",{className:"AnswerItem-statusContent",children:[Object(u.b)("div",{className:"AnswerItem-statusReason",children:i}),Object(u.c)("div",{className:"AnswerItem-statusDescription",children:["作者修改内容通过后，文章会重新显示恢复正常 ",Object(u.b)("a",{target:"_blank",href:"/question/24752645",className:"AnswerItem-statusLink",children:o})]})]}):null}},{key:"render",value:function(){var e,t,n=this,o=this.props,r=o.article,i=o.article,c=i.id,l=i.title,s=i.author,d=i.excerpt,b=i.content,f=i.voteupCount,h=i.voting,m=i.type,v=i.created,g=i.updated,w=i.imageUrl,x=i.commentCount,A=i.adminClosedComment,I=i.reviewInfo,E=(I=void 0===I?{}:I).isReviewing,N=I.editType,B=i.annotationDetail,z=i.vessayInfo,L=i.creationRelationship,P=o.preset,M=o.lastreadTouchable,_=o.itemProp,D=void 0===_?"article":_,F=o.ua,V=o.lessExcerpt,Y=o.formatContent,J=o.zaInfos,ne=J.expand,ae=J.title,oe=J.voteUp,me=J.voteDown,ge=J.toggleComment,Ce=J.share,we=J.report,xe=J.options,ke=J.getCommentAction,Se=o.renderOptions,Re=o.isSticky,Ae=o.handleToggleSticky,Ie=o.trackPromotionClick,Te=o.renderActionButtons,Ee=o.className,Ne=o.isMobile,Be=o.ecommerce,ze=o.useVessayV2,Le=o.showHeightLight,Pe=void 0!==Le&&Le,Me=o.truncateDisabled,_e=void 0!==Me&&Me,De=o.currentUser,Fe=o.blockStrategies,Ue=Object(ve.b)([Object(ve.a)(Fe)],Te),Ve=this.state,Ge=Ve.positionStatus,qe=Ve.favlistsShown,He=Ve.commentsShown,Ke=Ve.commentsAutoFocus,We=Ve.commentPattern,Ze=Ve.contentExpanded,Qe=Ve.shownCatalogModal,Ye="".concat(ie.m,"/p/").concat(c),Je=!(E&&"create"===N),Xe=De&&De.urlToken===s.urlToken,$e=this.renderSuggestEdit(),et="function"==typeof Ae,tt=!function(e){return"special-plain"===e}(P)&&Object(u.b)(X.a,Object.assign(Object.assign({},je(P)&&{preset:"plain"}),{},{author:s,userLinkV2:!0,className:"ArticleItem-authorInfo"}),"authorInfo"),nt=this.renderArticleExtraInfo(),at=this.renderLabels(),ot=null==L||null===(e=L.coCreation)||void 0===e?void 0:e.refBy,rt=null==L||null===(t=L.reference)||void 0===t?void 0:t.refBy,it=Ze&&(ot||rt)&&Object(u.b)(O.Box,{my:"16px",children:Object(u.b)(W.CoCreationLinkCard,{type:"article",coCreationRefBy:ot,referenceRefBy:rt})}),ct=Oe(P)?[[tt,at,it],nt]:[[tt,at,it,nt],null],lt=Object(a.a)(ct,2),st=lt[0],ut=lt[1],dt=!$e||Xe,bt=Y?Y(b||d,r):b||d,ft=Je&&!Ne&&Ze&&Object(K.a)(r,"article"),pt=Boolean(null==z?void 0:z.enableVideoTranslate);return Object(u.c)(de.e,{className:p()("ArticleItem",Ee),onRef:function(e){n.contentItem=e},"data-zop":JSON.stringify({authorName:s.name,itemId:c,title:l,type:"article"}),data:r,link:Ye,title:Object(u.c)(u.a,{children:[et&&Re&&Object(u.b)(pe.a,{}),Object(u.b)(T.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:Object(u.b)("a",Object.assign(Object.assign({href:Ye,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-element_name":"Title"},ae&&{"data-za-detail-view-id":ae}),{},{onClick:Ie,children:Pe?Object(u.b)("span",{dangerouslySetInnerHTML:{__html:l},className:"ArticleItem-highlight"}):l}))})]}),meta:st,lastreadTouchable:M,itemProp:D,itemType:"http://schema.org/SocialMediaPosting",itemScope:!0,children:[this.renderMeta(),dt?Object(u.b)(be.b,Object.assign(Object.assign(Object.assign({truncateDisabled:_e,className:p()({"ArticleItem-highlight":Pe}),itemProp:"articleBody",data:r,excerpt:Y?Y(d,r):d,html:bt,ecommerce:Be,onToggleExpend:this.handleToggleExpand,prefix:this.renderPrefix(),before:Object(u.c)("div",{children:[ut,w&&Object(u.b)(S.a,{className:"ArticleItem-image",thumbnail:Object(R.imgUrl)(w,"60w"),url:w,alt:l})]}),after:Object(u.b)(be.a,{href:Ye,created:v,updated:g})},V?{limit:74}:{}),{},{onPositionStatusChange:this.handlePositionStatusChange},ye(r)),{},{zaIds:{expand:ne},children:Ue({componentList:[{name:"vote",component:Je&&!Q.b.includes(c)&&(Ne?Object(u.b)(ee.a,{id:c,type:m,liked:Boolean(h),count:f,disabled:Xe,onClick:this.handleLike,handleToggleGuide:this.handleToggleGuide,disableAuth:this.disableAuth},"vote"):Object(u.b)(te.a,{type:m,count:f,onVote:this.handleVote,voting:h,isOwner:Xe,handleToggleGuide:this.handleToggleGuide,zaIds:{voteUp:oe,voteDown:me}},"vote"))},{name:"comment",component:Je&&Object(u.b)("div",{css:Q.b.includes(c)?{marginLeft:-24}:{},children:Object(u.b)(le.a,{onClick:this.handleCommentsShown,commentsShown:He,commentClosed:A,count:x,positionStatus:Ge,zaInfos:{toggleComment:ge,getCommentAction:ke}},"comment")})},{name:"catalog",component:ft&&Object(u.b)(q.a,{html:bt,sourceId:r.id,onClick:this.toggleCatalogModal},"catalog")},{name:"share",component:Je&&Object(u.b)($.a,{id:c,type:"article",url:Ye,title:l,authorName:s&&s.name,positionStatus:Ge,zaShareId:Ce},"share")},{name:"favlist",component:Je&&(!De||!De.isOrg)&&Object(u.b)(G.a,{onRef:function(e){return n.favButtonRef=e},onClick:this.handleFavButtonClick,label:Ne?"":"收藏"},"favlist")},{name:"sticky",component:!Ne&&et&&Xe&&Object(U.a)(De)&&Object(u.b)(k.c,{preset:"plain",onClick:Ae,icon:Re?j.b:y.b,label:Re?"取消置顶":"置顶"},"sticky")},{name:"report",component:Je&&!Xe&&!Ne&&De&&Object(u.b)(ue.a,{id:c,type:m,zaReportId:we},"report")},{name:"vessay",component:!Ne&&Xe&&pt&&Object(u.b)(Z.a,{type:"article",id:c,useVessayV2:ze,isAuthor:Xe},"vessay")},{name:"options",component:!Ne&&Je&&(null==Se?void 0:Se((function(){return n.contentItem}),xe))},{name:"annotation",component:!Ze&&Object(u.b)(re.a,{annotationDetail:B},"annotation")}]})})):this.renderSuggestEdit(),dt&&Object(u.b)(he.a,{content:b,type:"article",urlToken:String(c)}),this.disableAuth&&this.state.guideShown&&Object(u.b)(C.a,{redirectUrl:Ye,urlScheme:Object(ce.a)({type:"article",id:c}),buttons:[F.Wechat?{name:"wechat",text:"快速登录",fill:"#fff"}:"zhihu"],onClose:this.handleToggleGuide}),Object(u.b)(se.a,{parent:r,commentPattern:We,shown:He,autoFocus:Ke,onClose:this.handleCommentsHide}),Object(u.b)(fe.a,{id:c,type:"article",shown:qe,onClose:this.handleFavlistHide,zaEnabled:!0}),ft&&Object(u.b)(H.a,{shown:Qe,html:bt,sourceId:r.id,onClose:this.toggleCatalogModal,created:v,updated:g,author:s,zaContent:{type:"Answer",token:String(r.id)}})]})}}]),n}(d.Component);we.propTypes={preset:m.a.string,lessExperpt:m.a.bool,formatContent:m.a.func,renderOptions:m.a.func,zaInfos:m.a.object,trackPromotionClick:m.a.func,renderActionButtons:m.a.func},we.defaultProps={preset:"primary",zaInfos:{},renderActionButtons:me.b};t.a=Object(b.compose)(Object(J.a)((function(e){var t=e.article;return{content:{type:"Post",token:String(t.id)}}})),Object(x.b)((function(e){var t=e.article,n=e.trackCardShow,a=void 0===n||n,o=e.zaInfos,r=(o=void 0===o?{}:o).cardShow;return Object.assign(Object.assign({module:"PostItem",card:{has_image:Boolean(t.thumbnailExtraInfo&&"image"===t.thumbnailExtraInfo.type),has_video:Boolean(t.thumbnailExtraInfo&&"video"===t.thumbnailExtraInfo.type),content:{type:"Post",token:t.id.toString(),upvote_num:t.voteupCount,comment_num:t.commentCount,publish_timestamp:1e3*t.created,parent_token:t.column&&t.column.id,author_member_hash_id:t.author.id,video_id:t.thumbnailExtraInfo&&t.thumbnailExtraInfo.videoId}}},r&&{view:{id:r}}),{},{trackCardShow:a})})),v.withRouter,N.a,Object(E.d)({dataPath:"article"}),E.c,Object(g.connect)((function(e,t){var n=t.article;return{article:Ce(n),ua:e.env.userAgent,ecommerce:Object(w.c)(e,{type:"article",urlToken:t.article.id}),shouldOia:Object(D.h)(e),isMobile:Object(D.d)(e),concernedUpvoters:Object(F.a)(e,{id:n.id}),useVessayV2:Object(D.a)(e,Y.b)===Y.a}}),{updateArticleVote:F.g,getTrackUrl:function(e){return{API:{types:L.GET_URL,endpoint:"/brand/track",method:"GET",fetchOptions:{credentials:"include",failsafe:!0,timeout:100},query:{target_url:"https://zhuanlan.zhihu.com/p/".concat(e)}},FAILSAFE:!0,UPDATE:{success:function(t){return{articles:Object(B.a)({},e,{trackUrl:t.data||[]})}}}}},loadArticleConcernedVoters:F.d}),ne.c)(we)},1082:function(e,t,n){"use strict";var a=n(47),o=n(14),r=n(15),i=n(17),c=n(18),l=n(7),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(13),p=n.n(f),h=n(33),m=n(1409),v=n(1654),g=n(26),O=n(72),j=n(149),y=n(96),C=n(218),w=n(30),x=n(258),k=n(4),S=n(432),R=n(173);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var I=function(e){Object(i.a)(n,e);var t=A(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={step:0},e.containerRef=Object(b.createRef)(),e.reasonButtonRefs=[],e.toggleStep=function(){e.setState({step:0===e.state.step?1:0},(function(){e.popover.position()}))},e.handleKeyDown=function(t){var n=Number(t.key);n&&e.reasonButtonRefs[n-1]&&e.reasonButtonRefs[n-1].focus()},e.handleNeverShowVoteDownReason=function(){e.props.onSetVoteDownReason(!1),e.popover.close()},e.handleSelectReason=function(t){e.props.onSelectVoteDownReason(t),e.popover.close()},e}return Object(r.a)(n,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reasonList,a=t.positionStatus,o=this.state.step,r=Object(k.a)(n).sort((function(e,t){return e.sort-t.sort}));return Object(s.b)(R.a,{className:"VoteDownReasonMenu",targetClassName:"VoteDownReasonMenu-target",positionStatus:a,toggler:this.props.toggler,onOpen:function(){e.setState({step:0})},getContainer:function(){return document.querySelector(".ContentItem-actions")},onClick:this.props.onTogglerClick,ref:function(t){e.popover=t,e.props.popoverRef&&e.props.popoverRef(t)},placement:"top",arrowed:!0,preventCloseOnTarget:!0,children:Object(s.c)("div",{className:"VoteDownReasonMenu-container",onKeyDown:this.handleKeyDown,tabIndex:-1,children:[Object(s.c)("div",{className:"VoteDownReasonMenu-header",children:[0===o&&"已反对，你觉得",1===o&&"不再显示该反馈功能？"]}),Object(s.c)("div",{className:"VoteDownReasonMenu-action",children:[0===o&&Object(s.b)(h.c,{preset:"plain",className:"VoteDownReasonMenu-ignoreButton preventCloseOnTarget",onClick:this.toggleStep,children:"不再显示"}),0===o&&Object(s.b)("div",{className:"VoteDownReasonMenu-spliter"}),Object(s.b)(h.c,{preset:"plain",className:"VoteDownReasonMenu-closeButton",onClick:function(){e.popover.close()},"aria-label":"关闭",tabIndex:1,icon:S.a})]}),0===o&&Object(s.b)("div",{className:"VoteDownReasonMenu-reasonList",children:r.map((function(t,n){return Object(s.b)(h.c,{preset:"plain",className:"VoteDownReasonMenu-reason",onClick:function(){e.handleSelectReason(t)},onRef:function(t){return e.reasonButtonRefs[n]=t},children:t.name},t.reasonId)}))}),1===o&&Object(s.c)("div",{className:"VoteDownReasonMenu-disableReason",children:[Object(s.b)("div",{className:"VoteDownReasonMenu-disableReasonHint",children:"你可以在「设置」页面中的「屏蔽」开启。"}),Object(s.c)("div",{className:"VoteDownReasonMenu-disableReasonButtonList",children:[Object(s.b)(h.c,{className:"preventCloseOnTarget",onClick:this.toggleStep,children:"返回"}),Object(s.b)(h.c,{color:"blue",onClick:this.handleNeverShowVoteDownReason,children:"不再显示"})]})]})]})})}}]),n}(b.Component);I.defaultProps={reasonList:[]};var T=I;n(1647);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var N=function(e){Object(i.a)(n,e);var t=E(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:e.props.isRecognized}},e.voteUpButtonRef=Object(b.createRef)(),e.voteDownButtonRef=Object(b.createRef)(),e.shouldShowMenu=function(){var t=e.props,n=t.voting,a=t.voteDownReason,o=t.onLoadVoteDownReason;return!!t.isShowVoteDownMenu&&(-1===n?(e.popover.close(),!1):!!a||(e.isPendingForVoteDownReason=!0,o(),!1))},e.onVote=e.props.authRequired((function(t){e.props.onVote(t)}),w.Y.vote),e.voteUp=function(t){var n=1===e.props.voting?["UnUpvote","neutral"]:["Upvote","up"],o=Object(a.a)(n,2),r=o[0],i=o[1];e.vote(t,r,i),e.voteUpButtonRef.current.focus()},e._voteDown=function(t){var n=-1===e.props.voting?["UnDownvote","neutral"]:["Downvote","down"],o=Object(a.a)(n,2),r=o[0],i=o[1];e.vote(t,r,i),e.voteDownButtonRef.current.focus()},e.voteDown=function(t){e.shouldShowMenu()&&e.popover.open(),e._voteDown(t)},e.vote=function(t,n,a){var o=e.props,r=o.disableAuth,i=o.handleToggleGuide,c=o.onClick,l=o.type,s=o.zaIds,u=s.voteUp,d=s.voteDown,b=n.includes("Upvote")?u:d;"article"===l&&"down"===a&&g.a.trackEvent(e.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),g.a.trackEvent(n.includes("Upvote")?e.voteUpButtonRef.current:e.voteDownButtonRef.current,Object.assign({action:n,element:"Button"},b&&{id:b})),c?c(t,a):r?i():e.onVoteWithRecognize(n,a)},e.onVoteWithRecognize=function(t,n){var a=e.props.voting;!e.state.recognizeInfo.isRecognized||1!==a||"UnUpvote"!==t&&"Downvote"!==t?e.onVote(n):e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{showRecognizeModal:!0,action:t,voteType:n})})},e.handleConfirmCancelRecognize=function(){e.onVote(e.state.recognizeInfo.voteType),e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{isRecognized:!1,showRecognizeModal:!1})})},e.handleCloseCancelRecognizeModal=function(){return e.setState({recognizeInfo:Object.assign(Object.assign({},e.state.recognizeInfo),{},{showRecognizeModal:!1})})},e.handleTogglerClick=function(t){e.shouldShowMenu()||t.preventDefault(),e._voteDown(t)},e.renderVoteUpButton=function(){var t=e.props,n=t.isOwner,a=t.count,o=t.voting,r=t.disabled,i=t.hideDesc,c=1===o,l=c?"已赞同":"赞同",u=[l,Object(j.cnNiceNumber)(a)].join(" "),d=[!i&&l,0!==a&&Object(j.cnNiceNumber)(a).trim()].filter(Boolean).join(" ");return Object(s.c)(O.a,{as:h.c,zaText:c?"取消赞同":"赞同",zaType:"Button",zaAction:c?"UnUpvote":"Upvote",className:p()("VoteButton VoteButton--up",{"is-active":1===o}),disabled:n||r,onClick:e.voteUp,"aria-label":u,"aria-live":"polite",onRef:e.voteUpButtonRef,children:[Object(s.b)(m.a,{center:!0,size:10,className:"VoteButton-TriangleUp"}),d]})},e.renderVoteDownButton=function(){var t=e.props,n=t.voting,a=t.disabled,o=-1===n,r=o?"已反对":"反对";return Object(s.b)(O.a,{as:h.c,zaText:o?"取消反对":"反对",zaType:"Button",zaAction:o?"UnDownvote":"Downvote",className:p()("VoteButton VoteButton--down",{"is-active":-1===n},{"VoteButton--mobileDown":!1}),disabled:a,onClick:e._voteDown,"aria-label":r,"aria-live":"polite",onRef:e.voteDownButtonRef,children:Object(s.b)(v.a,{center:!0,size:10})})},e}return Object(r.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.voteDownReason&&this.isPendingForVoteDownReason&&(this.isPendingForVoteDownReason=!1,this.popover.open())}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOwner,a=t.positionStatus,o=t.isShowVoteDownMenu,r=t.voteDownReason,i=this.state.recognizeInfo,c=i.showRecognizeModal,l="UnUpvote"===i.action,u=o&&!0;return Object(s.c)("span",{ref:this.voteButtonRef,children:[Object(s.b)(x.c,{keyMap:{VOTE_UP:"v",VOTE_DOWN:"d"},handlers:{VOTE_UP:this.voteUp,VOTE_DOWN:this.voteDown}}),this.renderVoteUpButton(),!n&&!u&&this.renderVoteDownButton(),!n&&u&&Object(s.b)(T,{reasonList:r,toggler:this.renderVoteDownButton(),popoverRef:function(t){return e.popover=t},positionStatus:a,onTogglerClick:this.handleTogglerClick,onSelectVoteDownReason:this.props.onSelectVoteDownReason,onSetVoteDownReason:this.props.onSetVoteDownReason}),Object(s.b)(y.b,{title:"确定".concat(l?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal,children:c&&Object(s.c)("div",{children:[Object(s.c)("div",{children:[l?"取消赞同":"选择反对","时，你赠与作者的专业徽章也会收回，并且赠与次数不会返还，是否仍要取消？"]}),Object(s.c)(y.a,{direction:"horizontal",children:[Object(s.b)(h.c,{onClick:this.handleCloseCancelRecognizeModal,children:l?"暂不取消":"暂不选择"}),Object(s.b)(h.c,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize,children:l?"取消赞同":"选择反对"})]})]})})]})}}]),n}(b.Component);N.propTypes={voting:d.a.oneOf([-1,0,1]).isRequired,disabled:d.a.bool,type:d.a.string,hideDesc:d.a.bool,zaIds:d.a.shape({voteUp:d.a.number,voteDown:d.a.number}),isRecognized:d.a.bool},N.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}};t.a=Object(C.a)(N)},1088:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var a=n(1349);Object.defineProperty(t,"TAG_RE_TEMPLATE",{enumerable:!0,get:function(){return a.TAG_RE_TEMPLATE}}),Object.defineProperty(t,"TAG_RE",{enumerable:!0,get:function(){return a.TAG_RE}}),Object.defineProperty(t,"parseAttrs",{enumerable:!0,get:function(){return a.parseAttrs}}),Object.defineProperty(t,"parseTagGroup",{enumerable:!0,get:function(){return a.parseTagGroup}}),Object.defineProperty(t,"parseTag",{enumerable:!0,get:function(){return a.parseTag}}),Object.defineProperty(t,"truncateHTML",{enumerable:!0,get:function(){return a.truncateHTML}}),Object.defineProperty(t,"stripHTML",{enumerable:!0,get:function(){return a.stripHTML}})},1095:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(203),o=n(61);function r(e,t){Object(o.a)(2,arguments);var n=Object(a.a)(e),r=Object(a.a)(t);return n.getTime()===r.getTime()}},1096:function(e,t,n){var a=n(1097),o=n(668),r=n(1068),i=n(971),c=n(1020),l=n(1069),s=Math.ceil;e.exports=function(e,t){var n=(t=void 0===t?" ":o(t)).length;if(n<2)return n?a(t,e):t;var u=a(t,s(e/c(t)));return i(t)?r(l(u),0,e).join(""):u.slice(0,e)}},1097:function(e,t){var n=Math.floor;e.exports=function(e,t){var a="";if(!e||t<1||t>9007199254740991)return a;do{t%2&&(a+=e),(t=n(t/2))&&(e+=e)}while(t);return a}},1098:function(e,t,n){var a=n(669)("length");e.exports=a},1099:function(e,t){var n="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+a+"|"+o+")"+"?",s="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[r,i,c].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[r+a+"?",a,i,c,n].join("|")+")",d=RegExp(o+"(?="+o+")|"+u+s,"g");e.exports=function(e){for(var t=d.lastIndex=0;d.test(e);)++t;return t}},1100:function(e,t){e.exports=function(e){return e.split("")}},1101:function(e,t){var n="[\\ud800-\\udfff]",a="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+a+"|"+o+")"+"?",s="[\\ufe0e\\ufe0f]?"+l+("(?:\\u200d(?:"+[r,i,c].join("|")+")[\\ufe0e\\ufe0f]?"+l+")*"),u="(?:"+[r+a+"?",a,i,c,n].join("|")+")",d=RegExp(o+"(?="+o+")|"+u+s,"g");e.exports=function(e){return e.match(d)||[]}},1103:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(a.useRef)({boundaryRef:t,callback:e});return Object(a.useEffect)((function(){n.current={boundaryRef:t,callback:e}})),Object(a.useEffect)((function(){var e=function(e){var t,a=n.current,o=a.boundaryRef,r=a.callback;null!==o&&null!=o&&null!==(t=o.current)&&void 0!==t&&t.contains(e.target)||r(e)};return document.body.addEventListener("click",e),function(){document.body.removeEventListener("click",e)}}),[]),null}},1105:function(e,t,n){"use strict";function a(e){var t,n,a,o;return Boolean(null==e||null===(t=e.coCreation)||void 0===t||null===(n=t.refTo)||void 0===n||null===(a=n.contents)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.type)}function o(e){var t,n,o,r;return!a(e)&&Boolean(null==e||null===(t=e.reference)||void 0===t||null===(n=t.refTo)||void 0===n||null===(o=n.contents)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.type)}function r(e){var t,n,a,o=null==e||null===(t=e.coCreation)||void 0===t||null===(n=t.refTo)||void 0===n||null===(a=n.contents)||void 0===a?void 0:a[0];return o?"answer"===o.type?o.answer:"article"===o.type?o.article:null:null}function i(e){var t,n,a,o=null==e||null===(t=e.reference)||void 0===t||null===(n=t.refTo)||void 0===n||null===(a=n.contents)||void 0===a?void 0:a[0];return o?"answer"===o.type?o.answer:"article"===o.type?o.article:null:null}function c(e,t){var n=e,a=t.contentAuthor;return a&&n.id!==(null==a?void 0:a.id)?a:n}function l(e){var t,n;return a(e)&&null!==(t=null===(n=r(e))||void 0===n?void 0:n.author)&&void 0!==t?t:null}n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l}))},1106:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return l}));var a=function(e){var t=e.title,n=e.id,a=e.topics,o=e.answerCount,r=e.commentCount,i=e.created,c=e.updatedTime,l=e.visitsCount,s=e.followerCount;return{name:t,url:"https://www.zhihu.com/question/".concat(n),keywords:a.map((function(e){return e.name})).join(","),answerCount:o,commentCount:r,dateCreated:new Date(1e3*i).toISOString(),dateModified:new Date(1e3*c).toISOString(),"zhihu:visitsCount":l,"zhihu:followerCount":s}};function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e&&(t||n)}var r={auto_notif:"auto_notif",header:"header",question_header_card:"question_header_card",force_launch_notif:"force_launch_notif",agree:"agree",disagree:"disagree",comment:"comment",star:"star",comment_list:"comment_list",comment_more:"comment_more",more_answers:"more_answers",bottom:"bottom",capsule:"capsule",follow:"follow",write_answer:"write_answer"},i={expand_answer:"force_launch_notif",expand_answer1:"auto_notif",expand_answer2:"auto_notif",up:"agree",down:"disagree",comment_answer:"comment",collect_answer:"star"},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isClose,n=e.isEvaluate,a=e.isLocked,o=e.isSuggest;return t?"closed":o?"suggested":n?"evaluated":a?"locked":""},l=function(e){return"#draft"===e.hash||"#write"===e.hash||"write"in e.query}},1107:function(e,t,n){"use strict";var a=n(32),o=n(1),r=n(33),i=n(1130),c=["onClick","text"],l=function(e){var t=e.onClick,n=e.text,l=Object(a.default)(e,c);return Object(o.c)(r.c,Object.assign(Object.assign({preset:"link",onClick:t,css:{fontSize:15}},l),{},{children:[Object(o.b)(i.a,{text:!0,center:!0})," ",n]}))};l.defaultProps={text:"修改"},t.a=l},1115:function(e,t,n){"use strict";var a=n(4),o=n(14),r=n(15),i=n(17),c=n(18),l=n(7),s=n(1),u=n(0),d=n.n(u),b=n(13),f=n.n(b),p=n(3),h=n.n(p),m=n(141),v=n(1067),g=n(61);function O(e,t){Object(g.a)(2,arguments);var n=Object(m.a)(t);return Object(v.a)(e,12*n)}var j=n(1144),y=n(87);var C=n(822),w=n(427),x=n(267);var k=n(1630),S=n(1478),R=n(1095),A=n(1631),I=n(1632),T=n(426);function E(e,t){Object(g.a)(2,arguments);var n=Object(y.a)(e),a=Object(y.a)(t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function N(e){Object(g.a)(1,arguments);var t=Object(y.a)(e),n=t.getDate();return n}var B=n(12),z=Object.assign;function L(e){return d.a.createElement(B.a,z(z({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowLeftDoubleSmall24","data-old-api":"DoubleArrowLeft"},e),{className:"Zi Zi--DoubleArrowLeft"+(e.className?" ".concat(e.className):"")}),d.a.createElement("path",{d:"M12.277 8.22L8.252 12l4.025 3.78a.684.684 0 010 1.01.796.796 0 01-1.075 0l-4.42-4.15a.866.866 0 010-1.28l4.42-4.15a.796.796 0 011.075 0 .684.684 0 010 1.01zm5 0L13.252 12l4.025 3.78a.684.684 0 010 1.01.796.796 0 01-1.075 0l-4.42-4.15a.867.867 0 010-1.28l4.42-4.15a.796.796 0 011.075 0 .684.684 0 010 1.01z",fillRule:"evenodd",clipRule:"evenodd"}))}var P=n(1170),M=n(912),_=Object.assign;function D(e){return d.a.createElement(B.a,_(_({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowRightDoubleSmall24","data-old-api":"DoubleArrowRight"},e),{className:"Zi Zi--DoubleArrowRight"+(e.className?" ".concat(e.className):"")}),d.a.createElement("path",{d:"M11.723 8.22L15.748 12l-4.025 3.78a.684.684 0 000 1.01.796.796 0 001.075 0l4.42-4.15a.867.867 0 000-1.28l-4.42-4.15a.796.796 0 00-1.075 0 .684.684 0 000 1.01zm-5 0L10.748 12l-4.025 3.78a.684.684 0 000 1.01.796.796 0 001.075 0l4.42-4.15a.867.867 0 000-1.28l-4.42-4.15a.796.796 0 00-1.075 0 .684.684 0 000 1.01z",fillRule:"evenodd",clipRule:"evenodd"}))}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var U=["日","一","二","三","四","五","六"],V=function(e){Object(i.a)(n,e);var t=F(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={calendarDate:e.props.defaultCalendarDate||(Array.isArray(e.props.value)?e.props.value[0]:e.props.value),hoveringDate:null,now:new Date},e.handlePrevYearClick=function(){var t=O(e.state.calendarDate,-1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handlePrevMonthClick=function(){var t=Object(v.a)(e.state.calendarDate,-1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleNextMonthClick=function(){var t=Object(v.a)(e.state.calendarDate,1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleNextYearClick=function(){var t=O(e.state.calendarDate,1);e.setState({calendarDate:t}),e.props.onCalendarDateChange(t)},e.handleDayClick=function(t){e.setState({calendarDate:t}),e.props.onCalendarDateChange(t),e.props.onChange(t)},e.handleDayHover=function(t){e.setState({hoveringDate:t}),e.props.onHover(t)},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,o=t.weekStartsOn,r=t.value,i=t.disabledDate,c=t.showToday,l=t.showPrevMonth,u=t.showPrevYear,d=t.showNextMonth,b=t.showNextYear,p=this.state,h=p.calendarDate,v=p.hoveringDate,O=p.now,B=Object(j.a)(function(e){Object(g.a)(1,arguments);var t=Object(y.a)(e);return t.setDate(1),t.setHours(0,0,0,0),t}(h),{weekStartsOn:o}),z=function(e,t){Object(g.a)(1,arguments);var n=t||{},a=n.locale,o=a&&a.options&&a.options.weekStartsOn,r=null==o?0:Object(m.a)(o),i=null==n.weekStartsOn?r:Object(m.a)(n.weekStartsOn);if(!(i>=0&&i<=6))throw new RangeError("weekStartsOn must be between 0 and 6");var c=Object(y.a)(e),l=c.getDay(),s=6+(l<i?-7:0)-(l-i);return c.setHours(0,0,0,0),c.setDate(c.getDate()+s),c}(function(e){Object(g.a)(1,arguments);var t=Object(y.a)(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}(h),{weekStartsOn:o}),_=Object(a.a)(Array(Object(C.a)(z,B)+1)).map((function(e,t){return Object(w.a)(B,t)})).reduce((function(e,t){var n=function(e,t,n){Object(g.a)(2,arguments);var a=Object(j.a)(e,n),o=Object(j.a)(t,n),r=a.getTime()-Object(x.a)(a),i=o.getTime()-Object(x.a)(o);return Math.round((r-i)/6048e5)}(t,B,{weekStartsOn:o});return e[n]=e[n]?[].concat(Object(a.a)(e[n]),[t]):[t],e}),[]),F=_[0].map(k.a),V=Array.isArray(r),G=c;return Object(s.c)("div",{className:f()("Calendar",n,{"Calendar--hasBottomTool":G}),children:[Object(s.c)("div",{className:"Calendar-topTool",children:[u&&Object(s.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevYear",onClick:this.handlePrevYearClick,children:Object(s.b)(L,{size:20,center:!0})}),l&&Object(s.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--prevMonth",onClick:this.handlePrevMonthClick,children:Object(s.b)(P.a,{size:20,center:!0})}),Object(s.b)("div",{className:"Calendar-topToolDate",children:Object(S.a)(h,"yyyy 年 M 月")}),d&&Object(s.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextMonth",onClick:this.handleNextMonthClick,children:Object(s.b)(M.a,{size:20,center:!0})}),b&&Object(s.b)("button",{className:"Calendar-topToolButton Calendar-topToolButton--nextYear",onClick:this.handleNextYearClick,children:Object(s.b)(D,{size:20,center:!0})})]}),Object(s.c)("table",{className:"Calendar-table",cellSpacing:0,children:[Object(s.b)("thead",{className:"Calendar-thead",children:Object(s.b)("tr",{children:F.map((function(e){return Object(s.b)("th",{className:"Calendar-weekName",children:U[e]},e)}))})}),Object(s.b)("tbody",{children:_.map((function(t,n){return Object(s.b)("tr",{children:t.map((function(t,n){var a=i(t),o=V?Object(R.a)(t,r[0])||Object(R.a)(t,r[1]):Object(R.a)(t,r),c=!1;if(V){var l=Object(A.a)(r),u=Object(I.a)(r);c=Object(T.a)(t,l)>0&&Object(T.a)(u,t)>0}return Object(s.b)("td",{className:f()("Calendar-day",{"is-hovered":Object(R.a)(t,v),"is-today":Object(R.a)(t,O),"is-disabled":a,"is-not-this-month":!E(t,h),"is-input-date":o,"is-in-range":c}),onClick:function(){a||e.handleDayClick(t)},onMouseEnter:function(){a||e.handleDayHover(t)},onMouseLeave:function(){a||e.handleDayHover(null)},children:N(t)},n)}))},n)}))})]}),G&&Object(s.b)("div",{className:"Calendar-bottomTool",children:c&&Object(s.b)("button",{className:"Calendar-todayButton",onClick:function(){return e.handleDayClick(O)},disabled:i(O),children:"今天"})})]})}}]),n}(u.Component);V.defaultProps={weekStartsOn:0,disabledDate:function(){return!1},onChange:function(){return!1},onCalendarDateChange:function(){return!1},onHover:function(){return!1},showToday:!0,showPrevMonth:!0,showPrevYear:!0,showNextMonth:!0,showNextYear:!0},V.propTypes={defaultCalendarDate:h.a.instanceOf(Date),value:h.a.oneOfType([h.a.instanceOf(Date),h.a.arrayOf(h.a.instanceOf(Date))]),weekStartsOn:h.a.number,disabledDate:h.a.func,onChange:h.a.func,onHover:h.a.func,showToday:h.a.bool,showPrevMonth:h.a.bool,showPrevYear:h.a.bool,showNextMonth:h.a.bool,showNextYear:h.a.bool};t.a=V},1121:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),o=n(13),r=n.n(o);function i(e){var t=e.header,n=e.options,o=e.className,i=e.onRef,c=e.showOptions,l=void 0===c||c;return Object(a.c)("div",{className:r()("Topbar",o,!1),ref:i,children:[Object(a.b)("div",{className:"Topbar-title",children:t}),l&&Object(a.b)("div",{className:"Topbar-options",children:n})]})}},1122:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(0),u=n(3),d=n.n(u),b=n(13),f=n.n(b),p=n(1478),h=n(520),m=n(173),v=n(1633),g=n(897),O=n(1115);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var y=function(e){Object(r.a)(n,e);var t=j(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isFocused:!1},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.large,o=t.value,r=t.onChange,i=t.isButtonActive,c=t.toggler,s=t.disabledDate,u=t.getContainer,d=t.showIcon,b=void 0!==d&&d,j=this.state.isFocused;return Object(l.b)(m.a,{className:f()("DatePicker",n),toggler:c||Object(l.c)(h.a,{large:a,className:f()("DatePicker-Button",{"is-active":j||i}),children:[b&&Object(l.b)(v.a,{center:!0,size:20}),p.a(o,"yyyy/MM/dd"),Object(l.b)(g.a,{css:{marginLeft:8}})]}),onOpen:function(){e.setState({isFocused:!0})},onClose:function(){e.setState({isFocused:!1})},ref:function(t){e.popover=t},placement:"bottom",arrowed:!0,preventCloseOnTarget:!0,getContainer:u,children:Object(l.b)(O.a,{value:o,onChange:function(t){e.popover.close(),r(t)},disabledDate:s})})}}]),n}(s.Component);y.propTypes={toggler:d.a.element,disabledDate:d.a.func}},1123:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(1),o=n(0),r=n(72),i=n(33),c=n(889),l=n(258),s=function(e){var t=e.className,n=e.onClick,s=e.label,u=e.onRef,d=e.disabled,b=e.showIcon,f=void 0===b||b;return Object(a.c)(o.Fragment,{children:[Object(a.b)(l.c,{keyMap:{BOOKMARK:"s c"},handlers:{BOOKMARK:n}}),Object(a.b)(r.a,{as:i.c,zaText:"收藏",zaType:"Button",zaBlock:"收藏",onRef:u,className:t,preset:"plain",onClick:n,icon:f?c.a:null,label:s,disabled:d})]})};s.defaultProps={label:"收藏"};var u=s},1126:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(81),i=n(17),c=n(18),l=n(7),s=n(1),u=n(0),d=n(20),b=n(21),f=n(961),p=n(1166),h=n(26),m=n(969),v=n(31),g=n(274),O=n(433),j=n(385),y=n.n(j),C=function(e,t){return e+(t?Date.now()-t:0)},w=function(e,t){return Math.abs(e-t)<.01},x={auto:"Auto",ld:"LD",sd:"SD",hd:"HD"},k={auto:"自动",ld:"低清",sd:"标清",hd:"超清"},S=[1,2,3,5,8,13];function R(e){var t,n="sd",a=0,o=null,r=0,i=null,c=!1,l=0,s=0;function u(t,c){e(t,Object.assign({play_event_identifier:o,duration:1e3*a,elapsed:C(r,i),video_quality:x[n]},c))}function d(){(++s<15?S.includes(s):s%15==0)&&u({action:"Playing"})}function b(){clearInterval(t)}return{handlePlayEvent:function(e){var n=e.currentTime,c=e.duration;a=c,w(n,0)&&(o=y()(),r=0),i=Date.now(),w(n,0)?u({action:"Play"}):u({action:"ResumePlay"}),s=0,b(),t=setInterval(d,1e3)},handlePauseEvent:function(e){var t=e.currentTime,n=e.duration;i&&(r+=Date.now()-i,i=null),w(t,n)?u({action:"EndPlay"}):u({action:"Pause"}),b()},handleQualityChangeEvent:function(e){var t=e.quality;u({action:"Switch",name:k[t]}),n=t},handleFragmentLoading:function(){c||(l=Date.now())},handleFragmentLoaded:function(){c||(c=!0,u({action:"Load"},{video_load_time:Date.now()-l}))},clearTick:b}}var A=n(45),I=n(1037);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var E=function(e){var t=e.children,n=e.videoId,a=e.iframeRef;return Object(I.a)({videoId:n,iframeRef:a}),t},N=function(e){Object(i.a)(n,e);var t=T(n);function n(e){var o;Object(a.a)(this,n),(o=t.call(this,e)).handleMessage=function(e,t){var n=o.videoTracker,a=n.handlePlayEvent,r=n.handlePauseEvent,i=n.handleQualityChangeEvent,c=n.handleFragmentLoading,l=n.handleFragmentLoaded;switch(e){case m.b.DOM.PLAY:a(t);break;case m.b.DOM.PAUSE:r(t);break;case m.b.PLAYER.QUALITY_CHANGE:i(t);break;case"fragment-loading":c(t);break;case"fragment-loaded":l(t)}},o.handlePlay=function(){o.props.trackEvent(Object(r.a)(o),{id:5500,action:"Play",element:"Video"})},o.handlePlayFailed=function(){(0,o.props.showNotification)("视频加载失败，请刷新页面重试","red")},o.handleIframeLoad=function(e){o.setState({iframe:e})};var i=e.data;return o.messageHelper=Object(m.c)(i.id,"*",!0),o.videoTracker=R((function(e,t){h.a.trackEvent(Object(r.a)(o),e,{play:t})})),o.state={iframe:null},o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=t.isLens,a=t.id,o=t.playerUrl,r=t.flvPlayerUrl,i=e.loadVideo;n||!a||o||r||i(a);var c=this.messageHelper.subscribeMessage;this.messageSubscription=c(this.handleMessage)}},{key:"componentWillUnmount",value:function(){this.messageSubscription.unsubscribe(),this.videoTracker.clearTick()}},{key:"render",value:function(){var e,t,n=this.props,a=n.data,o=n.data.error,r=n.onBeforePlay,i=n.hideWatermark&&a.playerUrl?(e=a.playerUrl,(t=new URL(e)).searchParams.append("hideWatermark","1"),t.toString()):a.playerUrl;return Object(s.b)("div",{className:"RichText-video",children:o?Object(s.b)(p.a,Object.assign({},a)):Object(s.b)(E,{videoId:a.id,iframeRef:{current:this.state.iframe},children:Object(s.b)(f.b,Object.assign(Object.assign({},a),{},{playerUrl:i,onIframeRef:this.handleIframeLoad,onPlay:this.handlePlay,onPlayFailed:this.handlePlayFailed,onBeforePlay:r}))})})}}]),n}(u.Component);t.a=Object(d.compose)(Object(b.connect)((function(e,t){var n=t.data,a=n.isLens,o=n.id;return a?{data:Object.assign(Object.assign({},t.data),{},{source:"lens",playerUrl:"https://".concat(A.a.videoHost,"/video/").concat(o)})}:{data:e.video.data[o]||t.data}}),{showNotification:v.h,loadVideo:g.c}),Object(O.b)((function(e){var t=e.data,n=t.isLens,a=t.id,o=t.isPlayable;return{module:"VideoItem",content:{type:"Video",sub_type:n?"SelfHosted":"Embedded",video_id:a,is_playable:Boolean(o)},trackCardShow:!0,view:{id:174}}})))(N)},1129:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ExclamationCircleFill24","data-old-api":"ExclamationCircleFill24"},e),{className:"ZDI ZDI--ExclamationCircleFill24"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10zM12 7c.552 0 1 .336 1 .75v5c0 .414-.448.75-1 .75s-1-.336-1-.75v-5c0-.414.448-.75 1-.75zm0 10.5a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5z",fillRule:"evenodd",clipRule:"evenodd"}))}function l(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ExclamationCircleFill24","data-old-api":"Alert"},e),{className:"Zi Zi--Alert"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10zM12 7c.552 0 1 .336 1 .75v5c0 .414-.448.75-1 .75s-1-.336-1-.75v-5c0-.414.448-.75 1-.75zm0 10.5a1.25 1.25 0 100-2.5 1.25 1.25 0 000 2.5z",fillRule:"evenodd",clipRule:"evenodd"}))}},1130:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"PencilFill24","data-old-api":"Edit"},e),{className:"Zi Zi--Edit"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M7.841 20.043l-4.328 1.18a.6.6 0 01-.737-.736l1.18-4.324a1.2 1.2 0 01.314-.539l8.094-7.995a.9.9 0 011.268.003l2.736 2.736a.9.9 0 01.004 1.268l-7.196 7.296-.802.802a1.2 1.2 0 01-.533.31zM19.703 4.81l-.514-.513a2.542 2.542 0 00-3.595 0l-.999 1.067a.9.9 0 00.02 1.252l2.77 2.768a.9.9 0 001.25.02l1.068-.999a2.542 2.542 0 000-3.594z"}))}},1138:function(e,t,n){"use strict";t.a=function(e){var t=e.getCurrentContent();return t.getBlockMap().filter((function(e){return"atomic"===e.getType()})).map((function(e){var n=e.getEntityAt(0);return n?t.getEntity(n):null})).filter(Boolean)}},1140:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n(142),o=n.n(a),r=n(78),i=function(e,t){var n=[];return o()((function(){for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];n.push(o),setTimeout((function(){n.length&&(t(n),n.length=0)}),e)}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)}))}(550,(function(e){var t=new FormData;return t.append("items",JSON.stringify(e)),Object(r.e)("/lastread/touch",{method:"POST",body:t})})),c="read",l="touch";t.c=i},1144:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(87),o=n(141),r=n(61);function i(e,t){Object(r.a)(1,arguments);var n=t||{},i=n.locale,c=i&&i.options&&i.options.weekStartsOn,l=null==c?0:Object(o.a)(c),s=null==n.weekStartsOn?l:Object(o.a)(n.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var u=Object(a.a)(e),d=u.getDay(),b=(d<s?7:0)+d-s;return u.setDate(u.getDate()-b),u.setHours(0,0,0,0),u}},1145:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n(45),o=function(e){var t=e.title,n=e.originTitle,o=e.source,r=e.sourceId,i=e.productTypeName,c=new URLSearchParams({title:t,originTitle:n,source:o,sourceId:r,productTypeName:i}).toString();return"".concat(a.a.protocol,"//").concat(a.a.wwwHost,"/selection/goods-editor?").concat(c)},r=function(e){var t=e.contentId,n=e.contentType,o=new URLSearchParams({contentId:t,contentType:n}).toString();return"".concat(a.a.protocol,"//").concat(a.a.wwwHost,"/selection/profit-selector?").concat(o)},i=function(e){var t=e.isFirstEnter,n=new URLSearchParams({isFirstEnter:t}).toString();return"".concat(a.a.protocol,"//").concat(a.a.wwwHost,"/zhijia/creator-zixuan?").concat(n)},c=function(e){return"".concat(a.a.protocol,"//").concat(a.a.wwwHost,"/ggr/creator?").concat(e)},l=function(e){return"".concat(a.a.protocol,"//").concat(a.a.wwwHost,"/ggr/settings?").concat(e)}},1146:function(e,t,n){"use strict";function a(e){try{return JSON.parse(e)}catch(e){return null}}n.d(t,"a",(function(){return a}))},1147:function(e,t,n){"use strict";var a=n(1),o=n(13),r=n.n(o);t.a=function(e){var t=e.className;return Object(a.b)("span",{className:r()("Bull",t),children:" · "})}},1148:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return b})),n.d(t,"g",(function(){return f})),n.d(t,"i",(function(){return p}));var a=n(2),o=n(1146),r=n(30),i=function(e){return"FullScreenAnswerEditor_".concat(e)},c=function(){return Boolean(window.__FullScreenAnswerEditor&&!window.__FullScreenAnswerEditor.closed)},l=function(){return Boolean(window.__FullScreenAnswerEditor&&window.__FullScreenAnswerEditor.closed)},s=function(e,t){if(!e)return null;if(c())return window.__FullScreenAnswerEditor.focus(),window.__FullScreenAnswerEditor;var n=i(e),a=window.location,o=a.search,r=a.host,l=t?"//".concat(r,"/question/").concat(e,"/answer/").concat(t,"/edit").concat(o):"//".concat(r,"/question/").concat(e,"/write").concat(o);return window.__FullScreenAnswerEditor=window.open(l,n)},u=function(e){return e?Object.keys(e).reduce((function(t,n){var o=e[n];return"commercialReportInfo"===n?Object.assign(Object.assign({},t),{},{isReport:Boolean(null==o?void 0:o.isReport)}):Object.assign(Object.assign({},t),{},Object(a.a)({},n,o))}),{}):e},d=function(e){return e?{commentPermission:e.commentPermission}:e},b=function(e){return e?Object.keys(e).reduce((function(t,n){var o=e[n];return"canReward"===n?Object.assign(Object.assign({},t),{},{rewardTagline:o?r.p:""}):Object.assign(Object.assign({},t),{},Object(a.a)({},n,o))}),{}):e},f=function(e){return e?(e=b(e),Object.keys(e).reduce((function(t,n){var r=e[n];return"commercialReportInfo"===n?Object.assign(Object.assign({},t),{},{isReport:Boolean(null==r?void 0:r.isReport)}):"disclaimerType"===n?Object.assign(Object.assign({},t),{},{disclaimerType:r||"none",isDisclaimerChecked:Boolean(r&&"none"!==r)}):"thankInviter"===n?Object.assign(Object.assign({},t),{},{thankInviterInfo:Object(o.a)(r)}):"thankInviterStatus"===n?t:Object.assign(Object.assign({},t),{},Object(a.a)({},n,r))}),{})):e};function p(e,t){if(!e)return{thankInviterStatus:"close",thankInviter:""};var n=e.urlToken,a=e.name,o=e.id;return{thankInviterStatus:"open",thankInviter:"answer"===t?o:JSON.stringify({url_token:n,name:a,id:o})}}},1149:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(1),o=n(0),r=n(116),i=n(21),c=n(82),l=n.n(c),s=n(13),u=n.n(s),d=n(1427),b=n.n(d),f=n(228),p=Object(o.memo)((function(e){var t=e.className,n=function(e){return Object.keys(e).filter((function(t){return b()(e[t])&&e[t]})).filter((function(t){return"Mobile"!==t||!e.Tablet})).map((function(e){return"Body--".concat(e)}))}(Object(i.useSelector)(f.k));return Object(a.b)(r.a,{children:Object(a.b)("body",{className:u()(t,n)})})})),h=function(e){return function(t){var n=Object(o.forwardRef)((function(n,o){return Object(a.c)(a.a,{children:[Object(a.b)(p,{className:e}),Object(a.b)(t,Object.assign(Object.assign({},n),{},{ref:o}))]})}));return l()(n,t)}};h("LightGreyBg-body"),h("WhiteBg-body"),h("GreyBg-body")},1157:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(0),u=n(13),d=n.n(u),b=n(141),f=n(87),p=n(61);function h(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t);return n.setSeconds(a),n}var m=n(1406),v=n(1634);function g(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(f.a)(t);return n.getTime()===a.getTime()}var O=n(203);function j(e){Object(p.a)(1,arguments);var t=Object(f.a)(e);return t.setMinutes(0,0,0),t}function y(e){Object(p.a)(1,arguments);var t=Object(f.a)(e),n=t.getFullYear(),a=t.getMonth(),o=new Date(0);return o.setFullYear(n,a+1,0),o.setHours(0,0,0,0),o.getDate()}var C=n(1478);var w=n(2280);var x=n(2281),k=n(448),S=n.n(k),R=n(1032),A=n.n(R),I=n(533),T=n.n(I),E=n(155),N=n(1122);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var z=S()(0,24).map((function(e){return A()(e,2,"0")})),L=S()(0,60).map((function(e){return A()(e,2,"0")})),P=function(e){Object(r.a)(n,e);var t=B(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={value:h(e.props.value,0)},e}return Object(o.a)(n,[{key:"handleChange",value:function(e,t){var n=this.props,a=n.onChange,o=n.min,r=n.max,i=e;o&&m.a(e,o)&&(i=o),r&&v.a(e,r)&&(i=r),this.setState({value:i}),a(i,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.large,o=t.min,r=t.max,i=t.onRef,c=t.showIcon,s=void 0!==c&&c,u=this.state.value,h=o&&g(O.a(u),O.a(o)),k=h&&g(j(u),j(o)),S=r&&g(O.a(u),O.a(r)),R=S&&g(j(u),j(r));return Object(l.c)("div",{className:d()("DateTimePicker",n),ref:i,children:[Object(l.b)(N.a,{showIcon:s,large:a,value:u,disabledDate:function(e){return!(!o||!m.a(e,O.a(o)))||!(!r||!v.a(e,O.a(r)))},onChange:function(t){e.handleChange(T()((function(e){return function(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t);return isNaN(n)?new Date(NaN):(n.setFullYear(a),n)}(e,t.getFullYear())}),(function(e){return function(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t),o=n.getFullYear(),r=n.getDate(),i=new Date(0);i.setFullYear(o,a,15),i.setHours(0,0,0,0);var c=y(i);return n.setMonth(a,Math.min(r,c)),n}(e,t.getMonth())}),(function(e){return function(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t);return n.setDate(a),n}(e,t.getDate())}))(u),{date:t})}}),Object(l.b)(E.b,{listClassName:"DateTimePicker-selectList",large:a,value:C.a(u,"HH"),onChange:function(t){return e.handleChange(function(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t);return n.setHours(a),n}(u,t),{hours:t})},children:z.map((function(e){var t=h&&e<w.a(o)||S&&e>w.a(r);return Object(l.b)(E.a,{value:e,disabled:t,css:function(e){return{color:t?e.colors.GBK07B:e.colors.GBK02A}}},e)}))}),Object(l.b)("span",{className:"DateTimePicker-label",children:"时"}),Object(l.b)(E.b,{listClassName:"DateTimePicker-selectList",large:a,value:C.a(u,"mm"),onChange:function(t){return e.handleChange(function(e,t){Object(p.a)(2,arguments);var n=Object(f.a)(e),a=Object(b.a)(t);return n.setMinutes(a),n}(u,t),{minutes:t})},children:L.map((function(e){var t=k&&e<x.a(o)||R&&e>x.a(r);return Object(l.b)(E.a,{value:e,disabled:t,css:function(e){return{color:t?e.colors.GBK07B:e.colors.GBK02A}}},e)}))}),Object(l.b)("span",{className:"DateTimePicker-label",children:"分"})]})}}]),n}(s.Component);t.a=P},1159:function(e,t,n){"use strict";n.d(t,"a",(function(){return a.a})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return O})),n.d(t,"d",(function(){return y}));var a=n(1491),o=n(2),r=n(32),i=n(1),c=n(21),l=n(70),s=n.n(l),u=n(82),d=n.n(u),b=n(504),f=["showLabelInfo","showLabels"],p=["answer","article","post","item"],h=function(e){return e.itemType||p.find((function(t){return e[t]}))},m=function(e){return d()(Object(c.connect)((function(e,t){return{useNewLabels:Object(b.f)(e,t[h(t)])}}))((function(t){var n=t.showLabelInfo,a=void 0===n||n,c=t.showLabels,l=void 0===c||c,u=Object(r.default)(t,f),d=h(u),b=u,p=[];return l||p.push("isLabeled"),a||(p.push("labelInfo"),p.push("hermesLabel")),d&&p.length>0&&(b=Object.assign(Object.assign({},b),{},Object(o.a)({},d,s()(u[d],p)))),Object(i.b)(e,Object.assign({},b))})),e)},v=n(0),g=Object(v.createContext)({showLabelInfo:!0,showLabels:!0}),O=g.Provider,j=g.Consumer,y=function(e){return function(t){var n=Object(i.b)(j,{children:function(n){return Object(i.b)(e,Object.assign(Object.assign({},t),{},{showLabelProps:n}))}});return d()(n,e)}}},1163:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1);function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var u=function(e){Object(r.a)(n,e);var t=s(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFollowed,n=e.isFollowing;return t?Object(l.b)("span",{className:"FollowStatus",children:n?"相互关注":"关注了你"}):null}}]),n}(n(0).Component);t.a=u},1168:function(e,t,n){"use strict";n.d(t,"w",(function(){return u})),n.d(t,"a",(function(){return we})),n.d(t,"b",(function(){return V})),n.d(t,"c",(function(){return ke})),n.d(t,"d",(function(){return Ce})),n.d(t,"e",(function(){return X})),n.d(t,"f",(function(){return me})),n.d(t,"g",(function(){return Be})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return De})),n.d(t,"j",(function(){return Me})),n.d(t,"k",(function(){return N})),n.d(t,"l",(function(){return B})),n.d(t,"m",(function(){return L})),n.d(t,"n",(function(){return _})),n.d(t,"o",(function(){return W})),n.d(t,"p",(function(){return ye})),n.d(t,"q",(function(){return je})),n.d(t,"r",(function(){return Oe})),n.d(t,"s",(function(){return T})),n.d(t,"t",(function(){return Fe})),n.d(t,"u",(function(){return E})),n.d(t,"v",(function(){return A})),n.d(t,"x",(function(){return Se})),n.d(t,"y",(function(){return z})),n.d(t,"z",(function(){return Ge})),n.d(t,"A",(function(){return We})),n.d(t,"B",(function(){return He})),n.d(t,"C",(function(){return Ue})),n.d(t,"D",(function(){return Ke}));var a=n(25),o=n.n(a),r=n(23),i=n.n(r),c=n(56),l=n.n(c),s=x(),u=function(e){return j(e,s)},d=x();u.write=function(e){return j(e,d)};var b=x();u.onStart=function(e){return j(e,b)};var f=x();u.onFrame=function(e){return j(e,f)};var p=x();u.onFinish=function(e){return j(e,p)};var h=[];u.setTimeout=function(e,t){var n=u.now()+t,a={time:n,handler:e,cancel:function e(){var t=h.findIndex((function(t){return t.cancel==e}));~t&&h.splice(t,1),S.count-=~t?1:0}};return h.splice(m(n),0,a),S.count+=1,y(),a};var m=function(e){return~(~h.findIndex((function(t){return t.time>e}))||~h.length)};u.cancel=function(e){s.delete(e),d.delete(e)},u.sync=function(e){O=!0,u.batchedUpdates(e),O=!1},u.throttle=function(e){var t;function n(){try{e.apply(void 0,l()(t))}finally{t=null}}function a(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];t=a,u.onStart(n)}return a.handler=e,a.cancel=function(){b.delete(n),t=null},a};var v="undefined"!=typeof window?window.requestAnimationFrame:function(){};u.use=function(e){return v=e},u.now="undefined"!=typeof performance?function(){return performance.now()}:Date.now,u.batchedUpdates=function(e){return e()},u.catch=console.error;var g=-1,O=!1;function j(e,t){O?(t.delete(e),e(0)):(t.add(e),y())}function y(){g<0&&(g=0,v(C))}function C(){~g&&(v(C),u.batchedUpdates(w))}function w(){var e=g;g=u.now();var t=m(g);t&&(k(h.splice(0,t),(function(e){return e.handler()})),S.count-=t),b.flush(),s.flush(e?Math.min(64,g-e):16.667),f.flush(),d.flush(),p.flush()}function x(){var e=new Set,t=e;return{add:function(n){S.count+=t!=e||e.has(n)?0:1,e.add(n)},delete:function(n){return S.count-=t==e&&e.has(n)?1:0,e.delete(n)},flush:function(n){t.size&&(e=new Set,S.count-=t.size,k(t,(function(t){return t(n)&&e.add(t)})),S.count+=e.size,t=e)}}}function k(e,t){e.forEach((function(e){try{t(e)}catch(e){u.catch(e)}}))}var S={count:0,clear:function(){g=-1,h=[],b=x(),s=x(),f=x(),d=x(),p=x(),S.count=0}},R=n(0);function A(){}var I=function(e,t,n){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})},T={arr:Array.isArray,obj:function(e){return!!e&&"Object"===e.constructor.name},fun:function(e){return"function"==typeof e},str:function(e){return"string"==typeof e},num:function(e){return"number"==typeof e},und:function(e){return void 0===e}};function E(e,t){if(T.arr(e)){if(!T.arr(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var N=function(e,t){return e.forEach(t)};function B(e,t,n){for(var a in e)t.call(n,e[a],a)}var z=function(e){return T.und(e)?[]:T.arr(e)?e:[e]};function L(e,t){if(e.size){var n=Array.from(e);e.clear(),N(n,t)}}var P,M,_=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return L(e,(function(e){return e.apply(void 0,n)}))},D=null,F=!1,U=A,V=Object.freeze({__proto__:null,get createStringInterpolator(){return P},get to(){return M},get colors(){return D},get skipAnimation(){return F},get willAdvance(){return U},assign:function(e){e.to&&(M=e.to),e.now&&(u.now=e.now),void 0!==e.colors&&(D=e.colors),null!=e.skipAnimation&&(F=e.skipAnimation),e.createStringInterpolator&&(P=e.createStringInterpolator),e.requestAnimationFrame&&u.use(e.requestAnimationFrame),e.batchedUpdates&&(u.batchedUpdates=e.batchedUpdates),e.willAdvance&&(U=e.willAdvance)}}),G=new Set,q=[],H=[],K=0,W={get idle(){return!G.size&&!q.length},start:function(e){K>e.priority?(G.add(e),u.onStart(Z)):(Q(e),u(J))},advance:J,sort:function(e){if(K)u.onFrame((function(){return W.sort(e)}));else{var t=q.indexOf(e);~t&&(q.splice(t,1),Y(e))}},clear:function(){q=[],G.clear()}};function Z(){G.forEach(Q),G.clear(),u(J)}function Q(e){q.includes(e)||Y(e)}function Y(e){var t,n,a;q.splice((n=function(t){return t.priority>e.priority},(a=(t=q).findIndex(n))<0?t.length:a),0,e)}function J(e){for(var t=H,n=0;n<q.length;n++){var a=q[n];K=a.priority,a.idle||(U(a),a.advance(e),a.idle||t.push(a))}return K=0,(H=q).length=0,(q=t).length>0}var X={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},$="[-+]?\\d*\\.?\\d+";function ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var te=new RegExp("rgb"+ee($,$,$)),ne=new RegExp("rgba"+ee($,$,$,$)),ae=new RegExp("hsl"+ee($,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%")),oe=new RegExp("hsla"+ee($,"[-+]?\\d*\\.?\\d+%","[-+]?\\d*\\.?\\d+%",$)),re=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ie=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,ce=/^#([0-9a-fA-F]{6})$/,le=/^#([0-9a-fA-F]{8})$/;function se(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ue(e,t,n){var a=n<.5?n*(1+t):n+t-n*t,o=2*n-a,r=se(o,a,e+1/3),i=se(o,a,e),c=se(o,a,e-1/3);return Math.round(255*r)<<24|Math.round(255*i)<<16|Math.round(255*c)<<8}function de(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function be(e){return(parseFloat(e)%360+360)%360/360}function fe(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function pe(e){var t=parseFloat(e);return t<0?0:t>100?1:t/100}function he(e){var t,n,a="number"==typeof(t=e)?t>>>0===t&&t>=0&&t<=4294967295?t:null:(n=ce.exec(t))?parseInt(n[1]+"ff",16)>>>0:D&&void 0!==D[t]?D[t]:(n=te.exec(t))?(de(n[1])<<24|de(n[2])<<16|de(n[3])<<8|255)>>>0:(n=ne.exec(t))?(de(n[1])<<24|de(n[2])<<16|de(n[3])<<8|fe(n[4]))>>>0:(n=re.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+"ff",16)>>>0:(n=le.exec(t))?parseInt(n[1],16)>>>0:(n=ie.exec(t))?parseInt(n[1]+n[1]+n[2]+n[2]+n[3]+n[3]+n[4]+n[4],16)>>>0:(n=ae.exec(t))?(255|ue(be(n[1]),pe(n[2]),pe(n[3])))>>>0:(n=oe.exec(t))?(ue(be(n[1]),pe(n[2]),pe(n[3]))|fe(n[4]))>>>0:null;if(null===a)return e;var o=(16711680&(a=a||0))>>>16,r=(65280&a)>>>8,i=(255&a)/255;return"rgba(".concat((4278190080&a)>>>24,", ").concat(o,", ").concat(r,", ").concat(i,")")}var me=function e(t,n,a){if(T.fun(t))return t;if(T.arr(t))return e({range:t,output:n,extrapolate:a});if(T.str(t.output[0]))return P(t);var o=t,r=o.output,i=o.range||[0,1],c=o.extrapolateLeft||o.extrapolate||"extend",l=o.extrapolateRight||o.extrapolate||"extend",s=o.easing||function(e){return e};return function(e){var t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,a,o,r,i,c,l){var s=l?l(e):e;if(s<t){if("identity"===i)return s;"clamp"===i&&(s=t)}if(s>n){if("identity"===c)return s;"clamp"===c&&(s=n)}if(a===o)return a;if(t===n)return e<=t?a:o;t===-1/0?s=-s:n===1/0?s-=t:s=(s-t)/(n-t);s=r(s),a===-1/0?s=-s:o===1/0?s+=a:s=s*(o-a)+a;return s}(e,i[t],i[t+1],r[t],r[t+1],s,c,l,o.map)}};var ve=Symbol.for("FluidValue.get"),ge=Symbol.for("FluidValue.observers"),Oe=function(e){return Boolean(e&&e[ve])},je=function(e){return e&&e[ve]?e[ve]():e},ye=function(e){return e[ge]||null};function Ce(e,t){var n=e[ge];n&&n.forEach((function(e){!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var we=function e(t){if(i()(this,e),!t&&!(t=this.get))throw Error("Unknown getter");xe(this,t)},xe=function(e,t){return Ae(e,ve,t)};function ke(e,t){if(e[ve]){var n=e[ge];n||Ae(e,ge,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Se(e,t){var n=e[ge];if(n&&n.has(t)){var a=n.size-1;a?n.delete(t):e[ge]=null,e.observerRemoved&&e.observerRemoved(a,t)}}var Re,Ae=function(e,t,n){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})},Ie=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Te=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ee=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Ne=function(e,t,n,a,o){return"rgba(".concat(Math.round(t),", ").concat(Math.round(n),", ").concat(Math.round(a),", ").concat(o,")")},Be=function(e){Re||(Re=D?new RegExp("(".concat(Object.keys(D).join("|"),")"),"g"):/^\b$/);var t=e.output.map((function(e){return je(e).replace(Te,he).replace(Re,he)})),n=t.map((function(e){return e.match(Ie).map(Number)})),a=n[0].map((function(e,t){return n.map((function(e){if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]}))})).map((function(t){return me(Object.assign(Object.assign({},e),{},{output:t}))}));return function(e){var n=0;return t[0].replace(Ie,(function(){return String(a[n++](e))})).replace(Ee,Ne)}},ze="react-spring: ",Le=function(e){var t=e,n=!1;if("function"!=typeof t)throw new TypeError("".concat(ze,"once requires a function parameter"));return function(){n||(t.apply(void 0,arguments),n=!0)}},Pe=Le(console.warn);function Me(){Pe("".concat(ze,'The "interpolate" function is deprecated in v9 (use "to" instead)'))}var _e=Le(console.warn);function De(){_e("".concat(ze,'Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead)'))}function Fe(e){return T.str(e)&&("#"==e[0]||/\d/.test(e)||e in(D||{}))}var Ue=function(e){return Object(R.useEffect)(e,Ve)},Ve=[];function Ge(){var e=Object(R.useState)()[1],t=Object(R.useState)(qe)[0];return Ue(t.unmount),function(){t.current&&e({})}}function qe(){var e={current:!0,unmount:function(){return function(){e.current=!1}}};return e}function He(e,t){var n=Object(R.useState)((function(){return{inputs:t,result:e()}})),a=o()(n,1)[0],r=Object(R.useRef)(),i=r.current,c=i;c?Boolean(t&&c.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,c.inputs))||(c={inputs:t,result:e()}):c=a;return Object(R.useEffect)((function(){r.current=c,i==a&&(a.inputs=a.result=void 0)}),[c]),c.result}function Ke(e){var t=Object(R.useRef)();return Object(R.useEffect)((function(){t.current=e})),t.current}var We="undefined"!=typeof window&&window.document&&window.document.createElement?R.useLayoutEffect:R.useEffect},1188:function(e,t,n){"use strict";var a=n(0),o=n(670),r="element",i="text",c="empty",l="fragment",s=function(e,t){return function e(n){var o,s=n.node;return n.type=(o=s,a.isValidElement(o)?r:function(e){return"string"==typeof e||"number"==typeof e}(o)?i:function(e){return null==e||"boolean"==typeof e}(o)?c:Array.isArray(o)?l:void 0),n.type===r?n.children=a.Children.map(s.props.children,(function(t){return e({node:t,parent:n})})):n.type===l&&(n.children=a.Children.map(s,(function(t){return e({node:t,parent:n})}))),t(n),n}({node:e,parent:null})},u=function e(t,n){return[t].concat(null==(a=n(t))?[]:function(t){return e(t,n)}(a));var a},d=function(e){var t=!1;return e.reduce((function(e,n){if(e&&n&&o(String(e.node),String(n.node))){var a=(c=n,l=u(e,(function(e){return e.parent})),s=u(c,(function(e){return e.parent})),d=l.findIndex((function(e){return s.includes(e)})),[l[d],l[d-1]]);i=a[1],(r=a[0]).children.splice(r.children.indexOf(i)+1,0,{node:" "}),t=!0}var r,i,c,l,s,d;return n})),t},b=function(e){if(!e)return null;var t=[],n=s(e,(function(e){e.type===i&&""!==e.node&&t.push(e)}));return t.length&&d(t)?function e(t){return Array.isArray(t.children)?t.type===l?a.Children.map(t.children.map(e),(function(e){return e})):a.createElement(t.node.type,t.node.props,a.Children.map(t.children.map(e),(function(e){return e}))):t.node}(n):e},f=function(e){var t=e.component,n=e.children;return a.createElement(t,{children:b(n)})};f.defaultProps={component:a.Fragment||"span"},t.CJKSpace=f},1190:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"CheckBoxOnFill24","data-old-api":"CheckboxOn"},e),{className:"Zi Zi--CheckboxOn"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M3 5.4A2.4 2.4 0 015.4 3h13.2A2.4 2.4 0 0121 5.4v13.2a2.4 2.4 0 01-2.4 2.4H5.4A2.4 2.4 0 013 18.6V5.4zm8.145 8.184L9.04 11.481a.75.75 0 00-1.06 1.06l2.628 2.63c.002 0 .004.003.005.004a.75.75 0 001.06 0l4.746-4.745a.75.75 0 00-1.061-1.06l-4.214 4.214z",fillRule:"evenodd",clipRule:"evenodd"}))}},1191:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"CheckBoxOff24","data-old-api":"CheckboxOff"},e),{className:"Zi Zi--CheckboxOff"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M18.6 4.5H5.4a.9.9 0 00-.9.9v13.2a.9.9 0 00.9.9h13.2a.9.9 0 00.9-.9V5.4a.9.9 0 00-.9-.9zM5.4 3A2.4 2.4 0 003 5.4v13.2A2.4 2.4 0 005.4 21h13.2a2.4 2.4 0 002.4-2.4V5.4A2.4 2.4 0 0018.6 3H5.4z",fillRule:"evenodd",clipRule:"evenodd"}))}},1200:function(e,t,n){"use strict";var a=n(47),o=n(0),r=n(41),i=n.n(r);t.a=function(e){var t=Object(o.useState)((function(){return i.a.get(e)})),n=Object(a.a)(t,2),r=n[0],c=n[1];return[r,Object(o.useCallback)((function(t){i.a.set(e,t),c(t)}),[e])]}},1201:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n(14),o=function(){return!0},r={REDIRECT_URL:"REDIRECT_URL",CHANGE_IFRAME_HEIGHT:"CHANGE_IFRAME_HEIGHT",SHOW_APPLY_RIGHTS_SUCCESS_MODAL:"SHOW_APPLY_RIGHTS_SUCCESS_MODAL"},i=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,e),this.onIframeMessage=function(e){!1!==t.beforeMessage(e)&&e.data&&e.data.type&&t.onMessage(e.data,e)},this.close=function(){window.removeEventListener("message",t.onIframeMessage)};var o=Object.assign(Object.assign({},e.defaultOption),n);this.beforeMessage=o.beforeMessage,this.onMessage=o.onMessage,window.addEventListener("message",this.onIframeMessage)};i.defaultOption={beforeMessage:o,onMessage:o}},1202:function(e,t,n){"use strict";function a(e,t){return!(!e||!t)&&(e.id===t.id&&void 0!==e.id||e.urlToken===t.urlToken&&void 0!==e.urlToken)}n.d(t,"a",(function(){return a}))},1203:function(e,t,n){"use strict";var a=Object.prototype.hasOwnProperty,o="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function c(e,t,n,a,r){if("function"!=typeof n)throw new TypeError("The listener must be a function");var c=new i(n,a||e,r),l=o?o+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],c]:e._events[l].push(c):(e._events[l]=c,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(o=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)a.call(e,t)&&n.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=o?o+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,r=n.length,i=new Array(r);a<r;a++)i[a]=n[a].fn;return i},s.prototype.listenerCount=function(e){var t=o?o+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,a,r,i){var c=o?o+e:e;if(!this._events[c])return!1;var l,s,u=this._events[c],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,a),!0;case 5:return u.fn.call(u.context,t,n,a,r),!0;case 6:return u.fn.call(u.context,t,n,a,r,i),!0}for(s=1,l=new Array(d-1);s<d;s++)l[s-1]=arguments[s];u.fn.apply(u.context,l)}else{var b,f=u.length;for(s=0;s<f;s++)switch(u[s].once&&this.removeListener(e,u[s].fn,void 0,!0),d){case 1:u[s].fn.call(u[s].context);break;case 2:u[s].fn.call(u[s].context,t);break;case 3:u[s].fn.call(u[s].context,t,n);break;case 4:u[s].fn.call(u[s].context,t,n,a);break;default:if(!l)for(b=1,l=new Array(d-1);b<d;b++)l[b-1]=arguments[b];u[s].fn.apply(u[s].context,l)}}return!0},s.prototype.on=function(e,t,n){return c(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return c(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,n,a){var r=o?o+e:e;if(!this._events[r])return this;if(!t)return l(this,r),this;var i=this._events[r];if(i.fn)i.fn!==t||a&&!i.once||n&&i.context!==n||l(this,r);else{for(var c=0,s=[],u=i.length;c<u;c++)(i[c].fn!==t||a&&!i[c].once||n&&i[c].context!==n)&&s.push(i[c]);s.length?this._events[r]=1===s.length?s[0]:s:l(this,r)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&l(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=o,s.EventEmitter=s,e.exports=s},1204:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(113),o=n.n(a);function r(e,t,n){var a=!1,r=o()((function(){a=!1,e.apply(void 0,arguments)}),t,n);return Object.assign((function(){a=!0,r.apply(void 0,arguments)}),{cancel:r.cancel,flush:r.flush,pending:function(){return a}})}},1205:function(e,t){var n="function"==typeof Float32Array;function a(e,t){return 1-3*t+3*e}function o(e,t){return 3*t-6*e}function r(e){return 3*e}function i(e,t,n){return((a(t,n)*e+o(t,n))*e+r(t))*e}function c(e,t,n){return 3*a(t,n)*e*e+2*o(t,n)*e+r(t)}function l(e){return e}e.exports=function(e,t,a,o){if(!(0<=e&&e<=1&&0<=a&&a<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===t&&a===o)return l;for(var r=n?new Float32Array(11):new Array(11),s=0;s<11;++s)r[s]=i(.1*s,e,a);function u(t){for(var n=0,o=1;10!==o&&r[o]<=t;++o)n+=.1;--o;var l=n+.1*((t-r[o])/(r[o+1]-r[o])),s=c(l,e,a);return s>=.001?function(e,t,n,a){for(var o=0;o<4;++o){var r=c(t,n,a);if(0===r)return t;t-=(i(t,n,a)-e)/r}return t}(t,l,e,a):0===s?l:function(e,t,n,a,o){var r,c,l=0;do{(r=i(c=t+(n-t)/2,a,o)-e)>0?n=c:t=c}while(Math.abs(r)>1e-7&&++l<10);return c}(t,n,n+.1,e,a)}return function(e){return 0===e?0:1===e?1:i(u(e),t,o)}}},1218:function(e,t,n){"use strict";n.d(t,"a",(function(){return Re}));var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(20),b=n(0),f=n(21),p=n(13),h=n.n(p),m=n(58),v=n(26),g=n(2021),O=n(1636),j=n(896),y=n(1587),C=n(33),w=n(23),x=n.n(w),k=n(28),S=n.n(k),R=n(27),A=n.n(R),I=n(29),T=n.n(I),E=n(19),N=n.n(E),B=n(150),z=n(979),L=n(1170),P=n(912),M=n(432),_=n(232),D=n(95),F=n.n(D),U=n(176),V=n(8);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=N()(e);if(t){var o=N()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return T()(this,n)}}var q={top:10,left:20},H={top:0,left:0};function K(){var e,t=F()(navigator.userAgent).Mobile?H:q,n=t.top,a=t.left,o=window,r=o.innerWidth,i={left:0,top:0,width:r,height:o.innerHeight},c={x:(e=i).left+e.width/2,y:e.top+e.height/2},l=2*(96+a),s=r,u=0;return r<1e3+l?s=r-l:(s=1e3,u=(r-(1e3+l))/2),{x:c.x,y:c.y,imgContainerWidth:s,imgContainerHeight:i.height-2*n,left:u,top:n}}var W=function(e){A()(n,e);var t=G(n);function n(e){var a;return x()(this,n),(a=t.call(this,e)).getBoundingClientRect=function(e,t){var n=t.width,a=t.height,o={top:0,left:0,width:0,height:0},r=1;return e.width>e.height?(o.height=a,r=a/e.height,o.width=e.width*r,o.left="-".concat((o.width-n)/2)):e.width<e.height?(o.width=n,r=n/e.width,o.height=e.height*r,o.top="-".concat((o.height-a)/2)):(o.width=n,o.height=a),o},a.getParentNode=function(){for(var e,t=a.props.img.parentNode;t&&"BODY"!==t.nodeName;){if(t.classList.contains("Image-Wrapper-Preview"))return e=t;t=t.parentNode}return e},a.getChildImgNode=function(e){if(e){var t=e.childNodes,n=a.state.index,o=n;return{img:(n>=t.length?t[o=t.length-1]:t[o]).querySelector(".Image-Preview"),index:o}}},a.setImageElAttr=function(){var e=a.state,t=e.width,n=e.transition,o=a.props.images,r=a.getParentNode(),i=a.getChildImgNode(r);if(i&&i.img){var c=i.img.getBoundingClientRect(),l=a.getBoundingClientRect(o[i.index],{width:c.width,height:c.height}),s=a.imgEl.getBoundingClientRect(),u=a.containerClientRect,d=u.left,b=u.top,f={x:s.left+s.width/2-d-l.width/2,y:s.top+s.height/2-b-l.height/2},p=t/l.width;"transition"!==n?(a.setState({transition:""},(function(){a.setState({rect:c,transition:"",width:l.width,height:l.height,translate:f,scale:p,transform:"translate(".concat(f.x,"px ,").concat(f.y,"px) scale(").concat(p,")")})})),setTimeout((function(){a.setState({transition:"transition",translate:null,scale:null,transform:"translate(".concat(c.left-d,"px,").concat(c.top-b,"px)"),opacity:-1})}),20)):a.setState({translate:null,scale:null,opacity:-1,transform:"translate(".concat(c.left-d,"px,").concat(c.top-b,"px)")})}},a.getImageSize=function(e){var t=a.containerClientRect,n=t.imgContainerWidth,o=t.imgContainerHeight,r=e.width,i=e.height,c=!1,l=1;return(e.width>n||e.height>o)&&(e.width>n&&(l=n/e.width,r=e.width*l,i=l*e.height),i>o&&(i*=l=o/i,r*=l),c=!0),a.setState({cursorZoomIn:c}),{width:r,height:i}},a.handleResizeCallback=function(){a.containerClientRect=K();var e=a.state.index,t=a.props.images;a.setState(Object.assign({transition:"fixed",transform:""},a.getImageSize(t[e])))},a.handleClick=function(e){var t=a.state.cursorZoomIn,n=e.target;n&&n.classList&&n.classList.contains("ImageGallery-Img")&&t&&a.setState({previewImage:n}),(n.classList.contains("ImageGallery")||n.classList.contains("ImageGallery-Inner"))&&a.setImageElAttr()},a.handleTransEnd=function(){var e=a.state,t=e.translate,n=e.scale,o=a.props.onClose;t&&n||o()},a.handlePreviewImageClose=function(){a.setState({previewImage:null},(function(){_.hide()}))},a.handleKeyUpCallback=function(e){39===e.keyCode?a.handleCutImage(1):37===e.keyCode&&a.handleCutImage(-1)},a.handleCutImage=function(e){var t=a.state.index+e,n=a.props.images;t<n.length&&t>=0&&a.setState(Object.assign({index:t,transition:"fixed",transform:""},a.getImageSize(n[t])))},a.state={transEnded:!1,translate:null,scale:null,url:null,index:e.index||0,width:0,height:0,rect:null,transition:"transition",previewImage:null,transform:"",cursorZoomIn:!1,opacity:1},a.containerClientRect=K(),a}return S()(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props,t=e.data,n=e.img.getBoundingClientRect();_.hide();var a=this.containerClientRect,o=a.left,r=a.top,i=this.getBoundingClientRect(t,{width:n.width,height:n.height}),c={left:n.left-o+Number(i.left),top:n.top-r+Number(i.top)};this.setState({rect:i,width:i.width,height:i.height,transform:"translate(".concat(c.left,"px, ").concat(c.top,"px)")})}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState(Object.assign({},e.computeTransition(e.props.index)))}),20),window.addEventListener("keyup",this.handleKeyUpCallback),window.addEventListener("resize",this.handleResizeCallback)}},{key:"componentWillUnmount",value:function(){_.show(),window.removeEventListener("keyup",this.handleKeyUpCallback),window.removeEventListener("resize",this.handleResizeCallback)}},{key:"computeTransition",value:function(e){var t=this.props.images[e],n=this.containerClientRect,a=n.x,o=n.y,r=n.left,i=n.top,c=this.getImageSize(t).width;if(this.imgEl){var l=this.imgEl.getBoundingClientRect(),s=c/l.width,u={x:a-l.width/2-r,y:o-l.height/2-i};return{translate:u,scale:s,transform:"translate(".concat(u.x,"px ,").concat(u.y,"px) scale(").concat(s,")")}}}},{key:"render",value:function(){var e=this,t=this.props.images,n=this.state,a=n.translate,o=n.index,r=n.width,i=n.height,c=n.transition,l=n.previewImage,s=n.transform,u=n.cursorZoomIn,d=n.opacity,b=this.containerClientRect,f=b.left,p=b.top,m=b.imgContainerWidth,v=b.imgContainerHeight,g=(F()(navigator.userAgent).Mobile?H:q).left,O=t[o];return Object(V.g)(U.a,null,Object(V.g)("div",{className:h()("ImageGallery",{"is-active":a}),onClick:this.handleClick},Object(V.g)("div",{className:"ImageGallery-Content",style:{width:"".concat(m+2*(96+g),"px"),height:"".concat(v,"px"),left:"".concat(f,"px"),top:"".concat(p,"px")}},!l&&t.length>1&&Object(V.g)("a",{className:h()("ImageGallery-arrow-left",{"ImageGallery-arrow-disabled":0===o}),style:{left:"".concat(g,"px")},onClick:function(){return e.handleCutImage(-1)}},Object(V.g)(L.a,{fill:"#fff",size:42})),Object(V.g)("div",{className:"ImageGallery-Inner",ref:function(t){e.scrollNode=t}},Object(V.g)("img",{ref:function(t){e.imgEl=t},src:Object(B.imgUrl)(O.url,"r"),className:h()("ImageGallery-Img",{"ImageGallery-transition":"transition"===c,"ImageGallery-fixed":"fixed"===c,"ImageGallery-CursorZoomIn":u}),style:{width:r,height:i,transform:s,opacity:d},onTransitionEnd:this.handleTransEnd,alt:"preview","data-rawwidth":O.width,"data-rawheight":O.height,"data-thumbnail":O.thumbnail,"data-original":Object(B.imgUrl)(O.url,"r"),"data-actualsrc":Object(B.imgUrl)(O.url,"b")})),!l&&t.length>1&&Object(V.g)("a",{className:h()("ImageGallery-arrow-right",{"ImageGallery-arrow-disabled":o>=t.length-1}),onClick:function(){return e.handleCutImage(1)},style:{right:"".concat(g,"px")}},Object(V.g)(P.a,{fill:"#fff",size:42}))),!l&&Object(V.g)("a",{className:"ImageGallery-close",onClick:this.setImageElAttr},Object(V.g)(M.a,{fill:"#fff"})),l&&Object(V.g)(z.a,{img:l,onClose:this.handlePreviewImageClose})))}}]),n}(b.Component);W.propTypes={img:u.a.object.isRequired,data:u.a.object.isRequired,onClose:u.a.func.isRequired};var Z=W,Q=n(1228);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=N()(e);if(t){var o=N()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return T()(this,n)}}var J=function(e){A()(n,e);var t=Y(n);function n(e){var a;return x()(this,n),(a=t.call(this,e)).setImageAttr=function(){var e=a.state,t=e.width,n=e.height;if(!t||!n){var o=a.divEl.getBoundingClientRect();t=t||o.width,n=n||o.width,a.setState({width:t,height:n})}var r=a.getBoundingClientRect({width:t,height:n});a.setState({imageWidth:r.width,imageHeight:r.height,imageTop:r.top,imageLeft:r.left})},a.getBoundingClientRect=function(e){var t=e.width,n=e.height,o=a.props.data,r={top:0,let:0,width:0,height:0},i=1;return o.width>o.height?(r.height=n,i=n/o.height,r.width=o.width*i,r.left="-".concat((r.width-t)/2)):(r.width=t,i=t/o.width,r.height=o.height*i,r.top="-".concat((r.height-n)/2)),r},a.handlePreviewImageOpen=function(e){var t=a.props.onPreviewImageOpen;e.persist(),t&&t(e)||a.setState({previewImage:a.imgWrapper.querySelector("img")})},a.handlePreviewImageClose=function(){a.setState({previewImage:null})},a.state={width:e.width||0,height:e.height||0,imageWidth:0,imageHeight:0,imageTop:0,imageLeft:0,previewImage:null},a}return S()(n,[{key:"componentDidMount",value:function(){this.setImageAttr()}},{key:"render",value:function(){var e=this,t=this.state,n=t.width,a=t.height,o=t.previewImage,r=t.imageWidth,i=t.imageHeight,c=t.imageTop,l=t.imageLeft,s=this.props,u=s.data,d=s.images,b=s.index,f=s.surplus,p=s.previewType,m=void 0===p?1:p,v=s.data.isGif,g=s.vague,O=s.previewTransitionType,j=void 0===O?0:O;return Object(V.g)("div",{onClick:this.handlePreviewImageOpen,className:"Thumbnail-Wrapper",ref:function(t){e.divEl=t},style:{width:n?"".concat(n,"px"):"",height:a?"".concat(a,"px"):""}},Object(V.g)("span",{ref:function(t){e.imgWrapper=t},className:h()({"Image-PreviewVague":g})},g?Object(V.g)(Q.a,{className:"Image-Preview",url:v?Object(B.imgUrl)(u.thumbnail,"xl"):Object(B.imgUrl)(u.url,"xl"),width:n,height:a,alt:"cover",thumbnail:v?Object(B.imgUrl)(u.thumbnail,"xl"):Object(B.imgUrl)(u.url,"xl"),"data-rawwidth":u.width,"data-rawheight":u.height,"data-thumbnail":u.thumbnail,"data-original":Object(B.imgUrl)(u.url,"r"),"data-actualsrc":Object(B.imgUrl)(u.url,"b")}):Object(V.g)("img",{className:"Image-Preview",src:v?u.thumbnail:Object(B.imgUrl)(u.url,"r"),width:r,height:i,style:{top:"".concat(c,"px"),left:"".concat(l,"px")},alt:"preview","data-rawwidth":u.width,"data-rawheight":u.height,"data-thumbnail":u.thumbnail,"data-original":Object(B.imgUrl)(u.url,"r"),"data-actualsrc":Object(B.imgUrl)(u.url,"b")})),f>0&&Object(V.g)("em",{className:"Thumbnail-Surplus-Sign"},"+".concat(f)),v&&Object(V.g)("em",{className:"Thumbnail-Gif-Sign"},"GIF"),o&&(1===m?Object(V.g)(Z,{img:o,data:u,index:b,images:d,onClose:this.handlePreviewImageClose}):Object(V.g)(z.a,{img:o,isOriginalUrl:!g,transitionType:j,data:u,onClose:this.handlePreviewImageClose})))}}]),n}(b.Component);J.propTypes={width:u.a.number,height:u.a.number,index:u.a.number,surplus:u.a.number,data:u.a.object,images:u.a.array,onPreviewImageOpen:u.a.func};var X=n(1047),$=n(218),ee=n(479),te=n(929),ne=n(945),ae=n(962),oe=n(1322),re=n(1023),ie=n(1123),ce=n(63),le=n(922),se=n(973),ue=n(469),de=n(966),be=n(960),fe=n(2836),pe=n(149),he=n(455),me=n(30);n(1647);function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var ge={pin:"updatePinsReaction"},Oe=function(e){Object(r.a)(n,e);var t=ve(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleToggleVote=e.props.authRequired((function(t){var n=e.props,a=n.reactioned,o=n.type,r=n.id,i=n.onReaction,c=!a;v.a.trackEvent(t.target,{action:c?"Upvote":"UnUpvote",element:"Button"});var l=ge[o];i?i(r):e.props[l](r,c)}),me.Y.vote),e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.reactioned,n=e.count,a=e.className,o=e.disabled;return Object(l.c)(C.c,{className:h()("VoteButton","ReactionButton",{"is-active":t},a),onClick:this.handleToggleVote,disabled:o,children:[Object(l.b)(fe.a,{size:20,center:!0})," ",Object(pe.formatNumber)(n)]})}}]),n}(b.Component);Oe.propTypes={type:u.a.oneOf(he.a).isRequired,id:u.a.oneOfType([u.a.number,u.a.string]).isRequired,icon:u.a.string,reactioned:u.a.bool,count:u.a.number};var je=Object(d.compose)($.a,Object(f.connect)(null,{updatePinsReaction:ee.i}))(Oe),ye=n(972),Ce=n(1126),we=n(433),xe=n(1295);function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var Se=function(e){Object(r.a)(n,e);var t=ke(n);function n(e){var o;Object(a.a)(this,n),(o=t.call(this)).openDeleteModal=function(){o.setState({deleteModalShown:!0})},o.closeDeleteModal=function(){o.setState({deleteModalShown:!1})},o.handleFavlistsShown=function(){v.a.trackEvent(o.favButtonRef,{action:"Collect",element:"Button",is_intent:!0}),o.props.authRequired((function(){return o.setState({favlistsShown:!0})}),me.Y.favlists)()},o.handleFavlistHide=function(){o.setState({favlistsShown:!1})},o.handlePositionStatusChange=function(e){o.setState({positionStatus:e})},o.handleDeletePin=function(){var e=o.props,t=e.pin.id,n=e.deletePin;return(0,e.authRequired)(n(t),me.Y.deletePin)},o.handleCommentsShown=function(e,t){o.setState(t)},o.handleCommentsHide=function(){o.setState({commentsShown:!1})},o.renderQuoteContents=function(e,t){var n=e.content;return Object(l.b)("blockquote",{className:"PinItem-3lineBlockquote",children:n},t)},o.renderLinkContents=function(e,t,n){var a=e.url,o=e.title,r=e.imageUrl,i=e.subtype;return"text"===n?Object(l.c)("a",{className:h()("link-text",{"PinItem-contentTitle":!!o,"PinItem-contentUrl":!o}),href:a,target:"_blank",rel:"noopener noreferrer",children:[Object(l.b)(g.b,{stroke:"#BBC1CC",text:!0,center:!0})," ",o||a]},t):Object(l.c)("a",{className:"link-box",href:a,target:"_blank",rel:"noopener noreferrer",children:[Object(l.c)("span",{className:"content",children:[Object(l.b)("span",{className:h()("title",{"PinItem-contentTitle":!!o,"PinItem-contentUrl":!o}),children:o||a}),o&&Object(l.c)("span",{children:[(a.match(/^https?:\/\/([^/?#]+)(?:[/?#]|$)/i)||[])[1],i&&Object(l.b)("span",{className:"subtype",children:i})]})]}),r&&Object(l.b)("img",{className:"thumbnail",src:r,alt:"头像"})]},t)},o.renderVideoContents=function(e,t){var n=e.videoId||e.id,a={title:"",thumbnail:e.thumbnail||e.coverInfo&&e.coverInfo.thumbnail,isLens:!0,id:n,isPlayable:!0,url:"https://www.zhihu.com/video/".concat(n)};return Object(l.b)(Ce.a,{isAppView:o.isAppView,data:a},t)},o.renderOriginPinContents=function(e){if(!e)return null;if(e.isDeleted)return Object(l.b)("div",{className:h()("PinItem-RichText","PinItem-content-originpin"),children:e.deletedReason});if(e.content&&e.content[0]){var t=o.props.noCollapsed,n=o.state.originPinExpanded,a=e.content.find((function(e){return"text"===e.type}));return Object(l.c)("div",{className:h()("PinItem-RichText","PinItem-content-originpin"),children:[Object(l.c)("div",{children:[e.author.name,"："]}),a&&Object(l.b)(se.b,{html:a.content,noCollapsed:t,expanded:n}),o.renderPinContents(e.content)]})}return null},o.renderPinContents=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.filter((function(e){return e.url&&"image"===e.type})),a=[];return Object(l.c)("div",{className:h()("RichText","ztext","PinItem-remainContentRichText"),children:[e.map((function(e,r){var i=e.type;return"quote"===i?o.renderQuoteContents(e,r):"link"===i?o.renderLinkContents(e,r,t):"video"===i?o.renderVideoContents(e,r):("image"===i&&a.length<4&&e.url&&a.push(Object(l.b)(J,{data:e,vague:!0,index:a.length,images:n,surplus:n.length>4&&3===a.length?n.length-4:0},r)),null)})),a.length>0&&Object(l.b)("div",{className:"Image-Wrapper-Preview",children:a})]})},o.renderRemainContents=function(){var e=o.props.pin,t=e.id,n=e.created,a=e.updated,r=e.originPin,i=e.content,c="//".concat(me.q,"/pin/").concat(t);return Object(l.c)("div",{children:[o.renderPinContents(i),o.renderOriginPinContents(r),Object(l.b)(se.a,{href:c,created:n,updated:a})]})};var r=e.pin,i=e.noCollapsed,c=e.showCommentButton;return o.contentHTML=o.getContentHTML(r),o.state={expanded:i,originPinExpanded:i,commentPattern:c?"fixed":"bottom",commentsShown:!c,commentsAutoFocus:c,deleteModalShown:!1,favlistsShown:!1},o}return Object(o.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.contentHTML=this.getContentHTML(e.pin)}},{key:"getContentHTML",value:function(e){var t;if(null==e||null===(t=e.content)||void 0===t||!t[0])return"";var n=e.content,a="";return"text"===n[0].type&&(a=n[0].content),a}},{key:"render",value:function(){var e=this,t=this.props,n=t.pin,a=t.pin,o=a.id,r=a.author,i=a.virtuals,c=(i=void 0===i?{}:i).reactionType,s=a.commentCount,u=a.reactionCount,d=a.adminClosedComment,b=a.reviewingInfo,f=t.preset,p=t.lastreadTouchable,h=t.isSticky,v=t.handleToggleSticky,g=t.noCollapsed,w=t.showFollowAuthorButton,x=t.showCommentButton,k=t.commentInputPosition,S=t.isMobile,R=t.renderOptions,A=t.currentUser,I=t.blockStrategies,T=(I=void 0===I?{}:I).isBlockingCollect,E=I.isBlockingShare,N=I.isBlockingComment,B=this.state,z=B.positionStatus,L=B.expanded,P=B.deleteModalShown,M=B.favlistsShown,_=B.commentsShown,D=B.commentsAutoFocus,F=B.commentPattern,U=A&&A.urlToken===r.urlToken,V="plain"===f,G="like"===c,q="function"==typeof v,H="//".concat(me.q,"/pin/").concat(o);return Object(l.c)(le.e,{data:n,link:H,"data-zop":JSON.stringify({itemId:o,type:"pin"}),meta:V||Object(l.b)("div",{children:Object(l.c)("div",{className:"PinItem-author",children:[Object(l.b)(ne.a,{author:r,className:"PinItem-authorInfo",userLinkV2:!0,children:(null==b?void 0:b.isReviewing)&&Object(l.b)(m.Text,{color:"GBK06A",fontSize:"15px",children:b.tips})},"authorInfo"),w&&!U&&A&&Object(l.b)(te.a,{className:"PinItem-followButton",preset:"primary",type:r.type,id:r.urlToken,gender:r.gender,isFollowing:r.isFollowing,onClick:this.handleFollowButtonClick})]})}),className:"PinItem",lastreadTouchable:p,children:[Object(l.c)(se.b,{prefix:q&&h&&Object(l.b)(oe.a,{}),alwaysShowPrefix:!0,data:n,html:this.contentHTML,excerpt:this.contentHTML,noCollapsed:g,expanded:L,onPositionStatusChange:this.handlePositionStatusChange,renderCanExpandExtra:this.renderRemainContents,children:[Object(l.b)(je,{reactioned:Boolean(G),count:u,id:o,type:"pin"}),!N&&x&&Object(l.b)(de.a,{onClick:this.handleCommentsShown,commentsShown:_,commentClosed:d,count:s,positionStatus:z}),!E&&Object(l.b)(ae.a,{id:o,type:"pin",authorName:r&&r.name,href:H,positionStatus:z}),!T&&(!A||!A.isOrg)&&Object(l.b)(ie.a,{onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:S?"":"收藏"}),!U&&Object(l.b)(ue.a,{type:"pin",id:o}),!S&&q&&U&&Object(xe.a)(A)&&Object(l.b)(C.c,{preset:"plain",onClick:v,icon:h?O.b:j.b,label:h?"取消置顶":"置顶"}),U&&Object(l.b)(C.c,{preset:"plain",onClick:this.openDeleteModal,icon:y.b,label:"删除"}),R()]}),U&&Object(l.b)(ye.a,{title:"你确定要删除自己的想法吗？",shown:P,onCancel:this.closeDeleteModal,onSubmit:this.handleDeletePin}),Object(l.b)(be.a,{parent:n,commentPattern:F,commentInputPosition:k,shown:_,showPackupButton:x,autoFocus:D,onClose:this.handleCommentsHide}),Object(l.b)(re.a,{id:o,type:"pin",shown:M,onClose:this.handleFavlistHide,zaEnabled:!0})]})}}]),n}(b.Component);Se.propTypes={noCollapsed:u.a.bool,showFollowAuthorButton:u.a.bool,showCommentButton:u.a.bool,commentInputPosition:u.a.oneOf(["top","bottom"])},Se.defaultProps={noCollapsed:!1,showFollowAuthorButton:!1,showCommentButton:!0,commentInputPosition:"bottom",renderOptions:function(){return[null]}};var Re=Object(d.compose)(Object(we.b)((function(e){var t=e.pin,n=e.trackCardShow,a=void 0===n||n,o=e.zaInfos,r=(o=void 0===o?{}:o).cardShow;return Object.assign(Object.assign({module:"PinItem",card:{content:{type:"Pin",id:String(t.id),author_member_hash_id:t&&t.author.id}}},r&&{view:{id:r}}),{},{trackCardShow:a})})),$.a,Object(X.d)({dataPath:"pin"}),X.c,Object(f.connect)((function(e,t){var n=t.pin;return Object.assign(Object.assign({},"string"==typeof(null==n?void 0:n.author)&&{pin:Object.assign({},n,{author:e.entities.users[n.author]})}),{},{isMobile:Object(ce.d)(e)})}),{deletePin:ee.c}))(Se);n(2279)},1222:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n.n(d),f=n(20),p=n(1333),h=n(12),m=Object.assign;function v(e){return b.a.createElement(h.a,m(m({width:"24",height:"25",viewBox:"0 0 24 25","data-new-api":"TextFill24","data-old-api":"Answer"},e),{className:"Zi Zi--Answer"+(e.className?" ".concat(e.className):"")}),b.a.createElement("path",{d:"M3.5 5.487c0-.69.56-1.25 1.25-1.25h14.5a1.25 1.25 0 110 2.5H4.75c-.69 0-1.25-.56-1.25-1.25zm0 7c0-.69.56-1.25 1.25-1.25h14.5a1.25 1.25 0 110 2.5H4.75c-.69 0-1.25-.56-1.25-1.25zm1.25 5.75a1.25 1.25 0 100 2.5h7.5a1.25 1.25 0 000-2.5h-7.5z"}))}var g=n(153),O=n(149),j=n(13),y=n.n(j),C=n(1129);function w(e){var t=e.annotationDetail,n=e.className;if(!t)return null;var a=t.detail,o=t.member,r=t.reasonDescription,i=t.type,c=o?"".concat(o.name,"："):"";return Object(l.c)("section",{className:y()("Annotation-mark",n),children:[Object(l.c)("header",{className:"Annotation-header",children:["strong"===i&&Object(l.b)(C.a,{size:16,center:!0,text:!0,className:"Annotation-alert"}),Object(l.b)("h1",{className:"Annotation-markTitle",children:r||"该内容已被标记"})]}),(a||c)&&Object(l.b)("div",{className:"Annotation-markSummary",dangerouslySetInnerHTML:{__html:"".concat(c).concat(a||"未填写原因")}})]})}w.propTypes={annotationDetail:u.a.shape({reason:u.a.number.isRequired,reasonDescription:u.a.string,type:u.a.oneOf(["strong","weak"]).isRequired,detail:u.a.string,member:u.a.shape({name:u.a.string.isRequired}),showOuter:u.a.bool}).isRequired};var x=n(435),k=n(1230),S=n(1022),R=n(922),A=n(973),I=n(962),T=n(151),E=n(966),N=n(960),B=n(929),z=n(433);n(1645);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var P={placeholders:{img:" [图片] "}},M=function(e){Object(r.a)(n,e);var t=L(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={collapsed:!0,commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleOpenComment=function(t){var n=t.target.parentNode.className.includes("is-fixed")?"fixed":"bottom",a=e.state.modalShown,o=!("bottom"===n&&a);e.setState({modalShown:o,commentPattern:n})},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e.handlePackupButton=function(){e.setState({modalShown:!1}),e.CommentsButtonEl.scrollIntoView({block:"start",behavior:"smooth"}),window.scrollTo(0,window.pageYOffset-window.screen.height/2)},e.handleContentToggleExpand=function(t){e.setState({collapsed:!t})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.question,o=t.question,r=o.id,i=o.title,c=o.type,s=o.created,u=o.answerCount,d=o.followerCount,b=o.isMuted,f=o.questionType,h=o.detail,m=o.commentCount,j=o.adminClosedComment,y=o.relationship,C=void 0===y?{}:y,S=o.annotationDetail,z=t.action,L=(t.isConcise,t.isAnonymousFollowing),M=t.lastreadTouchable,_=t.zaInfos,D=_.title,F=_.expand,U=_.follow,V=_.options,G=t.renderOptions,q=this.state,H=q.commentsShown,K=q.commentsAutoFocus,W=q.commentPattern,Z=q.collapsed,Q={id:r,type:c},Y="/question/".concat(r);return Object(l.c)(R.e,{data:a,link:Y,lastreadTouchable:M,onRef:function(t){e.contentItem=t},title:Object(l.c)("div",{className:"QuestionItem-title",children:[Object(l.b)(x.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:Object(l.b)("a",Object.assign(Object.assign({href:Y,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-name":"Title"},D&&{"data-za-detail-view-id":D}),{},{children:i}))}),L&&Object(l.b)(p.a,{className:"QuestionItem-icon"}),"commercial"===f&&b&&Object(l.b)("span",{className:"QuestionItem-muteStatus",children:"待推广"})]}),children:[!Z&&S&&Object(l.b)(w,{annotationDetail:S}),n===R.c.default&&Object(l.c)(R.d,{children:[Object(g.toDateTimeString)(s),"".concat(Object(O.formatNumber)(u)," 个回答"),"".concat(Object(O.formatNumber)(d)," 个关注")]}),n===R.c.interactive&&Object(l.c)(A.b,{data:a,html:h||"",excerpt:a.excerpt,limit:60,limitWithImage:60,truncateHTMLOptions:P,onToggleExpend:this.handleContentToggleExpand,zaIds:{expand:F},children:[z||Object(l.b)(B.a,Object.assign(Object.assign({},Q),{},{isFollowing:(C&&{}.hasOwnProperty.call(C,"isFollowing")?C:a).isFollowing,zaId:U})),[Object(l.b)(E.a,{onClick:this.handleCommentsShown,commentsShown:H,commentClosed:j,count:m},"comment"),Object(l.b)(I.a,Object.assign(Object.assign({},Q),{},{title:i,href:Y}),"share"),Boolean(u)&&Object(l.c)(T.a,{preset:"plain",to:Y,target:"_blank",children:[Object(l.b)(v,{style:{marginRight:"4px"},center:!0,text:!0}),Object(O.formatNumber)(u)," 个回答"]},"linkbutton"),G&&G((function(){return e.contentItem}),V),Z&&S&&Object(l.b)(k.a,{annotationDetail:S})]]}),Object(l.b)(N.a,{parent:a,commentPattern:W,shown:H,autoFocus:K,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);M.propTypes={preset:u.a.oneOf(Object.keys(R.c)).isRequired,isAnonymousFollowing:u.a.bool,contentShown:u.a.bool,zaInfos:u.a.shape({title:u.a.number,expand:u.a.number,follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},M.defaultProps={preset:R.c.default,zaInfos:{}};t.a=Object(f.compose)(Object(S.a)((function(e){var t=e.question;return{content:{type:"Question",token:String(t.id)}}})),Object(z.b)((function(e){var t=e.question,n=e.trackCardShow,a=void 0===n||n;return{module:"QuestionItem",card:{content:{type:"Question",token:String(t.id),item_num:t.answerCount,comment_num:t.commentCount,follower_num:t.followerCount,publish_timestamp:1e3*t.created}},trackCardShow:a}})))(M)},1224:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(20),f=n(21),p=n(13),h=n.n(p),m=n(33),v=n(873),g=n(2278),O=n(26),j=n(149),y=n(455),C=n(218),w=n(2),x=n(6),k=Object(x.a)("live",["UPDATE_LIKED","UPDATE_COURSE_LIKED"]);var S=Object(x.a)("ebook",["FOLLOW","UNFOLLOW"]);var R=n(473),A=n(1646),I=n(479),T=n(30);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var N={ebook:"updateEBookVoters",live:"updateLiveLiked",live_course:"updateLiveCourseLiked",article:"updateArticleLike",promotion:"updatePromotionLike",pin:"updatePinsLike"},B=function(e){Object(r.a)(n,e);var t=E(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleToggleVote=e.props.authRequired((function(t){var n=e.props,a=n.liked,o=n.type,r=n.id,i=!a;O.a.trackEvent(t.target,{action:i?"Upvote":"UnUpvote",element:"Button"});var c=N[o];e.props[c](r,i)}),T.Y.vote),e.handleClick=function(t){var n=e.props,a=n.disableAuth,o=n.handleToggleGuide,r=n.onClick;r&&r(t)||(a?o(t):e.handleToggleVote(t))},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.liked,n=e.count,a=e.className,o=e.icon,r=void 0===o?"like":o,i=e.disabled;return Object(l.c)(m.c,{className:h()("LikeButton",{"is-active":t},a),onClick:this.handleClick,disabled:i,"aria-live":"polite",children:["thank"===r?Object(l.b)(v.a,{center:!0}):Object(l.b)(g.a,{center:!0})," ",Object(j.cnNiceNumber)(n).trim()]})}}]),n}(d.Component);B.propTypes={type:u.a.oneOf(y.a).isRequired,id:u.a.oneOfType([u.a.number,u.a.string]).isRequired,icon:u.a.string,liked:u.a.bool,count:u.a.number};t.a=Object(b.compose)(C.a,Object(f.connect)(null,{updateEBookVoters:function(e){return function(t,n){var a=n().entities.ebooks[e],o=!(a.relationship||{}).voting;return t({API:{types:S.FOLLOW,method:o?"POST":"DELETE",endpoint:"v3/books/".concat(e,"/voters")},UPDATE:{request:{ebooks:Object(w.a)({},e,{relationship:Object.assign(Object.assign({},a.relationship),{},{voting:o}),voteupCount:a.voteupCount+(o?1:-1)})},failure:{ebooks:Object(w.a)({},e,a)}}})}},updateLiveLiked:function(e){return function(t,n){var a=n().entities.lives[e],o=!a.isLiked;return t({API:{types:k.UPDATE_LIKED,endpoint:"v3/lives/".concat(e,"/like"),method:o?"POST":"DELETE"},UPDATE:{request:{lives:Object(w.a)({},e,{isLiked:o,likedNum:a.likedNum+(o?1:-1)})},failure:{lives:Object(w.a)({},e,a)}}})}},updateLiveCourseLiked:function(e){return function(t,n){var a=n().entities.liveCourses[e],o=!a.isLiked;return t({API:{types:k.UPDATE_COURSE_LIKED,endpoint:"v3/lives/course/".concat(e,"/like"),method:o?"POST":"DELETE"},UPDATE:{request:{liveCourses:Object(w.a)({},e,{isLiked:o,likedNum:a.likedNum+(o?1:-1)})},failure:{liveCourses:Object(w.a)({},e,a)}}})}},updateArticleLike:R.f,updatePromotionLike:A.a,updatePinsLike:I.h}))(B)},1227:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(47),o=n(1),r=n(0),i=n(58),c=n(20),l=n(21),s=n(1048),u=n.n(s),d=n(1333),b=n(1055),f=n(435),p=n(1047),h=n(46),m=n(1049),v=n(1045),g=n(1422),O=n(1733),j=n(1498),y=n(922),C=n(960),w=n(973),x=n(45),k=n(1022),S=n(1655),R=function(e){var t=e.expanded,n=e.isVideoCoverFullSize;return e.renderFlag?Object(o.b)(m.CoCreationLabel,{mb:t||n?"8px":"4px"}):null},A=(n(1656),n(1037)),I=n(40);function T(e){var t,n,c=e.zvideo,s=e.zvideo,g=s.id,k=s.description,T=void 0===k?"":k,E=s.title,N=s.author,B=s.isVisible,z=s.creationRelationship,L=s.attachedInfoBytes,P=e.lastreadTouchable,M=e.preset,_=void 0===M?"primary":M,D=e.onToggleExpand,F=e.renderOptions,U=e.couldShowHiddenSign,V=e.renderActionButtons,G=e.shouldAlwaysShowPlayer,q=e.truncateDisabled,H=e.limit,K=e.showMetaAfterPlayer,W=e.videoRef,Z=e.alwaysShowVolumeButton;c.thumbnailExtraInfo&&(t=c.thumbnailExtraInfo.videoId,n=c.thumbnailExtraInfo.url),c.video&&(t=c.video.videoId,n=c.video.thumbnail);var Q=Object(r.useRef)(),Y=Object(l.useSelector)((function(e){return u()(N)?e.entities.users[N]:N})),J=Object(h.o)(Y),X=Object(r.useState)(!1),$=Object(a.a)(X,2),ee=$[0],te=$[1],ne=Object(r.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),ae=Object(a.a)(ne,2),oe=ae[0],re=ae[1],ie=Object(I.h)(Q,W);Object(A.a)({videoId:t,iframeRef:Q});var ce=Object(S.a)(_,ee,Y,z),le=Object(a.a)(ce,1)[0],se=J&&!B&&U,ue="https://www.zhihu.com/zvideo/".concat(g),de=t&&(G||ee),be=Object(m.isCoCreateRelation)(z),fe=R({expanded:ee,isVideoCoverFullSize:G&&K,renderFlag:be}),pe=be?140:200;return Object(o.b)(p.a,{data:c,children:Object(o.c)(y.e,{className:"ZVideoItem",data:c,title:Object(o.c)(o.a,{children:[se&&Object(o.c)("span",{className:"ZVideoItem-hiddenSign",children:[Object(o.b)(d.a,{text:!0,center:!0}),"隐藏"]}),Object(o.b)(f.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:Object(o.b)("a",{href:ue,target:"_blank",rel:"noopener noreferrer",children:E})})]}),link:ue,meta:K?null:le,expandedHeight:0,lastreadTouchable:P,"data-zop":JSON.stringify({authorName:null==Y?void 0:Y.name,itemId:g,title:E,type:"zvideo"}),children:[J&&(c.isReviewing||c.isUpdateReviewing)&&Object(o.b)(j.a,{}),de&&Object(o.c)(i.Box,{my:"16px",children:[Object(o.b)("div",{className:"ZVideoItem-video",css:{margin:"0px"},children:Object(o.b)(b.a,{ref:ie,className:"ZVideoItem-player",type:"video",src:"https://".concat(x.a.videoHost,"/video/").concat(t,"?").concat(new URLSearchParams([["itemId",g],["itemType","zvideo"]]).toString()),iframeProps:{allowFullScreen:!0},griffithProps:{alwaysShowVolumeButton:Z},zaProps:{type:"Zvideo",token:c.id,attachedInfo:L}})}),ee&&Object(o.b)(m.CreationRelationshipBar,{id:g,creationRelationship:z})]}),K&&le,Object(o.b)(w.b,Object.assign(Object.assign({excerpt:Object(v.c)(T,pe),html:T,cover:G?null:n,hasVideo:!G},H?{limit:H}:{}),{},{truncateDisabled:q,allowCollapseWithEmptyExcerpt:!0,expanded:ee,onToggleExpend:function(e){te(e),D&&D(e)},data:Object.assign(Object.assign({},c),{},{id:g}),prefix:fe,children:Object(o.b)(O.a,{className:"ZVideoItem-toolbar",zvideo:c,author:Y,commentsShown:oe.commentsShown,onCommentButtonClick:function(e,t){return re(t)},renderOptions:F,renderActionButtons:V})})),Object(o.b)(C.a,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:c,shown:oe.commentsShown,commentPattern:oe.commentPattern,autoFocus:oe.autoFocus,onClose:function(){return re(Object.assign(Object.assign({},oe),{},{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})})}T.defaultProps={renderOptions:function(){return[null]},truncateDisabled:!0};var E=Object(c.compose)(Object(k.a)((function(e){var t=e.zvideo;return{content:{type:"Zvideo",token:String(t.id)},extra:{mediaInfo:{videoInfo:{videoId:t.id}}}}})),Object(l.connect)((function(e,t){return Object.assign(Object.assign({},t),{},{zvideo:Object.assign(Object.assign({},t.zvideo),{},{creationRelationship:Object(g.c)(t.zvideo)})})})))(T)},1228:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var a=n(34),o=n.n(a),r=n(23),i=n.n(r),c=n(28),l=n.n(c),s=n(27),u=n.n(s),d=n(29),b=n.n(d),f=n(19),p=n.n(f),h=n(42),m=n.n(h),v=n(0),g=n(50),O=n(13),j=n.n(O),y=n(1290),C=n.n(y),w=n(70),x=n.n(w),k=n(8),S=["className","url","alt","threshold","thumbnail"];function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return b()(this,n)}}function A(e,t,n){var a=new Image;return a.addEventListener("load",t),a.onerror=n,a.src=e,a}var I=function(e){u()(n,e);var t=R(n);function n(){var e;i()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={thumbnailLoaded:!1,loaded:!1,vagued:!0,computedWidth:e.props.width,computedHeight:e.props.height},e.wrapperNode=null,e.hasLoaded=!1,e.loadThumbnail=function(){var t=e.props,n=t.onLoadImageFail,a=t.onLoadImageTimeout;e.thumbnail=A(e.props.thumbnail,e.handleThumbnailLoaded,(function(){n&&n({type:"thumbnail",url:e.props.thumbnail})})),a&&setTimeout((function(){e.thumbnail&&!e.thumbnail.complete&&a({type:"thumbnail",url:e.props.thumbnail})}),3e3)},e.loadImage=function(){var t=e.props,n=t.onLoadImageFail,a=t.onLoadImageTimeout;e.image=A(e.props.url,e.handleImageLoaded,(function(){n&&n({type:"image",url:e.props.url})})),a&&setTimeout((function(){e.image&&!e.image.complete&&a({type:"image",url:e.props.url})}),3e3)},e.handleObserve=function(t){t&&e.hasLoaded||t&&(e.hasLoaded=!0,e.loadThumbnail(),e.loadImage())},e.handleThumbnailLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"thumbnail",url:e.props.thumbnail});var n=e.state,a=n.computedWidth;if(!n.computedHeight){var o=e.thumbnail,r=o.naturalWidth,i=o.naturalHeight*(Number(a)/r);e.setState({computeHeight:i})}e.setState({thumbnailLoaded:!0})},e.handleImageLoaded=function(){var t=e.props.onLoadImageSuccess;t&&t({type:"image",url:e.props.url}),e.setState({loaded:!0}),e.timeout=window.setTimeout((function(){return e.setState({vagued:!1})}),500)},e}return l()(n,[{key:"componentDidMount",value:function(){if(this.wrapperNode){var e=Object(g.findDOMNode)(this.wrapperNode),t=this.state,n=t.computedWidth,a=t.computedHeight;this.setState({computeWidth:n||e.offsetWidth,computeHeight:a||e.offsetHeight})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.thumbnail&&this.thumbnail.removeEventListener("load",this.handleThumbnailLoaded),this.image&&this.image.removeEventListener("load",this.handleImageLoaded)}},{key:"render",value:function(){var e=this,t=x()(this.props,["onLoadImageFail","onLoadImageTimeout","onLoadImageSuccess"]),n=t.className,a=t.url,r=t.alt,i=t.threshold,c=t.thumbnail,l=o()(t,S),s=this.state,u=s.thumbnailLoaded,d=s.loaded,b=s.vagued,f=s.computedWidth,p=s.computedHeight;if(!b)return Object(k.g)("img",m()({className:n,width:f,src:a,alt:r},l));var h=C.a;return Object(k.g)(h,{rootMargin:"".concat(i,"px 0px ").concat(i,"px 0px"),onChange:this.handleObserve,className:j()("VagueImage",n),ref:function(t){e.wrapperNode=t},style:Object.assign(Object.assign({},f&&{width:"".concat(f,"px")}),p&&{height:"".concat(p,"px")}),"data-src":a},Object(k.g)("div",{className:j()("VagueImage-mask",{"is-active":!d}),style:u?{backgroundImage:"url(".concat(c,")")}:{}}),d&&Object(k.g)("img",{className:"VagueImage-innerLarge",src:a,alt:r}))}}]),n}(v.Component);I.defaultProps={threshold:200};var T=I},1230:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(1);function o(e){var t=e.annotationDetail;if(!t||!t.showOuter)return null;var n=t.reason,o=t.reasonDescription;return Object(a.b)("span",{className:"AnnotationTag",children:32300===n?"该内容已被标记":o})}},1231:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(0),u=n(3),d=n.n(u),b=n(95),f=n.n(b),p=n(433),h=n(88),m=n(289);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var g={zhihu:"注册或登录",wechat:"使用微信快速登录",weibo:"使用微博快速登录",qq:"使用 QQ 快速登录"},O={qq:"qqconn",weibo:"sina",wechat:"wechat_mp"},j=function(e){Object(r.a)(n,e);var t=v(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).jumpToOAuthUrl=function(t){var n=e.props.redirectUrl,a=void 0===n?location.href:n,o=Object(m.c)(a),r=o.utm_source,i=o.utm_medium,c=f()(navigator.userAgent).isZhihu;location.href="zhihu"!==t?"https://www.zhihu.com/oauth/redirect/login/".concat(O[t],"?next=/oauth/account_callback&from=").concat(encodeURIComponent(a),"&utm_source=").concat(r,"&ref_source=").concat(i):c?"zhihu://signin?next=".concat(a):"https://www.zhihu.com/signin?next=".concat(a).concat(r?"?utm_source=".concat(r):"")},e.renderSignButtons=function(){var t=e.props.buttons;return"string"==typeof t?e.renderSingleSignButton({name:t}):t.map((function(t){return"string"==typeof t?e.renderSingleSignButton({name:t}):"object"==typeof t?e.renderSingleSignButton(t):null}))},e.renderSingleSignButton=function(t){var n=t.name,a=t.text,o=t.fill,r=t.color,i="#fff"===o||"#ffffff"===o;return Object.keys(g).includes(n)?Object(l.b)("button",{className:"SignInModal-button-".concat(n),style:{backgroundColor:o,borderColor:i?"#0f88eb":o,color:i?"#0f88eb":r},onClick:function(){e.jumpToOAuthUrl(n)},children:a||g[n]},n):null},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.urlScheme,a=this.props.title||"".concat(n?"打开 App 或":"","登录后继续操作");return Object(l.b)(h.b,{size:"small",className:"SignInModal",title:a,onClose:t,children:Object(l.b)(p.a,{module:"SignForm",moduleName:a,trackCardShow:!0,children:Object(l.c)("div",{className:"SignInModal-content",children:[n&&Object(l.b)(m.a,{className:"SignInModal-openInAppButton",href:n,children:"立即打开 App"}),this.renderSignButtons()]})})})}}]),n}(s.Component);j.propTypes={onClose:d.a.func.isRequired,urlScheme:d.a.string,redirectUrl:d.a.string,buttons:d.a.oneOfType([d.a.array,d.a.string])},j.defaultProps={buttons:["zhihu"]}},1232:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n(21),i=n(40),c=n(504),l=function(){return Object(a.b)("div",{className:"LabelContainer-loading"})};t.a=function(e){var t=e.useOldLabels,s=e.item,u=e.abnormalDetailProps,d=e.collapseReasonProps,b=e.showDeleteButton,f=e.inviter,p=s.type,h=s.id,m=s.isLabeled,v=Object(r.useDispatch)(),g=Object(r.useSelector)((function(e){return t||u||d?{}:b?{thankInviterInfo:f}:Object(c.c)(e,s)})),O=Object(i.e)((function(){return n.e(34).then(n.bind(null,2890))}));return Object(o.useEffect)((function(){m&&!g&&p&&h&&v(Object(c.e)(p,h))}),[v,p,h,m,g]),O?Object(a.b)(O,Object.assign({data:g},e)):m&&!t?Object(a.b)(l,{}):null}},1245:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","data-new-api":"Wechat24","data-old-api":"WeChatMessage"},e),{className:"Zi Zi--WeChatMessage"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{fill:"#07C160",d:"M19.918 18.357c1.27-.921 2.082-2.282 2.082-3.795 0-2.772-2.698-5.02-6.024-5.02-3.327 0-6.024 2.248-6.024 5.02 0 2.772 2.697 5.02 6.024 5.02.665 0 1.327-.092 1.966-.275l.177-.027c.116 0 .221.036.32.092l1.32.762.115.038a.202.202 0 00.186-.124.202.202 0 00.015-.077l-.032-.147-.272-1.012-.021-.129a.4.4 0 01.168-.326zM9.23 4C5.237 4 2 6.697 2 10.024c0 1.815.973 3.45 2.497 4.554a.48.48 0 01.203.392l-.025.153-.326 1.215-.039.176c0 .134.108.242.24.242l.14-.045 1.583-.914a.756.756 0 01.384-.111l.212.031c.767.22 1.562.332 2.36.331l.397-.01a4.655 4.655 0 01-.243-1.476c0-3.034 2.952-5.494 6.593-5.494l.392.01C15.824 6.201 12.835 4 9.23 4zm4.739 9.76a.803.803 0 110-1.605.803.803 0 010 1.604v.001zm4.016 0a.803.803 0 110-1.605.803.803 0 010 1.604v.001zM6.82 9.06a.963.963 0 110-1.927.963.963 0 010 1.927zm4.82 0a.964.964 0 110-1.927.964.964 0 010 1.927z",clipRule:"evenodd"}))}function l(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","data-new-api":"Wechat24","data-old-api":"WeChat"},e),{className:"Zi Zi--WeChat"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{fill:"#07C160",d:"M19.918 18.357c1.27-.921 2.082-2.282 2.082-3.795 0-2.772-2.698-5.02-6.024-5.02-3.327 0-6.024 2.248-6.024 5.02 0 2.772 2.697 5.02 6.024 5.02.665 0 1.327-.092 1.966-.275l.177-.027c.116 0 .221.036.32.092l1.32.762.115.038a.202.202 0 00.186-.124.202.202 0 00.015-.077l-.032-.147-.272-1.012-.021-.129a.4.4 0 01.168-.326zM9.23 4C5.237 4 2 6.697 2 10.024c0 1.815.973 3.45 2.497 4.554a.48.48 0 01.203.392l-.025.153-.326 1.215-.039.176c0 .134.108.242.24.242l.14-.045 1.583-.914a.756.756 0 01.384-.111l.212.031c.767.22 1.562.332 2.36.331l.397-.01a4.655 4.655 0 01-.243-1.476c0-3.034 2.952-5.494 6.593-5.494l.392.01C15.824 6.201 12.835 4 9.23 4zm4.739 9.76a.803.803 0 110-1.605.803.803 0 010 1.604v.001zm4.016 0a.803.803 0 110-1.605.803.803 0 010 1.604v.001zM6.82 9.06a.963.963 0 110-1.927.963.963 0 010 1.927zm4.82 0a.964.964 0 110-1.927.964.964 0 010 1.927z",clipRule:"evenodd"}))}},1246:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24","data-new-api":"Weibo24","data-old-api":"Weibo"},e),{className:"Zi Zi--Weibo"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{fill:"#FB6622",d:"M15.518 3.06c8.834-.854 7.395 7.732 7.394 7.731-.625 1.44-1.673.31-1.673.31.596-7.52-5.692-6.33-5.692-6.33-.898-1.067-.03-1.71-.03-1.71zm4.13 6.985c-.66 1.01-1.376.126-1.375.126.205-3.179-2.396-2.598-2.396-2.598-.72-.765-.091-1.346-.091-1.346 4.882-.55 3.863 3.818 3.863 3.818zM5.318 7.52s4.615-3.86 6.443-1.328c0 0 .662 1.08-.111 2.797.003-.003 3.723-1.96 5.408.16 0 0 .848 1.094-.191 2.648 0 0 2.918-.099 2.918 2.715 0 2.811-4.104 6.44-9.315 6.44-5.214 0-8.026-2.092-8.596-3.102 0 0-3.475-4.495 3.444-10.33zm10.448 7.792s.232-4.41-5.71-4.207c-6.652.231-6.58 4.654-6.58 4.654.022.39.098 3.713 5.843 3.713 5.98 0 6.447-4.16 6.447-4.16zm-9.882.86s-.06-3.632 3.804-3.56c3.412.06 3.206 3.164 3.206 3.164s-.026 2.98-3.684 2.98c-3.288 0-3.326-2.584-3.326-2.584zm2.528 1.037c.672 0 1.212-.447 1.212-.998 0-.55-.543-.998-1.212-.998-.672 0-1.215.447-1.215.998 0 .551.546.998 1.215.998z",clipRule:"evenodd"}))}},1260:function(e,t,n){"use strict";var a=n(25),o=n.n(a),r=n(34),i=n.n(r),c=n(42),l=n.n(c),s=n(224),u=n(0),d=n(72),b=n(33),f=n(131),p=n(8),h=["childItems","isMenuToggler","showTogglerIcon"];var m=function(e){return"undefined"!=typeof navigator&&/Mac/i.test(navigator.userAgent)?e.replace(/\+/g,""):e.replace("⌘","Ctrl").replace("⌥","Alt").replace("⇧","Shift")},v=function(e){return{background:e.colors.GBL01A,svg:{fill:e.colors.GBK99B},".togglerIcon":{borderLeftColor:e.colors.GBK99B},color:e.colors.GBK99B}},g=function(e){return{background:e.colors.GBK10A,svg:{fill:e.colors.GBL01A},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},O=function(e){return{svg:{fill:e.colors.GBL01A},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},j={name:"5barcq",styles:"width:24px;height:24px;position:relative;border-radius:4px;"},y=Object(u.forwardRef)((function(e,t){var n,a=e.icon,o=e.className,r=e.label,i=e.shortcut,c=e.isActive,u=e.firstLine,f=e.text,h=e.onClick,y=e.isMenuItem,C=void 0!==y&&y,w=e.sectionFirst,x=e.sectionLast,k=e.disabled,S=e.isMenuOpen,R=e.showTogglerIcon,A=e.isMenuToggler,I=e.menuItemText,T=u||!C,E=!u||C,N=!u||C,B=r&&r!==f&&r!==I||i,z=R&&Object(p.g)("div",{className:"togglerIcon",css:function(e){return Object.assign(Object.assign({position:"absolute"},u?{right:"-4px",bottom:"-4px"}:{right:"-1px",bottom:"-1px"}),{},{width:0,height:0,border:"4px solid transparent",borderLeft:"4px solid ".concat(e.colors.GBL05A),transform:"rotate(45deg)"})}});return Object(p.g)(d.a,l()({as:b.c,zaType:"Button",zaText:r,ref:t,preset:b.b.Plain,className:o,disabled:k,css:function(e){return{"&.Button.Button--plain":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},u?C?{padding:"4px 12px"}:{padding:"2px",margin:C?"0":"4px"}:Object.assign({},C?{padding:"10px 16px",textAlign:"left"}:{padding:"6px 16px 6px 12px"})),{},{fontWeight:e.fontWeights.bold,color:e.colors.GBL05A},C&&{width:"100%"}),{},{display:"flex",alignItems:"center"},N&&x&&{borderTopRightRadius:"4px",borderBottomRightRadius:"4px"}),N&&w&&{borderTopLeftRadius:"4px",borderBottomLeftRadius:"4px"}),(u||C)&&{borderRadius:"6px"}),c&&O(e)),{},{"&:hover":g(e)},S&&A&&Object.assign(Object.assign({},v(e)),{},{"&:hover":v(e)})),{},{"&:active":v(e)})}},"aria-label":r,"data-tooltip-position":C&&!u?"right":"bottom","data-tooltip-will-hide-on-click":!0},B&&{"data-tooltip":r+(i?" ".concat(m(i)):"")},{onClick:h}),T||u&&z?Object(p.g)("div",{css:j},T&&Object(p.g)(a,{css:function(e){return{color:e.colors.GBL05A}},center:!0}),u&&z):null,E&&Object(p.g)("span",{css:Object(s.a)(Object.assign(Object.assign({},(!C||u)&&{marginLeft:"4px"}),{},{width:"100%"}),"")},C?null!==(n=null!=I?I:f)&&void 0!==n?n:r:null!=f?f:r),!u&&z)}));t.a=function(e){var t=e.childItems,n=e.isMenuToggler,a=e.showTogglerIcon,r=i()(e,h),c=Object(u.useState)(!1),d=o()(c,2),b=d[0],m=d[1];if(n){if(0===t.length)return null;if(1===t.length)return Object(p.g)(y,l()({},r,t[0]));var v=Object(p.g)(y,l()({},r,{isMenuToggler:!0,isMenuOpen:b,showTogglerIcon:a}));return Object(p.g)(f.c,{toggler:v,onOpen:function(){return m(!0)},onClose:function(){return m(!1)},arrowed:!1,menuContainerClassName:"ToolbarV2Menu-container"},Object(p.g)("div",{css:Object(s.a)({display:e.firstLine?"flex":"block"},"")},t.map((function(t){return Object(p.g)(y,l()({key:t.label,isMenuItem:!0,firstLine:e.firstLine},t))}))))}return Object(p.g)(y,e)}},1276:function(e,t,n){},1288:function(e,t,n){e.exports=n.p+"assets/background_blue.dc578fa3.svg"},1289:function(e,t,n){var a=n(667),o=n(223),r=n(382),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var l=null==n?0:r(n);return l<0&&(l=i(c+l,0)),a(e,o(t,3),l)}},1290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(1419);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,a;c(this,t);for(var o=arguments.length,r=Array(o),s=0;s<o;s++)r[s]=arguments[s];return n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.state={inView:!1},a.node=null,a.handleNode=function(e){a.node&&(0,i.unobserve)(a.node),a.node=e,a.observeNode(),a.props.innerRef&&a.props.innerRef(e)},a.handleChange=function(e){a.setState({inView:e}),a.props.onChange&&a.props.onChange(e)},l(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidUpdate",value:function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||((0,i.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,i.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,i.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,a=e.rootMargin,o=e.rootId;(0,i.observe)(this.node,this.handleChange,{threshold:t,root:n,rootMargin:a},o)}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,o=e.tag,i=(e.innerRef,e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"])),c=this.state.inView;return r.createElement(o,a({},i,{ref:this.handleNode}),"function"==typeof n?n(c):null,"function"==typeof t?t(c):t)}}]),t}(r.Component);s.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=s},1291:function(e,t,n){"use strict";t.a=function(e,t){return!!e&&(!!(t=t||e.type)&&(("answer"===t||"post"===t||"article"===t)&&(null===(n=e.settings)||void 0===n||null===(a=n.tableOfContents)||void 0===a?void 0:a.enabled)));var n,a}},1292:function(e,t,n){"use strict";var a=n(1420),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,r,i,c,l,s,u=!1;t||(t={}),n=t.debug||!1;try{if(i=a(),c=document.createRange(),l=document.getSelection(),(s=document.createElement("span")).textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",s.addEventListener("copy",(function(a){if(a.stopPropagation(),t.format)if(a.preventDefault(),void 0===a.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=o[t.format]||o.default;window.clipboardData.setData(r,e)}else a.clipboardData.clearData(),a.clipboardData.setData(t.format,e);t.onCopy&&(a.preventDefault(),t.onCopy(a.clipboardData))})),document.body.appendChild(s),c.selectNodeContents(s),l.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(a){n&&console.error("unable to copy using execCommand: ",a),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),u=!0}catch(a){n&&console.error("unable to copy using clipboardData: ",a),n&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(r,e)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(c):l.removeAllRanges()),s&&document.body.removeChild(s),i()}return u}},1293:function(e,t,n){"use strict";var a=n(32),o=n(14),r=n(15),i=n(17),c=n(18),l=n(7),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(20),p=n(13),h=n.n(p),m=n(21),v=n(219),g=n(70),O=n.n(g),j=n(435),y=n(1394),C=n(63),w=n(30),x=["isMobile","column","avatar","avatarProps","noHoverCard","style","className","children"];function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var S=function(e){Object(i.a)(n,e);var t=k(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,o=t.column,r=o.title,i=o.imageUrl,c=o.id,l=t.avatar,u=t.avatarProps,d=t.noHoverCard,b=t.style,f=t.className,p=t.children,m=Object(a.default)(t,x),g=void 0===d?n:d;return e=l?Object(s.b)(v.a,Object.assign({url:i,alt:r},u)):p||r,g||(e=Object(s.b)(y.a,{toggler:e,id:c})),n&&w.D?e:Object(s.b)(j.a,{zaAction:"OpenUrl",zaEventType:"Click",zaType:"Text",children:Object(s.b)("a",Object.assign(Object.assign({style:b,className:h()("ColumnLink",f),href:"".concat(w.G,"/column/").concat(c)},O()(m,["dispatch"])),{},{children:e}))})}}]),n}(b.Component);S.propTypes={column:d.a.object.isRequired,avatar:d.a.bool,avatarProps:d.a.object,noHoverCard:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},S.defaultProps={avatar:!1},t.a=Object(f.compose)(Object(m.connect)((function(e){return{isMobile:Object(C.d)(e,{includeTablet:!0})}})))(S)},1294:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(58),f=n(153),p=n(149),h=n(1410),m=n(922),v=n(966),g=n(960),O=n(929),j=n(962),y=n(923),C=n(433);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var x=function(e){Object(r.a)(n,e);var t=w(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={commentPattern:"fixed",commentsShown:!1,commentsAutoFocus:!0},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.favlist,o=t.favlist,r=o.id,i=o.type,c=o.title,s=o.updatedTime,u=o.answerCount,d=o.followerCount,C=o.isFollowing,w=o.isPublic,x=o.creator,k=void 0===x?{}:x,S=o.commentCount,R=t.status,A=t.action,I=t.lastreadTouchable,T=t.zaInfos,E=T.follow,N=T.options,B=t.renderOptions,z=this.state,L=z.commentsShown,P=z.commentsAutoFocus,M=z.commentPattern,_="/collection/".concat(r),D=Object(l.b)("a",{href:_,target:"_blank",rel:"noopener noreferrer",children:c});if(n===m.c.plain)return Object(l.b)(m.e,{data:a,link:_,title:D});var F={id:r,type:i};return n===m.c.default?Object(l.b)(m.e,{data:a,link:_,title:Object(l.c)(b.Flex,{alignItems:"center",children:[D,!w&&Object(l.b)(b.Text,{color:"GBL05A",ml:".3em",children:Object(l.b)(h.a,{center:!0,size:18})})]}),meta:R||Object(l.c)(m.d,{children:["".concat(Object(f.toDateString)(s)," 更新"),"".concat(Object(p.formatNumber)(u)," 条内容"),"".concat(Object(p.formatNumber)(d)," 人关注")]}),extra:A}):Object(l.c)(m.e,{data:a,link:_,onRef:function(t){e.contentItem=t},title:D,lastreadTouchable:I,children:[Object(l.c)(m.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"关注数："}),Object(p.formatNumber)(d)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"最后更新于："}),Object(f.toDateString)(s)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"作者："}),Object(l.b)(y.a,{user:k})]})]},"favlist-item-cells"),Object(l.c)(m.a,{children:[Object(l.b)(O.a,Object.assign(Object.assign({},F),{},{isFollowing:C,zaId:E})),Object(l.b)(v.a,{onClick:this.handleCommentsShown,commentsShown:L,count:S}),Object(l.b)(j.a,Object.assign(Object.assign({},F),{},{title:c,authorName:k&&k.name})),B&&B((function(){return e.contentItem}),N)]},"favlist-item-actions"),Object(l.b)(g.a,{parent:a,commentPattern:M,shown:L,autoFocus:P,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);x.propTypes={preset:u.a.oneOf(Object.values(m.c)),zaInfos:u.a.shape({follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},x.defaultProps={preset:m.c.default,zaInfos:{}},t.a=Object(C.b)((function(e){var t=e.favlist,n=e.trackCardShow,a=void 0===n||n;return{module:"CollectionItem",card:{content:{type:"Collection",token:String(t.id),item_num:t.answerCount,follower_num:t.followerCount,publish_timestamp:1e3*t.updateTime,author_member_hash_id:(t.creator||{}).id}},trackCardShow:a}}))(x)},1295:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(436);function o(e){var t,n=e.isOrg,o=e.badgeV2,r=e.badge;if(!n)return!1;var i=Object(a.e)(o||r);return Boolean(null===(t=i.identity)||void 0===t?void 0:t.length)}},1296:function(e,t,n){"use strict";t.a=function(e){return e.componentList.filter(Boolean).filter((function(e){var t=e.component;return Boolean(t)})).map((function(e){return e.component}))}},1297:function(e,t,n){"use strict";var a=n(32),o=n(1),r=n(131),i=n(874),c=["checked","children"];t.a=function(e){var t=e.checked,n=e.children,l=Object(a.default)(e,c);return Object(o.c)(r.b,Object.assign(Object.assign({},l),{},{children:[Object(o.b)("span",{css:{display:"inline-block",width:24,marginLeft:-24},children:t&&Object(o.b)(i.a,{text:!0,center:!0})}),n]}))}},1298:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}));var a=["MEMBER_ANSWER_QUESTION","MEMBER_PUBLISH_EBOOK","MEMBER_CREATE_ARTICLE","MEMBER_ASK_QUESTION","MEMBER_CREATE_PIN","MEMBER_PUBLISH_LIVE_COURSE"],o=function(e){return a.includes(e.verb)},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.author.name;return n?"".concat(n,"：").concat(e):e}},1299:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(1),o=n(0),r=n.n(o),i=n(58),c=n(259),l=n(72),s={textAnswer:"textAnswer",videoAnswer:"videoAnswer"},u=[{key:s.textAnswer,name:"图文回答"},{key:s.videoAnswer,name:"视频回答"}];function d(e,t){var n=e.activeTabKey,o=e.onChange;return Object(a.b)(c.b,{children:u.map((function(e){var r=e.key,u=e.name;return Object(a.b)(l.a,{as:c.a,zaType:"Button",zaText:!0,css:{padding:"0 10px",":first-of-type":{paddingLeft:20}},children:Object(a.b)(i.Text,{ref:r===s.videoAnswer?t:null,onClick:function(){return o(r)},css:function(e){return Object.assign({color:e.colors.GBK03A,cursor:"pointer"},n===r&&{fontWeight:"bold",borderBottom:"4px solid ".concat(e.colors.GBL01A)})},children:u})},r)}))})}t.b=r.a.forwardRef(d)},1300:function(e,t,n){"use strict";n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return S})),n.d(t,"e",(function(){return R})),n.d(t,"a",(function(){return I}));var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(59),u=n.n(s),d=n(0),b=n(82),f=n.n(b),p=n(41),h=n.n(p),m=n(44),v=n.n(m),g=n(387),O=n.n(g),j=n(466);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var C={success:"success",fail:"fail",request:"request"},w="EDITABLE_STATSC";function x(){var e=h.a.get(w);e&&(e.forEach((function(e){v.a.increment(e)})),h.a.delete(w))}var k={get pageName(){return"UnknownPage"},reportRequest:u.a,reportSuccess:u.a,reportFail:u.a,recordError:function(e){return e},wrapAutoRecord:function(e){return e}},S=Object(d.createContext)(k),R=function(e){return f()((function(t){var n=Object(d.useContext)(S);return Object(l.b)(e,Object.assign({reporter:n},t))}),e)},A=function(e){Object(r.a)(n,e);var t=y(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidCatch",value:function(e,t){var n=this.props,a=n.reporter,o=n.name;throw a&&a.reportFail(o,e,{extra:{errorInfo:t}}),e}},{key:"render",value:function(){return this.props.children}}]),n}(d.Component),I=R(A);t.c=function(e){var t=function(t,n){v.a.increment("".concat(e,".").concat(t,".").concat(n,".count"))},n=function(e){return t(e,C.request)},a=function(e){return t(e,C.success)},o=function(t,n,a){n instanceof Error&&(Object(j.c)(n.message)||(v.a.increment([e,t,C.fail,n.name||"Unknown","count"].join(".")),function(t,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n instanceof Error&&(null===(a=window.Raven)||void 0===a||a.captureException(n,Object.assign({tags:{scope:"".concat(e,":").concat(t)}},o)))}(t,n,a)))},r=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.intent,c=void 0===i||i,l=r.success,s=void 0===l||l;return function(){try{c&&n(e);var r=function(){return s?a(e):void 0},i=t.apply(void 0,arguments);return O()(i)?i.then((function(e){return r(),e}),(function(t){throw o(e,t),t})):(r(),i)}catch(t){throw o(e,t),t}}};return{get pageName(){return e},reportRequest:n,reportSuccess:a,reportFail:o,wrapAutoRecord:r,recordError:function(e,t){return r(e,t,{success:!1})},stash:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length){var o=h.a.get(w)||[];o.push("".concat(e,".").concat(n.join("."),".count")),h.a.set(w,o)}}}}},1301:function(e,t,n){"use strict";var a=n(0),o=n(3),r=n.n(o),i=n(21),c=n(486);function l(e){var t=e.content,n=e.type,o=e.urlToken,r=Object(i.useDispatch)(),l=Object(a.useCallback)((function(){r(Object(c.a)({content:t,type:n,urlToken:o}))}),[r,t,n,o]),s=Object(i.useSelector)((function(e){return Object(c.c)(e,{type:n,urlToken:o})}));return Object(a.useEffect)((function(){s||l()}),[s,l]),null}l.propTypes={content:r.a.string.isRequired,type:r.a.oneOf(["answer","article"]).isRequired,urlToken:r.a.string.isRequired},t.a=l},1322:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),o=n(13),r=n.n(o);function i(e){var t=e.className;return Object(a.b)("span",{className:r()("ActivityItem-StickyMark",t),children:"置顶"})}},1326:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(0),u=n(20),d=n(21),b=n(3),f=n.n(b),p=n(33),h=n(96),m=n(88),v=n(899),g=n(173),O=n(153),j=n(149),y=n(433),C=n(30),w=n(1022),x=n(221),k=n(154),S=n(922),R=n(1293),A=n(929),I=n(962);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var E=function(e){Object(r.a)(n,e);var t=T(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={showQuit:!1},e.onClose=function(){e.setState({showQuit:!1})},e.handleQuitButton=function(){e.setState({showQuit:!0})},e.handleQuitColumn=function(t,n){e.props.fetchQuitColumn(t,n),e.setState({showQuit:!1})},e}return Object(o.a)(n,[{key:"renderStatus",value:function(){var e=this.props,t=e.column,n=t.itemsCount,a=t.voteupCount,o=e.isProfile,r=e.urlToken===(e.currentUser||{}).urlToken;return Object(l.c)(S.d,{children:["".concat(Object(j.formatNumber)(n)," 篇内容"),"".concat(Object(j.formatNumber)(a)," 赞同"),o&&r&&this.renderProfileContent()]})}},{key:"renderMeta",value:function(){var e=this.props,t=e.preset,n=e.column.intro;return Object(l.b)("div",{className:"ColumnItem-meta",children:Object(l.c)(l.a,{children:[n,t===S.c.default&&this.renderStatus()]})})}},{key:"renderProfileContent",value:function(){var e=this,t=this.props,n=t.column,a=n.id,o=n.author,r=t.contributions,i=this.state.showQuit,c=o.urlToken===r.urlToken;return Object(l.c)(l.a,{children:[Object(l.b)(g.a,{toggler:Object(l.b)(p.c,{preset:"plain",icon:v.a}),placement:"top",className:"ColumnItem-more",arrowed:!0,children:c?Object(l.b)(p.c,{component:"a",preset:"plain",href:"".concat(C.G,"/column/").concat(a),className:"ColumnItem-botton",children:"管理专栏"}):Object(l.b)(p.c,{preset:"plain",className:"ColumnItem-botton",onClick:this.handleQuitButton,children:"退出专栏"})}),Object(l.b)(m.b,{onClose:this.onClose,title:"确定退出该专栏吗？",children:i&&Object(l.b)("div",{className:"ColumnAuthorsList-modal",children:Object(l.c)(h.a,{direction:"horizontal",children:[Object(l.b)(p.c,{onClick:function(){return e.onClose},children:"取消"}),Object(l.b)(p.c,{className:"ColumnPosts-confirmButton",onClick:function(){return e.handleQuitColumn(r.urlToken,a)},color:"blue",preset:"primary",children:"确定"})]})})})]})}},{key:"renderInteractiveContent",value:function(){var e=this,t=this.props,n=t.column,a=n.id,o=n.type,r=n.articlesCount,i=n.followers,c=n.lastArticle,s=n.isFollowing,u=n.author,d=n.title,b=t.zaInfos,f=b.follow,p=b.options,h=t.renderOptions,m={id:a,type:o},v=(c||{}).updated;return Object(l.c)(l.a,{children:[Object(l.c)(S.b,{className:"ContentItem-counts",children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"文章："}),Object(j.formatNumber)(r)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"最后更新于："}),Object(O.toRelativeString)(v)||"暂未更新"]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"关注者："}),i]})]}),Object(l.c)(S.a,{children:[Object(l.b)(A.a,Object.assign(Object.assign({},m),{},{isFollowing:s,zaId:f})),Object(l.b)(I.a,Object.assign(Object.assign({},m),{},{title:d,authorName:u&&u.name,href:"".concat(C.G,"/column/").concat(a)})),h&&h((function(){return e.contentItem}),p)]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.column,o=t.lastreadTouchable,r=Object(l.b)(R.a,{column:a,target:"_blank"});return Object(l.b)(S.e,{className:"ColumnItem",data:a,link:"".concat(C.G,"/column/").concat(a.id),onRef:function(t){return e.contentItem=t},title:r,meta:this.renderMeta(),lastreadTouchable:o,children:n===S.c.interactive&&this.renderInteractiveContent()})}}]),n}(s.Component);E.propTypes={preset:f.a.oneOf(Object.values(S.c)),isProfile:f.a.bool,zaInfos:f.a.shape({follow:f.a.number,options:f.a.number}),renderOptions:f.a.func},E.defaultProps={preset:S.c.default,isProfile:!1,zaInfos:{}};t.a=Object(u.compose)(Object(w.a)((function(e){var t=e.column;return{content:{type:"Column",token:String(t.id)}}})),Object(y.b)((function(e){var t=e.column,n=e.trackCardShow,a=void 0===n||n;return{module:"ColumnItem",card:{content:{type:"Column",token:t.id,item_num:t.articlesCount,follower_num:t.followers,publish_timestamp:1e3*t.updated,author_member_hash_id:(t.author||{}).id}},trackCardShow:a}})),x.a,Object(d.connect)(null,{fetchQuitColumn:k.e}))(E)},1327:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n(13),i=n.n(r),c=n(432),l=n(490);t.a=function(e){var t=e.show,n=e.setModal,r=e.children,s=e.className,u=e.onCancel,d=e.hideIcon,b=e.maskClosable,f=void 0===b||b,p=function(){n?n(!1):u&&u()},h=Object(o.useRef)();return Object(o.useEffect)((function(){var e=null;return t?(document.body.style.overflow="hidden",e=Object(l.a)(h.current)):document.body.style.overflow="auto",function(){e&&e()}}),[t]),t?Object(a.b)("div",{className:s,children:Object(a.c)("div",{ref:h,children:[Object(a.b)("div",Object.assign({className:i()({"ModalExp-background":t})},f&&{onClick:p})),Object(a.c)("div",{className:i()("ModalExp-content",{"ModalExp-modalShow":t}),onClick:function(e){e.stopPropagation()},children:[!d&&Object(a.b)(c.a,{size:24,fill:"#d3d3d3",className:"ModalExp-closeIcon",onClick:p}),r]})]})}):null}},1329:function(e,t,n){"use strict";var a=n(47),o=n(0),r=n(113),i=n.n(r),c="function"==typeof ResizeObserver?function(e,t){var n=new ResizeObserver((function(e){return t(e[0].contentRect)}));return n.observe(e),function(){n.disconnect()}}:function(e,t){var n,a=function(){var a=e.getBoundingClientRect();!(n&&["left","top","width","height"].every((function(e){return n[e]===a[e]})))&&(n=a,t(a))},o=new(window.MutationObserver||window.WebKitMutationObserver)(i()(a,100));return o.observe(e,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),a(),function(){o.disconnect()}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(o.useState)(e),n=Object(a.a)(t,2),r=n[0],i=n[1],l=Object(o.useState)(),s=Object(a.a)(l,2),u=s[0],d=s[1];return Object(o.useEffect)((function(){if(u)return c(u,i)}),[u]),[d,r]}},1331:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(947),f=n(149),p=n(434),h=n(1121),m=n(994);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(r.a)(n,e);var t=v(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isFetching,n=e.isDrained,a=e.items,o=e.voteupCount,r=e.onLoad,i=e.text,c=e.isRewardList,s=e.notice,u=e.type,d=e.currentUser,v={getContainer:function(e){return e}};return Object(l.c)("div",{className:"VoterList",children:[Object(l.b)(h.a,{header:"".concat(Object(f.formatNumber)(o)," 人").concat(i||"赞同了")}),c&&s&&Object(l.b)("div",{className:"VoterList-description",children:Object(l.b)("p",{children:s})}),Object(l.b)(p.b,Object.assign(Object.assign({className:"VoterList-content",isLoading:t,isDrained:n,onLoad:r,placeholder:Object(l.b)(p.a,{className:"List-item",withAvatar:!0})},v),{},{children:a&&a.map((function(e,t){return Object(l.b)(b.a,{children:Object(l.b)(m.a,{currentUser:d,user:e,isRewardList:c,meta:null,type:u,userLinkV2:!0})},"".concat(t,".").concat(e.urlToken))}))}))]})}}]),n}(d.Component);g.propTypes={isFetching:u.a.bool.isRequired,isDrained:u.a.bool.isRequired,items:u.a.array.isRequired,voteupCount:u.a.number.isRequired,text:u.a.string.isRequired,onLoad:u.a.func.isRequired,isRewardList:u.a.bool,type:u.a.string,currentUser:u.a.object};t.a=g},1333:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"EyeSlashFill24","data-old-api":"EyeSlash"},e),{className:"Zi Zi--EyeSlash"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M12.001 20.717c2.78 0 4.91-.836 6.508-1.948l-4.217-3.49a4 4 0 01-5.942-4.917L3.955 6.724a12.172 12.172 0 00-2.02 3.168 5.882 5.882 0 00.392 5.534c1.395 2.207 4.334 5.29 9.674 5.29zM10.038 8.513l-4.182-3.46c1.533-1.04 3.539-1.77 6.145-1.77 6.107 0 8.918 4.01 10.066 6.615a5.88 5.88 0 01-.392 5.525c-.331.525-.75 1.1-1.268 1.671l-4.615-3.819a4 4 0 00-5.755-4.762zm-.46 2.865a2.5 2.5 0 003.486 2.885l-3.486-2.885zm4.914.821l-3.155-2.61a2.503 2.503 0 013.155 2.61z",fillRule:"evenodd",clipRule:"evenodd"}),o.a.createElement("path",{d:"M21.584 20.47a.75.75 0 01-1.055.114l-18.6-15a.75.75 0 01.942-1.168l18.6 15a.75.75 0 01.113 1.055z",fillRule:"evenodd",clipRule:"evenodd"}))}},1349:function(e,t,n){"use strict";var a=n(25);Object.defineProperty(t,"__esModule",{value:!0}),t.stripHTML=t.truncateHTML=t.getBlockType=t.parseTag=t.parseTagGroup=t.parseAttrs=t.TAG_RE=t.TAG_RE_TEMPLATE=void 0;var o=["img","br"],r=/([\w|-]+)(?:="([^"]*)")?/;function i(e){var t={};if((e=e.trim()).length)for(var n,o=new RegExp(r.source,"g");n=o.exec(e);){var i=n.slice(1),c=a(i,2),l=c[0],s=c[1];t[l]=s}return t}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a(e,5),r=n[0],c=n[1],l=n[2],s=n[3],u=n[4],d="open";"/"===c?d="close":(o.includes(l)||"/"===u)&&(d="self-close");var b=t.parseAttrs?i(s):s;return{tagHTML:r,tagName:l,tagType:d,attrs:b}}function l(e){var t=e.tagName,n=e.attrs;return"string"==typeof n?t:"invisible"===n.class?"invisible":"video-box"===n.class?"video-box":["link-card","mcn-link-card","metalink"].includes(n["data-draft-type"])?"link-card":t}function s(e){switch(e){case"invalid":return{type:"invalid"};case"noscript":case"figcaption":case"video-box":case"link-card":return{type:"replace",content:" "};case"div":case"br":case"figure":case"img":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"pre":case"code":case"blockquote":case"ul":case"ol":case"li":return{type:"replace-self",content:" "};case"sup":return{type:"replace-self",content:""};case"invisible":return{type:"hide"};default:return null}}function u(e){return!!(e.h1||e.h2||e.h3||e.h4||e.h5||e.h6||e.blockquote||e.pre||e.img||e.sup||e["video-box"]||e["link-card"])||(e.br||0)+(e.p||0)+(e.li||0)>1}t.TAG_RE_TEMPLATE=new RegExp(/<(\/?)(#TAG_NAME#)\s*(#TAG_ATTRS#)\s*(\/?)>/.source.replace("#TAG_ATTRS#",/[^>]*/.source)),t.TAG_RE=new RegExp(t.TAG_RE_TEMPLATE.source.replace("#TAG_NAME#",/[\w|-]+/.source)),t.parseAttrs=i,t.parseTagGroup=c,t.parseTag=function(e,n){var a=t.TAG_RE.exec(e);if(a)return c(a,n)},t.getBlockType=l,t.truncateHTML=function(e){for(var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.endsWith,d=void 0===i?"…":i,b=r.placeholders,f=void 0===b?{}:b,p=[],h=[],m=[],v={},g={},O=new RegExp(t.TAG_RE.source,"g"),j=0,y=0,C=0,w=0,x=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.push(e),t||(j+=e.length),y+=e.length};n=O.exec(e);){var k=c(n,{parseAttrs:!0}),S=k.tagHTML,R=k.tagType,A=k.tagName,I="close"===R&&o.includes(A)?"invalid":l("close"!==R?k:h[h.length-1]),T=f[I]?{type:"replace",content:f[I]}:s(I);"close"!==R&&(v[I]=(v[I]||0)+1);var E=e.slice(y,n.index),N=E.length;if(j+N>=a&&0===C&&0===w){for(x(E.slice(0,a-j));m.length;){var B=m.pop();p.push("</".concat(B.tagName,">"))}break}0===C&&x(E,0!==w),"invalid"!==I&&("open"===R?h.push(k):"close"===R&&h.pop(),T?("replace"===T.type&&(0===C&&"close"!==R&&p.push(T.content),"open"===R?C++:"close"===R&&C--),0===C&&"replace-self"===T.type&&p.push(T.content),0===C&&"hide"===T.type&&("open"===R?w++:"close"===R&&w--,p.push(S))):0===C&&(p.push(S),"open"===R?m.push(k):"close"===R&&m.pop())),"video-box"!==I||g.type||"string"==typeof k.attrs||(g.type="video",g.url=k.attrs["data-poster"],g.id=k.attrs["data-lens-id"]),y=O.lastIndex}if(j<a){var z=e.slice(y).slice(0,a-j);x(z)}var L=j>a||j===a&&y<e.length||u(v);return{isTruncated:L,thumbnailInfo:g,content:"".concat(p.join("").trim().replace(/\s{2,}/g," ")).concat(L?d:"")}},t.stripHTML=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}},1382:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(34),o=n.n(a),r=(n(0),n(1260)),i=n(8),c=["toolbarButton"];function l(e){var t=e.toolbarButton,n=void 0===t?r.a:t,a=o()(e,c);return Object(i.g)("div",null,Object(i.g)(n,a))}},1383:function(e,t,n){"use strict";var a=n(42),o=n.n(a),r=(n(0),n(2806)),i=n(343),c=n(8);t.a=function(e){var t=e.toolbarButton,n=void 0===t?i.a:t;return Object(c.g)("div",null,Object(c.g)(n,o()({label:e.isActive?"删除目录":"添加目录",shortcut:"⌘+⇧+0",icon:r.b},e)))}},1394:function(e,t,n){"use strict";var a=n(32),o=n(14),r=n(15),i=n(17),c=n(18),l=n(7),s=n(1),u=n(0),d=n(21),b=n(1012),f=n(1077),p=n(2077),h=n(153),m=n(26),v=n(151),g=n(30),O=n(383),j=["toggler","column","id","isLoading","onRef"];function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var C=function(e){Object(i.a)(n,e);var t=y(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.dispatch,a=t.id;n(Object(O.b)(a))},e.track=function(){var t,n=e.props.column;e.hoverCardElement&&n&&(m.a.setModule(e.hoverCardElement,{module:"ColumnItem"},{card:{content:{type:"Column",token:n.id,item_num:n.articlesCount,follower_num:n.followers,publish_timestamp:1e3*n.updated,author_member_hash_id:null===(t=n.author)||void 0===t?void 0:t.id}}}),m.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.column,r=t.id,i=t.isLoading,c=t.onRef,l=Object(a.default)(t,j),u=o||{},d=u.title,m=u.intro,O=u.itemsCount,y=u.voteupCount,C=u.lastArticle,w=u.articlesCount,x=u.followers,k=C||{},S=k.title,R=k.created,A="".concat(g.G,"/column/").concat(r);return Object(s.c)(f.b,Object.assign(Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l),{},{onRef:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t},children:[Object(s.b)(f.a,{title:Object(s.b)("a",{target:"_black",href:A,children:d})}),m,C&&Object(s.c)("div",{children:[Object(s.b)(p.a,{text:!0,center:!0})," 最后更新",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),S,Object(s.c)("span",{children:["（",Object(h.toRelativeString)(R),"）"]})]}),Object(s.b)("div",{children:Object(s.c)(b.a,{children:[Object(s.b)(b.a.Item,{tag:v.a,preset:"plain",a:!0,to:A,name:O>=0?"内容":"文章",value:null!=O?O:w}),Object(s.b)(b.a.Item,{tag:v.a,preset:"plain",a:!0,to:A,name:y>=0?"赞同":"关注",value:null!=y?y:x})]})})]}))}}]),n}(u.Component);t.a=Object(d.connect)((function(e,t){var n=t.id,a=e.entities.columns,o=e.loading.local;return{column:a[n],isLoading:Boolean(o["column/".concat(n)])}}))(C)},1400:function(e,t,n){"use strict";var a=n(37),o=n(152),r=n(1401);e.exports=function(e){if(!Number.isInteger(e)&&e!==1/0||!(e>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up");var t=[],n=0,i=function(){n--,t.length>0&&t.shift()()},c=function(){var e=o(a.mark((function e(t,o){var c,l,s,u,d=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n++,c=d.length,l=new Array(c>2?c-2:0),s=2;s<c;s++)l[s-2]=d[s];return u=r.apply(void 0,[t].concat(l)),o(u),e.prev=4,e.next=7,u;case 7:e.next=11;break;case 9:e.prev=9,e.t0=e.catch(4);case 11:i();case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t,n){return e.apply(this,arguments)}}(),l=function(r,i){for(var l=arguments.length,s=new Array(l>2?l-2:0),u=2;u<l;u++)s[u-2]=arguments[u];t.push(c.bind.apply(c,[null,r,i].concat(s))),o(a.mark((function o(){return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.resolve();case 2:n<e&&t.length>0&&t.shift()();case 3:case"end":return a.stop()}}),o)})))()},s=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return new Promise((function(t){return l.apply(void 0,[e,t].concat(n))}))};return Object.defineProperties(s,{activeCount:{get:function(){return n}},pendingCount:{get:function(){return t.length}},clearQueue:{value:function(){t.length=0}}}),s}},1401:function(e,t,n){"use strict";var a=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return new Promise((function(t){t(e.apply(void 0,n))}))};e.exports=a,e.exports.default=a},1403:function(e,t,n){var a=n(19);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},1406:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(87),o=n(61);function r(e,t){Object(o.a)(2,arguments);var n=Object(a.a)(e),r=Object(a.a)(t);return n.getTime()<r.getTime()}},1408:function(e,t,n){e.exports=n.p+"assets/liukanshan_coin.29bf8333.svg"},1410:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"LockFill24","data-old-api":"Lock"},e),{className:"Zi Zi--Lock"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M3.5 11.6A1.6 1.6 0 015.1 10h2.166c0-.177-.003-.377-.007-.594-.02-1.105-.048-2.662.35-3.996.246-.823.67-1.63 1.405-2.227.743-.603 1.73-.933 2.986-.933 1.256 0 2.243.33 2.986.933.735.598 1.159 1.404 1.405 2.227.398 1.334.37 2.891.35 3.996-.004.217-.008.417-.008.594H18.9a1.6 1.6 0 011.6 1.6v7.8a1.6 1.6 0 01-1.6 1.6H5.1a1.6 1.6 0 01-1.6-1.6v-7.8zM9 14.75a.75.75 0 000 1.5h6a.75.75 0 000-1.5H9zM8.759 9.3c.004.242.007.476.007.7h6.467c0-.182.003-.37.006-.565l.002-.135c.017-1.112.037-2.375-.287-3.46-.19-.636-.482-1.142-.914-1.492-.424-.345-1.055-.598-2.04-.598-.985 0-1.616.253-2.04.598-.432.35-.724.856-.914 1.492-.324 1.085-.304 2.348-.287 3.46z",fillRule:"evenodd",clipRule:"evenodd"}))}},1419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=r,t.unobserve=i,t.destroy=c;var a=new Map,o=new Map;function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},r=arguments[3],i=n.root,c=n.rootMargin,s=n.threshold||0;if(e&&t){var u=c?s.toString()+"_"+c:""+s.toString();i&&(u=r?r+"_"+u:null);var d=u?o.get(u):null;d||(d=new IntersectionObserver(l,n),u&&o.set(u,d));var b={callback:t,visible:!1,options:n,observerId:u,observer:u?void 0:d};return a.set(e,b),d.observe(e),b}}function i(e){if(e){var t=a.get(e);if(t){var n=t.observerId,r=t.observer,i=n?o.get(n):r;i&&i.unobserve(e);var c=!1;n&&a.forEach((function(t,a){t&&t.observerId===n&&a!==e&&(c=!0)})),i&&!c&&(i.disconnect(),o.delete(n)),a.delete(e)}}}function c(){o.forEach((function(e){e.disconnect()})),o.clear(),a.clear()}function l(e){e.forEach((function(e){var t=e.isIntersecting,n=e.intersectionRatio,o=e.target,r=a.get(o);if(r&&n>=0){var i=r.options,c=!1;Array.isArray(i.threshold)?c=i.threshold.some((function(e){return r.visible?n>e:n>=e})):void 0!==i.threshold&&(c=r.visible?n>i.threshold:n>=i.threshold),void 0!==t&&(c=c&&t),r.callback&&r.callback(c)}}))}t.default={observe:r,unobserve:i,destroy:c}},1420:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},1421:function(e,t,n){"use strict";function a(e){return e?"¥".concat(e/100):"免费"}n.d(t,"a",(function(){return a}))},1422:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n(5),o=n(1146);function r(e){var t,n,r;return null!=e&&null!==(t=e.bizExt)&&void 0!==t&&t.creationRelationship?e.bizExt.creationRelationship:"string"==typeof(null==e||null===(n=e.creationRelationship)||void 0===n?void 0:n.renderJson)?Object(a.camelizeKeys)(null!==(r=Object(o.a)(e.creationRelationship.renderJson))&&void 0!==r?r:{}):e.creationRelationship}var i=r,c=r,l=r},1423:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n(2),o=n(5),r=n(10),i=n(6),c=Object(i.a)("club",["GET","JOIN","LEAVE","UPDATE","REQUEST_JOIN"]),l=function(e){return{API:{types:c.GET,method:"GET",endpoint:"clubs/".concat(e),fetchOptions:{credentials:"include"}},schema:r.a.CLUB,meta:{id:e}}},s=function(e){return function(t){return t({API:{types:c.JOIN,method:"POST",endpoint:"clubs/".concat(e,"/join"),fetchOptions:{credentials:"include"}},meta:{id:e}}).then((function(){return t(l(e))}))}},u=function(e,t){return function(n){return n({API:{types:c.REQUEST_JOIN,method:"POST",endpoint:"clubs/".concat(e,"/join_requests"),fetchOptions:{zsEncrypt:!0},body:Object(o.decamelizeKeys)({requestDetail:t})}}).then((function(){return n(l(e))}))}},d=function(e){return function(t,n){var o=n().entities.clubs[e],r=o.joinCount,i=o.isJoined,s=o.loginMask;return t({API:{types:c.LEAVE,method:"DELETE",endpoint:"clubs/".concat(e,"/join"),fetchOptions:{credentials:"include"}},UPDATE:{request:{clubs:Object(a.a)({},e,Object.assign({isJoined:!1},r&&{joinCount:r-1}))},failure:{clubs:Object(a.a)({},e,Object.assign({isJoined:i,loginMask:s},r&&{joinCount:r}))}},meta:{id:e}}).then((function(){return t(l(e))}))}}},1424:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var a=n(4),o=n(1296),r=new Map([["vote","isBlockingVote"],["comment","isBlockingComment"],["like","isBlockingLike"],["favlist","isBlockingCollect"],["collect","isBlockingCollect"],["thank","isBlockingLike"],["share","isBlockingShare"]]);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.a;return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];var i=e.length>0?e.reduce((function(e,t){return[t.apply(void 0,Object(a.a)(e))]}),[].concat(o)):[].concat(o);return t.apply(void 0,Object(a.a)(i))}}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return{componentList:t.componentList.map((function(t){var n=t.name,a=t.component;return r.has(n)&&e[r.get(n)]?{name:n,component:null}:{name:n,component:a}}))}}}},1425:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),o=n(58),r=n(40);function i(e){var t=Object(r.e)((function(){return n.e(36).then(n.bind(null,2700))}));return Object(a.b)(o.Box,Object.assign(Object.assign({my:"14px",css:{minHeight:20}},e),{},{children:t?Object(a.b)(t,{width:"70px",height:"20px",css:{display:"block"}}):null}))}},1426:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n(45);function o(e,t,n){return"//".concat(a.a.wwwHost,"/vessay").concat(n?"/v2":"","/editor?type=").concat(e,"&id=").concat(t)}var r="vessay_v2_sdk",i="2"},1427:function(e,t,n){var a=n(226),o=n(143);e.exports=function(e){return!0===e||!1===e||o(e)&&"[object Boolean]"==a(e)}},1428:function(e,t,n){"use strict";n.d(t,"useSpring",(function(){return We})),n.d(t,"useTransition",(function(){return Qe}));var a=n(102),o=n.n(a),r=n(56),i=n.n(r),c=n(34),l=n.n(c),s=n(25),u=n.n(s),d=n(42),b=n.n(d),f=n(1021),p=n.n(f),h=n(28),m=n.n(h),v=n(27),g=n.n(v),O=n(29),j=n.n(O),y=n(19),C=n.n(y),w=n(318),x=n.n(w),k=n(37),S=n.n(k),R=n(152),A=n.n(R),I=n(23),T=n.n(I),E=n(1168);n.d(t,"Globals",(function(){return E.b}));var N=n(0),B=n(1663),z=(n(1664),n(1665),["children"]);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=C()(e);if(t){var o=C()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return j()(this,n)}}function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function _(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return E.s.fun(e)?e.apply(void 0,n):e}var D=function(e,t){return!0===e||!!(t&&e&&(E.s.fun(e)?e(t):Object(E.y)(e).includes(t)))},F=function(e,t){return E.s.obj(e)?t&&e[t]:e},U=function(e,t){return!0===e.default?e[t]:e.default?e.default[t]:void 0},V=function(e){return e},G=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V,n=q;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));var a,o={},r=P(n);try{for(r.s();!(a=r.n()).done;){var i=a.value,c=t(e[i],i);E.s.und(c)||(o[i]=c)}}catch(e){r.e(e)}finally{r.f()}return o},q=["config","onProps","onStart","onChange","onPause","onResume","onRest"],H={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function K(e){var t=function(e){var t={},n=0;if(Object(E.l)(e,(function(e,a){H[a]||(t[a]=e,n++)})),n)return t}(e);if(t){var n={to:t};return Object(E.l)(e,(function(e,a){return a in t||(n[a]=e)})),n}return Object.assign({},e)}function W(e){return e=Object(E.q)(e),E.s.arr(e)?e.map(W):Object(E.t)(e)?E.b.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Z(e){for(var t in e)return!0;return!1}function Q(e){return E.s.fun(e)||E.s.arr(e)&&E.s.obj(e[0])}function Y(e,t){var n;null==(n=e.ref)||n.delete(e),null==t||t.delete(e)}function J(e,t){var n;t&&e.ref!==t&&(null==(n=e.ref)||n.delete(e),t.add(e),e.ref=t)}var X=Object.assign(Object.assign({},{tension:170,friction:26}),{},{mass:1,damping:1,easing:function(e){return e},clamp:!1}),$=function e(){T()(this,e),this.velocity=0,Object.assign(this,X)};function ee(e,t){if(E.s.und(t.decay)){var n=!E.s.und(t.tension)||!E.s.und(t.friction);!n&&E.s.und(t.frequency)&&E.s.und(t.damping)&&E.s.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var te=[],ne=function e(){T()(this,e),this.changed=!1,this.values=te,this.toValues=null,this.fromValues=te,this.config=new $,this.immediate=!1};function ae(e,t){var n=t.key,a=t.props,o=t.defaultProps,r=t.state,i=t.actions;return new Promise((function(t,c){var l,s,u,d=D(null!=(l=a.cancel)?l:null==o?void 0:o.cancel,n);if(d)h();else{E.s.und(a.pause)||(r.paused=D(a.pause,n));var b=null==o?void 0:o.pause;!0!==b&&(b=r.paused||D(b,n)),s=_(a.delay||0,n),b?(r.resumeQueue.add(p),i.pause()):(i.resume(),p())}function f(){r.resumeQueue.add(p),r.timeouts.delete(u),u.cancel(),s=u.time-E.w.now()}function p(){s>0?(u=E.w.setTimeout(h,s),r.pauseQueue.add(f),r.timeouts.add(u)):h()}function h(){r.pauseQueue.delete(f),r.timeouts.delete(u),e<=(r.cancelId||0)&&(d=!0);try{i.start(Object.assign(Object.assign({},a),{},{callId:e,cancel:d}),t)}catch(e){c(e)}}}))}var oe=function(e,t){return 1==t.length?t[0]:t.some((function(e){return e.cancelled}))?ce(e.get()):t.every((function(e){return e.noop}))?re(e.get()):ie(e.get(),t.every((function(e){return e.finished})))},re=function(e){return{value:e,noop:!0,finished:!0,cancelled:!1}},ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{value:e,finished:t,cancelled:n}},ce=function(e){return{value:e,cancelled:!0,finished:!1}};function le(e,t,n,a){var o=t.callId,r=t.parentId,i=t.onRest,c=n.asyncTo,l=n.promise;return r||e!==c||t.reset?n.promise=A()(S.a.mark((function s(){var u,d,b,f,p,h,m,v;return S.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(n.asyncId=o,n.asyncTo=e,u=G(t,(function(e,t){return"onRest"===t?void 0:e})),f=new Promise((function(e,t){return d=e,b=t})),p=function(e){var t=o<=(n.cancelId||0)&&ce(a)||o!==n.asyncId&&ie(a,!1);if(t)throw e.result=t,b(e),e},h=function(e,t){var r=new ue,i=new de;return A()(S.a.mark((function c(){var l,s;return S.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!E.b.skipAnimation){c.next=5;break}throw se(n),i.result=ie(a,!1),b(i),i;case 5:return p(r),(l=E.s.obj(e)?Object.assign({},e):Object.assign(Object.assign({},t),{},{to:e})).parentId=o,Object(E.l)(u,(function(e,t){E.s.und(l[t])&&(l[t]=e)})),c.next=11,a.start(l);case 11:if(s=c.sent,p(r),!n.paused){c.next=16;break}return c.next=16,new Promise((function(e){n.resumeQueue.add(e)}));case 16:return c.abrupt("return",s);case 17:case"end":return c.stop()}}),c)})))()},!E.b.skipAnimation){s.next=9;break}return se(n),s.abrupt("return",ie(a,!1));case 9:return s.prev=9,v=E.s.arr(e)?function(){var e=A()(S.a.mark((function e(t){var n,a,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=P(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=9;break}return o=a.value,e.next=7,h(o);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()(e):Promise.resolve(e(h,a.stop.bind(a))),s.next=13,Promise.all([v.then(d),f]);case 13:m=ie(a.get(),!0,!1),s.next=27;break;case 16:if(s.prev=16,s.t0=s.catch(9),!(s.t0 instanceof ue)){s.next=22;break}m=s.t0.result,s.next=27;break;case 22:if(!(s.t0 instanceof de)){s.next=26;break}m=s.t0.result,s.next=27;break;case 26:throw s.t0;case 27:return s.prev=27,o==n.asyncId&&(n.asyncId=r,n.asyncTo=r?c:void 0,n.promise=r?l:void 0),s.finish(27);case 30:return E.s.fun(i)&&E.w.batchedUpdates((function(){i(m,a,a.item)})),s.abrupt("return",m);case 32:case"end":return s.stop()}}),s,null,[[9,16,27,30]])})))():l}function se(e,t){Object(E.m)(e.timeouts,(function(e){return e.cancel()})),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var ue=function(e){g()(n,e);var t=L(n);function n(){return T()(this,n),t.call(this,"An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}return n}(x()(Error)),de=function(e){g()(n,e);var t=L(n);function n(){return T()(this,n),t.call(this,"SkipAnimationSignal")}return n}(x()(Error)),be=function(e){return e instanceof pe},fe=1,pe=function(e){g()(n,e);var t=L(n);function n(){var e;return T()(this,n),(e=t.apply(this,arguments)).id=fe++,e._priority=0,e}return m()(n,[{key:"priority",get:function(){return this._priority},set:function(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}},{key:"get",value:function(){var e=Object(B.e)(this);return e&&e.getValue()}},{key:"to",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E.b.to(this,t)}},{key:"interpolate",value:function(){Object(E.j)();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E.b.to(this,t)}},{key:"toJSON",value:function(){return this.get()}},{key:"observerAdded",value:function(e){1==e&&this._attach()}},{key:"observerRemoved",value:function(e){0==e&&this._detach()}},{key:"_attach",value:function(){}},{key:"_detach",value:function(){}},{key:"_onChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(E.d)(this,{type:"change",parent:this,value:e,idle:t})}},{key:"_onPriorityChange",value:function(e){this.idle||E.o.sort(this),Object(E.d)(this,{type:"priority",parent:this,priority:e})}}]),n}(E.a),he=Symbol.for("SpringPhase"),me=function(e){return(1&e[he])>0},ve=function(e){return(2&e[he])>0},ge=function(e){return(4&e[he])>0},Oe=function(e,t){return t?e[he]|=3:e[he]&=-3},je=function(e,t){return t?e[he]|=4:e[he]&=-5},ye=function(e){g()(n,e);var t=L(n);function n(e,a){var o;if(T()(this,n),(o=t.call(this)).animation=new ne,o.defaultProps={},o._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},o._pendingCalls=new Set,o._lastCallId=0,o._lastToId=0,o._memoizedDuration=0,!E.s.und(e)||!E.s.und(a)){var r=E.s.obj(e)?Object.assign({},e):Object.assign(Object.assign({},a),{},{from:e});E.s.und(r.default)&&(r.default=!0),o.start(r)}return o}return m()(n,[{key:"idle",get:function(){return!(ve(this)||this._state.asyncTo)||ge(this)}},{key:"goal",get:function(){return Object(E.q)(this.animation.to)}},{key:"velocity",get:function(){var e=Object(B.e)(this);return e instanceof B.c?e.lastVelocity||0:e.getPayload().map((function(e){return e.lastVelocity||0}))}},{key:"hasAnimated",get:function(){return me(this)}},{key:"isAnimating",get:function(){return ve(this)}},{key:"isPaused",get:function(){return ge(this)}},{key:"advance",value:function(e){var t=this,n=!0,a=!1,o=this.animation,r=o.config,i=o.toValues,c=Object(B.g)(o.to);!c&&Object(E.r)(o.to)&&(i=Object(E.y)(Object(E.q)(o.to))),o.values.forEach((function(l,s){if(!l.done){var u=l.constructor==B.b?1:c?c[s].lastPosition:i[s],d=o.immediate,b=u;if(!d){if(b=l.lastPosition,r.tension<=0)return void(l.done=!0);var f,p=l.elapsedTime+=e,h=o.fromValues[s],m=null!=l.v0?l.v0:l.v0=E.s.arr(r.velocity)?r.velocity[s]:r.velocity;if(E.s.und(r.duration))if(r.decay){var v=!0===r.decay?.998:r.decay,g=Math.exp(-(1-v)*p);b=h+m/(1-v)*(1-g),d=Math.abs(l.lastPosition-b)<.1,f=m*g}else{f=null==l.lastVelocity?m:l.lastVelocity;for(var O=r.precision||(h==u?.005:Math.min(1,.001*Math.abs(u-h))),j=r.restVelocity||O/10,y=r.clamp?0:r.bounce,C=!E.s.und(y),w=h==u?l.v0>0:h<u,x=Math.ceil(e/1),k=0;k<x&&(Math.abs(f)>j||!(d=Math.abs(u-b)<=O));++k){C&&(b==u||b>u==w)&&(f=-f*y,b=u),b+=1*(f+=1*((1e-6*-r.tension*(b-u)+.001*-r.friction*f)/r.mass))}}else{var S=1;r.duration>0&&(t._memoizedDuration!==r.duration&&(t._memoizedDuration=r.duration,l.durationProgress>0&&(l.elapsedTime=r.duration*l.durationProgress,p=l.elapsedTime+=e)),S=(S=(r.progress||0)+p/t._memoizedDuration)>1?1:S<0?0:S,l.durationProgress=S),f=((b=h+r.easing(S)*(u-h))-l.lastPosition)/e,d=1==S}l.lastVelocity=f,Number.isNaN(b)&&(console.warn("Got NaN while animating:",t),d=!0)}c&&!c[s].done&&(d=!1),d?l.done=!0:n=!1,l.setValue(b,r.round)&&(a=!0)}}));var l=Object(B.e)(this);if(n){var s=Object(E.q)(o.to);(l.setValue(s)||a)&&this._onChange(s),this._stop()}else a&&this._onChange(l.getValue())}},{key:"set",value:function(e){var t=this;return E.w.batchedUpdates((function(){t._stop(),t._focus(e),t._set(e)})),this}},{key:"pause",value:function(){this._update({pause:!0})}},{key:"resume",value:function(){this._update({pause:!1})}},{key:"finish",value:function(){var e=this;if(ve(this)){var t=this.animation,n=t.to,a=t.config;E.w.batchedUpdates((function(){e._onStart(),a.decay||e._set(n,!1),e._stop()}))}return this}},{key:"update",value:function(e){return(this.queue||(this.queue=[])).push(e),this}},{key:"start",value:function(e,t){var n,a=this;return E.s.und(e)?(n=this.queue||[],this.queue=[]):n=[E.s.obj(e)?e:Object.assign(Object.assign({},t),{},{to:e})],Promise.all(n.map((function(e){return a._update(e)}))).then((function(e){return oe(a,e)}))}},{key:"stop",value:function(e){var t=this,n=this.animation.to;return this._focus(this.get()),se(this._state,e&&this._lastCallId),E.w.batchedUpdates((function(){return t._stop(n,e)})),this}},{key:"reset",value:function(){this._update({reset:!0})}},{key:"eventObserved",value:function(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}},{key:"_prepareNode",value:function(e){var t=this.key||"",n=e.to,a=e.from;(null==(n=E.s.obj(n)?n[t]:n)||Q(n))&&(n=void 0),null==(a=E.s.obj(a)?a[t]:a)&&(a=void 0);var o={to:n,from:a};if(!me(this)){if(e.reverse){var r=[a,n];n=r[0],a=r[1]}a=Object(E.q)(a),E.s.und(a)?Object(B.e)(this)||this._set(n):this._set(a)}return o}},{key:"_update",value:function(e,t){var n=this,a=b()({},e),o=this.key,r=this.defaultProps;a.default&&Object.assign(r,G(a,(function(e,t){return/^on/.test(t)?F(e,o):e}))),Ae(this,a,"onProps"),Ie(this,"onProps",a,this);var i=this._prepareNode(a);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");var c=this._state;return ae(++this._lastCallId,{key:o,props:a,defaultProps:r,state:c,actions:{pause:function(){ge(n)||(je(n,!0),Object(E.n)(c.pauseQueue),Ie(n,"onPause",ie(n,Ce(n,n.animation.to)),n))},resume:function(){ge(n)&&(je(n,!1),ve(n)&&n._resume(),Object(E.n)(c.resumeQueue),Ie(n,"onResume",ie(n,Ce(n,n.animation.to)),n))},start:this._merge.bind(this,i)}}).then((function(e){if(a.loop&&e.finished&&(!t||!e.noop)){var o=we(a);if(o)return n._update(o,!0)}return e}))}},{key:"_merge",value:function(e,t,n){var a=this;if(t.cancel)return this.stop(!0),n(ce(this));var o=!E.s.und(e.to),r=!E.s.und(e.from);if(o||r){if(!(t.callId>this._lastToId))return n(ce(this));this._lastToId=t.callId}var i=this.key,c=this.defaultProps,l=this.animation,s=l.to,u=l.from,d=e.to,b=void 0===d?s:d,f=e.from,p=void 0===f?u:f;if(!r||o||t.default&&!E.s.und(b)||(b=p),t.reverse){var h=[p,b];b=h[0],p=h[1]}var m=!Object(E.u)(p,u);m&&(l.from=p),p=Object(E.q)(p);var v=!Object(E.u)(b,s);v&&this._focus(b);var g=Q(t.to),O=l.config,j=O.decay,y=O.velocity;(o||r)&&(O.velocity=0),t.config&&!g&&function(e,t,n){for(var a in n&&(ee(n=Object.assign({},n),t),t=Object.assign(Object.assign({},n),t)),ee(e,t),Object.assign(e,t),X)null==e[a]&&(e[a]=X[a]);var o=e.mass,r=e.frequency,i=e.damping;E.s.und(r)||(r<.01&&(r=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/r,2)*o,e.friction=4*Math.PI*i*o/r)}(O,_(t.config,i),t.config!==c.config?_(c.config,i):void 0);var C=Object(B.e)(this);if(!C||E.s.und(b))return n(ie(this,!0));var w=E.s.und(t.reset)?r&&!t.default:!E.s.und(p)&&D(t.reset,i),x=w?p:this.get(),k=W(b),S=E.s.num(k)||E.s.arr(k)||Object(E.t)(k),R=!g&&(!S||D(c.immediate||t.immediate,i));if(v){var A=Object(B.f)(b);if(A!==C.constructor){if(!R)throw Error("Cannot animate between ".concat(C.constructor.name," and ").concat(A.name,', as the "to" prop suggests'));C=this._set(k)}}var I=C.constructor,T=Object(E.r)(b),N=!1;if(!T){var z=w||!me(this)&&m;(v||z)&&(T=!(N=Object(E.u)(W(x),k))),Object(E.u)(O.decay,j)&&Object(E.u)(O.velocity,y)||(T=!0)}if(N&&ve(this)&&(l.changed&&!w?T=!0:T||this._stop(s)),!g&&((T||Object(E.r)(s))&&(l.values=C.getPayload(),l.toValues=Object(E.r)(b)?null:I==B.b?[1]:Object(E.y)(k)),l.immediate!=R&&(l.immediate=R,R||w||this._set(s)),T)){var L=l.onRest;Object(E.k)(Re,(function(e){return Ae(a,t,e)}));var P=ie(this,Ce(this,s));Object(E.n)(this._pendingCalls,P),this._pendingCalls.add(n),l.changed&&E.w.batchedUpdates((function(){var e;l.changed=!w,null==L||L(P,a),w?_(c.onRest,P):null==(e=l.onStart)||e.call(l,P,a)}))}w&&this._set(x),g?n(le(t.to,t,this._state,this)):T?this._start():ve(this)&&!v?this._pendingCalls.add(n):n(re(x))}},{key:"_focus",value:function(e){var t=this.animation;e!==t.to&&(Object(E.p)(this)&&this._detach(),t.to=e,Object(E.p)(this)&&this._attach())}},{key:"_attach",value:function(){var e=0,t=this.animation.to;Object(E.r)(t)&&(Object(E.c)(t,this),be(t)&&(e=t.priority+1)),this.priority=e}},{key:"_detach",value:function(){var e=this.animation.to;Object(E.r)(e)&&Object(E.x)(e,this)}},{key:"_set",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Object(E.q)(e);if(!E.s.und(a)){var o=Object(B.e)(this);if(!o||!Object(E.u)(a,o.getValue())){var r=Object(B.f)(a);o&&o.constructor==r?o.setValue(a):Object(B.h)(this,r.create(a)),o&&E.w.batchedUpdates((function(){t._onChange(a,n)}))}}return Object(B.e)(this)}},{key:"_onStart",value:function(){var e=this.animation;e.changed||(e.changed=!0,Ie(this,"onStart",ie(this,Ce(this,e.to)),this))}},{key:"_onChange",value:function(e,t){t||(this._onStart(),_(this.animation.onChange,e,this)),_(this.defaultProps.onChange,e,this),p()(C()(n.prototype),"_onChange",this).call(this,e,t)}},{key:"_start",value:function(){var e=this.animation;Object(B.e)(this).reset(Object(E.q)(e.to)),e.immediate||(e.fromValues=e.values.map((function(e){return e.lastPosition}))),ve(this)||(Oe(this,!0),ge(this)||this._resume())}},{key:"_resume",value:function(){E.b.skipAnimation?this.finish():E.o.start(this)}},{key:"_stop",value:function(e,t){if(ve(this)){Oe(this,!1);var n=this.animation;Object(E.k)(n.values,(function(e){e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Object(E.d)(this,{type:"idle",parent:this});var a=t?ce(this.get()):ie(this.get(),Ce(this,null!=e?e:n.to));Object(E.n)(this._pendingCalls,a),n.changed&&(n.changed=!1,Ie(this,"onRest",a,this))}}}]),n}(pe);function Ce(e,t){var n=W(t),a=W(e.get());return Object(E.u)(a,n)}function we(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to,a=_(t);if(a){var o=!0!==a&&K(a),r=(o||e).reverse,i=!o||o.reset;return xe(Object.assign(Object.assign({},e),{},{loop:t,default:!1,pause:void 0,to:!r||Q(n)?n:void 0,from:i?e.from:void 0,reset:i},o))}}function xe(e){var t=e=K(e),n=t.to,a=t.from,o=new Set;return E.s.obj(n)&&Se(n,o),E.s.obj(a)&&Se(a,o),e.keys=o.size?Array.from(o):null,e}function ke(e){var t=xe(e);return E.s.und(t.default)&&(t.default=G(t)),t}function Se(e,t){Object(E.l)(e,(function(e,n){return null!=e&&t.add(n)}))}var Re=["onStart","onRest","onChange","onPause","onResume"];function Ae(e,t,n){e.animation[n]=t[n]!==U(t,n)?F(t[n],e.key):void 0}function Ie(e,t){for(var n,a,o,r,i,c,l=arguments.length,s=new Array(l>2?l-2:0),u=2;u<l;u++)s[u-2]=arguments[u];null==(r=(o=e.animation)[t])||(n=r).call.apply(n,[o].concat(s)),null==(c=(i=e.defaultProps)[t])||(a=c).call.apply(a,[i].concat(s))}var Te=["onStart","onChange","onRest"],Ee=1,Ne=function(){function e(t,n){T()(this,e),this.id=Ee++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),t&&this.start(Object.assign({default:!0},t))}return m()(e,[{key:"idle",get:function(){return!this._state.asyncTo&&Object.values(this.springs).every((function(e){return e.idle}))}},{key:"item",get:function(){return this._item},set:function(e){this._item=e}},{key:"get",value:function(){var e={};return this.each((function(t,n){return e[n]=t.get()})),e}},{key:"set",value:function(e){for(var t in e){var n=e[t];E.s.und(n)||this.springs[t].set(n)}}},{key:"update",value:function(e){return e&&this.queue.push(xe(e)),this}},{key:"start",value:function(e){var t=this.queue;return e?t=Object(E.y)(e).map(xe):this.queue=[],this._flush?this._flush(this,t):(Fe(this,t),Be(this,t))}},{key:"stop",value:function(e,t){if(e!==!!e&&(t=e),t){var n=this.springs;Object(E.k)(Object(E.y)(t),(function(t){return n[t].stop(!!e)}))}else se(this._state,this._lastAsyncId),this.each((function(t){return t.stop(!!e)}));return this}},{key:"pause",value:function(e){if(E.s.und(e))this.start({pause:!0});else{var t=this.springs;Object(E.k)(Object(E.y)(e),(function(e){return t[e].pause()}))}return this}},{key:"resume",value:function(e){if(E.s.und(e))this.start({pause:!1});else{var t=this.springs;Object(E.k)(Object(E.y)(e),(function(e){return t[e].resume()}))}return this}},{key:"each",value:function(e){Object(E.l)(this.springs,e)}},{key:"_onFrame",value:function(){var e=this,t=this._events,n=t.onStart,a=t.onChange,o=t.onRest,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,Object(E.m)(n,(function(t){var n=u()(t,2),a=n[0],o=n[1];o.value=e.get(),a(o,e,e._item)})));var c=!r&&this._started,l=i||c&&o.size?this.get():null;i&&a.size&&Object(E.m)(a,(function(t){var n=u()(t,2),a=n[0],o=n[1];o.value=l,a(o,e,e._item)})),c&&(this._started=!1,Object(E.m)(o,(function(t){var n=u()(t,2),a=n[0],o=n[1];o.value=l,a(o,e,e._item)})))}},{key:"eventObserved",value:function(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}E.w.onFrame(this._onFrame)}}]),e}();function Be(e,t){return Promise.all(t.map((function(t){return ze(e,t)}))).then((function(t){return oe(e,t)}))}function ze(e,t,n){return Le.apply(this,arguments)}function Le(){return(Le=A()(S.a.mark((function e(t,n,a){var o,r,i,c,l,s,u,d,b,f,p,h,m;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.keys,r=n.to,i=n.from,c=n.loop,l=n.onRest,s=n.onResolve,u=E.s.obj(n.default)&&n.default,c&&(n.loop=!1),!1===r&&(n.to=null),!1===i&&(n.from=null),(d=E.s.arr(r)||E.s.fun(r)?r:void 0)?(n.to=void 0,n.onRest=void 0,u&&(u.onRest=void 0)):Object(E.k)(Te,(function(e){var a=n[e];if(E.s.fun(a)){var o=t._events[e];n[e]=function(e){var t=e.finished,n=e.cancelled,r=o.get(a);r?(t||(r.finished=!1),n&&(r.cancelled=!0)):o.set(a,{value:null,finished:t||!1,cancelled:n||!1})},u&&(u[e]=n[e])}})),b=t._state,n.pause===!b.paused?(b.paused=n.pause,Object(E.n)(n.pause?b.pauseQueue:b.resumeQueue)):b.paused&&(n.pause=!0),f=(o||Object.keys(t.springs)).map((function(e){return t.springs[e].start(n)})),p=!0===n.cancel||!0===U(n,"cancel"),(d||p&&b.asyncId)&&f.push(ae(++t._lastAsyncId,{props:n,state:b,actions:{pause:E.v,resume:E.v,start:function(e,n){p?(se(b,t._lastAsyncId),n(ce(t))):(e.onRest=l,n(le(d,e,b,t)))}}})),!b.paused){e.next=15;break}return e.next=15,new Promise((function(e){b.resumeQueue.add(e)}));case 15:return e.t0=oe,e.t1=t,e.next=19,Promise.all(f);case 19:if(e.t2=e.sent,h=(0,e.t0)(e.t1,e.t2),!c||!h.finished||a&&h.noop){e.next=26;break}if(!(m=we(n,c,r))){e.next=26;break}return Fe(t,[m]),e.abrupt("return",ze(t,m,!0));case 26:return s&&E.w.batchedUpdates((function(){return s(h,t,t.item)})),e.abrupt("return",h);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t){var n=Object.assign({},e.springs);return t&&Object(E.k)(Object(E.y)(t),(function(e){E.s.und(e.keys)&&(e=xe(e)),E.s.obj(e.to)||(e=Object.assign(Object.assign({},e),{},{to:void 0})),De(n,e,(function(e){return _e(e)}))})),n}function Me(e,t){Object(E.l)(t,(function(t,n){e.springs[n]||(e.springs[n]=t,Object(E.c)(t,e))}))}function _e(e,t){var n=new ye;return n.key=e,t&&Object(E.c)(n,t),n}function De(e,t,n){t.keys&&Object(E.k)(t.keys,(function(a){(e[a]||(e[a]=n(a)))._prepareNode(t)}))}function Fe(e,t){Object(E.k)(t,(function(t){De(e.springs,t,(function(t){return _e(t,e)}))}))}var Ue,Ve,Ge=function(e){var t=e.children,n=l()(e,z),a=Object(N.useContext)(qe),o=n.pause||!!a.pause,r=n.immediate||!!a.immediate;n=Object(E.B)((function(){return{pause:o,immediate:r}}),[o,r]);var i=qe.Provider;return Object(N.createElement)(i,{value:n},t)},qe=(Ue=Ge,Ve={},Object.assign(Ue,Object(N.createContext)(Ve)),Ue.Provider._context=Ue,Ue.Consumer._context=Ue,Ue);Ge.Provider=qe.Provider,Ge.Consumer=qe.Consumer;var He=function(e){g()(n,e);var t=L(n);function n(){var e;return T()(this,n),(e=t.call(this,"return arguments.callee._call.apply(arguments.callee, arguments)")).current=[],e}return m()(n,[{key:"_call",value:function(e){Object(E.i)(),this.start(e)}},{key:"set",value:function(e){Object(E.k)(this.current,(function(t){return t.set(e)}))}},{key:"start",value:function(e){var t=this,n=[];return Object(E.k)(this.current,(function(a,o){if(E.s.und(e))n.push(a.start());else{var r=t._getProps(e,a,o);r&&n.push(a.start(r))}})),n}},{key:"update",value:function(e){var t=this;return Object(E.k)(this.current,(function(n,a){return n.update(t._getProps(e,n,a))})),this}},{key:"add",value:function(e){this.current.includes(e)||this.current.push(e)}},{key:"delete",value:function(e){var t=this.current.indexOf(e);~t&&this.current.splice(t,1)}},{key:"_getProps",value:function(e,t,n){return E.s.fun(e)?e(n,t):e}}]),n}(x()(Function));function Ke(e,t,n){var a=arguments,o=E.s.fun(t)&&t;o&&!n&&(n=[]);var r=Object(N.useMemo)((function(){return o||3==a.length?new He:void 0}),[]),c=Object(N.useRef)(0),l=Object(E.z)(),s=Object(N.useMemo)((function(){return{ctrls:[],queue:[],flush:function(e,t){var n=Pe(e,t);return c.current>0&&!s.queue.length&&!Object.keys(n).some((function(t){return!e.springs[t]}))?Be(e,t):new Promise((function(a){Me(e,n),s.queue.push((function(){a(Be(e,t))})),l()}))}}}),[]),u=i()(s.ctrls),d=[],b=Object(E.D)(e)||0,f=u.slice(e,b);function p(e,n){for(var a=e;a<n;a++){var r=u[a]||(u[a]=new Ne(null,s.flush)),i=o?o(a,r):t[a];i&&(d[a]=ke(i))}}Object(N.useMemo)((function(){u.length=e,p(b,e)}),[e]),Object(N.useMemo)((function(){p(0,Math.min(b,e))}),n);var h=u.map((function(e,t){return Pe(e,d[t])})),m=Object(N.useContext)(Ge),v=Object(E.D)(m),g=m!==v&&Z(m);Object(E.A)((function(){c.current++,s.ctrls=u;var e=s.queue;e.length&&(s.queue=[],Object(E.k)(e,(function(e){return e()}))),Object(E.k)(f,(function(e){Y(e,r),e.stop(!0)})),Object(E.k)(u,(function(e,t){Me(e,h[t]),null==r||r.add(e),g&&e.start({default:m});var n=d[t];n&&(J(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),Object(E.C)((function(){return function(){Object(E.k)(s.ctrls,(function(e){return e.stop(!0)}))}}));var O=h.map((function(e){return Object.assign({},e)}));return r?[O,r]:O}function We(e,t){var n=E.s.fun(e),a=Ke(1,n?e:[e],n?t||[]:t),o=u()(a,2),r=u()(o[0],1),i=r[0],c=o[1];return n||2==arguments.length?[i,c]:i}Object(E.k)(["stop","pause","resume"],(function(e){He.prototype[e]=function(){var t=arguments;return Object(E.k)(this.current,(function(n){return n[e].apply(n,i()(t))})),this}}));var Ze="enter";function Qe(e,t,n){var a=arguments,o=t.reset,r=t.sort,i=t.trail,c=void 0===i?0:i,l=t.expires,s=void 0===l||l,u=t.onDestroyed,d=Object(N.useMemo)((function(){return 3==a.length?new He:void 0}),[]),b=Object(E.y)(e),f=[],p=Object(N.useRef)(null),h=o?null:p.current;Object(E.A)((function(){p.current=f})),Object(E.C)((function(){return function(){return Object(E.k)(p.current,(function(e){e.expired&&clearTimeout(e.expirationId),Y(e.ctrl,d),e.ctrl.stop(!0)}))}}));var m=Je(b,t,h),v=o&&p.current||[];Object(E.A)((function(){return Object(E.k)(v,(function(e){var t=e.ctrl,n=e.item,a=e.key;Y(t,d),_(u,n,a)}))}));var g=[];if(h&&Object(E.k)(h,(function(e,t){e.expired?(clearTimeout(e.expirationId),v.push(e)):~(t=g[t]=m.indexOf(e.key))&&(f[t]=e)})),Object(E.k)(b,(function(e,t){f[t]||(f[t]={key:m[t],item:e,phase:"mount",ctrl:new Ne},f[t].ctrl.item=e)})),g.length){var O=-1;Object(E.k)(g,(function(e,n){var a=h[n];~e?(O=f.indexOf(a),f[O]=Object.assign(Object.assign({},a),{},{item:b[e]})):t.leave&&f.splice(++O,0,a)}))}E.s.fun(r)&&f.sort((function(e,t){return r(e.item,t.item)}));var j=-c,y=Object(E.z)(),C=G(t),w=new Map;Object(E.k)(f,(function(e,n){var a,o,r=e.key,i=e.phase;if("mount"==i)a=t.enter,o=Ze;else{var l=m.indexOf(r)<0;if("leave"!=i)if(l)a=t.leave,o="leave";else{if(!(a=t.update))return;o="update"}else{if(l)return;a=t.enter,o=Ze}}if(a=_(a,e.item,n),!(a=E.s.obj(a)?K(a):{to:a}).config){var u=t.config||C.config;a.config=_(u,e.item,n,o)}var d=Object.assign(Object.assign({},C),{},{delay:j+=c,reset:!1},a);if(o==Ze&&E.s.und(d.from)){var b=E.s.und(t.initial)||h?t.from:t.initial;d.from=_(b,e.item,n)}var f=d.onResolve;d.onResolve=function(e){_(f,e);var t=p.current,n=t.find((function(e){return e.key===r}));if(n&&(!e.cancelled||"update"==n.phase)&&n.ctrl.idle){var a=t.every((function(e){return e.ctrl.idle}));if("leave"==n.phase){var o=_(s,n.item);if(!1!==o){var i=!0===o?0:o;if(n.expired=!0,!a&&i>0)return void(i<=2147483647&&(n.expirationId=setTimeout(y,i)))}}a&&t.some((function(e){return e.expired}))&&y()}};var v=Pe(e.ctrl,d);w.set(e,{phase:o,springs:v,payload:d})}));var x=Object(N.useContext)(Ge),k=Object(E.D)(x),S=x!==k&&Z(x);Object(E.A)((function(){S&&Object(E.k)(f,(function(e){e.ctrl.start({default:x})}))}),[x]),Object(E.A)((function(){Object(E.k)(w,(function(e,t){var n=e.phase,a=e.springs,o=e.payload,r=t.ctrl;t.phase=n,null==d||d.add(r),J(r,o.ref),Me(r,a),S&&n==Ze&&r.start({default:x}),r[r.ref?"update":"start"](o)}))}),o?void 0:n);var R=function(e){return Object(N.createElement)(N.Fragment,null,f.map((function(t,n){var a=(w.get(t)||t.ctrl).springs,o=e(Object.assign({},a),t.item,t,n);return o&&o.type?Object(N.createElement)(o.type,Object.assign(Object.assign({},o.props),{},{key:E.s.str(t.key)||E.s.num(t.key)?t.key:t.ctrl.id,ref:o.ref})):o})))};return d?[R,d]:R}var Ye=1;function Je(e,t,n){var a=t.key,o=t.keys,r=void 0===o?a:o;if(null===r){var i=new Set;return e.map((function(e){var t=n&&n.find((function(t){return t.item===e&&"leave"!==t.phase&&!i.has(t)}));return t?(i.add(t),t.key):Ye++}))}return E.s.und(r)?e:E.s.fun(r)?e.map(r):Object(E.y)(r)}var Xe=function(e){g()(n,e);var t=L(n);function n(e,a){var r;T()(this,n),(r=t.call(this)).source=e,r.idle=!0,r._active=new Set,r.calc=E.f.apply(void 0,i()(a));var c=r._get(),l=Object(B.f)(c);return Object(B.h)(o()(r),l.create(c)),r}return m()(n,[{key:"advance",value:function(e){var t=this._get(),n=this.get();Object(E.u)(t,n)||(Object(B.e)(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&et(this._active)&&tt(this)}},{key:"_get",value:function(){var e=E.s.arr(this.source)?this.source.map(E.q):Object(E.y)(Object(E.q)(this.source));return this.calc.apply(this,i()(e))}},{key:"_start",value:function(){var e=this;this.idle&&!et(this._active)&&(this.idle=!1,Object(E.k)(Object(B.g)(this),(function(e){e.done=!1})),E.b.skipAnimation?(E.w.batchedUpdates((function(){return e.advance()})),tt(this)):E.o.start(this))}},{key:"_attach",value:function(){var e=this,t=1;Object(E.k)(Object(E.y)(this.source),(function(n){Object(E.r)(n)&&Object(E.c)(n,e),be(n)&&(n.idle||e._active.add(n),t=Math.max(t,n.priority+1))})),this.priority=t,this._start()}},{key:"_detach",value:function(){var e=this;Object(E.k)(Object(E.y)(this.source),(function(t){Object(E.r)(t)&&Object(E.x)(t,e)})),this._active.clear(),tt(this)}},{key:"eventObserved",value:function(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=Object(E.y)(this.source).reduce((function(e,t){return Math.max(e,(be(t)?t.priority:0)+1)}),0))}}]),n}(pe);function $e(e){return!1!==e.idle}function et(e){return!e.size||Array.from(e).every($e)}function tt(e){e.idle||(e.idle=!0,Object(E.k)(Object(B.g)(e),(function(e){e.done=!0})),Object(E.d)(e,{type:"idle",parent:e}))}E.b.assign({createStringInterpolator:E.g,to:function(e,t){return new Xe(e,t)}});E.o.advance},1474:function(e,t,n){"use strict";var a=n(47),o=n(172),r=n(14),i=n(15),c=n(81),l=n(17),s=n(18),u=n(7),d=n(1),b=n(3),f=n.n(b),p=n(0),h=n.n(p),m=n(21),v=n(20),g=n(48),O=n(13),j=n.n(O),y=n(220),C=n.n(y),w=n(1406),x=n(2837),k=n(2848),S=n(58),R=n(302),A=n(290),I=n(171),T=n(153),E=n(41),N=n.n(E),B=n(433),z={1:49,2:50,r:82,t:84,e:69};var L=n(1204),P=n(88),M=n(33),_=n(1010),D=n(26),F=n(218),U=n(1299);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var G=function(e){Object(l.a)(n,e);var t=V(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleHide=function(){N.a.set("AnswerOrg::know",!0),e.props.onClose()},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose;return Object(d.b)(P.b,{title:"机构帐号提问规则",subtitle:"这是一个「机构提问」，请在回答前了解以下规则",onClose:n,children:t&&Object(d.c)("div",{children:[Object(d.c)("ul",{className:"AnswerModal-list",children:[Object(d.b)("li",{children:"1. 提问机构如需使用你的回答，由提问机构联系你，共同商定确认使用条件。"}),Object(d.b)("li",{children:"2.「机构提问」下的回答，站内传播与社区公共提问下的回答有所区别。"}),Object(d.b)("li",{children:"3. 提问机构可能「隐藏」回答，被「隐藏」回答不在社区内流通。"})]}),Object(d.b)("a",{className:"AnswerModal-moreLink",href:"/org-intro#org-question",target:"_blank",children:"了解更多"}),Object(d.c)(P.a,{direction:"horizontal",children:[Object(d.b)(M.c,{onClick:this.handleHide,children:"不再显示"}),Object(d.b)(M.c,{color:"blue",preset:"primary",onClick:n,children:"知道了"})]})]})})}}],[{key:"getKnown",value:function(){return N.a.get("AnswerOrg::know")}}]),n}(p.Component),q=n(40),H=n(96),K=n(885),W=n(31),Z=n(446),Q=function(e){var t=e.dataTransfer;return t.items?Array.from(t.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})):Array.from(t.files)},Y=n(995),J=function(e){var t=e.className;return Object(d.b)(S.Box,{className:t,css:function(e){return{fontSize:14,lineHeight:"22px",color:e.colors.GBL05A,textAlign:"center",a:{textDecoration:"underline"}}},children:Object(d.c)("p",{children:["请不要添加无关的视频，详情查看"," ",Object(d.b)("a",{href:"https://www.zhihu.com/question/20118966",target:"_blank",rel:"noopener noreferrer",children:"知乎视频使用规范"}),Object(d.b)("br",{}),"上传视频，即代表你同意",Object(d.b)("a",{href:"https://www.zhihu.com/term/video",target:"_blank",rel:"noopener noreferrer",children:"《知乎视频用户协议》"})]})})},X=n(434),$=n(193),ee=n(957),te=n(93);function ne(e){var t=e.item,n=e.onCheck,o=Object(p.useState)(!1),r=Object(a.a)(o,2),i=r[0],c=r[1],l=t.id,s=t.title,u=t.description,b=t.imageUrl,f=t.publishedAt,h=t.video,m=null==h?void 0:h.duration;return Object(d.c)(S.Flex,{p:"20px 24px",justifyContent:"space-between",alignItems:"center",children:[Object(d.c)(S.Flex,{flex:1,children:[Object(d.c)(S.Box,{width:112,height:70,flexShrink:0,marginRight:"16px",css:{position:"relative",borderRadius:3,overflow:"hidden"},children:[Object(d.b)(S.Image,{width:"100%",height:"100%",src:b,alt:"",css:{objectFit:"cover"}}),Object(d.b)(S.Text,{fontSize:12,lineHeight:"14px",color:"GBK99A",css:{position:"absolute",bottom:4,right:7,textShadow:"0 0 5px rgba(0,0,0,0.5)"},children:Object(Y.b)(m)})]}),Object(d.c)(S.Flex,{flexDirection:"column",justifyContent:"center",flex:1,children:[Object(d.b)(S.Text,{fontSize:14,fontWeight:500,lineHeight:"20px",color:"GBK03A",css:[Object(te.d)(1)],children:s}),Object(d.b)(S.Text,{mt:"6px",fontSize:14,lineHeight:"20px",color:"GBK04A",css:[Object(te.d)(1)],children:u}),Object(d.b)(S.Text,{mt:"8px",fontSize:13,lineHeight:"16px",color:"GBK06A",children:Object(T.toRelativeString)(f)})]})]}),Object(d.b)(ee.a,{css:{marginLeft:16,flexShrink:0},checked:i,onChange:function(e){c(e.currentTarget.checked),n(l)}})]})}function ae(e){var t,n=e.onClose,o=e.onSubmit,r=Object(p.useState)([]),i=Object(a.a)(r,2),c=i[0],l=i[1],s=Object(m.useSelector)((function(e){return e.zvideos.insertable}))||{},u=s.isLoading,b=s.data,f=s.paging,h=Object(m.useDispatch)(),v=Object(p.useCallback)((function(){h(Object(Z.n)())}),[h]),g=Object(p.useCallback)((function(e){c.includes(e)?l(c.filter((function(t){return t!==e}))):l(c.concat([e]))}),[c]);return Object(d.c)(S.Box,{height:688,children:[Object(d.b)(S.Box,{m:"40px auto",fontSize:24,fontWeight:500,lineHeight:"30px",color:"GBK02A",textAlign:"center",children:"选择已发布的视频"}),Object(d.b)(X.b,{css:{marginBottom:100},onLoad:v,isLoading:null!=u&&u,isDrained:null!==(t=null==f?void 0:f.isEnd)&&void 0!==t&&t,getContainer:function(e){return e.parentElement.parentElement.parentElement},children:b.map((function(e,t){return Object(d.b)($.a,{children:Object(d.b)(ne,{item:e,onCheck:g})},t)}))}),Object(d.c)(S.Flex,{bg:"GBK99A",p:"32px 25px",width:"100%",height:100,justifyContent:"center",css:{position:"absolute",left:0,right:0,bottom:0},children:[Object(d.b)(M.c,{css:{flex:1},onClick:n,children:"返回"}),Object(d.b)(M.c,{disabled:0===c.length,css:{flex:1,marginLeft:18},preset:"primary",color:"blue",onClick:function(){o(c),n()},children:"添加"})]})]})}var oe=n(72),re=n(30);var ie=function(e){var t=e.className,n=e.text,a=e.onFiles,o=e.zaClickId,r=e.zaBlockText,i=e.multiple,c=void 0===i||i,l=e.disabled,s=e.preset,u=e.size,b=e.icon,f=e.handleMouseEnter,h=e.handleMouseLeave,m=Object(p.useRef)(null);return Object(d.c)(d.a,{children:[Object(d.b)(oe.a,{zaText:!0,zaType:"Button",as:S.Box,zaBlock:r,zaAction:"Upload",css:{display:"spread"===u?"block":"inline-block"},onMouseEnter:f,onMouseLeave:h,children:Object(d.b)(M.c,{className:j()("VideoUploadButton",t),preset:s||"primary",size:u||"spread",color:"blue",disabled:l,icon:b,onClick:function(e){o&&D.a.trackEvent(e.target,{id:o,action:"Upload"}),m.current.click()},children:n})}),Object(d.b)("input",{type:"file",className:"VideoUploadButton-fileInput",ref:m,onChange:function(){a(m.current.files,"Add"),m.current.value=null},accept:re.a.VIDEO.join(","),multiple:c})]})};var ce=function(e){var t=e.show,n=e.onZVideoSubmit,o=e.onVideoSubmit,r=e.onClose,i=(Object(m.useSelector)((function(e){return e.zvideos.insertable}))||{}).data,c=Object(p.useState)(!1),l=Object(a.a)(c,2),s=l[0],u=l[1],b=Object(p.useState)(!1),f=Object(a.a)(b,2),h=f[0],v=f[1],g=Object(m.useDispatch)(),O=Object(q.d)((function(e){var t=Object(Y.a)(e),n=t.message,a=t.abortUpload,r=t.validFiles;n&&(g(Object(W.h)(n,a?"red":"white")),a)||o({value:r[0]})}));return t?Object(d.c)(H.b,{css:{width:688},onClose:r,children:[h&&Object(d.b)(ae,{onSubmit:n,onClose:function(){v(!1)}}),!h&&Object(d.c)(d.a,{children:[Object(d.b)(S.Text,{fontSize:"24px",color:"GBK02A",lineHeight:"34px",fontWeight:500,m:"40px 0 30px",textAlign:"center",children:"导入视频"}),Object(d.c)(S.Flex,{flexDirection:"column",alignItems:"center",width:"440px",height:"300px",margin:"0 auto 45px",css:function(e){return Object.assign({border:"2px dashed ".concat(e.colors.GBK09A),borderRadius:4},s&&{borderColor:e.colors.GBL05A,"*":{pointerEvents:"none"}})},onDragOver:function(e){return e.preventDefault()},onDragEnter:function(){return u(!0)},onDragLeave:function(){return u(!1)},onDrop:function(e){e.preventDefault(),O(Q(e))},children:[Object(d.b)(K.a,{size:90,css:function(e){return{color:s?e.colors.GBL05A:e.colors.GBK09A,marginTop:66}}}),Object(d.b)(S.Text,{color:"GBK03A",fontSize:"20px",lineHeight:"28px",fontWeight:"500",mt:"16px",children:"拖放要导入的视频文件"}),Object(d.c)(S.Box,{mt:"20px",children:[Object(d.b)(ie,{text:"导入视频",multiple:!1,css:{width:142},zaBlockText:"UploadVideoFile",onFiles:O}),Object(d.b)(M.c,{preset:"secondary",color:"blue",css:{width:142,marginLeft:12,padding:"0 14px",whiteSpace:"nowrap"},onClick:function(e){D.a.trackEvent(e.target,{id:8622,action:"Click"},{button:{text:"选择已发布的视频"}}),(null==i?void 0:i.length)>0?v(!0):g(Object(Z.n)()).then((function(e){e.payload.data.length?v(!0):g(Object(W.h)("还没有发布过视频"))}))},children:"选择已发布的视频"})]})]}),Object(d.b)(J,{})]})]}):null},le=n(525),se=n(514);function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var de=function(e,t){var n=t?e.replace(/<.+?>/g,""):e;return Array.from(n).length},be=function(e,t,n){var a=de(e,n);if(0===a)return{ok:!1,message:null};var o=a-t;return o>0?{ok:!1,message:"已超过 ".concat(o," 个字")}:o>=-10?{ok:!0,message:"还可以输入 ".concat(-o," 个字")}:{ok:!0,message:null}};(function(e){Object(l.a)(n,e);var t=ue(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).check="title"===e.props.type?function(e){return be(e,100)}:function(e){return be(e,1e5,!0)},e.state=e.check(e.props.content),e.compareState=function(t){var n=t.ok,a=t.message;return e.state.message!==a||e.state.ok!==n},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.onStatusChange(this.state.ok)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.onStatusChange,a=t.content;if(e.content!==a){var o=this.check(e.content);this.compareState(o)&&(n(o.ok),this.setState(o))}}},{key:"shouldComponentUpdate",value:function(e,t){return this.compareState(t)}},{key:"render",value:function(){var e=this.state,t=e.ok,n=e.message,a=j()("WriteIndex-LengthStatus",{"WriteIndex-LengthStatus-warning":!t});return n&&Object(d.b)("div",{className:a,children:n})}}]),n}(p.Component)).propTypes={content:f.a.string,type:f.a.oneOf(["content","title"]).isRequired,onStatusChange:f.a.func.isRequired};var fe=n(632),pe=n(129),he=n(89),me=n(504),ve=n(46),ge=n(63),Oe=n(458),je=n(466),ye=n(1146),Ce=n(32),we=n(59),xe=n.n(we),ke=(n(2282),n(2834)),Se=n(1348),Re=n(1579),Ae=n(264),Ie=n(155),Te=n(956),Ee=["isBottom"],Ne=["className"],Be=["checked","onChange","text","id","disabled","shouldTrackClick","zaTextPrefix","zaText"],ze=function(e){var t=e.required,n=e.name,a=e.title,o=e.helper,r=e.props,i=Object(te.f)();return Object(d.c)(S.Flex,Object.assign(Object.assign({as:"label",color:"GBK03A",mr:"3px",css:[{lineHeight:"38px",fontSize:"15px",fontWeight:"400",width:"110px"},!t&&{paddingLeft:"10px"}]},r),{},{children:[t&&Object(d.b)(S.Text,{"aria-label":"必填",color:"GRD03A",mt:"2px",mr:"4px",children:"*"}),n,o&&Object(d.b)(oe.a,{as:"button",zaType:"Button",zaText:"提示信息-".concat(n),css:function(e){return{color:e.colors.GBL05A}},onClick:function(){I.a.alert(Object(d.c)("div",{css:{paddingTop:"16px",h2:{paddingBottom:"20px",fontWeight:"bold",fontSize:"24px",textAlign:"center"},p:{textAlign:"left",fontSize:"15px",textIndent:"30px"},a:{textDecoration:"underline",color:i.colors.primary}},children:[Object(d.b)("h2",{children:a||n}),o]}),{text:{ok:"我知道了"}}).then(xe.a,xe.a)},children:Object(d.b)(ke.a,{css:{marginLeft:"4px"},center:!0,size:18})})]}))},Le=function(e){var t=e.isBottom,n=Object(Ce.default)(e,Ee);return Object(d.b)(oe.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:!0,css:function(e){return{cursor:"pointer",display:"flex",alignItems:"center",color:e.colors.GBL05A}}},n),{},{children:t?Object(d.c)(d.a,{children:[Object(d.b)(S.Text,{mr:"4px",fontSize:"14px",children:"回到顶部"}),Object(d.b)(Se.a,{text:!0,fontSize:"16px"})]}):Object(d.c)(d.a,{children:[Object(d.b)(S.Text,{mr:"4px",fontSize:"14px",children:"发布设置"}),Object(d.b)(Re.a,{text:!0,fontSize:"16px"})]})}))},Pe=function(e){var t=e.className,n=Object(Ce.default)(e,Ne);return Object(d.b)(S.Flex,Object.assign({className:t,height:"52px",css:function(e){return{justifyContent:"center",borderTop:"1px solid ".concat(e.colors.GBK09A),background:e.colors.GBK99C,WebkitFontSmoothing:"subpixel-antialiased"}}},n))},Me=function(e){var t=e.children,n=e.hideScrollButton,o=e.isAnswer,r=Object(q.a)(!1),i=Object(a.a)(r,2),c=i[0],l=i[1];return Object(p.useEffect)((function(){var e=function(){var e=document.documentElement;e.scrollTop+e.clientHeight>=e.scrollHeight-5?l.on():l.off()};return document.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[l]),Object(d.c)(d.a,{children:[Object(d.b)(S.Box,{height:"52px",css:{visibility:"hidden"}}),Object(d.b)(Pe,{css:{position:"fixed",left:0,right:0,bottom:0,zIndex:1},children:Object(d.c)(S.Flex,{height:"52px",alignItems:"center",mx:"auto",css:{width:o?"654px":"800px"},children:[!n&&Object(d.b)(Le,{onClick:function(){Object(Ae.scrollTo)(window,{top:c?0:document.body.scrollHeight,behavior:"smooth"})},isBottom:c}),t]})})]})},_e=function(e){var t=e.children,n=e.hideScrollButton,a=e.getContaner;return Object(d.b)(A.a,{bottom:!0,getStyle:function(){return{width:"1000px",bottom:0,maxWidth:"100vw"}},container:a,children:function(e){var o=!e.isFixed;return Object(d.b)(Pe,{children:Object(d.c)(S.Flex,{width:"100%",height:"52px",alignItems:"center",mx:"auto",px:"20px",children:[!n&&Object(d.b)(Le,{onClick:function(){if(o)Object(Ae.scrollTo)(window,{top:0,behavior:"smooth"});else{var e=null==a?void 0:a();if(e){var t=e.getBoundingClientRect().bottom+52;Object(Ae.scrollBy)(window,{top:t-document.documentElement.clientHeight,behavior:"smooth"})}}},isBottom:o}),t]})})}})};function De(e){var t=e.checked,n=e.onChange,a=e.text,o=e.id,r=e.disabled,i=e.shouldTrackClick,c=e.zaTextPrefix,l=e.zaText,s=Object(Ce.default)(e,Be),u=Object(oe.i)().trackEvent;return Object(d.c)(S.Flex,Object.assign(Object.assign({flex:1,alignItems:"center",as:"label",htmlFor:o,css:{flex:"0 0 auto",marginRight:"20px",cursor:"pointer"}},s),{},{children:[Object(d.b)(Te.a,{id:o,size:20,checked:t,onChange:Object(q.d)((function(){i&&u({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:l||(c?"".concat(c,"-").concat(a):a)}}),n.apply(void 0,arguments)})),disabled:r}),Object(d.b)(S.Text,{ml:"4px",fontSize:"14px",color:"GBL05A",children:a})]}))}var Fe=function(e){return Object(d.b)(Ie.b,Object.assign({css:{".Select-button":{width:"270px",height:"38px"},".Select-arrow":{marginLeft:"auto"}}},e))},Ue=function(e){return Object(d.b)(Ie.a,Object.assign({css:function(e){return{color:e.colors.GBK02A,fontSize:"14px"}}},e))},Ve=n(1044),Ge=n(432),qe=n(82),He=n.n(qe);function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var We=Object(p.createContext)({updateFormData:function(){},formData:{}}),Ze=function(e){var t=function(t){Object(l.a)(a,t);var n=Ke(a);function a(){var e;Object(r.a)(this,a);for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).state={},e.answerFormDataProps={updateFormData:function(t){return e.setState(t)},getFormData:function(){return e.state}},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(d.b)(We.Provider,{value:Object.assign({},this.answerFormDataProps),children:Object(d.b)(e,Object.assign(Object.assign({},this.props),this.answerFormDataProps))})}}]),a}(p.Component);return He()(t,e)},Qe=n(51),Ye=Object.assign;var Je=function(e){return h.a.createElement(Qe.a,Ye({width:"20",height:"20",fill:"#06F",viewBox:"0 0 20 20"},e),h.a.createElement("path",{d:"M4.635 4.884l-1.133.647 4.944 8.65 1.132-.647-4.943-8.65z"}),h.a.createElement("path",{d:"M18.342 3.003L5.524 4.429l5.093 8.991a1.534 1.534 0 01.14 1.153 1.488 1.488 0 01-1.25 1.102 1.448 1.448 0 01-1.096-.31 1.501 1.501 0 01-.377-.45l-4.975-8.79L2 6.76l5.042 8.882c.23.405.558.742.952.98a2.623 2.623 0 002.612.056 2.69 2.69 0 00.99-.938l7.306-11.792a.622.622 0 00-.233-.883.588.588 0 00-.327-.062zm-8.056 4.902a1.175 1.175 0 01-.665-.203 1.214 1.214 0 01-.442-.546 1.245 1.245 0 01.256-1.331 1.17 1.17 0 011.301-.267 1.2 1.2 0 01.536.45 1.24 1.24 0 01-.146 1.538 1.18 1.18 0 01-.84.36zm3.82-.114a.756.756 0 01-.424-.14.781.781 0 01-.278-.357.802.802 0 01.181-.853.762.762 0 01.841-.154c.14.063.257.166.34.297a.798.798 0 01.12.44.795.795 0 01-.23.556.761.761 0 01-.55.222v-.011z"}))},Xe=n(928),$e={INVITED_TASK:"品牌任务",EVALUATE_TASK:"众测任务"},et="CHEESE",tt="COMMERCIAL_VIP",nt="FE_INIT",at="BINDING",ot="UNBIND",rt=function(e){var t=(null==e?void 0:e.bindTaskDTO)||{},n=t.taskType,a=t.taskId,o=t.taskName;return[$e[n],a,o].join("  ").trim()},it=function(e){var t=e.visible,n=e.onClose,o=e.onConfirm,r=e.value,i=e.taskList,c=void 0===i?[]:i,l=Object(p.useState)(r),s=Object(a.a)(l,2),u=s[0],b=s[1];return Object(p.useEffect)((function(){var e,n;t&&(null==r||null===(e=r.bindTaskDTO)||void 0===e?void 0:e.taskId)!==(null==u||null===(n=u.bindTaskDTO)||void 0===n?void 0:n.taskId)&&b(r)}),[t]),Object(d.b)(H.b,{title:"选择芝士任务",size:"large",onClose:n,children:t&&Object(d.c)(S.Box,{children:[Object(d.b)(S.Box,{color:"GBK02A",maxHeight:"50vh",mr:"-24px",pr:"24px",overflowY:"auto",children:null!=c&&c.length?c.map((function(e){var t;return Object(d.c)(S.Flex,{flex:1,py:"12px",justifyContent:"space-between",alignItems:"center",css:function(e){var t=e.colors;return{cursor:"pointer",borderBottom:"1px solid ".concat(t.GBK09A)}},as:"label",children:[Object(d.b)(S.Text,{fontSize:"14px",children:rt(e)}),Object(d.b)(Te.a,{checked:(null==u||null===(t=u.bindTaskDTO)||void 0===t?void 0:t.taskId)===e.bindTaskDTO.taskId,onChange:function(){b(e)}})]},e.bindTaskDTO.taskId)})):Object(d.b)(Xe.a.EI1,{image:"default",content:"没有可绑定的任务"})}),Object(d.c)(S.Flex,{mt:"32px",justifyContent:"center",children:[Object(d.b)(M.c,{preset:"outline",color:"grey",css:{width:"168px",marginRight:"16px"},onClick:n,children:"取消"}),Object(d.b)(M.c,{preset:"primary",color:"blue",css:{width:"168px"},disabled:!u,onClick:function(){o(u)},children:"确认"})]})]})})},ct=function(e){var t=e.value,n=e.onChange,o=e.taskList,r=e.disabled,i=void 0!==r&&r,c=e.onOpen,l=void 0===c?function(){return!0}:c,s=Object(q.a)(!1),u=Object(a.a)(s,2),b=u[0],f=u[1],h=Object(oe.i)().trackEvent;Object(p.useEffect)((function(){i&&b&&f.off()}),[i,b,f]);var m=rt(t),v=function(){h({eventType:"Click",elementLocation:{type:"Text",text:m||"选择绑定芝士任务",block:{blockText:"PublishSettingZhiTaskBind"}}}),f.on()};return Object(d.c)(S.Flex,{flex:1,alignItems:"center",children:[Object(d.c)(oe.e,{zaType:"Text",zaText:!0,view:{elementLocation:{block:{blockText:"PublishSettingZhiTaskBind"}}},as:S.Flex,p:"3px 0",alignItems:"center",fontSize:"14px",color:"GBL05A",css:function(e){var n=e.colors;return Object.assign({cursor:i?"not-allowed":"pointer",opacity:i?.5:1},t?{padding:"3px 14px",background:"rgba(0, 102, 255, .1)",borderRadius:"15px",color:n.GBL01A}:{})},onClick:function(){if(!i){var e=l();Object(Ve.isFunction)(null==e?void 0:e.then)?e.then(v):!1!==e&&v()}},children:[Object(d.b)(Je,{css:function(e){var n=e.colors;return{fill:t?n.GBL01A:n.GBL05A,flexShrink:0}}}),Object(d.b)(S.Text,{mx:"4px",title:m||"",css:{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:m||"选择绑定芝士任务"}),t&&!i&&Object(d.b)(Ge.a,{size:"14px",css:{flexShrink:0},onClick:function(e){e.stopPropagation(),null==n||n(null)}})]}),Object(d.b)(it,{visible:b,value:t,taskList:o,onClose:f.off,onConfirm:function(e){null==n||n(e),f.off()}})]})},lt=function(e){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(ze,{name:"芝士任务",title:"芝士任务绑定",helper:Object(d.b)("p",{children:"如该内容为芝士任务投稿内容，需在此处进行对应任务的绑定操作，请在发布前认真检查绑定关系，内容发布后关系即刻生效。"})}),Object(d.b)(ct,Object.assign({},e))]})},st=function(e){var t=e.taskList,n=e.commercialZhitaskBindInfo,o=e.onChange,r=Object(p.useState)(null),i=Object(a.a)(r,2),c=i[0],l=i[1],s=Boolean(n),u=function(e){o(e),l(e)};return Object(p.useEffect)((function(){(null==n?void 0:n.bindStatus)===at&&u(n)}),[s]),Object(d.b)(lt,{taskList:t,disabled:(null==c?void 0:c.bindStatus)===at,value:c,onChange:function(e){return u(e)}})},ut=function(e){var t=e.taskList,n=e.isAnonymous,a=Object(m.useDispatch)(),o=Object(p.useContext)(We),r=o.updateFormData,i=(0,o.getFormData)().commercialZhitaskBindInfo,c=Object(p.useCallback)((function(e){r({commercialZhitaskBindInfo:e})}),[r]);Object(p.useEffect)((function(){(null==i?void 0:i.bindStatus)===ot&&c(null)}),[i,c]);return Object(d.b)(lt,{taskList:t,disabled:(null==i?void 0:i.bindStatus)===at,value:i,onChange:c,onOpen:function(){if(n)return a(Object(W.h)("已经启用匿名的内容不能进行芝士任务绑定","red")),!1}})},dt=n(39),bt=n(1148),ft=n(6),pt=n(531),ht=Object(ft.a)("biz",["OPEN_BIZ_VIP","QUERY_BIZ_VIP_STATUS","GET_COMMERCIAL_REPORT_INFO"]);var mt=["shown","toggle","onSuccess","onFail"],vt=function(e){var t=e.shown,n=e.toggle,o=e.onSuccess,r=e.onFail,i=Object(Ce.default)(e,mt),c=Object(m.useDispatch)(),l=Object(p.useState)(!0),s=Object(a.a)(l,2),u=s[0],b=s[1],f=Object(oe.i)().trackEvent;return Object(d.b)(H.b,Object.assign(Object.assign({title:"商业内容推广",subtitle:"",onClose:function(){f({eventType:"Click",action:"Unknown",elementLocation:{text:"开通商业会员弹窗关闭"}}),n()}},i),{},{children:t&&Object(d.c)("div",{children:[Object(d.b)(S.Box,{color:"GBK02A",css:{fontSize:"15px",lineHeight:"22px"},children:"报备后，将自动为您开通「知享」试用版，符合商业内容规范的内容可以正常曝光"}),Object(d.c)(S.Flex,{flexDirection:"inherit",flexWrap:"nowrap",alignItems:"center",style:{marginTop:"10px"},children:[Object(d.b)(ee.a,{onChange:function(){b(!u)},type:"checkbox",checked:u}),Object(d.c)(S.Text,{ml:"4px",children:["我已阅读并同意",Object(d.b)(S.Link,{href:"https://bvip.zhihu.com/agreement",target:"_blank",rel:"noreferrer noopener",color:"primary",children:"《知享服务使用协议》"})]})]}),Object(d.b)("button",{disabled:!u,onClick:function(){c({API:{types:ht.OPEN_BIZ_VIP,endpoint:"/commercial/vip",root:"".concat(pt.a,"/api/v1"),method:"POST"}}).then((function(e){var t,n=e.payload;if(n.isSuccess)return o(),void c(Object(W.h)("开通成功"));r(),c(Object(W.h)((null==n||null===(t=n.err)||void 0===t?void 0:t.msg)||"开通失败","red"))})).catch((function(e){var t;r(),c(Object(W.h)((null==e||null===(t=e.err)||void 0===t?void 0:t.msg)||"开通失败","red"))})),n()},css:function(e){return[{width:"166px",height:"32px",backgroundColor:e.colors.GBL01A,textAlign:"center",lineHeight:"32px",fontSize:"14px",color:e.colors.GBK99A,borderRadius:"3px",margin:"25px 0 0 93px"},!u&&{cursor:"not-allowed"}]},children:"确认并开通"})]})}))},gt=[{type:!1,description:"非商业推广"},{type:!0,description:"商业推广"}],Ot=function(e){var t=e.isReport,n=e.commercialPermissionInfo,o=e.setCommercialPermissionInfo,r=e.setIsReport,i=e.validate,c=Object(oe.i)().trackEvent,l=Object(q.a)(!1),s=Object(a.a)(l,2),u=s[0],b=s[1];return Object(d.c)(d.a,{children:[Object(d.b)(Fe,{onChange:function(e){if(!i||i()){var t=gt.find((function(t){return t.type===e}));c({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"商业推广-".concat(null==t?void 0:t.description)}}),!0!==e||null!=n&&n.isCommercialVip?r(e):b.on()}},value:Boolean(t),children:gt.map((function(e){return Object(d.b)(Ue,{css:function(e){return{color:e.colors.GBK02A,fontSize:"14px"}},value:e.type,text:e.description},e.type)}))}),Object(d.b)(vt,{shown:u,toggle:b.toggle,onSuccess:function(){r(!0),o((function(e){return Object.assign(Object.assign({},e),{},{isCommercialVip:!0})}))},onFail:function(){r(!1)}})]})},jt=function(e){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(ze,{name:"商业推广",title:"商业内容推广",helper:Object(d.c)(d.a,{children:[Object(d.b)("p",{children:"商业内容是指，未经平台允许，用户以推广曝光为目的，发布含有产品售卖信息、牟利性外链等内容，或引导用户至第三方平台进行交易。"}),Object(d.b)("p",{children:"知乎提供了报备功能，创作者可以选择主动对包含商业推广的内容进行报备。对于包含商业推广但是未报备的内容，将按社区规范进行处理"}),Object(d.c)("p",{style:{marginTop:"10px"},children:["关于报备功能更多的信息，",Object(d.b)("a",{href:"https://www.zhihu.com/creator/explore/academy/rights/rights",target:"_blank",rel:"noreferrer noopener",children:"点击前往了解"})]})]})}),Object(d.b)(S.Box,{flex:"1",children:Object(d.b)(Ot,Object.assign({},e))})]})},yt=Object(p.forwardRef)((function(e,t){var n=e.commercialReportInfo,o=e.initCommercialPermissionInfo,r=Object(p.useState)(o),i=Object(a.a)(r,2),c=i[0],l=i[1],s=Object(p.useState)(!1),u=Object(a.a)(s,2),b=u[0],f=u[1],h=Boolean(n);return Object(p.useEffect)((function(){h&&f(n.isReport)}),[h]),Object(p.useImperativeHandle)(t,(function(){return{getIsReport:function(){return b}}})),Object(d.b)(jt,{isReport:Boolean(b),commercialPermissionInfo:c,setIsReport:f,setCommercialPermissionInfo:l})})),Ct=function(e){var t=e.isAnonymous,n=e.updateDraftSettings,o=e.initCommercialPermissionInfo,r=Object(m.useDispatch)(),i=Object(p.useState)(o),c=Object(a.a)(i,2),l=c[0],s=c[1],u=Object(p.useContext)(We),b=u.updateFormData,f=(0,u.getFormData)().isReport,h=Object(q.d)((function(e){b({isReport:e}),requestAnimationFrame(n)})),v=Object(q.d)((function(){return!t||(r(Object(W.h)("已经启用匿名的内容不能进行商业推广声明","red")),!1)}));return Object(d.b)(jt,{isReport:Boolean(f),commercialPermissionInfo:l,setIsReport:h,setCommercialPermissionInfo:s,validate:v})},wt=function(e){var t=e.type,n=e.questionId,o=e.answerId,r=e.articleId,i=e.reportProps,c=void 0===i?{}:i,l=e.taskBindProps,s=void 0===l?{}:l,u=Object(m.useDispatch)(),b=Object(p.useState)([]),f=Object(a.a)(b,2),h=Object(a.a)(f[0],3),v=h[0],g=void 0===v?null:v,O=h[1],j=void 0===O?{}:O,y=h[2],C=void 0===y?"":y,w=f[1],x="article"===t,k="answer"===t;return Object(q.i)((function(){var e,t=x?(e=r,{API:{types:ht.QUERY_BIZ_VIP_STATUS,endpoint:"/articles/settings",query:{token:e},method:"GET"}}):function(e,t){return{API:{types:ht.QUERY_BIZ_VIP_STATUS,endpoint:"/questions/".concat(e,"/answer-settings"),query:{token:t},method:"GET"}}}(n,o);u(t).then((function(e){var t,n=(null==e||null===(t=e.payload)||void 0===t?void 0:t.commercialPermissionInfo)||{};if(et===n.businessLine){var a;if(null===(a=n.cheeseTaskList)||void 0===a||!a.length)return;var o=x?st:ut,r=n.cheeseTaskList.map((function(e){return{bindStatus:nt,bindTaskDTO:e}}));w([o,{taskList:r},et])}else if(tt===n.businessLine){if(n.isShowTab)w([x?yt:Ct,{initCommercialPermissionInfo:n},tt])}}))})),et===C&&k&&s.isVideoAnswer?null:g?Object(d.b)(g,Object.assign(Object.assign({},et===C?s:c),j)):null},xt=n(1755),kt=function(e){var t=e.question,n=e.isAnonymous,o=e.disabled,r=e.getAnswerFormRef,i=Object(q.a)(!1),c=Object(a.a)(i,2),l=c[0],s=c[1],u=Object(m.useDispatch)(),b=Object(q.d)((function(){var e=r();if(null!=e&&e.current)if(e.current.hasVideo())u(Object(W.h)("匿名不能使用视频功能，如需启用匿名请删除草稿中的视频","red"));else{if(!e.current.hasMCNLinkCard())return e.current.hasADLinkCard()?e.current.hasFeeConsultCard()?u(Object(W.h)("不能使用匿名身份插入付费咨询卡片","red")):void u(Object(W.h)("不能使用匿名身份插入推荐卡片","red")):void s.on();u(Object(W.h)("不能使用匿名身份推荐商品","red"))}}));return Object(d.c)(S.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(S.Flex,{height:"38px",children:[Object(d.b)(De,{checked:!n,text:"不启用匿名",onChange:b,id:"PublishPanel-Anonymous-0",disabled:o,shouldTrackClick:!0,zaTextPrefix:"匿名设置"}),Object(d.b)(De,{checked:n,text:"启用匿名",onChange:b,id:"PublishPanel-Anonymous-1",disabled:o,shouldTrackClick:!0,zaTextPrefix:"匿名设置"})]}),Object(d.b)(xt.a,{question:t,shown:l,onClose:s.off})]})},St=function(e){var t=(0,Object(p.useContext)(We).getFormData)(),n=t.isReport,a=t.commercialZhitaskBindInfo;return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(ze,{name:"匿名设置"}),Object(d.b)(kt,Object.assign({disabled:Boolean(n)||Boolean(a)},e))]})},Rt={type:"none",description:"无声明"},At=function(e){var t=e.reshipmentDisclaimers,n=e.setReshipmentDisclaimers,a=e.disclaimers,o=Object(oe.i)().trackEvent;return t=t||Rt,(a=JSON.parse(JSON.stringify(a||[]))).push(Rt),Object(d.b)(Fe,{onChange:function(e){var t=a.find((function(t){return t.type===e}));o({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"创作声明-".concat(t.description)}}),t&&n(t)},value:t.type,children:a.map((function(e){return Object(d.b)(Ue,{value:e.type,text:e.description},e.type)}))})},It=Object(p.forwardRef)((function(e,t){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(ze,{name:"创作声明",helper:Object(d.c)(d.a,{children:[Object(d.b)("p",{children:"「创作声明」是为自己创作的添加个人声明的工具。当你在创作特定内容（如内容存在虚构或剧透等情节）时，可设置创作声明，该声明将会展示在回答或文章开头。"}),Object(d.b)("p",{children:"创作声明表达的是创作者对内容负责的态度。知乎鼓励创作者设置创作声明，以方便知友更好地辨识和理解内容信息。你也可以在编辑内容时，关闭创作声明。"})]})}),Object(d.b)(S.Box,{flex:"1",children:Object(d.b)(At,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),Tt=function(e){var t=e.question,n=e.updateDraftSettings,a=Object(p.useContext)(We),o=a.getFormData,r=a.updateFormData,i=Object(m.useDispatch)(),c=Object(m.useSelector)((function(e){return e.question.disclaimers[t.id]})),l=o().disclaimerType,s=(null==c?void 0:c.find((function(e){return e.type===l})))||Rt,u=(null==c?void 0:c.length)>0;Object(q.i)((function(){c||i(Object(pe.P)(t.id))}));var b=Object(q.d)((function(e){r({isDisclaimerChecked:"none"!==e.type,disclaimerType:e.type}),requestAnimationFrame(n)}));return u?Object(d.b)(It,{reshipmentDisclaimers:s,setReshipmentDisclaimers:b,disclaimers:c}):null},Et=n(427),Nt=n(1157),Bt=function(e){var t=e.scheduledPublishAt,n=e.initialScheduledPublishAt,a=e.setUseScheduledPublish,o=Boolean(t),r=function(e){a(e)};return Object(d.c)(S.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(S.Flex,{height:"38px",children:[Object(d.b)(De,{checked:!o,text:"不使用定时发布",onChange:function(){return r(!1)},id:"PublishPanel-scheduleLabel-0",shouldTrackClick:!0,zaTextPrefix:"定时发布"}),Object(d.b)(De,{checked:o,text:"使用定时发布",onChange:function(){r(!0),requestAnimationFrame((function(){Object(Ae.scrollBy)(window,{top:50,behavior:"smooth"})}))},id:"PublishPanel-scheduleLabel-1",shouldTrackClick:!0,zaTextPrefix:"定时发布"})]}),o&&n&&Object(d.b)(Nt.a,{value:t,min:n,max:Et.a(n,7),onChange:function(e){a(!0,e)},css:function(e){return{color:e.colors.GBL05A,fontSize:"14px",marginTop:"5px",".InputButton":{height:"38px"}}}})]})},zt=function(e){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(ze,{name:"定时发布"}),Object(d.b)(Bt,Object.assign({},e))]})},Lt=function(e){var t=e.disabled,n=e.updateDraftSettings,a=Object(p.useContext)(We),o=a.updateFormData,r=(0,a.getFormData)().pushActivity,i=function(e){o({pushActivity:e}),requestAnimationFrame(n)};return Object(d.b)(S.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:Object(d.c)(S.Flex,{height:"38px",children:[Object(d.b)(De,{checked:r,text:"开启推送",onChange:function(){i(!0)},id:"PublishPanel-PushToFollowers-0",disabled:t,shouldTrackClick:!0,zaTextPrefix:"推送给关注者"}),Object(d.b)(De,{checked:!r,text:"关闭推送",onChange:function(){I.a.confirm("设置后，关注你的其他用户将无法在「首页 - 关注」阅读这篇回答",{title:"关闭推送给关注者吗",text:{ok:"关闭推送"}}).then((function(){i(!1)})).catch((function(){}))},id:"PublishPanel-PushToFollowers-1",disabled:t,shouldTrackClick:!0,zaTextPrefix:"推送给关注者"})]})})},Pt=function(e){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(ze,{name:"推送给关注者"}),Object(d.b)(Lt,Object.assign({},e))]})},Mt=n(1494),_t=n(471),Dt=n(301),Ft=function(e){var t=e.question.id,n=e.isAnonymous,o=e.disabled,r=e.updateDraftSettings,i=Object(q.a)(!1),c=Object(a.a)(i,2),l=c[0],s=c[1],u=Object(p.useContext)(We),b=u.getFormData,f=u.updateFormData,h=Object(m.useDispatch)(),v=b().rewardTagline,g=Boolean(v),O=Object(q.d)((function(e){f({rewardTagline:e}),requestAnimationFrame(r),h(Object(_t.n)(t,!0)),s.off()}));return Object(d.c)(S.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(S.Flex,{height:"38px",children:[Object(d.b)(De,{checked:g,text:"开启赞赏",onChange:function(){n?h(Object(W.h)("匿名回答无法开启赞赏，请先取消匿名","red")):s.on()},id:"PublishPanel-RewardSetting-0",disabled:o,shouldTrackClick:!0,zaTextPrefix:"赞赏设置"}),Object(d.b)(De,{checked:!g,text:"关闭赞赏",onChange:function(){f({rewardTagline:""}),requestAnimationFrame(r),h(Object(_t.n)(t,!1))},id:"PublishPanel-RewardSetting-1",disabled:o,shouldTrackClick:!0,zaTextPrefix:"赞赏设置"})]}),l&&Object(d.b)(Mt.a,{submitRewardText:O,onClose:s.off,tagline:v,edit:!1})]})},Ut=function(e){var t=Object(m.useDispatch)(),n=Object(m.useSelector)((function(e){return e.switches})).isAnswerRewardable;return Object(p.useEffect)((function(){void 0===n&&t(Object(Dt.b)(["isAnswerRewardable"]))}),[t,n]),n?Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(ze,{name:"赞赏设置"}),Object(d.b)(Ft,Object.assign({},e))]}):null},Vt={allowed:"允许规范转载",need_payment:"允许付费转载",disallowed:"禁止转载"},Gt=function(e){var t=e.currentUser,n=e.updateDraftSettings,a=Object(oe.i)().trackEvent,o=Object(p.useContext)(We),r=o.updateFormData,i=(0,o.getFormData)().reshipmentSettings;return Object(d.b)(Fe,{onChange:function(e){a({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"转载设置-".concat(Vt[e])}}),"need_payment"!==e||t.caEnabled||window.open("/copyright/invite"),r({reshipmentSettings:e}),requestAnimationFrame(n)},value:i,children:Object.keys(Vt).map((function(e){return"need_payment"===e&&t.isOrg?null:Object(d.b)(Ue,{value:e,text:Vt[e]},e)}))})},qt=Object(p.forwardRef)((function(e,t){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(ze,{name:"转载设置"}),Object(d.b)(S.Box,{flex:"1",children:Object(d.b)(Gt,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),Ht=n(505),Kt=n(516),Wt=function(e){var t=e.updateDraftSettings,n=Object(m.useDispatch)(),a=Object(oe.i)().trackEvent,o=Object(p.useContext)(We),r=o.updateFormData,i=(0,o.getFormData)().commentPermission,c=Object(m.useSelector)((function(e){var t;return null===(t=e.commentPermission.answer)||void 0===t?void 0:t.default}))||[];Object(p.useEffect)((function(){n(Object(Kt.c)("answer"))}),[n]),Object(p.useEffect)((function(){i!==Ht.b||Object(Ht.c)()||Object(Ht.e)()}),[i]);return Object(d.b)(Fe,{onChange:function(e){var n=c.find((function(t){return t.permission===e})).text;a({eventType:"Click",action:"Unknown",elementLocation:{type:"Button",text:"评论权限-".concat(n)}}),e!==i&&(r({commentPermission:e}),requestAnimationFrame(t))},value:i,children:c.map((function(e){var t=e.permission,n=e.text,a=e.disable;return t!==Ht.b||i===t||Object(Ht.c)()?Object(d.b)(Ue,{value:t,text:n,disabled:a},t):null}))})},Zt=Object(p.forwardRef)((function(e,t){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(ze,{name:"评论权限"}),Object(d.b)(S.Box,{flex:"1",children:Object(d.b)(Wt,Object.assign(Object.assign({},e),{},{ref:t}))})]})})),Qt=n(1130),Yt=n(439),Jt=n(154),Xt=n(191),$t=n(441),en=n(23),tn=n.n(en),nn=n(28),an=n.n(nn),on=n(27),rn=n.n(on),cn=n(29),ln=n.n(cn),sn=n(19),un=n.n(sn),dn=n(903),bn=n(8);function fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=un()(e);if(t){var o=un()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return ln()(this,n)}}var pn=function(e){rn()(n,e);var t=fn(n);function n(){var e;tn()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleChange=function(t){e.props.onChange(t)},e}return an()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,a=e.name,o=e.type,r=e.value,i=e.checked,c=JSON.stringify(r);return Object(bn.g)("label",{className:j()("CheckItem",t)},Object(bn.g)("input",{className:"CheckItem-input",type:o,name:a,value:c,onChange:this.handleChange,checked:i}),Object(bn.g)("div",{className:"CheckItem-box"},Object(bn.g)("div",{className:"CheckItem-inner"},n),Object(bn.g)(dn.a,{className:"CheckItem-icon",size:20})))}}]),n}(p.Component);pn.propTypes={name:f.a.string,onChange:f.a.func,checked:f.a.bool,className:f.a.string,type:f.a.string,value:f.a.any},pn.defaultProps={name:"checkitems",type:"checkbox"};var hn=pn,mn=n(876),vn=n(140),gn=n(450),On=n(1107),jn=n(945);function yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var Cn=function(e){Object(l.a)(n,e);var t=yn(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:null},e.handleModify=function(){e.setState({modifying:!0})},e.handleChange=function(t){e.setState({value:t.target.value})},e.handleCancel=function(){e.setState({value:null,modifying:!1})},e.handleSubmit=function(t){t.preventDefault(),e.props.onBioChange(e.state.value),e.handleCancel()},e.handleSelect=function(){e.props.onSelect(e.props.value)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.bio,a=e.title,o=e.checked,r=e.rich,i=this.state,c=i.modifying,l=i.value;return c?Object(d.c)("div",{className:"TopicBioItem",children:[Object(d.b)("div",{className:"TopicBioItem-title",children:a}),Object(d.c)("form",{onSubmit:this.handleSubmit,children:[Object(d.b)("div",{className:"TopicBioItem-inner",children:Object(d.b)(jn.a,{className:"TopicBioItem-authorInfo",noLink:!0,author:t,children:Object(d.b)(vn.a,{className:"TopicBioItem-input",defaultValue:n,onChange:this.handleChange,placeholder:a,autoFocus:!0})})}),Object(d.c)("div",{className:"TopicBioItem-inputFooter",children:[Object(d.b)(gn.a,{current:l?l.length:0,max:40}),Object(d.c)("div",{className:"TopicBioItem-actions",children:[Object(d.b)(M.c,{preset:"plain",type:"reset",onClick:this.handleCancel,children:"取消"}),Object(d.b)(M.c,{preset:"primary",color:"blue",type:"submit",children:"保存"})]})]})]})]}):n?Object(d.c)("div",{className:"TopicBioItem",children:[Object(d.b)("div",{className:"TopicBioItem-title",children:a}),Object(d.b)(hn,{name:"topic-bio",type:"radio",onChange:this.handleSelect,value:this.props.value,checked:o,children:Object(d.b)(jn.a,{noLink:!0,author:t,className:"TopicBioItem-authorInfo",children:Object(d.c)("div",{children:[r?Object(d.b)(Yt.a,{inline:!0,className:"TopicBioItem-bio",html:n}):Object(d.b)("span",{className:"TopicBioItem-bio",children:n}),Object(d.b)(On.a,{className:"TopicBioItem-modifyButton",onClick:this.handleModify})]})})})]}):Object(d.b)("div",{className:"TopicBioItem",children:Object(d.c)(M.c,{className:"TopicBioItem-addButton",size:"spread",preset:"link",onClick:this.handleModify,children:[Object(d.b)(mn.a,{text:!0,center:!0})," 添加",a]})})}}]),n}(p.Component);Cn.propTypes={user:f.a.object.isRequired,title:f.a.node.isRequired,value:f.a.object.isRequired,onBioChange:f.a.func.isRequired,onSelect:f.a.func.isRequired,checked:f.a.bool.isRequired};var wn=Cn;function xn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var kn=function(e,t){var n=e.type,a=e.topic,o=(a=void 0===a?{}:a).id,r=t.type,i=t.topic,c=(i=void 0===i?{}:i).id;return n===r&&o===c},Sn=function(e){Object(l.a)(n,e);var t=xn(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:null},e.handleSelect=function(t){return e.setState({value:t})},e.handleChoose=function(){return e.props.onBioChoose(e.state.value)},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;if(this.props.isFetching)return Object(d.b)("div",{className:"TopicBios-loading",children:Object(d.b)($t.a,{})});var t=this.props,n=t.user,a=t.question.topics,o=t.bios,r=t.currentBio,i=t.onHeadlineUpdate,c=t.onBioUpdate,l=this.state.value||r,s={type:"headline"};return Object(d.c)("div",{children:[Object(d.c)("div",{className:"TopicBioItems",children:[Object(d.b)(wn,{title:"一句话介绍",user:n,bio:n.headline,value:s,onBioChange:i,onSelect:this.handleSelect,checked:kn(l,s),rich:!0}),a.map((function(t){var a={type:"topic",topic:{id:t.id}};return Object(d.b)(wn,Object.assign(Object.assign({title:"在 ".concat(t.name," 话题下的话题经验"),user:n},function(e,t){return e.find((function(e){return e.topic.id===t}))}(o,t.id)),{},{value:a,onBioChange:function(e){return c(t.id,e)},onSelect:e.handleSelect,checked:kn(l,a)}),t.id)}))]}),Object(d.b)(H.a,{children:Object(d.b)(M.c,{color:"blue",preset:"primary",onClick:this.handleChoose,children:"完成"})})]})}}]),n}(p.Component);Sn.propTypes={onHeadlineUpdate:f.a.func.isRequired,onBioUpdate:f.a.func.isRequired,onBioChoose:f.a.func.isRequired,question:f.a.object.isRequired,user:f.a.object.isRequired};var Rn=Sn;function An(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var In=function(e){Object(l.a)(n,e);var t=An(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleUpdateHeadline=function(t){e.props.updateProfile(null,{headline:t})},e.handleUpdateBio=function(t,n){e.props.updateBio(t,n)},e.handleBioChoose=function(t){t&&e.props.chooseBio(e.props.question.id,t),e.props.onClose()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.loadBios(this.props.question.id)}},{key:"render",value:function(){return Object(d.b)(Rn,Object.assign({onHeadlineUpdate:this.handleUpdateHeadline,onBioUpdate:this.handleUpdateBio,onBioChoose:this.handleBioChoose},this.props))}}]),n}(p.Component);In.propTypes={question:f.a.object.isRequired};var Tn=Object(m.connect)((function(e,t){var n=e.currentUser,a=e.question.bio,o=e.entities,r=o.questions,i=o.users,c=e.topic.bios,l=t.question.id,s=r[l],u=(a[l]||{result:{type:"headline"}}).result;return{isFetching:c.isFetching,currentBio:{type:u.type,topic:u.topic},bios:s.topics.map((function(e){return{topic:e,bio:c[e.id]}})),question:s,user:i[n]}}),{updateProfile:Jt.n,updateBio:Xt.hb,chooseBio:pe.e,loadBios:pe.H})(In),En=["shown","onClose"];function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var Bn=function(e){Object(l.a)(n,e);var t=Nn(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,a=Object(Ce.default)(e,En);return Object(d.b)(H.b,{title:"编辑话题经验",subtitle:Object(d.c)("span",{children:["可以填写你从事的职业、取得的资格或过往经历，",Object(d.b)("br",{}),"让你在这个问题下的回答更具说服力。"]}),onClose:n,size:"large",hotKeyClosable:!1,maskClosable:!1,children:t&&Object(d.b)(Tn,Object.assign(Object.assign({},a),{},{onClose:n}))})}}]),n}(p.Component);Bn.propTypes=Object.assign({shown:f.a.bool.isRequired,onClose:f.a.func.isRequired},Tn.propTypes);var zn=Bn,Ln=function(e){var t=e.children;return"string"!=typeof t||t.trim().length?Object(d.b)(S.Text,{maxWidth:"292px",mr:"20px",css:[Object(te.d)(1)],children:t}):null},Pn=function(e){var t=e.questionId,n=e.currentUser,a=Object(m.useSelector)((function(e){return e.question.bio})),o=Object(m.useSelector)((function(e){return e.topic.bios})),r=(a[t]||{result:{type:"headline"}}).result;return"topic"===r.type&&(r.bio=o[r.topic.id]||r.bio),r.bio&&"headline"!==r.type?Object(d.b)(Ln,{children:r.bio}):n.headline?Object(d.b)(Ln,{children:Object(d.b)(Yt.a,{inline:!0,html:(r||{}).bio||n.headline})}):null},Mn=function(e){var t=e.question,n=e.currentUser,o=Object(q.a)(!1),r=Object(a.a)(o,2),i=r[0],c=r[1];return Object(d.c)(S.Box,{color:"GBL05A",flex:"1",css:{fontSize:"14px"},children:[Object(d.c)(S.Flex,{alignItems:"center",height:"100%",css:{cursor:"pointer"},onClick:c.on,children:[Object(d.b)(Pn,{questionId:t.id,currentUser:n}),Object(d.c)(oe.a,{as:S.Flex,zaType:"Button",zaText:"一句话介绍-修改",color:"GBL01A",alignItems:"center",children:["修改",Object(d.b)(Qt.a,{css:{marginLeft:"2px"},size:16})]})]}),Object(d.b)(zn,{shown:i,question:t,onClose:c.off})]})},_n=function(e){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(ze,{name:"一句话介绍"}),Object(d.b)(Mn,Object.assign({},e))]})},Dn=n(2838),Fn=n(1768),Un=function(e){var t,n,o=e.answer,r=Object(m.useDispatch)(),i=Object(Oe.q)(),c=null==o||null===(t=o.attachment)||void 0===t||null===(n=t.video)||void 0===n?void 0:n.campaign,l=Boolean(!(null!=c&&c.title)),s=Object(q.a)(!1),u=Object(a.a)(s,2),b=u[0],f=u[1],h=Object(p.useState)([]),v=Object(a.a)(h,2),g=v[0],O=v[1];Object(q.i)((function(){r(Object(Z.l)()).then((function(e){var t=e.payload;O((null==t?void 0:t.data)||[])}))}));var j=Object(q.d)((function(e){f.off(),r(Object(Oe.m)(e))})),y=Object(q.d)((function(){r(Object(Oe.m)(null))})),C=l?"GBL01A":"GBL05A";return Object(d.c)(S.Flex,{color:"GBL05A",flex:"1",alignItems:"center",css:{fontSize:"14px"},children:[null!=i&&i.title?Object(d.c)(S.Flex,{alignItems:"center",px:"14px",height:"30px",color:C,css:function(e){return{borderRadius:"20px",background:e.colorMod(e.colors[C]).alpha(.1),cursor:"pointer"}},onClick:function(){l&&f.on()},children:[Object(d.b)(Dn.a,{mr:4,size:20}),i.title,l&&Object(d.b)(Ge.a,{text:!0,center:!0,size:6,css:{marginLeft:4},onClick:function(e){y(),e.stopPropagation()}})]}):Object(d.c)(oe.a,{as:S.Flex,zaType:"Button",zaText:"绑定活动-选择活动",height:"100%",alignItems:"center",color:"GBL01A",css:{cursor:l?"pointer":"not-allowed"},onClick:function(){l&&f.on()},children:[Object(d.b)(Dn.a,{mr:4,size:20}),"选择活动"]}),Boolean(null==g?void 0:g.length)&&Object(d.b)(Fn.a,{shown:b,onClose:f.off,defaultCampaignId:null==i?void 0:i.id,campaignList:g,onSubmit:j})]})},Vn=function(e){return Object(d.c)(S.Flex,{py:"11px",children:[Object(d.b)(ze,{name:"绑定活动"}),Object(d.b)(Un,Object.assign({},e))]})},Gn=n(904),qn=function(){var e=Object(m.useSelector)((function(e){return Object(ve.b)(e)})),t=e&&e.isOrg,n=Object(m.useSelector)((function(e){return e.switches})).isCreator;return Object(d.c)(oe.e,{as:S.Flex,shouldTrackClick:!0,zaType:"Button",zaText:"创作设置入口",alignItems:"center",height:"61px",color:"GBL05A",css:function(e){return{cursor:"pointer","&:hover":{color:e.colors.GBL07A}}},onClick:function(){window.open(t||!n?"/knowledge-plan/editor-setting":"/creator/editor-setting")},children:[Object(d.b)(Gn.a,{text:!0,size:16}),Object(d.b)(S.Text,{ml:"6px",fontSize:"15px",children:"管理默认设置"})]})},Hn=n(2846),Kn=n(106),Wn=n(959),Zn=function(e){var t=e.className,n=e.onClose,a=e.shown,o=e.allInviters,r=e.onChoose;return Object(d.b)(P.b,{title:"添加「谢邀」卡片",subtitle:"选择邀请人，添加感谢他的卡片",onClose:n,className:t,css:{width:"536px"},children:a&&o.map((function(e){return Object(d.c)(S.Flex,{css:{padding:"12px 0"},children:[Object(d.b)(jn.a,{author:e}),Object(d.b)(M.c,{color:"color",preset:"blue",css:{height:"32px",marginLeft:"auto"},onClick:function(){D.a.trackEvent(null,{id:7682,action:"Click"}),r&&r(e)},children:"选择"})]},e.id)}))})},Qn=n(1232),Yn=function(e){var t=e.shown,n=e.hasShown,a=e.children,o=Object(p.useRef)(n),r=Object(p.useRef)(t);return Object(p.useEffect)((function(){!t&&r.current&&(o.current=!0),r.current=t}),[t]),t&&!o.current&&a},Jn=function(e){var t=e.className,n=e.shown,o=e.hasShown,r=e.inviters,i=e.onConfirm,c=e.onCancel,l=Object(p.useState)(n),s=Object(a.a)(l,2),u=s[0],b=s[1],f=Object(p.useRef)(n);return Object(p.useEffect)((function(){f.current!==n&&b(n),f.current=n}),[n]),(null==r?void 0:r.length)>0&&Object(d.b)(Yn,{shown:u,hasShown:o,children:Object(d.c)(S.Flex,{className:t,pb:"12px",px:"16px",mx:"-20px",mb:"16px",color:"GBK05A",justifyContent:"space-between",alignItems:"center",sx:{borderBottom:"1px solid",borderColor:"GBK09A",fontSize:"15px",lineHeight:"20px",position:"relative",zIndex:"0"},children:[Object(d.c)(S.Flex,{alignItems:"center",children:[r.map((function(e,t){return Object(d.b)(S.Image,{src:r[t].avatarUrl,size:24,sx:{borderRadius:"50%",border:"2px solid",borderColor:"GBK99A",position:"relative",zIndex:r.length-t,marginLeft:t?"-14px":"0"}},e.id)})),Object(d.b)(S.Text,{ml:"8px",children:r[0].name+(r.length>1?"等 ".concat(r.length," 人"):"")}),"邀请你回答"]}),Object(d.c)(S.Flex,{alignItems:"center",children:[Object(d.b)(S.Text,{color:"primary",ml:"16px",css:{cursor:"pointer"},onClick:function(){D.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===r.length?"0":"1"}]},{button:{text:"添加谢邀"}}),i&&i(r)},children:"添加谢邀"}),Object(d.b)(S.Text,{ml:"16px",css:{cursor:"pointer"},onClick:function(){b(!1),D.a.trackEvent(null,{id:7683,action:"Click",path:[{module_name:1===r.length?"0":"1"}]},{button:{text:"忽略"}}),c&&c()},children:"忽略"})]})]})})},Xn=Object(p.forwardRef)((function(e,t){var n=e.getAllInviters,o=e.inviterQuery,r=e.getStore,i=e.syncDraftImmediately,c=Object(p.useContext)(We),l=c.updateFormData,s=(0,c.getFormData)().thankInviterInfo,u=Object(p.useState)(!1),b=Object(a.a)(u,2),f=b[0],h=b[1],m=function(e){l({thankInviterInfo:e}),requestAnimationFrame((function(){i()}))},v=Object(p.useState)(null),g=Object(a.a)(v,2),O=g[0],j=g[1],y=Object(q.d)((function(){return h(!1)}));return Object(p.useImperativeHandle)(t,(function(){return{openInviterListModal:function(){return h(!0)},getInvitersData:function(){return O},getThankInviterInfo:function(){return s}}}),[O,s]),Object(p.useEffect)((function(){n().then((function(e){var t=e.payload;j(t.data);var n=r();n.setEditorState(n.getEditorState())}))}),[]),Object(d.c)(d.a,{children:[s&&Object(d.b)(Qn.a,{css:{marginBottom:16,marginTop:"4px !important"},showDeleteButton:!0,item:{isLabeled:!0},inviter:s,onDelete:function(){m(null)}}),(null==O?void 0:O.length)>0&&Object(d.b)(Jn,{hasShown:Boolean(o)||Boolean(s),shown:!s,inviters:O,onConfirm:function(e){null!=e&&e.length&&(1!==e.length?h(!0):m(e[0]))}}),Object(d.b)(Zn,{onClose:y,shown:f,allInviters:O,onChoose:function(e){m(e),y()}})]})})),$n=function(e){var t=e.getShouldShowToolbarButton,n=e.getAllInviters,a=e.inviterQuery,o=e.getInitialThankInviterInfo,r=e.syncDraftImmediately,i={},c=Object(p.createRef)(null);return{initialize:function(e){Object.assign(i,e)},componentsBeforeEditor:[{component:Object(d.b)(Xn,{getAllInviters:n,inviterQuery:a,ref:c,getStore:function(){return i},getInitialThankInviterInfo:o,syncDraftImmediately:r}),priority:0}],toolbar:{label:"添加谢邀",section:Kn.a.CUSTOM_MAIN,priority:3,icon:Hn.a,onClick:function(){c.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null!==(e=c.current)&&void 0!==e&&null!==(t=e.getInvitersData())&&void 0!==t&&t.length)||(null===(n=c.current)||void 0===n?void 0:n.getThankInviterInfo()))}},toolbarV2:{label:"添加谢邀",section:Wn.a.BUSINESS_MEDIA,text:"谢邀",icon:Hn.a,priority:3,onClick:function(){c.current.openInviterListModal()},shouldShow:t,shouldDisabled:function(){var e,t,n;return Boolean(!(null!==(e=c.current)&&void 0!==e&&null!==(t=e.getInvitersData())&&void 0!==t&&t.length)||(null===(n=c.current)||void 0===n?void 0:n.getThankInviterInfo()))}}}},ea=Object(g.withRouter)((function(e){var t,n=e.question,o=e.answer,r=e.isVideoAnswer,i=e.isReediting,c=e.location,l=e.scheduledPublishAt,s=e.initialScheduledPublishAt,u=e.canScheduledPublish,b=e.setUseScheduledPublish,f=e.className,h=e.updateDraftSettings,v=e.getAnswerFormRef,g=Object(m.useDispatch)(),O=Object(p.useContext)(We).updateFormData,j=((null==c?void 0:c.query)||{}).push_activity,y=Object(m.useSelector)(ve.b),C=Object(p.useState)(!1),w=Object(a.a)(C,2),x=w[0],k=w[1];Object(q.i)((function(){Promise.all([g(Object(dt.X)()),g(Object(dt.Y)(n.id)),o&&g(Object(he.x)(o.id))].filter(Boolean)).then((function(e){var t,n,r,i,c,l,s,u,d=Object(a.a)(e,3),b=d[0],f=d[1],p=d[2];O(Object.assign(Object.assign(Object.assign(Object.assign({},Object(bt.e)(null===(t=b.payload)||void 0===t?void 0:t.settings)),o&&p&&Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Object(bt.f)(p.payload)),function(e){var t;return{rewardTagline:(null==e||null===(t=e.rewardInfo)||void 0===t?void 0:t.tagline)||""}}(o)),(r=p.payload,{isDisclaimerChecked:u="open"===(null==r||null===(i=r.disclaimerInfo)||void 0===i||null===(c=i[0])||void 0===c?void 0:c.status),disclaimerType:u?null==r||null===(l=r.disclaimerInfo)||void 0===l||null===(s=l[0])||void 0===s?void 0:s.type:"none"})),function(e){var t;return null!=e&&null!==(t=e.thankInviterInfo)&&void 0!==t&&t.member?{thankInviterInfo:e.thankInviterInfo.member}:null}(p.payload)),function(e){var t;return e?{tableOfContentsEnabled:null==e||null===(t=e.tableOfContents)||void 0===t?void 0:t.enabled}:null}(null==o?void 0:o.settings)),Object(bt.a)(o))),Object(bt.g)(null===(n=f.payload)||void 0===n?void 0:n.settings)),j&&{pushActivity:Boolean(Number(j))}))})).finally((function(){k(!0)}))}));var R=null==n||null===(t=n.relationship)||void 0===t?void 0:t.isAnonymous,A="show"===Object(ge.n)("gue_anonymous"),I=(n||{}).questionType,T=y&&!y.isOrg,E=T&&("normal"===I||"commercial"===I&&A||R)&&!r;return r&&i?null:x?Object(d.c)(S.Box,{pl:"10px",pr:"20px",width:"100%",bg:"GBK99A",css:{position:"relative"},className:f,children:[Object(d.b)(S.Box,{sx:{borderTop:"1px solid",borderColor:"GBK09A"},ml:"10px"}),Object(d.b)(S.Text,{color:"GBK03A",ml:"10px",pt:"24px",pb:"12px",css:{lineHeight:"24px",fontSize:"17px",fontWeight:"500"},children:"发布设置"}),E&&!i&&Object(d.b)(St,{question:n,isAnonymous:R,getAnswerFormRef:v}),!r&&Object(d.b)(Tt,{question:n,updateDraftSettings:h}),Object(d.b)(wt,{type:"answer",questionId:null==n?void 0:n.id,answerId:null==o?void 0:o.id,taskBindProps:{isAnonymous:R,isVideoAnswer:r},reportProps:{isAnonymous:R,updateDraftSettings:h}}),u&&Object(d.b)(zt,{scheduledPublishAt:l,initialScheduledPublishAt:s,setUseScheduledPublish:b}),r&&Object(d.b)(Vn,{answer:o}),!i&&T&&Object(d.b)(_n,{question:n,currentUser:y}),!i&&Object(d.b)(qt,{currentUser:y,updateDraftSettings:h}),!i&&Object(d.b)(Zt,{updateDraftSettings:h}),!i&&!r&&Object(d.b)(Pt,{updateDraftSettings:h}),Object(d.b)(Ut,{question:n,isAnonymous:R,updateDraftSettings:h}),Object(d.b)(qn,{})]}):null})),ta=n(877),na=function(e){var t=e.canSubmit,n=e.handleSubmit,a=e.isReediting,o=e.scheduledPublishAt,r=e.type,i=e.className;return Object(d.b)(oe.a,{as:M.c,zaText:!0,zaType:"Button",zaAction:"Answer",width:86,height:34,lineHeight:"34px",textAlign:"center",fontSize:14,color:M.a.Blue,preset:M.b.Primary,css:{borderRadius:3,cursor:t?"pointer":"not-allowed",opacity:t?1:.3},onClick:n,className:i,children:a?"提交修改":o?"定时发送":"发布".concat("answer"===r?"回答":"文章")})};var aa=n(972),oa=function(e){var t=e.shown,n=e.onClose;return Object(d.b)(H.b,{onClose:n,title:"该问题暂时只支持客户端进行回答",children:t&&Object(d.b)("div",{className:"SlideshowEditBlockModal",children:Object(d.b)(M.c,{preset:M.b.Primary,color:M.a.Blue,onClick:n,children:"知道了"})})})};oa.propTypes={shown:f.a.bool.isRequired,onClose:f.a.func.isRequired};var ra=oa,ia=n(2077),ca=n(631),la=n(1478),sa=n(1075),ua=Object.assign;var da=function(e){return h.a.createElement(Qe.a,ua({width:"150",height:"120",viewBox:"0 0 150 120"},e),h.a.createElement("path",{fill:"#EBEEF5",d:"M102 30.998A2.996 2.996 0 0098.998 28H50.002A2.996 2.996 0 0047 30.998v58.147l.193-.125c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.453-.939 3.473-.94 4.927 0l2.537 1.64 2.536-1.64c1.413-.913 3.363-.94 4.807-.075V30.998zm-1.508 60.542c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.165 2.692-4.165-2.692c-.464-.3-1.209-.298-1.67 0l-4.316 2.79A1.997 1.997 0 0144 93V30.997A5.996 5.996 0 0150.002 25h48.996A5.996 5.996 0 01105 30.998V93a2 2 0 01-.396 1.2l-4.112-2.66z"}),h.a.createElement("path",{fill:"#F7F8FA",d:"M55 38.999c0-.552.439-.999.999-.999H75c.552 0 .999.439.999.999V58a.993.993 0 01-.999.999H56a.993.993 0 01-.999-.999V39zm25 .501c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 39.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H81.498A1.495 1.495 0 0180 57.5zm-25 9c0-.828.677-1.5 1.505-1.5h35.99a1.499 1.499 0 110 3h-35.99A1.499 1.499 0 0155 66.5zm0 9c0-.828.665-1.5 1.505-1.5h24.99a1.499 1.499 0 110 3h-24.99A1.499 1.499 0 0155 75.5z"}))};function ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var fa={current:"当前草稿",saved:"自动保存",published:"发布过的版本"},pa=function(e){Object(l.a)(n,e);var t=ba(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).formatDate=function(e){return la.a("current"===e.versionType?1e3*e.updatedAt:1e3*e.createdAt,"yyyy-MM-dd HH:mm")},e.handleDraftClick=function(e){e.preventDefault()},e}return Object(i.a)(n,[{key:"renderCurrentDraft",value:function(){var e=this.props,t=e.currentDraft,n=e.onRevert,a=e.draftId,o=e.draftType,r=t.isFetching,i=t.data;return Object(d.c)("div",{className:"DraftHistory-main",children:[r&&Object(d.b)($t.a,{className:"DraftHistory-loading"}),!r&&i&&Object(d.c)(p.Fragment,{children:[i.draft.title&&Object(d.b)("div",{className:"DraftHistory-draftTitle",children:i.draft.title}),Object(d.b)(sa.a,{className:"DraftHistory-draft",html:i.draft.content,onClick:this.handleDraftClick,sourceType:o,sourceId:a}),Object(d.c)("div",{className:"DraftHistory-actions",children:[Object(d.c)("div",{className:"DraftHistory-meta",children:[this.formatDate(i)," ",fa[i.versionType]]}),Object(d.b)(M.c,{className:"DraftHistory-revert",disabled:"current"===i.versionType,onClick:function(){return n(i)},children:"恢复此版本"})]})]})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.history,a=t.currentVersion,o=t.currentDraft,r=t.getHistory,i=t.onSelect;return n?n.isFetching&&!n.items?Object(d.b)("div",{className:"DraftHistory",children:Object(d.b)($t.a,{className:"DraftHistory-loading"})}):Object(d.c)("div",{className:"DraftHistory",children:[Object(d.c)("div",{className:"DraftHistory-side",children:[Object(d.b)("div",{className:"DraftHistory-title",children:"历史版本"}),Object(d.b)(X.b,{className:"DraftHistory-history",getContainer:function(e){return e},isLoading:n.isFetching,isDrained:n.isDrained,onLoad:r,children:Object(d.b)("div",{children:n.items&&n.items.map((function(t,n){return Object(d.c)("a",{href:"#",className:j()("DraftHistory-version",{"DraftHistory-version--selected":a&&t.versionType===a.versionType&&t.id===a.id}),onClick:function(e){e.preventDefault(),i(t)},children:[Object(d.b)("div",{className:"DraftHistory-versionDate",children:e.formatDate(t)}),Object(d.b)("div",{className:"DraftHistory-versionType",children:fa[t.versionType]})]},n)}))})})]}),n.items&&!n.items.length&&Object(d.b)("div",{className:"DraftHistory-main",children:Object(d.c)("div",{className:"DraftHistory-empty",children:[Object(d.b)(da,{className:"DraftHistory-emptyIcon"}),Object(d.b)("div",{className:"DraftHistory-emptyText",children:"还没有历史版本"})]})}),o&&this.renderCurrentDraft()]}):null}}]),n}(p.Component);pa.propTypes={history:f.a.object,currentVersion:f.a.object,currentDraft:f.a.object,onSelect:f.a.func,onRevert:f.a.func};var ha=pa;function ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var va=function(e){Object(l.a)(n,e);var t=ma(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={currentVersion:null},e.getHistory=function(){var t=e.props,n=t.type,a=t.id;(0,t.getHistory)(n,a)},e.handleSelect=function(t){e.setState({currentVersion:t})},e.handleRevert=function(t){var n=e.props,a=n.revert,o=n.onReverted;a(t.versionType,t.id).then((function(){o&&o(t)}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.getHistory)(t,n)}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,a=n.drafts,o=n.getDraft,r=this.state.currentVersion,i=t.currentVersion;!r||i&&i.versionType===r.versionType&&i.id===r.id||a["".concat(r.versionType,"_").concat(r.id)]||o(r.versionType,r.id)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.type,n=e.id;(0,e.reset)(t,n)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.drafts,a=e.draftId,o=e.draftType,r=this.state.currentVersion;return Object(d.b)(ha,{history:t,currentVersion:r,currentDraft:r?n["".concat(r.versionType,"_").concat(r.id)]:null,draftId:a,draftType:o,getHistory:this.getHistory,onSelect:this.handleSelect,onRevert:this.handleRevert})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.history&&e.history.items&&e.history.items.length&&!t.currentVersion?{currentVersion:e.history.items[0]}:null}}]),n}(p.Component);va.propTypes={type:f.a.string.isRequired,id:f.a.number.isRequired,onReverted:f.a.func};var ga=Object(m.connect)((function(e,t){var n=t.type,a=t.id;return{history:e.draftHistory.history["".concat(n,"_").concat(a)],drafts:e.draftHistory.drafts}}),{getHistory:ca.c,getDraft:ca.b,revert:ca.e,reset:ca.d})(va);function Oa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var ja=function(e){Object(l.a)(n,e);var t=Oa(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleReverted=function(t){var n=e.props,a=n.onClose,o=n.onReverted;o&&o(t),a&&a(),D.a.trackEvent(null,{id:5016,action:"Click"})},e.handleClose=function(){var t=e.props.onClose;t&&t(),D.a.trackEvent(null,{id:5015,action:"Click"})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.type,a=e.id,o=e.draftId,r=e.draftType;return Object(d.b)(H.b,{className:"DraftHistoryModal",size:"fullPage",onClose:this.handleClose,children:t&&Object(d.b)(ga,{type:n,id:a,draftId:o,draftType:r,onReverted:this.handleReverted})})}}]),n}(p.Component);ja.propTypes={shown:f.a.bool.isRequired,onClose:f.a.func,type:f.a.string.isRequired,id:f.a.number.isRequired,onReverted:f.a.func},ja.defaultProps={shown:!0};var ya=ja,Ca=Object(p.forwardRef)((function(e,t){var n,o,r=e.type,i=e.id,c=e.getId,l=e.handleReverted,s=e.draftId,u=e.draftType,b=e.getDraftId,f=Object(p.useState)(!1),h=Object(a.a)(f,2),m=h[0],v=h[1],g=Object(q.d)((function(){return v(!0)})),O=Object(q.d)((function(){return v(!1)}));return Object(p.useImperativeHandle)(t,(function(){return{handleOpen:g,handleClose:O}}),[g,O]),Object(d.b)(ya,{shown:m,onClose:function(){return v(!1)},type:r,id:null!==(n=null==c?void 0:c())&&void 0!==n?n:i,draftId:null!==(o=null==b?void 0:b())&&void 0!==o?o:s,draftType:u,onReverted:l})})),wa=function(e){var t=e.type,n=e.id,a=e.syncDraft,o=e.getId,r=e.getDraftId,i=e.draftId,c=e.draftType,l=e.shouldShowToolbarButton,s=void 0===l?function(){return!0}:l,u={};u.draftModalRef=Object(p.createRef)(null);return{initialize:function(e){Object.assign(u,e)},handleCommand:function(e){return"toggle-draft-history-modal"===e?(u.draftModalRef.current.handleOpen(),"handled"):"not-handled"},components:[Object(d.b)(Ca,{type:t,id:n,getId:o,draftId:i,getDraftId:r,draftType:c,ref:u.draftModalRef,handleReverted:function(e){u.getEditorRef().props.resetWithValue(e.draft.content)}},"draft_history_modal")],toolbar:{section:"menu",label:"历史版本",icon:ia.a,onClick:function(){a.flush(),u.draftModalRef.current.handleOpen(),D.a.trackEvent(null,{id:5013,action:"Click",name:"历史版本入口"})},shouldShow:s}}},xa=n(12),ka=Object.assign;function Sa(e){return h.a.createElement(xa.a,ka(ka({width:"16",height:"16",viewBox:"0 0 16 16","data-new-api":"Xmark16","data-old-api":"Close16"},e),{className:"ZDI ZDI--Close16"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M13.46 3.46a.65.65 0 10-.92-.92L8 7.08 3.46 2.54a.65.65 0 00-.92.92L7.08 8l-4.54 4.54a.65.65 0 10.92.92L8 8.92l4.54 4.54a.65.65 0 10.92-.92L8.92 8l4.54-4.54z",fillRule:"evenodd",clipRule:"evenodd"}))}var Ra=n(2796),Aa=n(2797),Ia=n(2799),Ta=n(2800),Ea=n(2801),Na=n(2802),Ba=n(2803),za=n(2795),La=n(2072),Pa=n(2073),Ma=Object.assign;function _a(e){return h.a.createElement(xa.a,Ma(Ma({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Eraser24","data-old-api":"Eraser24"},e),{className:"ZDI ZDI--Eraser24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M6.956 17.185c.435.365.985.565 1.552.565h5.245c.572 0 1.114-.253 1.482-.69l.213-.255 4.715-5.62a2.415 2.415 0 00-.298-3.401l-5.11-4.288a2.415 2.415 0 00-3.402.298l-6.858 8.174a2.415 2.415 0 00.298 3.402l2.122 1.78.041.035zm1.552-.935a.915.915 0 01-.588-.214l-.041-.034-2.122-1.781a.915.915 0 01-.113-1.29l6.859-8.173a.915.915 0 011.289-.113l5.11 4.288a.915.915 0 01.112 1.289l-4.715 5.619-.213.254a.434.434 0 01-.333.155H8.508zM17 21.75a.75.75 0 100-1.5H5a.75.75 0 000 1.5h12z",fillRule:"evenodd",clipRule:"evenodd"}))}var Da=n(2021),Fa=n(2806),Ua=n(2815),Va=n(2813),Ga=n(2829),qa=n(2816),Ha=n(169),Ka=[{icon:Ra.b,label:"粗体",shortcut:"⌘+B",shortcutWin:"Ctrl+B"},{icon:Aa.b,label:"斜体",shortcut:"⌘+I",shortcutWin:"Ctrl+I"},{icon:Ia.b,label:"一级标题",shortcut:"⌘+⌥+1",shortcutWin:"Ctrl+Alt+1"},{icon:Ta.b,label:"二级标题",shortcut:"⌘+⌥+2",shortcutWin:"Ctrl+Alt+2"},{icon:Ea.b,label:"有序列表",shortcut:"⌘+⇧+L",shortcutWin:"Ctrl+Shift+L"},{icon:Na.b,label:"无序列表",shortcut:"⌘+L",shortcutWin:"Ctrl+L"},{icon:Ba.a,label:"引用块",shortcut:"⌘+⇧+U",shortcutWin:"Ctrl+Shift+U"},{icon:za.b,label:"代码块",shortcut:"⌘+⌥+C",shortcutWin:"Ctrl+Alt+C"},{icon:La.b,label:"撤销",shortcut:"⌘+Z",shortcutWin:"Ctrl+Z"},{icon:Pa.b,label:"重做",shortcut:"⌘+Y",shortcutWin:"Ctrl+Y"},{icon:_a,label:"清除格式",shortcut:"⌘+\\",shortcutWin:"Ctrl+\\"},{label:"插入链接",icon:Da.c,shortcut:"⌘+K",shortcutWin:"Ctrl+K"},{icon:Fa.c,label:"目录",shortcut:"⌘+⌥+J",shortcutWin:"Ctrl+Alt+J"},{icon:Ua.b,label:"插入注释",shortcut:"⌘+⌥+R",shortcutWin:"Ctrl+Alt+R"},{icon:Va.b,label:"插入分割线",shortcut:"⌘+⌥+S",shortcutWin:"Ctrl+Alt+S"},{label:"插入表格",icon:Ga.b,shortcut:"⌘+⌥+T",shortcutWin:"Ctrl+Alt+T"},{label:"插入公式",icon:qa.b,shortcut:"⌘+⌥+E",shortcutWin:"Ctrl+Alt+E"}],Wa=function(e){var t=e.name,n=e.isFirst;return Object(d.c)(d.a,{children:[!n&&Object(d.b)(S.Text,{color:"GBK06A",fontSize:"12px",mx:"4px",children:"+"}),Object(d.b)(S.Flex,{px:"4px",css:function(e){return[{minWidth:"24px",borderRadius:"2px",height:"24px",lineHeight:"26px",background:e.colors.GBK10C,textAlign:"center",color:e.colors.GBK05A,fontSize:"14px",alignItems:"center",justifyContent:"center"},n&&{marginLeft:"auto"}]},children:t})]})},Za=function(e){var t=e.label,n=e.Icon,a=e.shortcut;return Object(d.c)(S.Flex,{alignItems:"center",css:{"&+&":{marginTop:"20px"}},children:[Object(d.b)(n,{size:20,css:function(e){return{color:e.colors.GBK03A}}}),Object(d.b)(S.Text,{ml:"8px",color:"GBK03A",fontSize:"14px",children:t}),a.split("+").map((function(e,t){return Object(d.b)(Wa,{name:e,isFirst:!t},t)}))]})};var Qa=Object.assign;var Ya=Object.assign;var Ja=n(2812),Xa=Object.assign;var $a=[{icon:Ia.c,label:"一级标题",shortcut:"#+空格"},{icon:Ta.c,label:"二级标题",shortcut:"##+空格"},{icon:Ea.c,label:"有序列表",shortcut:"1+.+空格"},{icon:Na.c,label:"无序列表",shortcut:"*+空格"},{icon:Ra.b,label:"粗体",shortcut:"**文字**"},{icon:Aa.c,label:"斜体",shortcut:"*文字*"},{icon:function(e){return h.a.createElement(xa.a,Qa(Qa({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ItalicBold24","data-old-api":"ItalicBold24"},e),{className:"ZDI ZDI--ItalicBold24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M10.25 2.75a.75.75 0 00-.728.568l-4.25 17A.75.75 0 006 21.25h8a4.75 4.75 0 002.381-8.86A5.25 5.25 0 0013.5 2.75h-3.25zm3.25 9a3.75 3.75 0 100-7.5h-2.664l-1.875 7.5H13.5zm-4.914 1.5l-1.625 6.5H14a3.25 3.25 0 000-6.5H8.586z",fillRule:"evenodd",clipRule:"evenodd"}))},label:"倾斜加粗",shortcut:"***文字***"},{icon:function(e){return h.a.createElement(xa.a,Ya(Ya({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"InlineCode24","data-old-api":"InlineCode24"},e),{className:"ZDI ZDI--InlineCode24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M4 4.25a.75.75 0 000 1.5h16a.75.75 0 000-1.5H4zm7.242 12.184a.75.75 0 01-.597-.877l1.419-7.447a.75.75 0 011.473.28l-1.418 7.447a.75.75 0 01-.877.597zm-2.099-7.71a.75.75 0 010 1.06l-2.082 2.083 2.082 2.083a.75.75 0 11-1.06 1.06L5.47 12.397a.75.75 0 010-1.06l2.613-2.613a.75.75 0 011.06 0zm5.714 1.191a.75.75 0 011.06-1.06l2.613 2.612a.75.75 0 010 1.061l-2.613 2.613a.75.75 0 11-1.06-1.06l2.082-2.083-2.082-2.083zM3.25 19a.75.75 0 01.75-.75h16a.75.75 0 010 1.5H4a.75.75 0 01-.75-.75z"}))},label:"行内代码",shortcut:"`文字`"},{icon:za.b,label:"代码块",shortcut:"```+回车"},{icon:Ba.c,label:"引用块",shortcut:">+空格"},{icon:Va.b,label:"分割线",shortcut:"---+回车"},{icon:Ja.b,label:"插入图片",shortcut:"![描述](链接)+空格"},{icon:function(e){return h.a.createElement(xa.a,Xa(Xa({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Latex24","data-old-api":"Latex24"},e),{className:"ZDI ZDI--Latex24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M16.647 7.726l-.88-2.281-.879 2.281h1.759zm.578 1.5l.557 1.445a.75.75 0 101.4-.54l-2.248-5.83c-.412-1.068-1.921-1.068-2.333 0l-2.248 5.83a.75.75 0 101.4.54l.557-1.445h2.915zM5.518 3.6a.75.75 0 01.75.75v5.302h3.959a.75.75 0 010 1.5h-4.21c-.69 0-1.25-.56-1.25-1.25V4.35a.75.75 0 01.75-.75zm12.324 9.623a.75.75 0 10-1.158.954l2.1 2.548-2.1 2.549a.75.75 0 101.158.954l1.914-2.323 1.914 2.323a.75.75 0 101.158-.954l-2.1-2.549 2.1-2.548a.75.75 0 00-1.157-.954l-1.915 2.323-1.914-2.323zm-9.086.977c0-.69.56-1.25 1.25-1.25h4.21a.75.75 0 010 1.5h-3.96v1.525h3.406a.75.75 0 010 1.5h-3.405v1.526h3.959a.75.75 0 010 1.5h-4.21c-.69 0-1.25-.56-1.25-1.25V14.2zM1.75 12.95a.75.75 0 000 1.5h1.743v5.301a.75.75 0 001.5 0v-5.3h1.743a.75.75 0 000-1.5H1.75z",fillRule:"evenodd",clipRule:"evenodd"}))},label:"LaTeX 语法",shortcut:"$文字$+空格"},{icon:Da.c,label:"插入链接",shortcut:"[标题](链接)+空格"}];var eo=[{tabName:"目录",describe:["选中工具栏的目录功能后，在编辑器中添加标题，左侧自动识别标题生成目录；",Object(d.c)(d.a,{children:[Object(d.b)(S.Text,{my:"8px",children:"若不想添加此标题至目录中，可将鼠标悬浮在目录区域的对应标题上，点击「删除」按钮即可移除；"}),Object(d.b)(S.Image,{my:"8px",src:"https://pic1.zhimg.com/v2-3173fb93f4c628ebc8245a2ae2ecea1d.png?source=6a64a727"}),Object(d.b)(S.Text,{my:"8px",children:"若想重新添加标题至目录中，可以在正文中选中此标题，并在目录区域找到对应标题，点击「固定」按钮即可重新添加。"}),Object(d.b)(S.Image,{my:"8px",src:"https://pic2.zhimg.com/v2-1cabcd37bc16361cf95f172fc3ef86f0.png?source=6a64a727"})]})]},{tabName:"代码",describe:["点击工具栏中的代码块图标后，编辑器内生成代码卡片，右上方选择语法，可在代码块中展示语法高亮。"]},{tabName:"公式",describe:["点击工具栏中的公式图标后，在公式编辑器输入 LaTeX 语法，下方为预览区。",Object(d.c)(d.a,{children:["您可在",Object(d.b)(S.Link,{css:function(e){return{color:e.colors.GBL01A}},target:"_blank",href:"https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference",children:"LaTeX基础教程"}),"中参考更多语法"]})]},{tabName:"注释",describe:["点击工具栏中的注释图标，在注释编辑弹框中输入注释文本及链接后，文本对应的注释会出现在文末。"]},{tabName:"历史版本",describe:["点击工具栏中的历史版本后，可在自动保存的草稿版本中查看历史草稿，点击恢复此版本可还原历史草稿。"]},{tabName:"文档导入",describe:["点击工具栏中的文档图标，导入 .docx/.md 文档后，编辑器会自动解析内容并展示在编辑器中。若粘贴图片失败，建议使用文档导入功能。"]}],to=function(e){var t=e.name,n=e.describe,a=e.isFirst;return Object(d.c)(S.Box,{css:function(e){return{color:e.colors.GBK03A,paddingTop:a?"0":"20px"}},fontSize:14,fontWeight:400,children:[Object(d.b)(S.Text,{css:function(e){return{color:e.colors.GBK02A}},mb:"8px",fontWeight:500,children:t}),n.map((function(e){return"string"==typeof e?Object(d.b)(S.Text,{lineHeight:"20px",children:e}):Object(d.b)(d.a,{children:e})}))]})};var no=["active"],ao=[{name:"快捷键",component:function(e){var t=e.activeTabName,n=Object(Ha.b)().isAppleDevice;return Object(d.b)(oe.e,{zaType:"Text",zaText:t,as:S.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:Ka.map((function(e,t){var a=e.label,o=e.icon,r=e.shortcut,i=e.shortcutWin;return Object(d.b)(Za,{label:a,Icon:o,shortcut:n?r:i},t)}))})}},{name:"Markdown",component:function(e){var t=e.activeTabName;return Object(d.b)(oe.e,{zaType:"Text",zaText:t,as:S.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:$a.map((function(e,t){var n=e.label,a=e.icon,o=e.shortcut;return Object(d.b)(Za,{label:n,Icon:a,shortcut:o},t)}))})}},{name:"功能说明",component:function(e){var t=e.activeTabName;return Object(d.b)(oe.e,{zaType:"Text",zaText:t,as:S.Box,py:"20px",css:function(e){return{background:e.colors.GBK99A}},children:eo.map((function(e,t){var n=e.tabName,a=e.describe;return Object(d.b)(to,{name:n,describe:a,isFirst:!t},t)}))})}}],oo=function(e){var t=e.children,n=e.className;return Object(d.b)("h1",{css:function(e){return{background:e.colors.GBK99A,color:e.colors.GBK02A,lineHeight:"31px",fontSize:"22px",fontWeight:"600"}},className:n,children:t})},ro=function(e){var t=e.active,n=Object(Ce.default)(e,no);return Object(d.b)(oe.a,Object.assign({zaType:"Button",zaText:!0,as:"button",css:function(e){return[{display:"inline-block",width:"88px",borderRadius:"999px",height:"26px",lineHeight:"26px",background:t?e.colorMod(e.colors.primary).alpha(.1):e.colors.GBK10C,textAlign:"center",cursor:"pointer",color:t?e.colors.primary:e.colors.GBK06A,fontSize:"13px",marginRight:"7px",marginBottom:"14px"},t&&{fontWeight:"500"}]}},n))};function io(e){var t=e.className,o=e.onClose,r=e.getInitialOffset,i=e.getShouldHide,c=Object(p.useState)(0),l=Object(a.a)(c,2),s=l[0],u=l[1],b=ao[s].component,f=Object(q.e)((function(){return Promise.all([n.e(15),n.e(22),n.e(28)]).then(n.bind(null,2898))}));return f?Object(d.b)(oe.b,{block:"EditorHelpDoc",children:Object(d.c)(f,{className:t,getInitialOffset:r,getShouldHide:i,children:[Object(d.b)(oe.e,{zaType:"Popup",zaText:"帮助文档"}),Object(d.c)(S.Flex,{bg:"GBK99A",pl:"16px",sx:{borderBottom:"1px solid",borderColor:"GBK09A",height:"52px",alignItems:"center"},children:[Object(d.b)(oo,{css:{fontSize:"18px",lineHeight:"24px"},children:"帮助文档"}),Object(d.b)(S.Text,{color:"GBK06A",fontSize:"12px",lineHeight:"17px",fontWeight:"400",ml:"8px",mt:"4px",children:"支持拖拽和调整高度"}),Object(d.b)(oe.a,{zaType:"Button",zaAction:"Unknown",zaText:"关闭帮助文档",as:Sa,css:{marginLeft:"auto",padding:"16px",cursor:"pointer"},onClick:o})]}),Object(d.c)(S.Box,{ml:"16px",mr:"9px",pt:"14px",children:[ao.map((function(e,t){return Object(d.b)(ro,{active:s===t,onClick:function(){s!==t&&u(t)},children:e.name},t)})),Object(d.b)(S.Box,{mr:"7px",sx:{height:"2px",borderBottom:"1px solid",borderColor:"GBK09A",alignItems:"center"}})]}),Object(d.b)(S.Box,{px:"16px",css:{height:"calc(100% - 112px)",overflow:"auto"},children:b&&Object(d.b)(b,{activeTabName:ao[s].name})})]})}):null}var co=Object(p.forwardRef)((function(e,t){var n=e.getInitialOffset,o=e.getShouldHide,r=e.forceUpdate,i=Object(q.a)(!1),c=Object(a.a)(i,2),l=c[0],s=c[1];return Object(p.useImperativeHandle)(t,(function(){return{toggle:s.toggle,getShown:function(){return l}}}),[s,l]),l&&Object(d.b)(io,{onClose:function(){s.toggle(),r&&requestAnimationFrame((function(){r()}))},getInitialOffset:n,getShouldHide:o})})),lo=function(e){var t=e.getInitialOffset,n=e.getShouldHide,a=e.forceUpdate,o={};return o.helpDocRef=Object(p.createRef)(null),{initialize:function(e){Object.assign(o,e)},handleCommand:function(e){return"toggle-help-document"===e?(o.helpDocRef.current.toggle(),a&&requestAnimationFrame((function(){a()})),"handled"):"not-handled"},queryCommandState:function(e){if("toggle-help-document"===e)return o.helpDocRef.current.getShown()},components:[Object(d.b)(co,{getInitialOffset:t,getShouldHide:n,ref:o.helpDocRef,forceUpdate:a},"EditorHelpDocContainer")]}},so=Object.assign;function uo(e){return h.a.createElement(xa.a,so(so({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"MoneyBag24","data-old-api":"Income24"},e),{className:"ZDI ZDI--Income24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M6.326 3.132a.75.75 0 01.645-.366h10.046a.75.75 0 01.655 1.114l-1.58 2.848c3.444 1.349 5.543 4.405 5.543 7.72 0 2.254-.992 4.177-2.707 5.519-1.702 1.33-4.078 2.065-6.85 2.065-2.77 0-5.147-.735-6.849-2.065-1.715-1.342-2.707-3.265-2.707-5.519 0-3.274 1.994-6.29 5.37-7.659l-1.58-2.916a.75.75 0 01.014-.741zm1.905 1.134l1.4 2.58a.75.75 0 01-.443 1.075c-3.298.998-5.166 3.68-5.166 6.527 0 1.775.766 3.27 2.132 4.337 1.379 1.079 3.405 1.747 5.925 1.747 2.519 0 4.546-.668 5.925-1.747 1.365-1.068 2.13-2.562 2.13-4.337 0-2.87-1.968-5.605-5.342-6.578a.75.75 0 01-.448-1.085l1.399-2.52H8.23z",fillRule:"evenodd",clipRule:"evenodd"}),h.a.createElement("path",{d:"M9.777 10.466a.75.75 0 011.06.056l1.242 1.38 1.242-1.38a.75.75 0 111.115 1.003l-1.607 1.786v.462h1.5a.75.75 0 010 1.5h-1.5v1.75a.75.75 0 01-1.5 0v-1.75h-1.5a.75.75 0 010-1.5h1.5v-.462l-1.607-1.786a.75.75 0 01.055-1.059z",fillRule:"evenodd",clipRule:"evenodd"}))}function bo(e){return h.a.createElement(xa.a,so(so({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"MoneyBag24","data-old-api":"Income"},e),{className:"Zi Zi--Income"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M6.326 3.132a.75.75 0 01.645-.366h10.046a.75.75 0 01.655 1.114l-1.58 2.848c3.444 1.349 5.543 4.405 5.543 7.72 0 2.254-.992 4.177-2.707 5.519-1.702 1.33-4.078 2.065-6.85 2.065-2.77 0-5.147-.735-6.849-2.065-1.715-1.342-2.707-3.265-2.707-5.519 0-3.274 1.994-6.29 5.37-7.659l-1.58-2.916a.75.75 0 01.014-.741zm1.905 1.134l1.4 2.58a.75.75 0 01-.443 1.075c-3.298.998-5.166 3.68-5.166 6.527 0 1.775.766 3.27 2.132 4.337 1.379 1.079 3.405 1.747 5.925 1.747 2.519 0 4.546-.668 5.925-1.747 1.365-1.068 2.13-2.562 2.13-4.337 0-2.87-1.968-5.605-5.342-6.578a.75.75 0 01-.448-1.085l1.399-2.52H8.23z",fillRule:"evenodd",clipRule:"evenodd"}),h.a.createElement("path",{d:"M9.777 10.466a.75.75 0 011.06.056l1.242 1.38 1.242-1.38a.75.75 0 111.115 1.003l-1.607 1.786v.462h1.5a.75.75 0 010 1.5h-1.5v1.75a.75.75 0 01-1.5 0v-1.75h-1.5a.75.75 0 010-1.5h1.5v-.462l-1.607-1.786a.75.75 0 01.055-1.059z",fillRule:"evenodd",clipRule:"evenodd"}))}var fo=n(1138),po=n(1145),ho=n(1036),mo=Object(p.forwardRef)((function(e,t){var n=e.getStore,o=e.getContentInfo,r=Object(p.useState)(!1),i=Object(a.a)(r,2),c=i[0],l=i[1],s=o(),u=s.id,b=s.type;Object(p.useImperativeHandle)(t,(function(){return{setShowUserProfitCardSelector:l}}),[]);var f=function(){return Object(fo.a)(n().getEditorState()).filter((function(e){return"ad-link-card"===e.getType()}))};return Object(d.b)(d.a,{children:Object(d.b)(H.b,{className:"UserProfitCardSelector",size:"large",onClose:function(){l(!1)},children:c&&Object(d.b)("div",{className:"UserProfitCardSelector-content",children:Object(d.b)(_.a,{className:"UserProfitCardSelector-iframe",src:Object(po.d)({contentId:u,contentType:b}),onMessage:function(e){var t=n().getEditorRef();if("ProfitCardSelector/submitProfitCardInfo"===(null==e?void 0:e.type)&&null!=e&&e.payload){var a=e.payload,o=a.type,r=a.id,i=a.url;if(a.preventClose||l(!1),"inserLinkCard"===o&&t.props.handleCommand("insert-link-card:".concat(i)),"insertMCNLinkCard"===o){if(Object(fo.a)(n().getEditorState()).filter((function(e){return"mcn-link-card"===e.getType()})).size>=30)return void I.a.alert(null,{title:"一篇内容最多可添加 ".concat(30," 个商品")});t.props.handleCommand("insert-mcn-link-card:".concat(r))}if("insertEduCard"===o){if(Object(fo.a)(n().getEditorState()).filter((function(e){return e.getType()===ho.a.TYPE})).size>=ho.a.EDU_CARD_LIMIT)return void I.a.alert(null,{title:"一篇内容最多可添加 ".concat(ho.a.EDU_CARD_LIMIT," 个教育卡片")});t.props.handleCommand("".concat(ho.a.WebInsertCommand).concat(r))}if("insertAdLinkCard"===o){if(r.startsWith("ZhiTask_"))if(f().filter((function(e){return e.getData().id.startsWith("ZhiTask_")})).size>=5)return void I.a.alert("一篇内容最多可添加 ".concat(5," 个「知+自选」卡片"));if(r.startsWith("fee_"))if(f().filter((function(e){return e.getData().id.startsWith("fee_")})).size>=1)return void I.a.alert("一篇内容最多可添加 ".concat(1," 个「付费回答」卡片"));t.props.handleCommand("insert-ad-link-card:".concat(r))}}}})})})})})),vo=function(e){var t=e.shouldDisabled,n=e.shouldShow,a=void 0===n?function(){return!0}:n,o=e.getContentInfo,r=void 0===o?function(){}:o,i={};return i.containerRef=Object(p.createRef)(),{initialize:function(e){Object.assign(i,e)},handleCommand:function(e){return"toggle-user-profit-modal"===e?(i.containerRef.current.setShowUserProfitCardSelector(!0),"handled"):"not-handled"},toolbar:{label:"用户收益",icon:bo,shouldShow:a,shouldDisabled:function(){return!(null==t||!t())||null},section:Kn.a.CUSTOM_MAIN,toolType:R.e.ENTITY,onClick:function(){i.containerRef.current.setShowUserProfitCardSelector(!0),D.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},toolbarV2:{label:"收益",text:"收益",icon:bo,shouldShow:a,shouldDisabled:function(){return!!t()||null},section:Wn.a.BUSINESS_MEDIA,toolType:R.e.ENTITY,onClick:function(){i.containerRef.current.setShowUserProfitCardSelector(!0),D.a.trackEvent(null,{id:6097,action:"Click"})},priority:1},components:Object(d.b)(mo,{ref:i.containerRef,getStore:function(){return i},getContentInfo:r})}},go=Object.assign;function Oo(e){return h.a.createElement(xa.a,go(go({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Folder24","data-old-api":"Folder"},e),{className:"Zi Zi--Folder"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M4.415 5.632a.915.915 0 00-.915.915v10.52c0 .505.41.914.915.914h14.153c.505 0 .915-.41.915-.915V9.045a.915.915 0 00-.915-.915H12.14a2.415 2.415 0 01-1.853-.866L9.198 5.96a.915.915 0 00-.702-.328h-4.08zM2 6.547a2.415 2.415 0 012.415-2.415h4.081c.716 0 1.394.318 1.853.866l1.09 1.304a.915.915 0 00.701.328h6.428a2.415 2.415 0 012.415 2.415v8.021a2.415 2.415 0 01-2.415 2.415H4.415A2.415 2.415 0 012 17.066V6.547z",fillRule:"evenodd",clipRule:"evenodd"}),h.a.createElement("path",{d:"M5.25 11.5a.75.75 0 01.75-.75h10a.75.75 0 010 1.5H6a.75.75 0 01-.75-.75z",fillRule:"evenodd",clipRule:"evenodd"}))}var jo=function(e){var t=e.shown,n=e.onClose,a=e.onSubmit,o=Object(p.useCallback)((function(e){var t=e.type,o=e.payload;"browser/closeCurrentPage"!==t?"editor/submitAttachment"!==t||a(o.files):n()}),[a,n]);return Object(d.b)(H.b,{className:"BaiduFileSelector",size:"large",onClose:n,children:t&&Object(d.b)("div",{className:"BaiduFileSelector-content",children:Object(d.b)(_.a,{className:"BaiduFileSelector-iframe",src:"https://www.zhihu.com/appview/editor/attachment/baidu",onMessage:o})})})},yo=Object(p.forwardRef)((function(e,t){var n=Object(p.useState)(!1),o=Object(a.a)(n,2),r=o[0],i=o[1];return Object(p.useImperativeHandle)(t,(function(){return{setBaiduFileSelectorShown:i}}),[]),Object(d.b)(jo,{shown:r,onClose:function(){return i(!1)},onSubmit:function(t){i(!1),e.onSubmit(t)}})})),Co=function(){var e={},t=function(t){e.getEditorRef().props.handleCommand("insert-file-link-card:".concat(JSON.stringify(t)))},n=function(){return Object(fo.a)(e.getEditorState()).filter((function(e){return"file-link-card"===e.getType()}))},a=function(){n().size>=10?I.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)};return e.containerRef=Object(p.createRef)(),{initialize:function(t){Object.assign(e,t)},components:Object(d.b)(yo,{handleSubmit:t,ref:e.containerRef,onSubmit:t}),handleCommand:function(e){return"insert-file-from-baidu-wangpan"===e?(a(),"handled"):"not-handled"},toolbar:{section:Kn.a.CUSTOM_MAIN,label:"上传附件",icon:Oo,toolType:R.e.ENTITY,onClick:function(){n().size>=10?I.a.alert(null,{title:"一篇内容最多可添加 ".concat(10," 个附件")}):e.containerRef.current.setBaiduFileSelectorShown(!0)},priority:2},toolbarV2:{section:Wn.a.BUSINESS_MEDIA,label:"上传附件",text:"网盘",icon:Oo,toolType:R.e.ENTITY,onClick:function(){a()},priority:2}}},wo=n(982),xo=n(2),ko={LOCAL:{type:"local",name:"上传图片"},EMOTICON:{type:"emoticon",name:"表情包"},PUBLIC:{type:"public",name:"网络素材"},PRIVATE:{type:"private",name:"个人素材"},LATEST:{type:"latest",name:"最近使用"}},So=Object.values(ko),Ro=Object.keys(ko).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(xo.a)({},t,ko[t].type))}),{}),Ao=(Object.keys(ko).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(xo.a)({},ko[t].type,ko[t].name))}),{}),{ALL:{type:"all",name:"全部"},STATIC:{type:"static",name:"普通图片"},DYNAMIC:{type:"dynamic",name:"动图"}}),Io=Object.values(Ao),To=(Object.keys(Ao).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(xo.a)({},t,Ao[t].type))}),{}),Object.keys(Ao).reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(xo.a)({},Ao[t].type,Ao[t].name))}),{}),["active"]),Eo=function(e){var t=e.active,n=Object(Ce.default)(e,To);return Object(d.b)(oe.a,Object.assign({as:"button",zaType:"Button",zaText:!0,zaAction:"Unknown",color:"GBK03A",shouldTrackShow:!0,css:function(e){return[{marginRight:"20px",lineHeight:"50px",fontSize:"15px",cursor:"pointer"},t&&{position:"relative",fontWeight:"bold","::after":{position:"absolute",left:"0",bottom:"0",content:"''",display:"block",width:"100%",height:"4px",backgroundColor:e.colors.GBL01A,flexShrink:"0"}}]}},n))},No=function(e){var t=e.tabType,n=e.tabChange;return Object(d.c)(S.Flex,{alignItems:"center",justifyContent:"space-between",css:function(e){return{height:"50px",padding:"0 20px",boxShadow:"inset 0px -0.5px 0px ".concat(e.colors.GBK09A)}},children:[Object(d.b)(S.Flex,{children:So.map((function(e){return Object(d.b)(Eo,{active:t===e.type,onClick:function(){n(e.type)},children:e.name},e.type)}))}),Object(d.b)("div",{className:"MaterialLibrary-SearchInputContainer"})]})};No.propTypes={tabType:f.a.string,tabChange:f.a.func};var Bo=No,zo=n(174),Lo=n(292),Po=n(440),Mo=["active"],_o=function(e){return Object(d.b)(S.Flex,Object.assign({justifyContent:"space-between",css:{padding:"10px 20px 10px 8px"}},e))},Do=function(e){return Object(d.b)("div",Object.assign(Object.assign({css:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}},e),{},{children:"加载中..."}))},Fo=function(e){return Object(d.b)(oe.a,Object.assign({as:"button",zaType:"Button",zaText:!0,zaAction:"Unknown",css:{marginRight:"10px",padding:"7px 15px",fontSize:"14px",borderRadius:"3px","&:last-child":{marginRight:0}}},e))},Uo=function(e){var t=e.active,n=Object(Ce.default)(e,Mo);return Object(d.b)(Fo,Object.assign({css:function(e){return[{background:e.colorMod(e.colors.GBL01A).alpha(.3),color:e.colors.GBK99A},t&&{background:e.colors.GBL01A}]}},n))},Vo=function(e){return Object(d.b)(Fo,Object.assign({css:function(e){return{background:e.colors.GBK10A,color:e.colors.GBK03A}}},e))},Go=function(e){return Object(d.b)(Fo,Object.assign({css:function(e){return{background:e.colors.GBK10A,color:e.colors.GRD03A}}},e))},qo=function(e){return Object(d.b)("svg",Object.assign(Object.assign({},e),{},{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(d.b)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 0C11.4477 0 11 0.447716 11 1V11H1C0.447715 11 0 11.4477 0 12C0 12.5523 0.447716 13 1 13H11V23C11 23.5523 11.4477 24 12 24C12.5523 24 13 23.5523 13 23V13H23C23.5523 13 24 12.5523 24 12C24 11.4477 23.5523 11 23 11H13V1C13 0.447715 12.5523 0 12 0Z",fill:"#999999"})}))},Ho=function(e){return null!=e&&e.length?e.sort((function(e,t){return(null==e?void 0:e.checkedIndex)-(null==t?void 0:t.checkedIndex)})):[]},Ko=["checked","onChange"],Wo=function(e){var t=e.checked,n=e.onChange,a=Object(Ce.default)(e,Ko);return Object(d.c)(S.Flex,Object.assign(Object.assign({alignItems:"center",css:function(e){return{fontSize:"13px",color:e.colors.GBL04A}}},a),{},{children:[Object(d.b)(ee.a,{type:"checkbox",checked:t,onChange:function(e){n(e.target.checked)},size:15,style:{marginRight:"5px",marginTop:"1px"}}),"本页全选"]}))},Zo=n(898),Qo=n(50),Yo=["onSearch"],Jo=function(e){var t=e.onSearch,n=Object(Ce.default)(e,Yo),o=Object(p.useState)(""),r=Object(a.a)(o,2),i=r[0],c=r[1],l=Object(p.useState)(null),s=Object(a.a)(l,2),u=s[0],b=s[1];return Object(p.useEffect)((function(){b(document.querySelector(".MaterialLibrary-SearchInputContainer"))}),[]),u&&Object(Qo.createPortal)(Object(d.b)(vn.a,Object.assign({className:"materials_library_public_search",onChange:function(e){return c(e.target.value)},value:i,after:Object(d.b)(Zo.a,{text:!0,onClick:function(){t(i)}}),onKeyUp:function(e){13===e.keyCode&&t(i)},css:function(e){return{width:"198px",height:"28px",lineHeight:"28px",fontSize:"12px",color:e.colors.GBL05A,backgroundColor:e.colors.GBK99A,border:"1px solid",borderColor:e.colors.GBK08A}}},n)),u)},Xo=["children"],$o=function(e){return Object(d.b)("i",Object.assign({css:{marginLeft:"14px",width:"96px"}},e))},er=function(e){var t=e.children,n=Object(Ce.default)(e,Xo);return Object(d.c)(X.b,Object.assign(Object.assign({css:{display:"flex",flex:1,overflow:"auto",flexWrap:"wrap",justifyContent:"space-between",alignContent:"flex-start",height:"100%",marginLeft:"-5px",padding:"0 20px 0"}},n),{},{children:[t,Object(d.b)($o,{}),Object(d.b)($o,{}),Object(d.b)($o,{}),Object(d.b)($o,{}),Object(d.b)($o,{}),Object(d.b)($o,{})]}))},tr=Object(p.createContext)({}),nr=function(){return Object(p.useContext)(tr)},ar=function(e){var t=e.onClose,n=e.sourceType,a=e.sourceId,o=e.insertImage,r=e.setTabType,i=e.initLocalList,c=e.setInitLocalList,l=e.children;return Object(d.b)(tr.Provider,{value:Object(p.useMemo)((function(){return{onClose:t,sourceType:n,sourceId:a,insertImage:o,setTabType:r,initLocalList:i,setInitLocalList:c}}),[t,n,a,o,r,i,c]),children:l})},or=n(150),rr=n(1576),ir=function(){return new Promise(requestAnimationFrame)},cr=function(e,t,n){e({eventType:"Click",action:"Unknown",elementLocation:{type:t,text:n}})},lr=function(){return Object(d.b)(S.Box,{color:"GBK02A",width:"96px",css:function(e){return{position:"absolute",left:"4px",bottom:"4px",width:"48px",height:"16px",lineHeight:"16px",textAlign:"center",fontSize:"12px",background:e.colors.GBL05A,color:e.colors.GBK99A,borderRadius:"2px",zIndex:1}},children:"已删除"})},sr=function(e){return Object(d.b)(oe.a,Object.assign({as:S.Flex,zaType:"Button",zaAction:"Unknown",alignItems:"center",justifyContent:"center",width:"24px",height:"24px",css:{borderRadius:"2px",position:"absolute",lineHeight:"24px"}},e))},ur=function(e){var t=e.data,n=e.chooseImage,o=e.deleted,r=e.deleteSingleImage,i=e.imageUrl,c=e.poster,l=e.isPrivate,s=void 0!==l&&l,u=Object(oe.i)().trackEvent,b=Object(te.e)(),f=Object(or.imgUrl)(i||(null==t?void 0:t.origin),"100w"),h=function(e){var t=Object(oe.i)().trackEvent,n=Object(p.useState)(null),o=Object(a.a)(n,2),r=o[0],i=o[1],c="error"===r,l="ready"===r,s=function(n){n.stopPropagation(),"loading"!==r&&(i("loading"),cr(t,"Button","加载 gif"),Promise.all([Object(or.loadImage)(e),ir().then(ir)]).then((function(){i("ready")})).catch((function(){i("error")})))};return{isGifReady:l,gifIcon:"loading"===r||l?Object(d.b)(rr.b,{className:"MaterialLibrary-GifIcon",onClick:s}):c?Object(d.b)(rr.c,{className:"MaterialLibrary-GifIcon",onClick:s}):Object(d.b)(rr.a,{className:"MaterialLibrary-GifIcon",onClick:s})}}(f),m=h.isGifReady,v=h.gifIcon,g=m?f:Object(or.imgUrl)(c||(null==t?void 0:t.thumbnail),"100w"),O="dynamic"===t.subtype?g:f;return Object(d.c)(S.Box,{color:"GBK02A",width:s?"96px":"105px",css:[{display:"inline-block",marginBottom:"10px",marginLeft:s?"14px":"5px",verticalAlign:"top",".MaterialLibrary-GifIcon":{position:"absolute",width:"46px",height:"46px",marginLeft:"-23px",marginTop:"-23px",top:"50%",left:"50%",transition:"0.3s ease-out",transitionProperty:"transform, opacity",transform:"scale(1)",transformOrigin:"center",opacity:"1"}},m&&{".MaterialLibrary-GifIcon":{transform:"scale(0.3)",opacity:"0",width:0,height:0,margin:0}}],children:[Object(d.c)(S.Box,{width:s?"96px":"105px",height:s?"96px":"105px",css:function(e){return{borderRadius:"2px",cursor:"pointer",position:"relative",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.08),"&:hover > .MaterialLibrary-imgListItemHover":{display:"flex",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.3)}}},onClick:function(){o||(n(t),cr(u,"Image","".concat(null!=t&&t.checked?"取消选中图片":"选中图片")))},children:[Object(d.b)(S.Image,{src:O,loading:"lazy",size:"100%",css:Object.assign({position:"absolute",left:0,right:0,objectFit:"cover",borderRadius:"inherit",opacity:o?"0.3":"1"},b)}),Object(d.b)(S.Box,{sx:{color:"GBK99A",border:"2px solid",borderColor:"GBL01A"},css:function(e){return Object.assign({display:null!=t&&t.checked?"flex":"none",position:"absolute",top:"0",left:"0",right:"0",width:"100%",height:"100%",borderRadius:"inherit"},(null==t?void 0:t.checked)&&{backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.3)})},className:"MaterialLibrary-imgListItemHover",children:o?Object(d.b)(sr,{zaText:"删除图片",title:"删除",css:function(e){return{bottom:"2px",right:"2px",backgroundColor:e.colors.GBL01A}},onClick:function(e){e.stopPropagation(),r(t)},children:Object(d.b)(ta.a,{fill:"currentColor",size:18})}):Object(d.b)(sr,{zaType:"Image",zaText:"选中图片",title:"选中图片",onClick:function(e){e.stopPropagation(),n(t)},css:function(e){return{top:"6px",right:"6px",border:"2px solid ".concat(null!=t&&t.checked?e.colors.GBL01A:e.colors.GBK99A),borderRadius:"50%"}}})}),(null==t?void 0:t.checked)&&Object(d.b)(sr,{zaType:"Image",zaText:"取消选中图片",title:"取消选中图片",onClick:function(e){e.stopPropagation(),n(t)},css:function(e){return{top:"8px",right:"8px",fontSize:"14px",textAlign:"center",backgroundColor:e.colors.GBL01A,color:e.colors.GBK99A,borderRadius:"50%"}},children:null==t?void 0:t.checkedIndex}),"dynamic"===t.subtype&&v,o&&Object(d.b)(lr,{})]}),Object(d.b)(S.Box,{mt:"4px",fontSize:"10px",lineHeight:"20px",css:Object.assign(Object.assign({},Object(te.d)(1)),{},{wordBreak:"break-all"}),title:"文件名称",children:null==t?void 0:t.name})]})};ur.propTypes={data:f.a.string,chooseImage:f.a.func,getLatestList:f.a.func};var dr=ur,br=n(4),fr=n(5),pr=function(e){var t=e.itemKey,n=Object(Lo.b)(),o=Object(oe.i)().trackEvent,r=nr(),i=r.sourceId,c=r.sourceType,l=r.insertImage,s=r.onClose,u=Object(p.useState)([]),d=Object(a.a)(u,2),b=d[0],f=d[1],h=Object(p.useState)(!0),m=Object(a.a)(h,2),v=m[0],g=m[1],O=Object(p.useState)(!1),j=Object(a.a)(O,2),y=j[0],C=j[1],w=Object(p.useState)(!1),x=Object(a.a)(w,2),k=x[0],S=x[1],R=Object(p.useState)(!1),A=Object(a.a)(R,2),T=A[0],E=A[1],N=Object(p.useState)("all"),B=Object(a.a)(N,2),z=B[0],L=B[1],P=Object(p.useState)(null),M=Object(a.a)(P,2),_=M[0],D=M[1],F=b.length&&b.every((function(e){return e.checked})),U=function(){g(!0),E(!1),S(!1),D(null),f([]),C(!1)},V=Object(q.d)((function(e,t){var n;(g(!1),t)?E(!0):I.a.alert((null==e?void 0:e.message)||(null==e||null===(n=e.error)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧!")})),G=Object(q.d)((function(e){var t,n=Object(fr.camelizeKeys)(e.payload||{});g(!1),S(null==n||null===(t=n.paging)||void 0===t?void 0:t.isEnd),D(null==n?void 0:n.paging),f((function(e){return e.concat((null==n?void 0:n.data)||[])}))})),H=Object(q.d)((function(e){f((function(n){var a,o=Object(br.a)(n),r=o.find((function(n){return e[t]===n[t]})),i=(null==o||null===(a=o.map((function(e){return null==e?void 0:e.checkedIndex})).sort((function(e,t){return t-e})))||void 0===a?void 0:a[0])||0;return r&&(r.checked=!r.checked,r.checked?r.checkedIndex=i+1:(o.forEach((function(e){(null==e?void 0:e.checkedIndex)>r.checkedIndex&&e.checkedIndex--})),delete r.checkedIndex)),o}))})),K=Object(q.d)((function(e){l(e.map((function(e){return e.origin}))),n("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{method:"POST",body:{source_type:c,source_id:String(i),material_type:"image",material_ids:e.map((function(e){return e.materialId}))}}),s()}));return{materialList:b,setMaterialList:f,paging:_,isLoading:v,setIsLoading:g,hasInited:y,setHasInited:C,isDrained:k,setIsDrained:S,isPageError:T,setIsPageError:E,subTypeCatch:z,setSubTypeCatch:L,selectAllChecked:F,toggleSelectAll:function(e){e&&o({action:"Unknown",eventType:"Click",elementLocation:{type:"Button",text:"本页全选"}}),f((function(t){return t.map((function(t,n){return Object.assign(Object.assign({},t),{},{checked:e,checkedIndex:e?n+1:void 0})}))}))},reset:U,handleSubTypeChange:function(e){y&&e!==z&&(L(e),U())},handleResponseErrorData:V,handleResponseData:G,chooseImage:H,insertImages:K}},hr=["dataList","insertImages"],mr=["keywordCatch"],vr=function(e){var t=e.isPageError,n=e.keywordCatch,a=e.reset;return t?Object(d.b)(Xe.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:a}):Object(d.b)(Xe.a.EI1A,{image:"default",content:"没有找到".concat(n?"「"+n+"」":"","相关内容"),buttonText:"搜索其他内容",buttonOnClick:function(){var e;null===(e=document.querySelector(".materials_library_public_search"))||void 0===e||e.focus()}})},gr=function(e){var t=e.dataList,n=e.insertImages,a=Object(Ce.default)(e,hr),o=(t||[]).filter((function(e){return!0===e.checked}));return Object(d.b)(S.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:"flex-end"},a),{},{children:Object(d.b)(Uo,{active:o.length>0,onClick:function(){n(Ho(o))},css:{margin:0},zaText:"插入图片；图片数：".concat(o.length||0),children:"插入图片"})}))},Or=function(e){var t=e.keywordCatch,n=Object(Ce.default)(e,mr),a=Object(Lo.b)(),o=nr(),r=o.insertImage,i=o.onClose,c=pr({itemKey:"id"}),l=c.materialList,s=c.paging,u=c.isLoading,b=c.setIsLoading,f=c.hasInited,h=c.setHasInited,m=c.isDrained,v=c.isPageError,g=c.setIsPageError,O=c.selectAllChecked,j=c.toggleSelectAll,y=c.reset,C=c.handleResponseErrorData,w=c.handleResponseData,x=c.chooseImage,k=!l.length,R=Object(q.d)((function(){return b(!0),g(!1),a((null==s?void 0:s.next)||Object(Po.a)("".concat(location.origin,"/api/v4/materials/pc_editor/search"),{offset:null==l?void 0:l.length,limit:24,keyword:t||"表情包"}))})),A=Object(q.d)((function(){return R().then(w).catch((function(e){C(e.payload)}))})),I=Object(q.d)((function(e){r(e.map((function(e){return e.origin}))),i()}));Object(p.useEffect)((function(){f||R().then(w).catch((function(e){C(e.payload,!0)})).finally((function(){h(!0)}))}),[f,h,R,w,C]);var T=k?!u&&Object(d.b)(vr,{isPageError:v,keywordCatch:t,reset:y}):Object(d.c)(d.a,{children:[Object(d.b)(er,{getContainer:function(e){return e},onLoad:A,isLoading:u,isDrained:m,children:l.map((function(e,t){return Object(d.b)(dr,{data:e,insertImages:I,chooseImage:x},String([e.id,t]))}))}),Object(d.b)(gr,{dataList:l,insertImages:I})]});return Object(d.c)(S.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},n),{},{children:[Object(d.c)(_o,{children:[Object(d.b)("div",{className:"MaterialLibrary-SearchTipsContainer",children:t&&!k&&!u&&!v&&Object(d.c)(S.Box,{color:"GBK03A",width:"200px",css:{margin:"0px 12px",fontSize:"12px"},children:["以下为「",t,"」相关搜索内容"]})}),Object(d.b)(Wo,{checked:O,onChange:j})]}),f?T:Object(d.b)(Do,{})]}))},jr=function(e){var t=Object(zo.default)({},e),n=Object(p.useState)(""),o=Object(a.a)(n,2),r=o[0],i=o[1];return Object(d.c)(d.a,{children:[Object(d.b)(Jo,{placeholder:"搜索表情包",onSearch:i}),Object(d.b)(Or,Object.assign({keywordCatch:r},t),r)]})},yr=["active"],Cr=function(e){var t=e.active,n=Object(Ce.default)(e,yr);return Object(d.b)("button",Object.assign({color:"GBK03A",css:[{padding:"0 12px",fontSize:"12px",cursor:"pointer"},t&&{fontWeight:"bold"}]},n))},wr=function(e){var t=e.tabType,n=e.tabChange;return Object(d.b)(S.Flex,{children:Io.map((function(e){return Object(d.b)(Cr,{active:t===e.type,onClick:function(){n(e.type)},children:e.name},e.type)}))})};wr.propTypes={tabType:f.a.string,tabChange:f.a.func};var xr=function(e){var t=Object(Lo.b)(),n=Object(p.useState)({}),o=Object(a.a)(n,2),r=o[0],i=o[1],c=Object(p.useState)(!1),l=Object(a.a)(c,2),s=l[0],u=l[1],d=Object(p.useState)(""),b=Object(a.a)(d,2),f=b[0],h=b[1],m=Object(p.useState)(!1),v=Object(a.a)(m,2),g=v[0],O=v[1],j=Object(q.d)((function(){O(!1),i({}),u(!1)})),y=Object(q.d)((function(){return t("".concat(location.origin,"/api/v4/materials/pc_editor/folders?type=").concat(e,"&material_type=image")).then((function(e){var t,n=Object(fr.camelizeKeys)((null===(t=e.payload)||void 0===t?void 0:t.data)||{});return i(n),n}))}));return Object(p.useEffect)((function(){s||y().then((function(e){var t,n,a=null==e||null===(t=e.child)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id;h(a)})).catch((function(){O(!0)})).finally((function(){u(!0)}))}),[s,y]),{hasInited:s,isPageError:g,setIsPageError:O,reset:j,folders:r,getFoldersList:y,activeFolderId:f,setActiveFolderId:h}},kr=["dataList","insertImages"],Sr=function(e){var t=e.isPageError,n=e.keywordCatch,a=e.reset;return t?Object(d.b)(Xe.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:a}):Object(d.b)(Xe.a.EI1A,{image:"default",content:"没有找到".concat(n?"「"+n+"」":"","相关内容"),buttonText:"搜索其他内容",buttonOnClick:function(){var e;null===(e=document.querySelector(".materials_library_public_search"))||void 0===e||e.focus()}})},Rr=function(e){var t=e.dataList,n=e.insertImages,a=Object(Ce.default)(e,kr),o=(t||[]).filter((function(e){return!0===e.checked}));return Object(d.b)(S.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:"flex-end"},a),{},{children:Object(d.b)(Uo,{active:o.length>0,onClick:function(){n(Ho(o))},zaText:"插入图片；图片数：".concat(o.length||0),children:"插入图片"})}))},Ar=function(e){var t=e.keywordCatch,n=e.activeFolderId,a=nr(),o=a.sourceId,r=a.sourceType,i=Object(Lo.b)(),c=pr({itemKey:"uniqueId"}),l=c.materialList,s=c.paging,u=c.isLoading,b=c.setIsLoading,f=c.hasInited,h=c.setHasInited,m=c.isDrained,v=c.isPageError,g=c.setIsPageError,O=c.subTypeCatch,j=(c.handleSubTypeChange,c.selectAllChecked),y=c.toggleSelectAll,C=c.reset,w=c.handleResponseErrorData,x=c.handleResponseData,k=c.chooseImage,R=c.insertImages,A=!l.length,I=Object(q.d)((function(){return b(!0),g(!1),i((null==s?void 0:s.next)||Object(Po.a)("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(n,"/search"),{offset:null==l?void 0:l.length,limit:24,keyword:t,source_type:r,source_id:o,sub_type:O}))})),T=Object(q.d)((function(){return I().then(x).catch((function(e){w(e.payload)}))}));Object(p.useEffect)((function(){!f&&n&&I().then(x).catch((function(e){w(e.payload,!0)})).finally((function(){h(!0)}))}),[f,n,h,I,x,w]);var E=A?!u&&Object(d.b)(Sr,{isPageError:v,keywordCatch:t,reset:C}):Object(d.c)(d.a,{children:[Object(d.b)(er,{getContainer:function(e){return e},onLoad:T,isLoading:u,isDrained:m,children:l.map((function(e,t){return Object(d.b)(dr,{data:e,insertImages:R,chooseImage:k},String([e.uniqueId,t]))}))}),Object(d.b)(Rr,{dataList:l,insertImages:R})]});return Object(d.c)(d.a,{children:[Object(d.c)(_o,{children:[Object(d.c)("div",{className:"MaterialLibrary-SearchTipsContainer",children:[!1,t&&!A&&!u&&!v&&Object(d.c)(S.Box,{color:"GBK03A",width:"200px",css:{margin:"0px 12px",fontSize:"12px"},children:["以下为「",t,"」相关搜索内容"]})]}),Object(d.b)(Wo,{checked:j,onChange:y})]}),f?E:Object(d.b)(Do,{})]})},Ir=function(e){var t=Object(zo.default)({},e),n=Object(p.useState)(""),o=Object(a.a)(n,2),r=o[0],i=o[1],c=xr(Ro.PUBLIC),l=c.hasInited,s=c.reset,u=c.isPageError,b=c.activeFolderId,f=u?Object(d.b)(Sr,{isPageError:!0,reset:s}):Object(d.b)(Ar,Object.assign({keywordCatch:r,activeFolderId:b},t),r);return Object(d.c)(d.a,{children:[Object(d.b)(Jo,{placeholder:"搜索网络素材库",onSearch:i}),Object(d.b)(S.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{},{children:l?f:Object(d.b)(Do,{css:{marginTop:42}})}))]})},Tr=n(300),Er=n(320),Nr=n(2847),Br=function(e){var t=e.handleUploadImage,n=e.content,a=e.style,o=void 0===a?{}:a,r=e.isLocal,i=Object(p.useRef)();return Object(d.c)(d.a,{children:[Object(d.b)("input",{css:{display:"none"},ref:i,type:"file",onChange:function(e){t(e),r&&(i.current.value=null)},accept:"image/*",multiple:!0}),Object(d.b)(oe.a,{zaType:"Button",zaText:"本地上传图片",as:S.Flex,role:"button",width:"92px",height:"32px",lineHeight:"32px",fontSize:"12px",color:"GBL05A",alignItems:"center",justifyContent:"center",ml:"19px",mb:"6px",onClick:function(){return i.current.click()},css:function(e){return Object.assign({verticalAlign:"top",display:"inline-flex",cursor:"pointer",borderRadius:"2px",backgroundColor:e.colorMod(e.colors.GBL05A).alpha(.08)},o)},children:n||Object(d.c)(d.a,{children:[Object(d.b)(Nr.b,{}),Object(d.b)(S.Text,{ml:"3px",mt:"2px",children:"本地上传"})]})})]})},zr=["handleUploadImage"],Lr=function(e){var t=e.handleUploadImage,n=Object(Ce.default)(e,zr);return Object(d.b)(S.Flex,Object.assign(Object.assign({},n),{},{height:"100%",alignItems:"center",justifyContent:"center",children:Object(d.c)(S.Box,{textAlign:"center",children:[Object(d.b)(Br,{handleUploadImage:t,style:{width:"104px",height:"104px",border:"1px dashed #d3d3d3",margin:0,background:"transparent",borderRadius:"8px","&:hover":{background:"rgba(246, 246, 246, 0.3)"}},content:Object(d.b)(qo,{})}),Object(d.b)(S.Text,{color:"GBK02A",fontSize:"14px",fontWeight:"500",mt:"10px",children:"上传图片"}),Object(d.b)(S.Text,{color:"GBK06A",fontSize:"12px",mt:"4px",children:"支持 JPG、JPEG、PNG 等格式"})]})}))},Pr=n(1578),Mr=Object.assign;function _r(e){return h.a.createElement(xa.a,Mr(Mr({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"FolderPlus24","data-old-api":"Folderplus24"},e),{className:"ZDI ZDI--Folderplus24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M4.415 5.632a.915.915 0 00-.915.915v10.52c0 .505.41.914.915.914h8.413a.75.75 0 010 1.5H4.415A2.415 2.415 0 012 17.066V6.547a2.415 2.415 0 012.415-2.415h4.081c.715 0 1.394.318 1.853.866l1.09 1.304a.915.915 0 00.701.328h6.428a2.415 2.415 0 012.415 2.415v1.954a.75.75 0 01-1.5 0V9.045a.915.915 0 00-.915-.915H12.14a2.415 2.415 0 01-1.853-.866L9.198 5.96a.915.915 0 00-.702-.328h-4.08z",fillRule:"evenodd",clipRule:"evenodd"}),h.a.createElement("path",{d:"M16.3 16.039a.75.75 0 000 1.5h2.1v2.1a.75.75 0 001.5 0v-2.1H22a.75.75 0 100-1.5h-2.1v-2.1a.75.75 0 00-1.5 0v2.1h-2.1z"}))}function Dr(e){return h.a.createElement(xa.a,Mr(Mr({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"FolderPlus24","data-old-api":"FolderPlus"},e),{className:"Zi Zi--FolderPlus"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M4.415 5.632a.915.915 0 00-.915.915v10.52c0 .505.41.914.915.914h8.413a.75.75 0 010 1.5H4.415A2.415 2.415 0 012 17.066V6.547a2.415 2.415 0 012.415-2.415h4.081c.715 0 1.394.318 1.853.866l1.09 1.304a.915.915 0 00.701.328h6.428a2.415 2.415 0 012.415 2.415v1.954a.75.75 0 01-1.5 0V9.045a.915.915 0 00-.915-.915H12.14a2.415 2.415 0 01-1.853-.866L9.198 5.96a.915.915 0 00-.702-.328h-4.08z",fillRule:"evenodd",clipRule:"evenodd"}),h.a.createElement("path",{d:"M16.3 16.039a.75.75 0 000 1.5h2.1v2.1a.75.75 0 001.5 0v-2.1H22a.75.75 0 100-1.5h-2.1v-2.1a.75.75 0 00-1.5 0v2.1h-2.1z"}))}var Fr=function(e){var t=e.type,n=e.className,o=e.inputShowName,r=void 0===o?"":o,i=e.resetInput,c=e.folderId,l=e.getFoldersList,s=Object(Lo.b)(),u=Object(p.useRef)(),b=Object(p.useState)(r),f=Object(a.a)(b,2),h=f[0],m=f[1];return Object(d.b)("input",{ref:u,type:"text",className:j()("MaterialLibrary-input-module",n),placeholder:"请输入文件名称",autoFocus:"autofocus",onChange:function(e){var t=e.target.value;m(t)},value:h,onBlur:function(){i&&i(""),"add"!==t&&h&&s("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(c),{method:"PUT",body:{name:h}}).then((function(){var e;null===(e=u.current)||void 0===e||e.blur(),l&&l()})).catch((function(e){var t,n,a;I.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(a=n.error)||void 0===a?void 0:a.message)||"网络错误，稍后重试吧!")}))},onKeyUp:function(e){var t;13===e.keyCode&&(null===(t=u.current)||void 0===t||t.blur())}})};Fr.propTypes={inputShowName:f.a.string,resetInput:f.a.func};var Ur=Fr,Vr=function(e){return Object(d.b)(oe.a,Object.assign({as:S.Flex,zaType:"Button",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",css:function(e){return{borderRadius:"12px",backgroundColor:e.colors.GBK99A,cursor:"pointer","&+&":{marginLeft:"4px"}}}},e))},Gr=function(e){var t,n=e.folders,o=void 0===n?{}:n,r=e.activeFolderId,i=e.getFoldersList,c=e.folderClick,l=e.reset,s=Object(Lo.b)(),u=Object(p.useState)(""),b=Object(a.a)(u,2),f=b[0],h=b[1],m=Object(p.useState)(""),v=Object(a.a)(m,2),g=v[0],O=v[1],y=function(e,t){"nav-edit"===e?(h(t.id),O(t.name)):"nav-delete"===e&&I.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.b)("h2",{children:"是否删除已选择分类？"}),Object(d.b)("p",{children:"分类中的图片将归入未分类中"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){s("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t.id),{method:"DELETE",body:{delete_material:!1}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?(I.a.alert("已成功删除分组，该分组的图片已移动至「我的图片-未分类」"),l()):I.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))};return null!=o&&o.hidden?null:Object(d.c)("div",{className:"MaterialLibraryNav",children:[Object(d.c)("div",{className:"MaterialLibraryNav-nav",children:[Object(d.c)(S.Flex,{className:"MaterialLibraryNav-Mine",justifyContent:"space-between",alignItems:"center",children:[Object(d.c)(S.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(d.b)(Ja.a,{className:"nav-icon"}),null==o?void 0:o.name]}),Object(d.b)("div",{className:"nav-num",children:null==o?void 0:o.materialCount})]}),null==o||null===(t=o.child)||void 0===t?void 0:t.map((function(e){return Object(d.c)(S.Flex,{className:j()("MaterialLibraryNav-Folder",{active:r===e.id}),justifyContent:"space-between",alignItems:"center",onClick:function(){c(e.id)},children:[Object(d.c)(S.Flex,{justifyContent:"space-between",alignItems:"center",children:[Object(d.b)(Oo,{className:"nav-icon"}),f!==e.id&&Object(d.b)("div",{className:"nav-name",children:e.name})]}),f!==e.id&&Object(d.b)("div",{className:j()("nav-num",{"disable-hover":!e.supportEdit&&!e.supportDelete}),children:e.materialCount||0}),f!==e.id&&(e.supportEdit||e.supportDelete)&&Object(d.c)(S.Flex,{className:"nav-handle",children:[e.supportEdit&&Object(d.b)(Vr,{zaText:"编辑",onClick:function(t){t.stopPropagation(),y("nav-edit",e)},children:Object(d.b)(Pr.a,{fill:"currentColor",size:10})}),e.supportDelete&&Object(d.b)(Vr,{zaText:"删除",onClick:function(t){t.stopPropagation(),y("nav-delete",e)},children:Object(d.b)(Ge.a,{fill:"currentColor",size:10})})]}),f===e.id&&Object(d.b)(Ur,{folderId:e.id,inputShowName:g,getFoldersList:i,resetInput:function(e){h(e)}})]},e.id)}))]}),Object(d.c)(S.Flex,{className:"MaterialLibraryNav-Add",justifyContent:"space-between",alignItems:"center",onClick:function(){var e;(null==o||null===(e=o.child)||void 0===e?void 0:e.length)>15?I.a.alert("分组已达上限，请删除已有的分类后再行添加"):I.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.b)("h2",{children:"添加分类"}),Object(d.b)(Ur,{type:"add",className:"MaterialLibraryNav-input-module"})]}),{text:{ok:"添加",cancel:"取消"}}).then((function(){var e,t=null===(e=document.querySelector(".MaterialLibrary-input-module"))||void 0===e?void 0:e.value;s("".concat(location.origin,"/api/v4/materials/pc_editor/folders"),{method:"POST",body:{name:t,material_type:"image"}}).then((function(){i()})).catch((function(e){var t,n,a;I.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(a=n.error)||void 0===a?void 0:a.message)||"网络错误，稍后重试吧!")}))}),(function(){}))},children:[Object(d.b)(Dr,{className:"nav-icon"}),"添加分类"]})]})};Gr.propTypes={folders:f.a.object,getFoldersList:f.a.func,folderClick:f.a.func};var qr=Gr,Hr=["dataList","activeFolderId","folders","getFoldersList","insertImages"];function Kr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Zr,Qr=function(e){var t=e.isPageError,n=e.handleUploadImage,a=e.reset;return t?Object(d.b)(d.a,{children:Object(d.b)(Xe.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:a})}):Object(d.b)(Lr,{css:{marginTop:"-50px"},handleUploadImage:n})},Yr=function(e){var t=e.dataList,n=e.activeFolderId,a=e.folders,o=e.getFoldersList,r=e.insertImages,i=Object(Ce.default)(e,Hr),c=Object(Lo.b)(),l=(t||[]).filter((function(e){return!0===e.checked})),s=Object(p.useMemo)((function(){var e;return null==a||null===(e=a.child)||void 0===e?void 0:e.filter((function(e){return e.id!==n}))}),[a,n]);return Object(d.c)(S.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:l.length>0?"space-between":"flex-end"},i),{},{children:[l.length>0&&Object(d.b)(Go,{onClick:function(){0!==l.length&&I.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.c)("h2",{children:["是否删除已选择共 ",l.length," 张图片？"]}),Object(d.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){var e="".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(n,"/materials");c(e,{method:"DELETE",body:{material_type:"image",folder_material_ids:l.map((function(e){return e.uniqueId}))}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?o():I.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))},children:"删除图片"}),Object(d.c)(S.Box,{children:[l.length>0&&(null==s?void 0:s.length)>0&&Object(d.b)(Vo,{css:{width:"86px"},onClick:function(){if(0!==l.length){var e=s[0].id;I.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.c)("h2",{children:["为已选择共 ",l.length," 张图片分类"]}),Object(d.b)(Ie.b,{buttonClassName:"MaterialLibraryContent-select",listClassName:"MaterialLibraryContent-option",value:n,onChange:function(t){e=t},children:s.map((function(e){var t=e.name,n=e.id;return Object(d.b)(Ie.a,{value:n,text:t,children:t},n)}))})]}),{text:{ok:"确定",cancel:"取消"}}).then((function(){c("".concat(location.origin,"/api/v4/materials/pc_editor/material-move"),{method:"POST",body:{folder_id:n,target_folder_id:e,folder_material_ids:l.map((function(e){return e.uniqueId}))}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?o():I.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))}),(function(){}))}},children:"移动"}),Object(d.b)(Uo,{active:l.length>0,onClick:function(){r(Ho(l))},zaText:"插入图片；图片数：".concat(l.length||0),children:"插入图片"})]})]}))},Jr=function(e){var t=e.activeFolderId,n=e.getFoldersList,a=e.folders,o=Object(Lo.b)(),r=pr({itemKey:"uniqueId"}),i=r.materialList,c=r.paging,l=r.isLoading,s=r.setIsLoading,u=r.hasInited,b=r.setHasInited,f=r.isDrained,h=r.isPageError,m=r.setIsPageError,v=r.selectAllChecked,g=r.toggleSelectAll,O=r.reset,j=r.handleResponseErrorData,y=r.handleResponseData,C=r.chooseImage,w=r.insertImages,x=!i.length,k=Object(q.d)((function(){return s(!0),m(!1),o((null==c?void 0:c.next)||Object(Po.a)("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t,"/materials"),{offset:null==i?void 0:i.length,limit:24}))})),R=Object(q.d)((function(){return k().then(y).catch((function(e){j(e.payload)}))})),A=function(e){var a=e.target.files;if(null!=a&&a.length)if((null==a?void 0:a.length)>100)I.a.alert("添加图片请不要超过 100 张哦~");else{var r,i=[],c=Kr(a);try{var l=function(){var e=r.value;Object(Tr.a)(e).then((function(r){Object(Er.a)(r).then((function(r){(i=i.concat({name:null==e?void 0:e.name,source:null==r?void 0:r.original_hash})).length===a.length&&function(e){o("".concat(location.origin,"/api/v4/materials/pc_editor/folders/").concat(t,"/materials"),{method:"POST",body:{material_type:"image",materials:e}}).then((function(e){var t,a;null!==(t=e.payload)&&void 0!==t&&t.success?n():I.a.alert((null===(a=e.payload)||void 0===a?void 0:a.message)||"网络错误，稍后重试吧！")})).catch((function(e){var t,n,a;I.a.alert((null===(t=e.payload)||void 0===t?void 0:t.message)||(null===(n=e.payload)||void 0===n||null===(a=n.error)||void 0===a?void 0:a.message)||"网络错误，稍后重试吧!")}))}(i)}))}))};for(c.s();!(r=c.n()).done;)l()}catch(e){c.e(e)}finally{c.f()}}};Object(p.useEffect)((function(){!u&&t&&k().then(y).catch((function(e){j(e.payload,!0)})).finally((function(){b(!0)}))}),[u,b,t,k,y,j]);var T=x?!l&&Object(d.b)(Qr,{handleUploadImage:A,isPageError:h,reset:O}):Object(d.c)(d.a,{children:[Object(d.b)(S.Box,{mt:"-36px",width:"100px",children:Object(d.b)(Br,{handleUploadImage:A},i.length)}),Object(d.b)(er,{getContainer:function(e){return e},onLoad:R,isLoading:l,isDrained:f,css:{marginLeft:"-14px"},children:i.map((function(e,t){return Object(d.b)(dr,{data:e,chooseImage:C,insertImages:w,isPrivate:!0},String([e.uniqueId,t]))}))}),Object(d.b)(Yr,{dataList:i,folders:a,activeFolderId:t,getFoldersList:n,insertImages:w})]});return Object(d.c)(d.a,{children:[Object(d.b)(_o,{children:Object(d.b)(Wo,{css:{marginLeft:"auto"},checked:v,onChange:g})}),u?T:Object(d.b)(Do,{})]})},Xr=function(e){var t,n=Object(zo.default)({},e),a=xr(Ro.PRIVATE),o=a.hasInited,r=a.getFoldersList,i=a.reset,c=a.isPageError,l=a.folders,s=a.activeFolderId,u=a.setActiveFolderId,b=null===(t=l.child)||void 0===t?void 0:t.find((function(e){return e.id===s})),f=c?Object(d.b)(Qr,{isPageError:!0,reset:i}):Object(d.b)(Jr,Object.assign({folders:l,activeFolderId:s,getFoldersList:r},n),String([s,null==b?void 0:b.materialCount]));return Object(d.c)(S.Flex,{color:"GBL05A",css:{height:"530px",overflow:"hidden",fontSize:"12px"},children:[!c&&Object(d.b)(qr,{folders:l,activeFolderId:s,folderClick:function(e){s!==e&&u(e)},getFoldersList:r,reset:i}),Object(d.b)(S.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px",flex:1}},n),{},{children:o?f:Object(d.b)(Do,{css:{marginTop:42}})}))]})},$r=["dataList","deleteImages","insertImages"],ei=function(e){var t=e.isPageError,n=e.reset,a=nr().setTabType;return t?Object(d.b)(Xe.a.EI1A,{image:"loadingError",content:"网络连接失败",buttonText:"刷新页面",buttonOnClick:n}):Object(d.b)(Xe.a.EI1A,{image:"default",content:"最近使用为空，请搜索网络素材或上传图片",buttonText:"上传图片",buttonOnClick:function(){a(Ro.PRIVATE)}})},ti=function(e){var t=e.dataList,n=e.deleteImages,a=e.insertImages,o=Object(Ce.default)(e,$r),r=(t||[]).filter((function(e){return!0===e.checked}));return Object(d.c)(S.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},justifyContent:r.length>0?"space-between":"flex-end"},o),{},{children:[r.length>0&&Object(d.b)(Go,{onClick:function(){0!==r.length&&I.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.c)("h2",{children:["是否删除已选择共 ",r.length," 张图片？"]}),Object(d.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){n(r.map((function(e){return e.materialId})))}),(function(){}))},children:"删除图片"}),Object(d.b)(Uo,{active:r.length>0,onClick:function(){a(Ho(r))},zaText:"插入图片；图片数：".concat(r.length||0),children:"插入图片"})]}))},ni=function(e){var t=Object(zo.default)({},e),n=Object(Lo.b)(),a=pr({itemKey:"materialId"}),o=a.materialList,r=a.paging,i=a.isLoading,c=a.setIsLoading,l=a.hasInited,s=a.setHasInited,u=a.isDrained,b=a.isPageError,f=a.setIsPageError,h=a.selectAllChecked,m=a.toggleSelectAll,v=a.reset,g=a.handleResponseErrorData,O=a.handleResponseData,j=a.chooseImage,y=a.insertImages,C=!o.length,w=Object(q.d)((function(){return c(!0),f(!1),n((null==r?void 0:r.next)||Object(Po.a)("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{offset:null==o?void 0:o.length,limit:24,material_type:"image"}))})),x=Object(q.d)((function(){return w().then(O).catch((function(e){g(e.payload)}))})),k=Object(q.d)((function(e){return n("".concat(location.origin,"/api/v4/materials/pc_editor/recently-materials"),{method:"DELETE",body:{material_type:"image",material_ids:e}}).then((function(e){var t,n;null!==(t=e.payload)&&void 0!==t&&t.success?v():I.a.alert((null===(n=e.payload)||void 0===n?void 0:n.message)||"网络错误，稍后重试吧！")}))})),R=Object(q.d)((function(e){I.a.confirm(Object(d.c)("div",{className:"MaterialLibrary-alert",children:[Object(d.b)("h2",{children:"是否从最近使用删除图片？"}),Object(d.b)("p",{children:"插入至内容中的图片不会受到影响"})]}),{text:{ok:"删除",cancel:"取消"}}).then((function(){k([e.materialId])}),(function(){}))}));Object(p.useEffect)((function(){l||w().then(O).catch((function(e){g(e.payload,!0)})).finally((function(){s(!0)}))}),[l,s,w,O,g]);var A=C?!i&&Object(d.b)(ei,{isPageError:b,reset:v}):Object(d.c)(d.a,{children:[Object(d.b)(er,{getContainer:function(e){return e},onLoad:x,isLoading:i,isDrained:u,children:o.map((function(e,t){return Object(d.b)(dr,{data:e,chooseImage:j,insertImages:y,deleted:e.deleted,deleteSingleImage:R},String([e.materialId,t]))}))}),Object(d.b)(ti,{dataList:o,deleteImages:k,insertImages:y})]});return Object(d.c)(S.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{},{children:[Object(d.b)(_o,{children:Object(d.b)(Wo,{css:{marginLeft:"auto"},checked:h,onChange:m})}),l?A:Object(d.b)(Do,{})]}))},ai=n(1185),oi=n(95),ri=n.n(oi),ii=n(117),ci=n.n(ii),li=n(295),si=n(886),ui=n(1003),di=function(e){var t,n=e.data,a=e.deleteImage,o=e.reUploadImage,r=e.dragWrapRef,i=n||{},c=i.tag,l=i.index,s=(null==r||null===(t=r.current)||void 0===t?void 0:t.clientWidth)||746,u={cursor:"pointer",userDrag:"none",userSelect:"none",WebkitUserDrag:"none",WebkitUserSelect:"none"};return Object(d.c)(S.Box,{id:c.originSrc+l,css:function(e){return Object.assign({position:"relative",display:"inline-block",width:"105px",height:"105px",margin:"0 calc(".concat(s-655,"px / 12) 15px"),borderRadius:"2px",background:e.colors.GBK10C,"&:active":{filter:"drop-shadow(0px 3px 6px rgba(0, 0, 0, 0.15)) drop-shadow(0px 0px 4px rgba(0, 0, 0, 0.3))"}},"pending"===c.status&&u)},children:[Object(d.b)(S.Image,{src:c.originSrc,width:"100%",height:"100%",css:{borderRadius:"2px"},sx:{objectFit:"cover"}}),Object(d.c)(S.Box,{css:function(e){return{position:"absolute",top:0,left:0,width:"105px",height:"105px",borderRadius:"2px",zIndex:2,backgroundColor:e.colorMod(e.colors.GBK02A).alpha("success"===c.status?0:.4),"& .CircleLoadingBar .path":{stroke:e.colors.GBK99A},"&:hover":{".close":{display:"block"}}}},children:["pending"===c.status&&Object(d.b)(ui.a,{}),Object(d.b)(S.Box,{className:"close",css:function(e){return Object.assign({position:"absolute",top:"-10px",right:"-9px",zIndex:3,width:"20px",height:"20px",lineHeight:"21px",fontSize:"15px",textAlign:"center",borderRadius:"50%",display:"none",backgroundColor:e.colorMod(e.colors.GBK02A).alpha(.4),color:e.colors.GBK99A,"&>span":{marginLeft:"1px"}},u)},onClick:function(){return a(c,l)},children:Object(d.b)(Ge.a,{center:!0,width:"13px",height:"13px"})}),"error"===c.status&&Object(d.c)(d.a,{children:[Object(d.c)(S.Flex,{fontSize:"15px",fontWeight:"400",height:"82px",color:"GBK99A",alignItems:"center",justifyContent:"center",css:u,onClick:function(){return o(c.file,l)},children:[Object(d.b)(si.a,{width:"20px",height:"22px"}),Object(d.b)(S.Text,{ml:"3px",children:"重试"})]}),Object(d.b)(S.Box,{css:function(e){return{position:"absolute",bottom:0,left:0,zIndex:3,width:"100%",height:"23px",lineHeight:"23px",fontSize:"12px",fontWeight:400,textAlign:"center",backgroundColor:e.colorMod(e.colors.GBK99A).alpha(.8),color:e.colors.GRD03A,borderRadius:"0 0 1px 1px"}},children:"上传失败"})]})]})]},c.originSrc+l)},bi=["dataList","insertImages","onClose"],fi=function(e){var t=e.src,n=e.originalSrc,a=e.watermarkSrc,o=e.privateWatermarkSrc,r=e.watermark,i=e.dataRawwidth,c=e.dataRawheight,l=e.hash,s=Object(or.imgUrl)(t,{quality:ri()(navigator.userAgent).Mobile?50:80,size:window.devicePixelRatio>=1.5?"1440w":"720w"});return{src:s,url:s,originalSrc:n,watermarkSrc:a,privateWatermarkSrc:o,watermark:r,rawWidth:i,rawHeight:c,id:l}},pi=function(e){var t=e.dataList,n=e.insertImages,a=e.onClose,o=Object(Ce.default)(e,bi);return Object(d.c)(S.Flex,Object.assign(Object.assign({css:{padding:"13px 20px"},alignItems:"center",justifyContent:"flex-end"},o),{},{children:[(null==t?void 0:t.length)>0&&Object(d.c)(S.Text,{color:"GBK03A",fontSize:"14px",fontWeight:"400",mr:"10px",children:["已上传 ",t.length," 张图片，拖拽可调整顺序"]}),Object(d.b)(Uo,{active:t.length>0,onClick:function(){var e=t.map((function(e){return e.data||{}}));n(e,!0),a()},zaText:"插入图片；图片数：".concat(t.length||0),children:"插入图片"})]}))},hi=function(e){var t=e.handleUploadImage,n=e.errorList,a=e.reUpload;return Object(d.c)(S.Flex,{alignItems:"center",justifyContent:"space-between",children:[Object(d.b)(Br,{handleUploadImage:t,style:{margin:"5px 0 4px 20px",height:"32px"},isLocal:!0}),(null==n?void 0:n.length)>0&&Object(d.c)(S.Flex,{alignItems:"center",mr:"20px",mt:"1px",fontSize:"14px",children:[Object(d.c)(S.Text,{color:"GRD03A",children:[n.length," 张上传失败"]}),Object(d.b)(S.Text,{css:function(e){return{width:"114px",height:"32px",lineHeight:"32px",marginLeft:"10px",borderRadius:"3px",cursor:"pointer",background:e.colors.GBK10A,color:e.colors.GBL01A,fontWeight:500,textAlign:"center"}},onClick:a,children:"批量重新上传"})]})]})},mi=function(){var e=(Object(q.e)((function(){return n.e(82).then(n.t.bind(null,2854,7))}))||{}).DraggableArea,t=Object(p.useRef)(),o=Object(m.useDispatch)(),r=nr().sourceType,i=nr(),c=i.insertImage,l=i.onClose,s=i.initLocalList,u=i.setInitLocalList,b=Object(p.useState)(s||[]),f=Object(a.a)(b,2),h=f[0],v=f[1],g=Object(p.useRef)(h);Object(p.useEffect)((function(){g.current=h}),[h]),Object(p.useEffect)((function(){return v(s),function(){var e;u(null===(e=g.current)||void 0===e?void 0:e.map((function(e){return Object.assign(Object.assign({},e),"pending"===e.status&&{status:"error"})})))}}),[]);var O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.findIndex((function(e){return e.id===t})),o=Object(br.a)(e);return-1!==a&&o.splice(a,1,Object.assign(Object.assign({},e[a]),n)),o},j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e){var a=null!=n&&n.isUpload?null==n?void 0:n.imageList:h;a.splice(t,1,Object.assign(Object.assign({},a[t]),{},{status:"pending"})),v((function(){return Object(br.a)(a)})),o(Object(li.b)(e,"default",r)).then((function(e){var n=e.payload;v((function(e){var o;return O(e,null===(o=a[t])||void 0===o?void 0:o.id,{data:fi(n),status:"success"})}))})).catch((function(){v((function(e){var n;return O(e,null===(n=a[t])||void 0===n?void 0:n.id,{status:"error"})}))}))}},y=function(e){var t,n=e.target.files;null!=n&&n.length&&((null==n?void 0:n.length)>100?I.a.alert("添加图片请不要超过 100 张哦~"):null===(t=Array.from(n))||void 0===t||t.forEach((function(e){Object(ai.b)({file:e,preset:ai.a.content}).then((function(){v((function(t){var n=[].concat(Object(br.a)(t),[{originSrc:window.URL.createObjectURL(e),status:"pending",id:ci()("image"),file:e}]);return function(e,t){var n=t.length-1;j(t[n].file,n,{isUpload:!0,imageList:t})}(0,n),n}))})).catch((function(e){o(Object(W.h)(e.message||"图片上传未完成，请稍后发布","red"))}))})))},C=function(e,t){var n=Object(br.a)(h);n.splice(t,1),v(n)},w=function(e){var t=[];return null==e||e.forEach((function(e,n){"error"===e.status&&t.push(Object.assign(Object.assign({},e),{},{index:n}))})),t};return null!=h&&h.length?Object(d.c)(d.a,{children:[Object(d.b)(hi,{handleUploadImage:y,errorList:w(h),reUpload:function(){var e;null===(e=w(h))||void 0===e||e.forEach((function(e){return j(e.file,e.index)}))}}),Object(d.b)(S.Box,{ref:t,css:{position:"relative",width:"100%",height:"505px",overflowY:"scroll",padding:"10px 12.5px 16px",lineHeight:"0.8"},children:e?Object(d.b)(e,{tags:h.map((function(e){return Object.assign(Object.assign({},e),{},{id:"".concat(e.id,"_").concat(e.status)})})),render:function(e){return Object(d.b)(di,{data:e,deleteImage:C,reUploadImage:j,dragWrapRef:t})},onChange:function(e){v(e.map((function(e){var t,n;return Object.assign(Object.assign({},e),{},{id:(null===(t=e.id)||void 0===t||null===(n=t.split("_"))||void 0===n?void 0:n[0])||ci()("image")})})))}}):h.map((function(e,n){return Object(d.b)(di,{data:{tag:e,index:n},deleteImage:C,reUploadImage:j,dragWrapRef:t},"".concat(e.id,"_").concat(n))}))}),Object(d.b)(pi,{dataList:h.filter((function(e){return"success"===e.status})),onClose:l,insertImages:c})]}):Object(d.b)(Lr,{css:{marginTop:"-20px"},handleUploadImage:y})},vi=function(e){var t=Object(zo.default)({},e);return Object(d.b)(d.a,{children:Object(d.b)(S.Flex,Object.assign(Object.assign({flexDirection:"column",color:"GBL05A",css:{height:"530px",fontSize:"12px"}},t),{},{children:Object(d.b)(mi,Object.assign({},t))}))})},gi=(Zr={},Object(xo.a)(Zr,Ro.LOCAL,vi),Object(xo.a)(Zr,Ro.EMOTICON,jr),Object(xo.a)(Zr,Ro.PUBLIC,Ir),Object(xo.a)(Zr,Ro.PRIVATE,Xr),Object(xo.a)(Zr,Ro.LATEST,ni),Zr),Oi=function(e){var t=e.onClose,n=e.sourceType,o=e.sourceId,r=e.insertImage,i=Object(p.useState)(Ro.LOCAL),c=Object(a.a)(i,2),l=c[0],s=c[1],u=Object(p.useState)([]),b=Object(a.a)(u,2),f=b[0],h=b[1],m=gi[l];return Object(p.useEffect)((function(){var e=function(e){return e.preventDefault()};return document.addEventListener("drop",e,!1),document.addEventListener("dragover",e,!1),function(){document.removeEventListener("drop",e,!1),document.removeEventListener("dragover",e,!1)}}),[]),Object(d.b)(ar,{onClose:t,sourceType:n,sourceId:o,insertImage:r,setTabType:s,initLocalList:f,setInitLocalList:h,children:Object(d.c)("div",{children:[Object(d.b)(Bo,{tabType:l,tabChange:s}),m&&Object(d.b)(oe.b,{block:l,children:Object(d.b)(m,{})})]})})};Oi.propTypes={sourceType:f.a.string,sourceId:f.a.number,onClose:f.a.func,insertImage:f.a.func};var ji=Oi,yi=function(e,t){var n=e.sourceType,o=e.sourceId,r=e.insertImage,i=Object(p.useState)(!1),c=Object(a.a)(i,2),l=c[0],s=c[1],u=Object(q.d)((function(){return s((function(e){return!e}))}));return Object(p.useImperativeHandle)(t,(function(){return{toggleShown:u}}),[u]),Object(d.b)(H.b,{css:{minWidth:"746px",".Modal-content":{margin:0,padding:0}},onClose:u,children:l&&Object(d.b)(oe.b,{block:"MaterialLibrary",children:Object(d.b)(ji,{onClose:u,sourceType:n,sourceId:o,insertImage:r})})})};yi.propType={sourceType:f.a.string.isRequired,sourceId:f.a.number.isRequired,insertImage:f.a.func.isRequired};var Ci=Object(p.forwardRef)(yi),wi=function(e){var t=e.sourceType,n=e.sourceId,a=h.a.createRef(null),o={},r=!1,i=null,c=function(e,t,n){r?i=Object(wo.a)(i,"image","IMMUTABLE",Object.assign(Object.assign({},t?null==e?void 0:e.value:{upload:e}),{},{size:"normal"}),void 0,{isBatched:!0,isLastOneOfBatch:n}):o.setEditorState(Object(wo.a)(o.getEditorState(),"image","IMMUTABLE",{upload:e,size:"normal"}))};return{initialize:function(e){Object.assign(o,e)},components:[Object(d.b)(Ci,{ref:a,sourceType:t,sourceId:n,insertImage:function(e,t){var n;n=function(){for(var n=0;n<e.length;n++){var a=n===e.length-1;c({value:e[n]},t,a)}},r=!0,i=o.getEditorState(),n(),o.setEditorState(i),r=!1}},"material_library")],handleCommand:function(e){var t;return"insert-image-from-library"===e?(null===(t=a.current)||void 0===t||t.toggleShown(),"handled"):"not-handled"},toolbar:{label:"插入图片",section:Kn.a.BASIC_MEDIA,text:"图片",icon:Ja.a,priority:2,onClick:function(){var e;null===(e=a.current)||void 0===e||e.toggleShown()}},toolbarV2:[{label:"插入图片",section:Wn.a.BASIC_MEDIA,text:"图片",icon:Ja.a,priority:2,onClick:function(){var e;null===(e=a.current)||void 0===e||e.toggleShown()}}]}},xi=n(1300),ki=n(1660),Si=n.n(ki),Ri=n(477),Ai={editableInit:"Editable.Init",editableEdit:"Editable.Edit",draftLoad:"DraftLoad",draftSave:"DraftSave",addAnswer:"AddAnswer"},Ii=function(e,t){var n=e.isToolbarSticky,a=e.isFullscreen,o=e.toolbarMenuAttention,r=e.scheduledPublishAt,i=e.initialScheduledPublishAt,c=e.placeholder,l=e.draft,s=e.defaultValue,u=e.isLegacyVideoAnswer,b=e.defaultVideo,f=e.question,h=e.videoAnswerEditable,m=e.videoAnswerPublished,v=e.editableReady,g=e.handleChangeContent,O=e.handleAfterChangeContent,y=e.handleFocusWithAuth,C=e.handleSelectText,w=e.handleSubmit,x=e.handleError,k=e.handleLoadStart,S=e.handleLoadEnd,A=e.handleUploadStart,I=e.handleUploadEnd,T=e.handleUploadError,E=e.handleBeforeVideoUpload,N=e.handleMCNLinkCardEdit,B=e.isVideoAnswer,z=e.handleInsertZVideo,L=e.getToolbarSidePlugins,P=e.getToolbarMenuPlugins,M=e.createEditorPlugins,_=e.getEditorBeforePlugins,F=e.setUseScheduledPublish,U=e.allowToolbar,V=void 0===U||U,G=e.onAnyChange,q=e.docPluginProps,H=e.tableOfContentsEnabled,K=Object(p.useRef)(null);return Object(d.b)(xi.a,{name:Ai.editableEdit,children:Object(d.b)(oe.b,{block:a?"FullScreen":"",children:Object(d.b)(Ri.a,{className:j()("AnswerForm-editor","AnswerForm-container",{isToolbarSticky:n}),ref:t,hideImageToolbar:!0,allowDragAndDrop:!0,allowLinkCard:!0,allowMention:!0,allowToolbar:V,allowUploadDocument:!0,allowVideoTitleChange:!B,allowReference:!0,allowImageEditor:!0,allowZVideo:!B,allowTable:!B,allowCatalog:!B,catalogEnabled:H,useCatalogV2:!0,autoCalcCatalogShouldShow:!1,allowHeaderThree:!1,allowToolbarSticky:!a,toolbarStickyOffset:re.i,onInsertZVideo:z,getToolbarSidePlugins:L,getToolbarMenuPlugins:P,getEditorBeforePlugins:_,toolbarMenuAttention:o,createEditorPlugins:M,toolbarProps:{menuCallout:r&&i&&Object(d.c)(R.b,{className:"AnswerForm-scheduledPublishCallout",onClose:function(){F(!1),D.a.trackEvent(t,{action:"Click",id:5734,name:"回答"})},children:["发布时间：",Object(d.b)(Nt.a,{onRef:K,value:i,min:i,max:Et.a(i,7),onChange:function(e,t){F(!0,e),D.a.setModule(K.current,{module:"Unknown",module_name:t.date?"日期":t.hours?"小时":t.minutes?"分钟":void 0}),D.a.trackEvent(K.current,{action:"Click",id:5731,name:"回答"})}}),Object(d.c)("a",{href:"/draft?type=answer&filter=schedule",target:"_blank","data-za-detail-view-id":5732,"data-za-detail-view-name":"回答",style:{marginLeft:"2em"},children:[Object(d.b)(Qt.a,{text:!0,center:!0})," 管理待发布内容"]})]})},minRows:6,placeholder:c,defaultValue:l?l.editableContent:s,videoAnswerEditable:h,videoAnswerPublished:m,isLegacyVideoAnswer:u,defaultVideo:b,onReady:v,onChange:g,onAfterChange:O,onFocus:y,onSelectText:C,onSubmit:w,onError:x,onLoadStart:k,onLoadEnd:S,onUploadStart:A,onUploadEnd:I,onUploadError:T,onBeforeVideoUpload:E,logo:Si.a,location:f.title,editingContentType:"answer",onMCNLinkCardEdit:N,useV2Feature:!0,useEditableV2:!0,useImageOperationV2:!0,onAnyChange:G,docPluginProps:q})})})};Ii.propTypes={isToolbarSticky:f.a.bool.isRequired,answer:f.a.object.isRequired,isFullscreen:f.a.bool.isRequired,toolbarMenuAttention:f.a.string,scheduledPublishAt:f.a.number,initialScheduledPublishAt:f.a.number,placeholder:f.a.string.isRequired,draft:f.a.object,defaultValue:f.a.string,isLegacyVideoAnswer:f.a.bool,defaultVideo:f.a.object,question:f.a.object,videoAnswerEditable:f.a.bool,videoAnswerPublished:f.a.bool,editableReady:f.a.func.isRequired,handleChangeContent:f.a.func.isRequired,handleAfterChangeContent:f.a.func.isRequired,handleFocusWithAuth:f.a.func.isRequired,handleSelectText:f.a.func.isRequired,handleSubmit:f.a.func.isRequired,handleError:f.a.func.isRequired,handleLoadStart:f.a.func.isRequired,handleLoadEnd:f.a.func.isRequired,handleUploadStart:f.a.func.isRequired,handleUploadEnd:f.a.func.isRequired,handleUploadError:f.a.func.isRequired,handleBeforeVideoUpload:f.a.func.isRequired,handleMCNLinkCardEdit:f.a.func.isRequired,isVideoAnswer:f.a.bool.isRequired,handleInsertZVideo:f.a.func.isRequired,getToolbarSidePlugins:f.a.func.isRequired,createEditorPlugins:f.a.func.isRequired,getToolbarMenuPlugins:f.a.func.isRequired,getEditorBeforePlugins:f.a.func.isRequired,setUseScheduledPublish:f.a.func.isRequired};var Ti=Object(p.forwardRef)(Ii),Ei=Object(p.forwardRef)((function(e,t){var n=e.children,a=e.className;return Object(d.b)(oe.b,{block:"EditorToolbar",children:Object(d.b)("div",{ref:t,css:{width:"100%",display:"flex",justifyContent:"center"},children:Object(d.b)("div",{className:j()("toolbarV3",a),css:{display:"flex",overflowX:"auto",padding:"10px 0 10px 20px",boxShadow:"0px -0.5px 0px 0px rgba(235, 235, 235, 1) inset"},onMouseDown:function(e){return e.preventDefault()},children:n})})})})),Ni=Object.assign;function Bi(e){return h.a.createElement(xa.a,Ni(Ni({width:"16",height:"16",viewBox:"0 0 16 16","data-new-api":"ArrowDownAlt16","data-old-api":"ArrowDropdown12"},e),{className:"ZDI ZDI--ArrowDropdown12"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M7.554 10.505L4.401 7a.6.6 0 01.446-1h6.306a.6.6 0 01.446 1.001l-3.153 3.503a.6.6 0 01-.892 0z"}))}var zi=function(e){return{background:e.colors.GBK10A,borderRadius:"4px"}},Li=function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},Pi=Object(p.forwardRef)((function(e,t){var n=e.showTogglerIcon,a=e.isMenuOpen,o=e.icon,r=e.isActive,i=e.disabled,c=e.onClick,l=e.className,s=e.text,u=e.label,b=e.sectionIndex,f=e.buttonIndex,h=e.onButtonRectInfoGet,m=Object(p.useRef)(null);Object(p.useEffect)((function(){var e,t=(null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect()).right;t&&(null==h||h({label:u,sectionIndex:b,buttonIndex:f,right:t}))}),[b,f]);var v=n&&Object(d.b)("div",{className:"togglerIcon",css:{transform:"".concat(a?"rotate(180deg)":"rotate(0deg)"),fontSize:0,marginBottom:"2px"},children:Object(d.b)(Bi,{})});return Object(d.c)(oe.a,{as:M.c,zaType:"Button",zaText:u,ref:Object(q.h)(t,m),preset:M.b.Plain,className:j()("ToolbarButton",l),disabled:i,css:function(e){return{"&.Button.Button--plain":Object.assign(Object.assign({marginRight:"20px",padding:"2px 4px",paddingRight:n?"1px":"4px",fontSize:"11px",color:e.colors.GBK03A,textAlign:"center",alignItems:"flex-end",display:"flex",whiteSpace:"nowrap"},r&&Li(e)),{},{"&:hover":zi(e)})}},"aria-label":u,onClick:c,children:[Object(d.c)("div",{css:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(d.b)(o,{center:!0}),Object(d.b)("span",{css:{width:"100%"},children:null!=s?s:u})]}),v]})}));Pi.propTypes={icon:f.a.elementType.isRequired,label:f.a.string.isRequired,isActive:f.a.bool,disabled:f.a.bool,showTogglerIcon:f.a.bool,isMenuOpen:f.a.bool,className:f.a.string,text:f.a.string,shortcut:f.a.string,onClick:f.a.func,sectionIndex:f.a.number,buttonIndex:f.a.number,onButtonRectInfoGet:f.a.func},Pi.defaultProps={isActive:!1,disabled:!1,isMenuOpen:!1,showTogglerIcon:!1,onClick:function(){}};var Mi=Pi,_i=n(131),Di=n(68),Fi=function(e){return{background:e.colors.GBK10A,".togglerIcon":{borderLeftColor:e.colors.GBL01A}}},Ui=function(e){return{svg:{path:{fill:e.colors.GBL01A}},".togglerIcon":{borderLeftColor:e.colors.GBL01A},color:e.colors.GBL01A}},Vi=Object(p.forwardRef)((function(e,t){var n=e.isActive,a=e.disabled,o=e.onClick,r=e.icon,i=e.text,c=e.label,l=e.onMouseEnter,s=e.onMouseLeave;return Object(d.c)(oe.a,{as:M.c,zaType:"Button",zaText:c,preset:M.b.Plain,"aria-label":c,disabled:a,css:function(e){return{"&.Button.Button--plain":Object.assign({padding:"12px 20px",display:"flex",alignItems:"center",color:e.colors.GBK03A,width:"100%",boxSizing:"border-box",whiteSpace:"nowrap",borderRadius:"4px","&:hover":Fi(e),"&:active":Ui(e)},n&&Ui(e))}},onClick:o,onMouseEnter:l,onMouseLeave:s,ref:t,children:[Object(d.b)(r,{center:!0,css:{marginRight:"4px"}}),null!=i?i:c]})}));Vi.propTypes={icon:f.a.elementType.isRequired,label:f.a.string.isRequired,isActive:f.a.bool,disabled:f.a.bool,className:f.a.string,text:f.a.string,shortcut:f.a.string,onClick:f.a.func,onMouseEnter:f.a.func,onMouseLeave:f.a.func},Vi.defaultTypes={isActive:!1,disabled:!1,onClick:function(){},onMouseEnter:function(){},onMouseLeave:function(){}};var Gi=Vi;function qi(e,t,n){return!!n&&(null!=e&&e.children?e.children.find((function(e){return qi(e,t,n)})):e.commandName?t(e.commandName,n)&&e:void 0)}function Hi(e,t,n){return!!n&&(null!=e&&e.children?e.children.some((function(e){return Hi(e,t,n)})):t(e.commandName,n))}function Ki(e){var t=e.items,n=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,r=e.editorState;return t.map((function(e){var t;if(!0===e.hide)return null;var i,c,l=qi(e,a,r),s=!Hi(e,o,r);return null!=e&&null!==(t=e.children)&&void 0!==t&&t.length?Object(d.b)(_i.c,{toggleEvent:"hover",placement:Di.RIGHT,enterDelay:300,leaveDelay:300,toggler:Object(d.b)(Gi,{icon:null!==(i=null==l?void 0:l.icon)&&void 0!==i?i:e.icon,onClick:function(t){var a;null===(a=e.onClick)||void 0===a||a.call(e,t),e.commandName&&n(e.commandName)},label:e.label,isActive:!!l,disabled:s}),className:"ToolbarV3SubmenuButton",children:Object(d.b)(Ki,{items:e.children,onCommand:n,queryCommandState:a,queryCommandEnable:o,editorState:r})},e.label):Object(d.b)(Gi,{icon:null!==(c=null==l?void 0:l.icon)&&void 0!==c?c:e.icon,onClick:function(t){var a;null===(a=e.onClick)||void 0===a||a.call(e,t),e.commandName&&n(e.commandName)},label:e.label,isActive:!!l,disabled:s},e.label)}))}function Wi(e){var t=e.subMenu,n=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState,c=e.isActive,l=e.label,s=e.shortcut,u=e.disabled,b=e.onClick,f=e.icon,h=e.sectionIndex,m=e.buttonIndex,v=e.onButtonRectInfoGet,g=Object(p.useState)(!1),O=Object(a.a)(g,2),j=O[0],y=O[1],C=Object(d.b)(Mi,{isMenuToggler:!0,isMenuOpen:j,showTogglerIcon:!0,icon:f,isActive:c,disabled:u,shortcut:s,onClick:b,label:l,sectionIndex:h,buttonIndex:m,onButtonRectInfoGet:v});return Object(d.b)(_i.c,{toggler:C,onOpen:function(){return y(!0)},onClose:function(){return y(!1)},arrowed:!1,menuContainerClassName:"ToolbarV3Menu-container",children:Object(d.b)(Ki,{items:t,onCommand:n,queryCommandState:o,queryCommandEnable:r,editorState:i})})}function Zi(){return Object(d.b)("span",{className:"ToolbarDivider",css:function(e){return{height:"20px",borderRight:"1px solid",borderColor:e.colors.GBK09A,marginLeft:"-4px"}}})}function Qi(e){var t=e.items,n=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,r=e.editorState,i=e.showDivider,c=e.showRightSpace,l=e.replaceIconByOnlyChild,s=void 0===l||l,u=e.shouldHide,b=e.sectionIndex,f=e.onButtonRectInfoGet;return null!=u&&u(t)?null:Object(d.c)("div",{className:"toolbar-section",css:Object.assign({display:"flex",alignItems:"center"},c&&{marginRight:"16px"}),children:[t.filter((function(e){return!!e})).map((function(e,t){var i=e.Component,c=e.label,l=e.text,u=e.children,p=e.shortcut,h=e.commandName,m=e.onClick;if(!0===e.hide)return null;var v,g=qi(e,a,r),O=!Hi(e,o,r),j=e.icon,y={label:c,icon:j,disabled:O,shortcut:p,isActive:!!g,text:l,sectionIndex:b,buttonIndex:t,onButtonRectInfoGet:f,onClick:function(e){null==m||m(e),h&&n(h)}};if((null==u?void 0:u.length)>1||!s&&(null==u?void 0:u.length)>0)j=(null==g?void 0:g.icon)||j,v=Wi,y=Object.assign(Object.assign({},y),{},{icon:j,onCommand:n,queryCommandState:a,queryCommandEnable:o,editorState:r,subMenu:u});else if(1===(null==u?void 0:u.length)&&s){v=Mi;var C=u[0],w=C.icon,x=C.label,k=C.text,S=C.shortcut,R=C.commandName;y=Object.assign(Object.assign({},y),{},{icon:w,label:x,text:k,shortcut:S,onClick:function(e){null==m||m(e),R&&n(R)}})}else v=Mi;return i?Object(d.b)(i,Object.assign({toolbarButton:v},y),e.label):Object(d.b)(v,Object.assign({},y),e.label)})),i&&Object(d.b)(Zi,{})]})}Ki.propTypes={items:f.a.arrayOf(f.a.oneOfType([f.a.object,f.a.bool])).isRequired,onCommand:f.a.func.isRequired,queryCommandState:f.a.func.isRequired,queryCommandEnable:f.a.func.isRequired,editorState:f.a.object.isRequired},Wi.propTypes={icon:f.a.elementType.isRequired,subMenu:f.a.arrayOf(f.a.oneOfType([f.a.object,f.a.bool])).isRequired,label:f.a.string.isRequired,onCommand:f.a.func.isRequired,queryCommandEnable:f.a.func.isRequired,queryCommandState:f.a.func.isRequired,editorState:f.a.object.isRequired,shortcut:f.a.string,disabled:f.a.bool,isActive:f.a.bool,onClick:f.a.func,sectionIndex:f.a.number,buttonIndex:f.a.number,onButtonRectInfoGet:f.a.func},Wi.defaultTypes={disabled:!1,isActive:!1,onClick:function(){}},Qi.propTypes={items:f.a.arrayOf(f.a.oneOfType([f.a.object,f.a.bool])).isRequired,onCommand:f.a.func.isRequired,queryCommandState:f.a.func.isRequired,queryCommandEnable:f.a.func.isRequired,shouldHide:f.a.func,editorState:f.a.object.isRequired,showDivider:f.a.bool.isRequired,showRightSpace:f.a.bool.isRequired,isMoreSection:f.a.bool,sectionIndex:f.a.number,replaceIconByOnlyChild:f.a.bool,onButtonRectInfoGet:f.a.func};var Yi=Object(p.forwardRef)((function(e,t){var n=e.mainSections,a=e.moreSectionIsEmpty,o=e.setButtonRectInfo,r=e.onCommand,i=e.queryCommandState,c=e.queryCommandEnable,l=e.editorState;return Object(d.b)("div",{className:"mainArea",ref:t,css:{display:"flex",flexShrink:1},children:n.map((function(e,t,n){if(!e||!n)return null;var s=t===n.length-1&&!a;return e.items.length>0&&Object(d.b)(Qi,{sectionIndex:t,onButtonRectInfoGet:o,items:e.items,onCommand:r,queryCommandState:i,queryCommandEnable:c,editorState:l,showDivider:!s,showRightSpace:!s},e.sectionName)}))})})),Ji=Object(p.forwardRef)((function(e,t){var n=e.moreSections,a=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState;return Object(d.b)("div",{className:"moreArea",ref:t,css:{display:"flex"},children:n.map((function(e){return e?e.items.length>0&&Object(d.b)(Qi,{items:e.items,onCommand:a,queryCommandState:o,queryCommandEnable:r,editorState:i,showDivider:!0,showRightSpace:!0,replaceIconByOnlyChild:!1,shouldHide:function(e){return e.every((function(e){var t;return 0===(null==e||null===(t=e.children)||void 0===t?void 0:t.length)}))}},e.sectionName):null}))})})),Xi=Object(p.forwardRef)((function(e,t){var n=e.fixSections,a=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState;return Object(d.b)("div",{className:"fixArea",ref:t,css:{display:"flex"},children:n.map((function(e,t,n){var c=t===n.length-1;return e.items.length>0&&Object(d.b)(Qi,{items:e.items,onCommand:a,queryCommandState:o,queryCommandEnable:r,editorState:i,showDivider:!c,showRightSpace:!c},e.sectionName)}))})})),$i=n(919),ec=n(1329);function tc(e){var t,n=e.onCommand,o=e.queryCommandState,r=e.queryCommandEnable,i=e.editorState,c=e.toolbarMainAreaData,l=e.toolbarMoreAreaData,s=e.toolbarFixtureAreaData,u=e.className,b=function(e){var t=e.toolbarMainAreaData,n=e.toolbarMoreAreaData,o=Object(p.useState)((function(){return[Object($i.fromJS)(t),Object($i.fromJS)(n)]})),r=Object(a.a)(o,2),i=r[0],c=r[1],l=Object(p.useState)(!1),s=Object(a.a)(l,2),u=s[0],d=s[1],b=Object(ec.a)(),f=Object(a.a)(b,2),h=f[0],m=f[1],v=Object(p.useRef)(null),g=Object(p.useRef)(null),O=Object(p.useRef)(null),j=Object(p.useRef)(0),y=Object(q.d)((function(e){e&&(v.current=e,j.current=e.offsetLeft)})),C=Object(p.useRef)([]),w=Object(q.d)((function(e){var t=e.label,n=e.sectionIndex,a=e.buttonIndex,o=e.right;C.current.push({label:t,right:o,sectionIndex:n,buttonIndex:a}),C.current=C.current.sort((function(e,t){var n=e.sectionIndex,a=e.buttonIndex,o=t.sectionIndex,r=t.buttonIndex;return n>o?-1:n<o?1:a>r?-1:a<r?1:0}))})),x=Object(q.d)((function(){var e,t,n,o=null==m?void 0:m.width,r=null==v||null===(e=v.current)||void 0===e?void 0:e.getBoundingClientRect().width,l=(null==g||null===(t=g.current)||void 0===t?void 0:t.getBoundingClientRect().width)||0,s=null==O||null===(n=O.current)||void 0===n?void 0:n.getBoundingClientRect().width;if(o&&r&&void 0!==l&&s){var u,b=o-l-s,f=null===(u=C.current)||void 0===u?void 0:u.find((function(e){var t=e.right;return b>t-j.current}));if(f){var p=f.sectionIndex,h=f.buttonIndex,y=p,w=h;p<3&&(y=3),(p<3||h<1)&&(w=1);var x=Object(a.a)(i,2),k=x[0],S=x[1],R=k.getIn([y,"items"]),A=S.getIn([0,"items",0,"children"]),I=R.concat(A),T=I.slice(0,w+1),E=I.slice(w+1),N=k.setIn([y,"items"],T),B=S.setIn([0,"items",0,"children"],E);c([N,B])}}d(!1)}));return Object(p.useEffect)((function(){c([Object($i.fromJS)(t),Object($i.fromJS)(n)]),d(!0)}),[t]),Object(p.useEffect)((function(){u&&x()}),[u]),Object(p.useEffect)((function(){d(!0)}),[m]),Object(q.i)((function(){d(!0)})),{mainSections:i[0].toJS(),moreSections:i[1].toJS(),setToolbarRef:h,setMainAreaRef:y,moreAreaRef:g,fixAreaRef:O,setButtonRectInfo:w}}({toolbarMainAreaData:c,toolbarMoreAreaData:l}),f=b.mainSections,h=b.moreSections,m=b.setToolbarRef,v=b.setMainAreaRef,g=b.moreAreaRef,O=b.fixAreaRef,j=b.setButtonRectInfo;return Object(d.c)(Ei,{ref:m,className:u,children:[Object(d.b)(Yi,{ref:v,mainSections:f,moreSectionIsEmpty:0===(null===(t=h[0])||void 0===t?void 0:t.items[0].children.length),setButtonRectInfo:j,onCommand:n,queryCommandState:o,queryCommandEnable:r,editorState:i}),Object(d.b)(Ji,{ref:g,queryCommandState:o,queryCommandEnable:r,editorState:i,onCommand:n,moreSections:h}),Object(d.b)(Xi,{ref:O,fixSections:s,queryCommandEnable:r,queryCommandState:o,onCommand:n,editorState:i})]})}var nc=n(2798),ac=Object.assign;function oc(e){return h.a.createElement(xa.a,ac(ac({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"List24","data-old-api":"List24"},e),{className:"ZDI ZDI--List24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M3.25 9.027a.75.75 0 01.75-.75h11.5a.75.75 0 010 1.5H4a.75.75 0 01-.75-.75zm0 10a.75.75 0 01.75-.75h11.5a.75.75 0 110 1.5H4a.75.75 0 01-.75-.75zM3.25 5A.75.75 0 014 4.25h15a.75.75 0 010 1.5H4A.75.75 0 013.25 5zm0 10a.75.75 0 01.75-.75h15a.75.75 0 010 1.5H4a.75.75 0 01-.75-.75z",fillRule:"evenodd",clipRule:"evenodd"}))}var rc=n(910),ic=Object.assign;function cc(e){return h.a.createElement(xa.a,ic(ic({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Cloud24","data-old-api":"Cloud24"},e),{className:"ZDI ZDI--Cloud24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("path",{d:"M10.836 6.355a4.072 4.072 0 00-4.016 4.756.75.75 0 01-.772.875 2.902 2.902 0 10-.13 5.802h.001l11.142-.035h.003a3.753 3.753 0 10-3.53-5.033.75.75 0 01-1.41-.512A5.255 5.255 0 0122.318 14c0 2.9-2.352 5.253-5.252 5.253h-.001l-11.142.034H5.92a4.402 4.402 0 01-.655-8.756v-.104a5.572 5.572 0 019.85-3.57.75.75 0 11-1.15.962 4.062 4.062 0 00-3.128-1.464z",fillRule:"evenodd",clipRule:"evenodd"}))}var lc=n(899),sc=Object.assign;function uc(e){return h.a.createElement(xa.a,sc(sc({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"TrayFull24","data-old-api":"Column24"},e),{className:"ZDI ZDI--Column24"+(e.className?" ".concat(e.className):"")}),h.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},h.a.createElement("path",{d:"M7.822 12a.75.75 0 01.75-.75h6.857a.75.75 0 010 1.5H8.572a.75.75 0 01-.75-.75zm1.142-4a.75.75 0 01.75-.75h4.572a.75.75 0 010 1.5H9.714a.75.75 0 01-.75-.75zm11.786 8a.747.747 0 00-.016-.155l.003.015a.75.75 0 01.013.14zm-17.487-.14a.748.748 0 00.003-.015l-.003.015z"}),h.a.createElement("path",{d:"M7.527 3.25a2.25 2.25 0 00-2.21 1.829l-2.05 10.766-.004.015a.748.748 0 00-.013.14v2.5a2.25 2.25 0 002.25 2.25h13a2.25 2.25 0 002.25-2.25V16a.75.75 0 00-.013-.14l-.003-.015-2.05-10.766a2.25 2.25 0 00-2.211-1.829H7.527zm0 1.5a.75.75 0 00-.737.61l-1.884 9.89h14.188L17.21 5.36a.75.75 0 00-.737-.61H7.527zM4.75 18.5c0 .414.336.75.75.75h13a.75.75 0 00.75-.75v-1.75H4.75v1.75z"})))}var dc=n(1383),bc=n(1382),fc=[{sectionName:"moreArea",minLength:2,priority:2,items:[{label:"更多",icon:lc.c,children:[]}]}];function pc(e){var t,n=e.onCommand,a=e.queryCommandState,o=e.queryCommandEnable,r=e.editorState,i=e.toolbarMainAreaData,c=e.toolbarMoreAreaData,l=e.toolbarFixtureAreaData,s=e.className;return Object(d.c)(Ei,{className:s,css:{".ToolbarButton.Button.Button--plain":{marginRight:"6px"},".ToolbarDivider":{marginLeft:"0",paddingLeft:"2px"},".toolbar-section":{marginRight:"12px"},".fixArea .toolbar-section":{marginRight:"0px"},".fixArea .ToolbarButton.Button.Button--plain:last-child":{marginRight:"0px"},"&.toolbarV3":{paddingLeft:"0px"}},children:[Object(d.b)(Yi,{mainSections:i,moreSectionIsEmpty:0===(null===(t=c[0])||void 0===t?void 0:t.items[0].children.length),onCommand:n,queryCommandState:a,queryCommandEnable:o,editorState:r}),Object(d.b)(Ji,{queryCommandState:a,queryCommandEnable:o,editorState:r,onCommand:n,moreSections:c}),Object(d.b)(Xi,{fixSections:l,queryCommandEnable:o,queryCommandState:a,onCommand:n,editorState:r})]})}var hc=function(e){var t=e.editorState,n=e.onCommand,a=e.queryCommandEnable,o=e.queryCommandState,r=e.showUserProfitButton,i=e.isVideoAnswer,c=e.onInsertVideoClick,l=e.draftPage,s=e.className,u=e.useMediumEditor,b=Object(p.useMemo)((function(){return function(e){var t=e.showProfit,n=e.onInsertVideoClick,a=e.isVideoAnswer;return[{sectionName:"operation",minLength:3,priority:1,items:[{icon:La.b,priority:2,label:"撤销",commandName:"undo",shortcut:"⌘+Z"},{icon:Pa.b,label:"重做",priority:1,commandName:"redo",shortcut:"⌘+Y"},{icon:_a,label:"清除格式",priority:3,commandName:"clear-format",shortcut:"⌘+\\"}]},{sectionName:"style",minLength:4,priority:2,items:[{icon:nc.b,label:"标题",priority:1,children:[{icon:Ia.b,label:"一级标题",commandName:"toggle-block-type-header-two",shortcut:"⌘+⌥+1"},{icon:Ta.b,label:"二级标题",commandName:"toggle-block-type-header-three",shortcut:"⌘+⌥+2"}]},{icon:Ra.b,label:"加粗",commandName:"toggle-inline-style-BOLD",priority:2,shortcut:"⌘+B"},{icon:Aa.b,label:"斜体",commandName:"toggle-inline-style-ITALIC",priority:3,shortcut:"⌘+I"}]},{sectionName:"blockType",minLength:6,priority:4,items:[{icon:oc,label:"列表",priority:1,children:[{icon:Ea.b,label:"有序列表",commandName:"toggle-block-type-ordered-list-item",shortcut:"⌘+⇧+L"},{icon:Na.b,label:"无序列表",commandName:"toggle-block-type-unordered-list-item",shortcut:"⌘+L"}]},{Component:dc.a,icon:Fa.c,label:"目录",commandName:"toggle-catalog",shortcut:"⌘+⌥+J",priority:2},{icon:Ba.a,label:"引用",commandName:"toggle-block-type-blockquote",shortcut:"⌘+⇧+U",priority:3},{icon:Va.b,label:"分割线",commandName:"insert-divider",shortcut:"⌘+⌥+S",priority:4},{icon:za.b,label:"代码块",commandName:"toggle-block-type-code-block",shortcut:"⌘+⌥+C",priority:5},{icon:Ua.b,label:"注释",commandName:"insert-reference",shortcut:"⌘+⌥+R",priority:6}]},{sectionName:"advanced",minLength:2,priority:3,items:[{Component:bc.a,icon:Ja.b,label:"图片",commandName:"insert-image-from-library",priority:7},!a&&{label:"视频",icon:rc.b,priority:6,onClick:function(){null==n||n()}},{label:"链接",icon:Da.c,commandName:"insert-link",priority:5,shortcut:"⌘+K"},t&&!a&&{label:"收益",icon:uo,commandName:"toggle-user-profit-modal",priority:4},{label:"公式",icon:qa.b,commandName:"insert-formula",priority:3,shortcut:"⌘+⌥+E"},!a&&{label:"表格",icon:Ga.b,commandName:"insert-table",priority:2,shortcut:"⌘+⌥+T"},{label:"附件",icon:cc,commandName:"insert-file-from-baidu-wangpan",priority:1}].filter(Boolean)}]}({showProfit:r,onInsertVideoClick:c,isVideoAnswer:i})}),[r,c,i]),f=Object(p.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.draftPage;return[{sectionName:"fixArea",minLength:2,priority:2,items:[Object.assign({label:"文档",icon:_r},t?{children:[{icon:_r,label:"文档",commandName:"insert-doc"},{icon:uc,label:"草稿箱",onClick:function(){location.href=t}}]}:{commandName:"insert-doc"}),{label:"历史版本",icon:ia.b,commandName:"toggle-draft-history-modal"},{label:"帮助",icon:ke.b,commandName:"toggle-help-document"}]}]}({draftPage:l})}),[l]),h=u?pc:tc;return Object(d.b)(h,{editorState:t,onCommand:n,queryCommandEnable:a,queryCommandState:o,toolbarMainAreaData:b,toolbarMoreAreaData:fc,toolbarFixtureAreaData:f,className:s})},mc=n(1059),vc=n(1013),gc="showEvaluatePanelTimer",Oc="isShowEvaluatePanel",jc=function(e){return Object(d.b)(oe.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:"关闭nps",css:{position:"absolute",top:"11px",right:"11px"}},e),{},{children:Object(d.b)(Ge.a,{width:"16",height:"16"})}))},yc=function(e){return Object(d.b)(S.Box,{css:{textAlign:"right"},children:Object(d.b)(oe.a,Object.assign(Object.assign({as:"button",zaType:"Button",zaText:"提交nps",css:function(e){return{color:e.colors.GBL01A,fontSize:"12px"}}},e),{},{children:"确认提交"}))})},Cc=function(e){return Object(d.b)(oe.a,Object.assign({as:"button",zaType:"Button",css:function(e){return{width:"25px",display:"inline-block",textAlign:"center",lineHeight:"25px",background:e.colors.GBK10A,borderRadius:"2px",color:e.colors.GBK06A,marginRight:"2px",cursor:"pointer","&:hover":{background:e.colors.GBK09A}}}},e))};function wc(e){var t=e.editorFrom,n=e.storageKey,o=void 0===n?"":n,r=Object(p.useState)(""),i=Object(a.a)(r,2),c=i[0],l=i[1],s=Object(p.useState)("10"),u=Object(a.a)(s,2),b=u[0],f=u[1],h=Object(p.useState)(""),m=Object(a.a)(h,2),v=m[0],g=m[1],O=Object(p.useRef)(),j=Object(vc.a)(),y=Object(Lo.b)(),C=Object(q.d)((function(e){y("https://api.zhihu.com/slytherin/fallback/".concat(t),{method:"POST",body:{score:e,content:v}})}));return Object(p.useEffect)((function(){var e=(new Date).getTime()>N.a.get(gc+o);!N.a.get(Oc+o)||e?(l(""),setTimeout((function(){l("0"),N.a.set(Oc+o,"1"),N.a.set(gc+o,(new Date).getTime()+5184e6),O.current=setTimeout((function(){l("")}),6e4)}),6e5)):l("")}),[o]),""===c?null:Object(d.b)(oe.b,{block:"editorEvaluatePanel",children:Object(d.b)(oe.e,{zaText:"nps展示",zaType:"Block",children:Object(d.c)(S.Box,{css:function(e){return{width:"310px",position:"fixed",bottom:"72px",right:"110px",background:e.colors.GBK99A,padding:"20px",boxShadow:"0px 1px 3px rgba(26, 26, 26, 0.1)",zIndex:"101"}},children:[Object(d.b)(jc,{onClick:function(){l("")}}),"0"===c&&Object(d.c)(S.Box,{children:[Object(d.b)(S.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A}},children:"亲爱的创作者，感谢您对知乎内容的贡献"}),Object(d.b)(S.Box,{css:function(e){return{fontSize:"13px",color:e.colors.GBK06A,marginTop:"10px",marginBottom:"20px"}},children:"请选择您对编辑器的满意度，以帮助我们更好的服务于您的创作体验"}),Object(d.b)(S.Box,{className:"evaluate-box",children:[1,2,3,4,5,6,7,8,9,10].map((function(e,t){return Object(d.b)(Cc,{zaText:"打分-".concat(e),onClick:function(){clearTimeout(O.current),e<=6?l("1"):e>6&&(l(""),j({text:"感谢您的反馈",delay:2e3}),C(e)),f(e)},children:e},t)}))}),Object(d.c)(S.Flex,{justifyContent:"space-between",css:function(e){return{color:e.colors.GBK03A,marginTop:"15px",fontSize:"11px",lineHeight:"12px"}},children:[Object(d.b)("span",{role:"img","aria-label":"不满意",children:"不满意👎"}),Object(d.b)("span",{role:"img","aria-label":"满意",children:"满意👍"})]})]}),"1"===c&&Object(d.c)(S.Box,{children:[Object(d.b)(S.Box,{css:function(e){return{fontSize:"14px",color:e.colors.GBK02A,marginBottom:"10px"}},children:"请写下您的意见或建议"}),Object(d.b)(S.Box,{children:Object(d.b)(mc.a,{className:"Appeal-TextArea",rows:7,placeholder:"请写下您的建议...",css:{width:"270px",height:"85px"},value:v,onChange:function(e){g(e.target.value)}})}),Object(d.b)(S.Box,{css:{textAlign:"right"},children:Object(d.b)(yc,{onClick:function(){l(""),C(b),j({text:"感谢您的反馈",delay:1e3})}})})]})]})})})}var xc=n(979),kc=function(e){var t=e.children,n=e.className;return Object(d.b)("h1",{css:function(e){return{background:e.colors.GBK99A,color:e.colors.GBK02A,lineHeight:"31px",fontSize:"22px",fontWeight:"600"}},className:n,children:t})},Sc=function(e){var t=e.question,n=e.onClose,o=t.title,r=t.detail,i=Object(p.useState)(null),c=Object(a.a)(i,2),l=c[0],s=c[1],u=Object(p.useRef)(null),b=Object(p.useCallback)((function(){return u.current}),[]);return Object(d.b)("div",{css:{position:"absolute",top:0,bottom:0,left:"100%",width:"calc((100vw - 100%)/2 - 20px)"},ref:u,children:Object(d.c)(S.Box,{css:{overflow:"hidden",width:"326px",maxWidth:"326px"},children:[Object(d.b)(A.a,{getStyle:function(){var e=b();return e?{top:85,left:e.getBoundingClientRect().left}:{top:85}},offset:85,container:b,children:Object(d.c)(S.Box,{css:{width:"326px",maxWidth:"326px"},pl:"16px",children:[Object(d.c)(S.Flex,{bg:"GBK99A",pl:"16px",sx:{borderBottom:"1px solid",borderColor:"GBK09A",height:"60px",alignItems:"center"},children:[Object(d.b)(kc,{css:{fontSize:"18px",lineHeight:"24px"},children:"问题描述"}),Object(d.b)(oe.a,{zaType:"Button",zaAction:"Unknown",zaText:"关闭问题详情",as:Sa,css:{marginLeft:"auto",padding:"16px"},onClick:n})]}),Object(d.c)(S.Box,{bg:"GBK99A",px:"16px",css:{minHeight:"340px",maxHeight:"460px",overflow:"auto"},onClick:function(e){var t=e.target;"IMG"===t.tagName&&t.classList.contains("zh-lightbox-thumb")&&s(t)},children:[Object(d.b)(kc,{css:{fontSize:"16px",lineHeight:"22px",marginBottom:"10px",marginTop:"10px"},children:o}),Object(d.b)(sa.a,{itemProp:"text",tag:"span",html:r})]})]})}),l&&Object(d.b)(xc.a,{img:l,onClose:function(){return s(null)}})]})})},Rc=function(e){var t=e.question,n=e.onClick,a=t.title,o=t.excerpt;return Object(d.b)(S.Box,{bg:"GBK99A",css:{padding:"20px 64px 0"},children:Object(d.c)(kc,{css:function(e){return{paddingBottom:"20px",borderBottom:"1px solid ".concat(e.colors.GBK09A)}},children:[a,o&&Object(d.c)(oe.a,{as:"button",zaType:"Button",zaText:!0,onClick:n,shouldTrackShow:!0,css:function(e){return{color:e.colors.GBL05A,lineHeight:"14px",fontSize:"14px",fontWeight:"normal",display:"inline-flex",alignItems:"center"}},children:["问题描述",Object(d.b)(Re.a,{size:16})]})]})})},Ac=n(60);function Ic(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var Tc=function(e){var t=function(t){Object(l.a)(a,t);var n=Ic(a);function a(e){var t;return Object(r.a)(this,a),(t=n.call(this,e)).state={needReload:e.useMediumEditor&&Object(Ac.isBrowser)()&&Object(bt.c)()},t}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.state.needReload&&this.props.loadDraft(this.props.question.id).finally((function(){requestAnimationFrame((function(){e.setState({needReload:!1},(function(){requestAnimationFrame((function(){var t;null===(t=e.props.imperativeRef.current)||void 0===t||t.focus()}))}))}))}))}},{key:"render",value:function(){return this.state.needReload?null:Object(d.b)(e,Object.assign({},this.props))}}]),a}(p.Component);return He()(Object(m.connect)(null,{loadDraft:pe.Q})(t),e)};var Ec,Nc,Bc=function(){return{fileSizeLimit:10485760}};function zc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var o=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var Lc="questionDetail",Pc=function(e){Object(l.a)(n,e);var t=zc(n);function n(e,a){var i;Object(r.a)(this,n),(i=t.call(this,e,a)).toolbarWrapperRef=Object(p.createRef)(),i.helpDocMilestoneRef=Object(p.createRef)(),i.editableReady=function(){var e=i.props,t=e.reporter,n=e.draft;t.reportSuccess(Ai.editableInit),n&&t.reportSuccess(Ai.draftLoad)},i.onCompositionStart=function(){i.composition=!0,i.syncDraft.cancel()},i.onCompositionEnd=function(){i.composition=!1,i.prevValue&&i.syncDraft(i.prevValue),i.prevValue=null},i.onChangeContent=function(e){i.loggingDeltaTime||(i.loggingDeltaTime=!0,i.startCompositionTime=Math.floor((new Date).getTime()/1e3)),i.hasEdited=!0,i.setState({content:e,isEmpty:e.isEmpty,isTyping:!0}),i.composition?i.prevValue=e:i.syncDraft(e)},i.onAfterChangeContent=function(e){var t=e.getSelection().getIsBackward(),n=document.getSelection();if(n.rangeCount){var a=n.getRangeAt(0).cloneRange();a.collapse(t);var o=a.getBoundingClientRect();if(0===o.height){var r=a.commonAncestorContainer;1===r.nodeType&&(o=r.getBoundingClientRect())}if(0!==o.height){var i=o.bottom-(window.innerHeight-117);i>0&&window.scrollBy(0,i)}}},i.onDeleteDraftModalShow=function(){i.setState({deleteDraftModalShown:!0})},i.onDeleteDraft=function(){var e=i.props,t=e.isReediting,n=e.activeTabKey;t||(n===U.a.videoAnswer?i.editable.clearAllContent():i.editable.reset(),i.setState({draft:"",content:{toHTML:function(){return""}},isEmpty:!0})),i.deleteDraft();var a=i.props.onDeleteDraft;a&&a()},i.onDeleteDraftModalHide=function(){i.setState({deleteDraftModalShown:!1})},i.checkVideoSectionReady=function(e){if(!e)return I.a.alert("没有上传视频，请上传后提交",{title:"无视频"}),!1;var t=e.videoId,n=e.isOriginal;if(t){if("zvideo"===e.type&&null==n)return I.a.alert("没有视频类型，请选择视频为原创或转载后提交",{title:"无视频类型"}),!1}else{var a=i.editable.checkVideoStatus();if(a.isUploading)return I.a.alert("视频上传中，请上传完成后提交",{title:"视频上传中"}),!1;if(a.hasError)return I.a.alert("视频上传失败，请重新上传后提交",{title:"上传失败"}),!1}return!0},i.checkEditorContentReady=function(){return i.editable.hasVideo("upload")?(i.handleError("video-uploading"),!1):i.editable.hasImage("upload")?(i.handleError("image-uploading"),!1):i.editable.hasImage("error")||i.editable.hasVideo("error")&&!i.editable.hasVideo("error-review")?(I.a.alert("草稿中含有上传失败的内容，请更改后重新提交",{title:"上传失败"}),!1):!i.editable.hasVideo("error-review")&&!i.editable.hasVideo("censor")||(I.a.alert("视频中包含未通过审核的信息，请更改后重新提交",{title:"视频未通过审核"}),!1)},i.getSubmitData=function(e,t,n){var a,o=i.state.scheduledPublishAt,r=i.props,l=r.answer,s=r.disclaimers,u=r.settings,b=r.isReediting,f={content:t},p=(0,r.getFormData)(),h=p.isDisclaimerChecked,m=p.disclaimerType,v=p.rewardTagline,g=p.pushActivity,O=p.commentPermission,j=p.reshipmentSettings,y=p.isReport,C=p.commercialZhitaskBindInfo,k=p.thankInviterInfo;if(!b){var S=i.props.currentUser.caEnabled?"need_payment":"allowed";f.reshipmentSettings=j||S,f.commentPermission=O||"all"}if(f.rewardSetting={canReward:Boolean(v),tagline:v},e)return{content:t,attachment:n,rewardSetting:f.rewardSetting,reshipmentSettings:f.reshipmentSettings,commentPermission:f.commentPermission};if(s&&s.length&&(!l||u)&&(f.disclaimerStatus=h?"open":"close",f.disclaimerType=m||"none"),f.commercialReportInfo={isReport:!!y},f.commercialZhitaskBindInfo=null!=(a=C)&&a.bindTaskDTO?{bind_operate:"BIND",task_id:a.bindTaskDTO.taskId,task_type:a.bindTaskDTO.taskType}:null,f.isReport=!!y,o){if(D.a.trackEvent(Object(c.a)(i),{action:"Click",id:5733,name:"回答"}),w.a(o,x.a(new Date,30)))return void I.a.alert(Object(d.b)("div",{style:{textAlign:"center"},children:"只能设置 30 分钟后的定时时间"}),{title:"定时发布"});f.publishAt=Math.floor(o/1e3)+0}return void 0!==g&&(f.pushActivity=g),null!=n&&n.bizExt&&(f.bizExt=Object(ye.a)(n.bizExt)),f.tableOfContentsEnabled=i.editable.hasCatalog(),Object.assign(f,Object(bt.i)(k,"answer")),f},i.canSubmit=function(){var e,t,n=null===(e=i.editable)||void 0===e?void 0:e.toHTML(),a=i.isVideoAnswer?null===(t=i.editable)||void 0===t?void 0:t.getAttachment():null;return i.isVideoAnswer?Boolean(a||n):Boolean(n)},i.handleSubmit=i.props.authRequired((function(){var e=i.props.reporter;e.reportRequest(Ai.addAnswer);try{var t,n=i.props,a=n.answer,o=n.draft,r=n.isReediting,l=n.onSubmit,s=n.showNotification,u=n.question,d=u.id,b=u.questionType,f=u.brand,p=n.currentUser,h=n.updateSettingsDisclaimer,m=n.loadLabel,v=n.onCancel,g=n.useMediumEditor;if(!i.editable)return v(),void e.reportSuccess(Ai.addAnswer);if(!i.canSubmit())return void e.reportSuccess(Ai.addAnswer);var O=i.editable.toHTML(),j=i.isVideoAnswer?i.editable.getAttachment():null==o?void 0:o.attachment;if(i.isVideoAnswer&&!i.checkVideoSectionReady(j))return void e.reportSuccess(Ai.addAnswer);if(!i.checkEditorContentReady())return void e.reportSuccess(Ai.addAnswer);var y=i.getSubmitData(i.isVideoAnswer,O,Object.assign(Object.assign({},j),{},{campaign_id:null===(t=i.props.campaign)||void 0===t?void 0:t.id}));Promise.resolve(l(y)).then((function(){if(e.reportSuccess(Ai.addAnswer),g&&(a&&y.disclaimerStatus&&h(a.id,y.disclaimerStatus,y.disclaimerType),a&&m("answer",a.id),"commercial"===b)){var t=(null==f?void 0:f.toastAnswerDescription)||"已发布！由品牌筛选后进入推荐区。";s(t)}})).then((function(){D.a.trackCardShow(null,{id:7879}),r||D.a.trackEvent(null,{id:4931,action:"StatusReport"},{module:[{card:{content:[{type:"Answer",parent_token:String(d),author_member_hash_id:p.id}]}}],status:{result:"Success",event:{action:"Submit"}}})})).catch((function(t){var n;t.status&&"5"!==(null===(n=t.status)||void 0===n?void 0:n.toString()[0])||e.reportFail(Ai.addAnswer,t),r||D.a.trackEvent(Object(c.a)(i),{id:4931,action:"StatusReport"},{status:{result:"Fail",event:{action:"Submit"}}})}));var C=r?"Edit":"Answer";"Answer"===C&&D.a.trackEvent(Object(c.a)(i),{id:4930}),D.a.trackEvent(Object(c.a)(i),{action:C,is_intent:!1})}catch(t){throw e.reportFail(Ai.addAnswer,t),t}})),i.validateBeforeCancel=function(){return i.editable.hasVideo("upload")?(i.handleError("video-uploading-draft"),!1):!i.editable.hasImage("upload")||(i.handleError("image-uploading-draft"),!1)},i.onCancel=function(){var e=i.props.onCancel;i.validateBeforeCancel()&&(i.hasEdited&&i.syncDraftImmediately(),e&&e())},i.onFocus=function(){"org"===i.props.question.questionType&&i.shouldAnswerOrgQuestionModalShow&&i.handleAnswerOrgQuestionModalShow(),i.setState({focusing:!0})},i.onFocusWithAuth=function(){return i.onFocusAuthChecked?i.onFocus():(i.onFocusAuthChecked=!0,i.props.authRequired(i.onFocus)())},i.onSelectText=function(e){i.setState({selectedText:e.replace(/\s/g,"")})},i.onLoadStart=function(){i.setState({loadingShown:!0})},i.onLoadEnd=function(){i.setState({loadingShown:!1})},i.handleInsertZVideo=function(){i.setState({showInsertableVideoUploader:!0})},i.getAllInviters=function(){var e=i.props,t=e.question;return(0,e.fetchAllInviters)(t.id)},i.getToolbarSidePlugins=function(){return null},i.getToolbarMenuPlugins=function(){var e=i.state.scheduledPublishAt;return Object(d.b)(p.Fragment,{children:i.canUseScheduledPublish&&Object(d.c)(R.c,{onClick:function(){i.setUseScheduledPublish(!e),D.a.trackEvent(Object(c.a)(i),{action:"Click",id:5730,name:"回答"})},children:[Object(d.b)(k.a,{text:!0}),e?"取消定时发布":"定时发布"]})})},i.setUseScheduledPublish=function(e,t){if(e)if(t)i.setState({scheduledPublishAt:t});else{var n=x.a(new Date,30);i.setState({initialScheduledPublishAt:n,scheduledPublishAt:n})}else I.a.confirm("取消后，当前设定的定时发布将不会生效，确定要取消发布吗？",{title:"取消定时发布",text:{cancel:"我再想想"}}).then((function(){i.setState({scheduledPublishAt:void 0}),D.a.trackEvent(Object(c.a)(i),{action:"Click",id:5737,name:"回答"})})).catch((function(){D.a.trackEvent(Object(c.a)(i),{action:"Click",id:5736,name:"回答"})})),D.a.trackCardShow(Object(c.a)(i),{id:5735,name:"回答"})},i.getEditorState=function(){return i.editable.state.editorState?i.editable.state.editorState:i.editable.getEditorState()},i.toggleFullscreen=function(){var e,t,n;i.validateBeforeCancel()&&(i.hasEdited?i.syncDraftImmediately().finally((function(){var e,t,n;Object(bt.h)(i.props.question.id,null===(e=i.props.answer)||void 0===e?void 0:e.id),null===(t=(n=i.props).onCancel)||void 0===t||t.call(n)})):(Object(bt.h)(i.props.question.id,null===(e=i.props.answer)||void 0===e?void 0:e.id),null===(t=(n=i.props).onCancel)||void 0===t||t.call(n)))},i.handleUploadStart=function(){i.setState({isUploading:!0})},i.handleUploadEnd=function(){i.setState({isUploading:!1})},i.handleUploadError=function(e,t){switch(t){case"video":i.handleError("video-upload-error");break;case"image":i.handleError("image-upload-error",e)}},i.handleAnswerOrgQuestionModalShow=function(){i.setState({answerModalShown:!0}),i.shouldAnswerOrgQuestionModalShow=!1},i.handleAnswerModalHide=function(){i.setState({answerModalShown:!1})},i.updateDraftSettings=function(){i.hasSettingsChange=!0,i.syncDraft()},i.syncDraftImmediately=i.props.reporter.recordError(Ai.draftSave,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.state.content,n=i.props,a=n.reporter,o=n.draft,r=i.state.lastUpdatedTime,l=t.toHTML(),s=Math.floor(Date.now()/1e3);e=!r||i.startCompositionTime-r>180?s-i.startCompositionTime:s-r,i.setState({isTyping:!1});var u,d=i.props.answer,b=(d=void 0===d?{}:d).attachment;u=i.videoAnswerEditable||"zvideo"===(null==b?void 0:b.type)?"video_answer":"video"===(null==b?void 0:b.type)?"video_answer_v2":"normal";var f=i.isVideoAnswer?t.getAttachment():null==o?void 0:o.attachment,p=i.hasSettingsChange||(i.isVideoAnswer?Boolean(f||l):Boolean(l));i.hasSettingsChange=!1;var h=i.getDraftSettings(i.isVideoAnswer);return p?i.updateDraft(l,e,u,f,h).then((function(e){var t;null!=e&&null!==(t=e.payload)&&void 0!==t&&t.updatedTime&&i.setState({lastUpdatedTime:e.payload.updatedTime}),i.loggingDeltaTime=!1,a.reportSuccess(Ai.draftSave),D.a.trackEvent(Object(c.a)(i),{action:"AutoSave"})}),(function(e){throw a.reportFail(Ai.draftSave,e),e})).finally((function(){delete i.startCompositionTime})):(a.reportSuccess(Ai.draftSave),Promise.resolve(i.deleteDraft()))})),i.syncDraft=Object(L.a)(i.syncDraftImmediately,2e3),i.getDraftSettings=function(e){var t=i.props,n=t.answer,a=t.disclaimers,o=t.settings,r=t.isReediting,c={},l=(0,t.getFormData)(),s=l.isDisclaimerChecked,u=l.disclaimerType,d=l.rewardTagline,b=l.pushActivity,f=l.commentPermission,p=l.reshipmentSettings,h=l.isReport,m=l.thankInviterInfo,v=void 0===m?"":m;if(!r){var g=i.props.currentUser.caEnabled?"need_payment":"allowed";c.reshipmentSettings=p||g}if(c.commentPermission=f||"all",c.canReward=Boolean(d),c.tagline=d,e)return c;a&&a.length&&(!n||o)&&(c.disclaimerStatus=s?"open":"close",c.disclaimerType=u||"none"),c.commercialReportInfo={is_report:!!h},void 0!==b&&(c.pushActivity=b),c.tableOfContentsEnabled=i.editable.hasCatalog();var O=Object(bt.i)(v);return c.thankInviterStatus=O.thankInviterStatus,c.thankInviter=O.thankInviter,c},i.updateDraft=function(){for(var e=i.props,t=e.question.id,n=e.draft,a=e.addDraft,o=e.updateDraft,r=arguments.length,c=new Array(r),l=0;l<r;l++)c[l]=arguments[l];return n?o.apply(void 0,[t].concat(c)):a.apply(void 0,[t].concat(c))},i.focus=function(){i.editable&&i.editable.focus()},i.hasVideo=function(){return!!i.editable&&i.editable.hasVideo()},i.hasADLinkCard=function(){return!!i.editable&&i.editable.hasADLinkCard()},i.hasFeeConsultCard=function(){return!!i.editable&&i.editable.hasFeeConsultCard()},i.hasMCNLinkCard=function(){return!!i.editable&&i.editable.hasMCNLinkCard()},i.hasCommercialReport=function(){var e=i.props.getFormData().commercialReportInfo;return null==e?void 0:e.isReport},i.handleChangeCommentPermission=function(e,t){var n=void 0===t?e:t;i.setState({commentPermission:n})},i.handleReshipmentSettings=function(e){"need_payment"!==e||i.props.currentUser.caEnabled||window.open("/copyright/invite"),i.setState({reshipmentSettings:e})},i.handleError=function(e,t){Object(je.b)(e,t,i.props.showNotification)},i.handleBeforeVideoUpload=function(){var e=i.props.question;return!e.relationship||!e.relationship.isAnonymous},i.handleReverted=function(e){i.editable.resetWithValue(e.draft.content)},i.getDraftStatus=function(){var e=i.props.draft,t=i.state,n=t.isTyping,a=t.dateNow;return e?e.updating||n?"草稿保存中…":e.updated&&a<1e3*e.updatedTime+6e4?"草稿已保存":e.updateFailed?Object(d.b)("span",{className:"AnswerForm-draftStatus--failed",children:"草稿保存失败"}):C()(Ec||(Ec=Object(o.a)(["草稿保存于",""])),Object(T.toRelativeString)(e.updatedTime)):""},i.handleEditGGRCard=function(e){var t=e.type,n=e.payload,a=i.state.mcnEditingGood,o=i.props.updateLinkCard;"goodsEditor/submitNewGoodsInfo"!==t?"goodsEditor/closeGoodsEditor"!==t||i.setState({mcnEditingGood:null}):o(Object.assign(Object.assign({},a),{},{title:null==n?void 0:n.title})).finally((function(){i.setState({mcnEditingGood:null}),i.editable.handleCommand("edit-mcn-link-card:".concat(a.id))}))},i.shouldShowProfit=function(){return i.props.showUserProfitButton&&!i.isVideoAnswer},i.createEditorPlugins=function(){var e,t,n,a=wa({type:"question",id:i.props.question.id,draftType:null!==(e=i.props.answer)&&void 0!==e&&e.id?"answer":void 0,draftId:null===(t=i.props.answer)||void 0===t?void 0:t.id,syncDraft:i.syncDraft}),o=$n({getShouldShowToolbarButton:function(){return!i.isVideoAnswer},getAllInviters:i.getAllInviters,inviterQuery:i.props.inviterQuery,getInitialThankInviterInfo:function(){return i.props.thankInviterInfo},syncDraftImmediately:i.syncDraftImmediately}),r=vo({shouldDisabled:function(){return i.props.question.relationship.isAnonymous},shouldShow:function(){return i.shouldShowProfit()},getContentInfo:function(){var e;return{type:"answer",id:null===(e=i.props.answer)||void 0===e?void 0:e.id}}}),l=Co(),s=wi({sourceType:"answer",sourceId:null===(n=i.props.question)||void 0===n?void 0:n.id});return i.helpDocPlugin=lo({getInitialOffset:i.getHelpDocInitialOffset,getShouldHide:i.getShouldHideHelpDoc,forceUpdate:i.forceUpdate.bind(Object(c.a)(i))}),[a,o,r,l,s,i.helpDocPlugin]},i.renderRichInput=function(){var e,t=i.props,n=t.answer,a=(n=void 0===n?{}:n).attachment,o=t.answer,r=t.question,c=t.isReediting,l=t.draft,s=t.defaultValue,u=i.state,b=u.toolbarMenuAttention,f=u.scheduledPublishAt,p=u.initialScheduledPublishAt,h=i.props.getFormData().tableOfContentsEnabled,m="".concat(c?"修改":"写","回答...");"commercial"===r.questionType&&(m=null===(e=r.brand)||void 0===e?void 0:e.editorDescription);i.isVideoAnswer&&(m="详细介绍下视频（选填）");var v,g=i.videoAnswerEditable||"video_answer"===(null==l?void 0:l.type)||"zvideo"===(null==a?void 0:a.type);if(l)v=null==l?void 0:l.attachment;else if("zvideo"===(null==a?void 0:a.type))v=a.zvideo;else if("video"===(null==a?void 0:a.type)){var O;v=Object.assign(Object.assign({},null===(O=a.video)||void 0===O?void 0:O.videoInfo),{},{videoId:a.attachmentId})}var j={ref:function(e){return i.editable=e},answer:o,question:r,toolbarMenuAttention:b,scheduledPublishAt:f,initialScheduledPublishAt:p,placeholder:m,draft:l,defaultValue:s,isLegacyVideoAnswer:g,defaultVideo:v,videoAnswerEditable:i.videoAnswerEditable,videoAnswerPublished:i.videoAnswerPublished,editableReady:i.editableReady,handleChangeContent:i.onChangeContent,handleAfterChangeContent:i.onAfterChangeContent,handleFocusWithAuth:i.onFocusWithAuth,handleSelectText:i.onSelectText,handleSubmit:i.handleSubmit,handleError:i.handleError,handleLoadStart:i.onLoadStart,handleLoadEnd:i.handleLoadEnd,handleUploadStart:i.handleUploadStart,handleUploadEnd:i.handleUploadEnd,handleUploadError:i.handleUploadError,handleBeforeVideoUpload:i.handleBeforeVideoUpload,handleMCNLinkCardEdit:function(e,t){i.setState({mcnEditingGood:t})},isVideoAnswer:i.isVideoAnswer,handleInsertZVideo:i.handleInsertZVideo,getToolbarSidePlugins:i.getToolbarSidePlugins,createEditorPlugins:i.createEditorPlugins,getToolbarMenuPlugins:i.getToolbarMenuPlugins,getEditorBeforePlugins:i.getEditorBeforePlugins,setUseScheduledPublish:i.setUseScheduledPublish,allowToolbar:!1,onAnyChange:i.handleAnyChange,docPluginProps:Bc(),tableOfContentsEnabled:h};return Object(d.b)(Ti,Object.assign({},j))},i.handleAnyChange=function(e){var t=e.editorState;i.setState({editorState:t})},i.handleKeyCommand=function(e){if(!i.editable)return"not-handled";var t=i.editable.handleKeyCommand(e);return"toggle-catalog"===e&&requestAnimationFrame((function(){i.forceUpdate(),i.syncDraftImmediately()})),t},i.queryCommandEnable=function(e,t){return!!i.editable&&i.editable.queryCommandEnable(e,t)},i.queryCommandState=function(e,t){return!!i.editable&&i.editable.queryCommandState(e,t)},i.getHelpDocInitialOffset=function(){var e=i.toolbarWrapperRef.current;if(e){var t=e.getBoundingClientRect(),n=i.props.useMediumEditor?t.bottom-50:t.bottom+20;return document.documentElement.clientWidth-t.right>328?{top:n,left:t.right+18}:{top:n,right:0}}},i.getShouldHideHelpDoc=function(){if(!i.props.useMediumEditor)return!1;var e=i.helpDocMilestoneRef.current;return!!e&&e.getBoundingClientRect().top<117},i.getAnswerFormRef=function(){return i.props.imperativeRef};var l=i.props,s=l.defaultValue,u=l.draft,b=u?u.editableContent:s,f=u?u.updatedTime:0;return i.state={draft:b,content:{toHTML:function(){return b}},isEmpty:!b,isTyping:!1,reshipmentSettings:null,commentPermission:null,answerModalShown:!1,focusing:!1,selectedText:null,loadingShown:!1,isUploading:!1,rewardNotication:!0,toolbarMenuAttention:null,dateNow:0,rewardModalShown:!1,lastUpdatedTime:f,showInsertableVideoUploader:!1,mcnEditingGood:null,initialScheduledPublishAt:void 0,scheduledPublishAt:void 0,thankInviterInfo:e.thankInviterInfo||e.inviterFromNotification,editorState:null,rightArea:null},i.hasEdited=!1,i}return Object(i.a)(n,[{key:"canUseScheduledPublish",get:function(){var e=this.props,t=e.currentUser,n=e.isReediting,a=e.activeTabKey;return t&&t.autoSendingCreations&&a===U.a.textAnswer&&!n}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.reporter,o=t.draft,r=t.question.id;(0,t.getBio)(r),n.reportRequest(Ai.editableInit),o&&n.reportRequest(Ai.draftLoad),this.shouldAnswerOrgQuestionModalShow=!G.getKnown(),this.onFocusAuthChecked=!1;var i=this.props,c=i.fillCurrentUserIfNeeded,l=i.getUserProfitPermission,s=c(["lastCommentPermission","caEnabled","autoSendingCreations","mcn_user_info"]);l(),Promise.resolve(s).then((function(){le.a.getActionsByNames(["a_draft_history",e.canUseScheduledPublish&&"auto_pub_answer"].filter(Boolean)).then((function(t){var n=Object(a.a)(t,1)[0];n&&(e.setState({toolbarMenuAttention:n.description}),le.a.markAsShown(n),"auto_pub_answer"===n.guide_name&&D.a.trackCardShow(e,{id:5738}))})),D.a.trackCardShow(e,{id:5729,name:"回答"})})),document.addEventListener("compositionstart",this.onCompositionStart),document.addEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=function(){return window.name="",e.state.isUploading||e.composition||e.syncDraft.pending()||e.props.draft&&e.props.draft.updating?"草稿尚未保存完毕，确定离开此页？":void 0},this.setState({dateNow:Date.now()}),this.reRenderTimer=setInterval((function(){return e.setState({dateNow:Date.now()})}),6e4),this.props.imperativeRef&&(this.props.imperativeRef.current={focus:this.focus,hasVideo:this.hasVideo,hasADLinkCard:this.hasADLinkCard,hasMCNLinkCard:this.hasMCNLinkCard,hasFeeConsultCard:this.hasFeeConsultCard,toggleFullscreen:this.toggleFullscreen,hasCommercialReport:this.hasCommercialReport,hasEditorContent:function(){return!e.state.isEmpty}}),function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Array.isArray(a)&&"function"==typeof(null===(e=window)||void 0===e||null===(t=e.aria)||void 0===t||null===(n=t.initcallback)||void 0===n?void 0:n.disableShortKeys)){var o=a.map((function(e){return z[e]}));window.aria.initcallback.disableShortKeys(o)}}(["r","t","e"])}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=this.props.reporter,a=this.state,o=e.currentUser,r={};a.reshipmentSettings||void 0===o.caEnabled||(r.reshipmentSettings=o.caEnabled?"need_payment":"allowed"),a.commentPermission||void 0===o.lastCommentPermission||(r.commentPermission=o.lastCommentPermission),Object.keys(r).length&&this.setState(r),this.draftLoaded||this.state.draft||this.props.draft||!e.draft||(n.wrapAutoRecord(Ai.draftLoad,(function(){var n=e.draft.editableContent;n&&(t.setState({draft:n,isEmpty:!n,content:{toHTML:function(){return n}}}),t.editable&&!t.editable.toHTML()&&t.editable.resetWithValue(n))}))(),this.draftLoaded=!0)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state,a=n.focusing,o=n.thankInviterInfo,r=this.props,i=r.tagline,c=r.inviterFromNotification;if(i){var l=N.a.get("rewardNotication");a&&!l&&(this.setState({rewardNotication:!1}),N.a.set("rewardNotication",!0),this.timeout=setTimeout((function(){t.setState({rewardNotication:!0})}),2e3))}o||!c||e.inviterFromNotification||this.setState({thankInviterInfo:c})}},{key:"componentWillUnmount",value:function(){var e,t,n;this.syncDraft.cancel(),document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd),window.onbeforeunload=null,this.timeout&&clearTimeout(this.timeout),this.reRenderTimer&&clearInterval(this.reRenderTimer),this.props.imperativeRef&&(this.props.imperativeRef.current=null),"function"==typeof(null===(e=window)||void 0===e||null===(t=e.aria)||void 0===t||null===(n=t.initcallback)||void 0===n?void 0:n.disableShortKeys)&&window.aria.initcallback.disableShortKeys([])}},{key:"getCloneContent",value:function(){return this.getEditorState().getCurrentContent()}},{key:"deleteDraft",value:function(){var e=this.props,t=e.question,n=e.draft,a=e.deleteDraft;if(n)return a(t.id)}},{key:"renderFooter",value:function(){var e=this,t=this.props,n=t.isReediting,a=t.useMediumEditor,r=t.draft,i=this.state,c=i.content,l=i.scheduledPublishAt,s=n&&this.isVideoAnswer,u=c.toHTML()||"",b=a?_e:Me;return Object(d.c)(b,{hideScrollButton:s,getContaner:function(){return e.form},isAnswer:!0,children:[Object(d.b)(S.Text,{color:"GBL05A",fontSize:"14px",ml:s?"0":"24px",children:C()(Nc||(Nc=Object(o.a)(["正文字数：","字"])),de(u,!0))}),Object(d.b)(S.Text,{color:"GBL05A",fontSize:"14px",ml:"auto",children:this.getDraftStatus()}),a&&n&&Object(d.b)(M.c,{zaType:"Button",zaText:!0,color:"grey",preset:"secondary",css:{marginLeft:"24px"},onClick:this.onCancel,children:r?"保存草稿并离开":"取消"}),Object(d.b)(na,{canSubmit:this.canSubmit(),handleSubmit:this.handleSubmit,isReediting:n,scheduledPublishAt:l,type:"answer",css:{marginLeft:"24px"}})]})}},{key:"videoAnswerPublished",get:function(){var e=this.props.answer,t=(e=void 0===e?{}:e).attachment;return["zvideo","video"].includes(null==t?void 0:t.type)}},{key:"videoAnswerEditable",get:function(){return this.props.activeTabKey===U.a.videoAnswer}},{key:"isVideoAnswer",get:function(){return this.videoAnswerPublished||this.videoAnswerEditable}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.isReediting,o=t.answer,r=(o=void 0===o?{}:o).answerType,i=t.question,c=t.currentUser,l=t.answer,s=t.draft,u=t.activeTabKey,b=t.useMediumEditor,f=t.showUserProfitButton,p=this.state,h=p.deleteDraftModalShown,m=p.showInsertableVideoUploader,v=p.mcnEditingGood,g=p.editorState,O=p.initialScheduledPublishAt,y=p.scheduledPublishAt,C=p.rightArea,w=b?{offset:52,container:function(){return e.form}}:{getStyle:function(){return{width:"100%",top:0,left:0}}};return Object(d.c)(B.a,{module:"AnswerEditView",content:{type:"Answer",parent_token:String(i.id),author_member_hash_id:c.id},children:[Object(d.c)("form",{ref:function(t){e.form=t},className:j()("AnswerForm",n),onSubmit:function(e){return e.preventDefault()},noValidate:!0,css:[{borderBottom:"none"},b?{".AnswerForm-editor .Catalog.isCatalogV2":{width:"140px",marginLeft:"-164px"}}:{".AnswerForm-editor .Catalog.isCatalogV2":{marginLeft:"-260px"}}],children:[Object(d.c)("div",{children:[Object(d.b)(wc,{editorFrom:b?"answer-pc-editor-modified":"answer-pc-editor-full"}),this.editable&&Object(d.b)(A.a,Object.assign(Object.assign({},w),{},{children:Object(d.b)("div",{ref:this.toolbarWrapperRef,css:function(e){return{display:"flex",justifyContent:"center",margin:"0px auto",background:e.colors.GBK99A}},children:Object(d.b)(hc,{editorState:g,onCommand:this.handleKeyCommand,queryCommandEnable:this.queryCommandEnable,queryCommandState:this.queryCommandState,showUserProfitButton:f,isVideoAnswer:this.isVideoAnswer,onInsertVideoClick:this.handleInsertZVideo,useMediumEditor:b},u)})})),Object(d.c)("div",{css:function(e){return[{position:"relative",".Editable":{paddingTop:"1px",minHeight:"calc(100vh - 120px)"}},b?{width:"694px",margin:"0 auto",background:e.colorMod(e.colors.GBK10C).alpha(.45),".Editable-content":{paddingBottom:"62px"}}:{width:"782px",margin:"20px auto",".AnswerForm-editor .RichText--editable":{paddingLeft:64,paddingRight:64}}]},children:[C===Lc&&Object(d.b)(Sc,{question:i,onClose:function(){e.setState({rightArea:null})}}),!b&&Object(d.b)(Rc,{question:i,onClick:function(){return e.setState({rightArea:Lc})}}),Object(d.b)("div",{css:{minHeight:"calc(100vh - 120px)"},children:this.renderRichInput()}),Object(d.b)("div",{ref:this.helpDocMilestoneRef}),Object(d.b)(ea,{question:i,answer:l,isVideoAnswer:this.isVideoAnswer,isReediting:a,setUseScheduledPublish:this.setUseScheduledPublish,canScheduledPublish:this.canUseScheduledPublish,initialScheduledPublishAt:O,scheduledPublishAt:y,draft:s,getAnswerFormRef:this.getAnswerFormRef,css:!b&&{paddingLeft:"54px",paddingRight:"64px"},updateDraftSettings:this.updateDraftSettings})]})]}),"org"===i.questionType&&Object(d.b)(G,{shown:this.state.answerModalShown,onClose:this.handleAnswerModalHide}),Object(d.b)(aa.a,{title:"清除草稿",subtitle:a?"你确定要清除保存的草稿并取消编辑吗？":"你确定要清除保存的草稿吗？",shown:h,onCancel:this.onDeleteDraftModalHide,onSubmit:this.onDeleteDraft}),m&&Object(d.b)(ce,{show:m,onClose:function(){return e.setState({showInsertableVideoUploader:!1})},onZVideoSubmit:function(t){e.setState({showInsertableVideoUploader:!1}),e.editable.handleCommand("insert-zvideo-card:".concat(JSON.stringify(t)))},onVideoSubmit:function(t){e.setState({showInsertableVideoUploader:!1}),e.editable.handleCommand("insert-video-card",t)}}),Object(d.b)(P.b,{className:"AnswerForm-MCNEditor",title:"编辑商品",onClose:function(){e.setState({mcnEditingGood:null})},children:Boolean(v)&&Object(d.b)(_.a,{className:"AnswerForm-MCNEditorIframe",src:Object(po.a)({title:v.title,originTitle:v.originTitle,source:v.source,sourceId:v.sourceId,productTypeName:v.productTypeName}),onMessage:this.handleEditGGRCard})}),Object(d.b)(ra,{onClose:function(){window.location.href="https://www.zhihu.com/question/".concat(i.id,"/answer/").concat(l.id)},shown:"slideshow"===r})]}),this.renderFooter()]})}}]),n}(p.Component);Pc.propTypes={activeTabKey:f.a.string,question:f.a.object,isReediting:f.a.bool,defaultValue:f.a.string,getFormData:f.a.func,reporter:f.a.object},Pc.defaultProps={isReediting:!1};var Mc={addDraft:pe.b,updateDraft:pe.lb,deleteDraft:pe.j,showNotification:W.h,fillCurrentUserIfNeeded:ve.e,updateSettingsDisclaimer:he.L,loadLabel:me.e,getUserProfitPermission:se.b,updateLinkCard:fe.b,fetchAllInviters:pe.o,getBio:pe.q};t.a=Object(v.compose)(Tc,g.withRouter,F.a,Object(m.connect)((function(e,t){var n,a,o=e.entities,r=o.questions,i=o.drafts,c=void 0===i?{}:i,l=e.question,s=t.location.query.inviter,u=Object(Oe.b)(e),d=Object(ve.b)(e),b=Object(pe.d)(e,t.question.id),f=s&&(null==b||null===(n=b.find)||void 0===n?void 0:n.call(b,(function(e){return e.id===s}))),p=c["question_".concat(t.question.id)];return{campaign:u,question:r[t.question.id]||t.question,draft:p,currentUser:d,isPuQuestion:Boolean(l&&l.brand&&l.brand.isPuQuestion),disclaimers:l.disclaimers[t.question.id],settings:t.answer?e.answers.settings[t.answer.id]:null,showUserProfitButton:e.userProfit.permission.visible,thankInviterInfo:null===(a=Object(me.c)(e,t.answer))||void 0===a?void 0:a.thankInviterInfo,allInviters:b,inviterQuery:s,inviterFromNotification:f,isOffice:Object(ge.e)(e)}}),Mc),Ze,xi.e)(Pc)},1477:function(e,t,n){"use strict";n.d(t,"a",(function(){return gt})),n.d(t,"b",(function(){return jt}));var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(0),u=n.n(s),d=n(20),b=n(21),f=n(3),p=n.n(f),h=n(13),m=n.n(h),v=n(26),g=n(899),O=n(33),j=n(131),y=n(72),C=n(968),w=n(1657),x=function(e){var t=e.className,n=void 0===t?"":t,a=e.extra,o=void 0===a?{}:a,r=o.ua,i=void 0===r?{}:r,c=o.isVip,l=void 0!==c&&c,s="https://www.zhihu.com/settings/filter";return u.a.createElement(y.b,{block:"KfeCollection-FeedBlockEntry"},u.a.createElement(y.a,{zaType:"Button",extra:{link:{url:s}},onClick:function(){l?Object(w.a)(s,i):C.a.show()},zaText:"设置屏蔽关键词",shouldTrackShow:!0},u.a.createElement("div",{className:m()("KfeCollection-FeedBlockEntry-root",n)},u.a.createElement("div",{className:"KfeCollection-FeedBlockEntry-title"},"设置屏蔽关键词"),u.a.createElement("img",{className:"KfeCollection-FeedBlockEntry-img",src:"https://pic3.zhimg.com/v2-e5f10c5bc3593ca097cb7bfc5502d9b9.png"}))))};x.propTypes={className:p.a.string,extra:p.a.shape({ua:p.a.object,isVip:p.a.bool}).isRequired};var k=x,S=n(218),R=n(1222),A=n(1326),I=n(1757),T=n(1294),E=n(1761),N=n(1745),B=n(150),z=n(149),L=n(922),P=n(973),M=n(1224),_=n(962),D=n(433),F=n(1421);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var V=function(e){Object(r.a)(n,e);var t=U(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.liveCourse,o=t.liveCourse,r=o.id,i=o.type,c=o.subject,s=o.courseMemberCount,u=o.liveCount,d=o.price,b=o.promotionPrice,f=o.headImageMobile,p=o.likedNum,h=o.isLiked,m=o.description,v=o.speakers,g=void 0===v?[]:v,O=t.lastreadTouchable,j=t.renderOptions,y=t.zaIds.options,C="/lives/courses/".concat(r);if(n!==L.c.interactive)return Object(l.b)(L.e,{data:a,link:C,title:Object(l.b)("a",{href:C,target:"_blank",rel:"noopener noreferrer",children:c})});Boolean(g.length)&&"".concat(g[0].member.name).concat(g.length>1?"等":"","的私家课 · ").concat(u," 节课");var w={id:r,type:i};return Object(l.c)("div",{className:"LiveCourseItem",children:[f&&Object(l.b)("a",{className:"LiveCourseItem-cover",href:C,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:Object(B.imgUrl)(f,"640w"),srcSet:"".concat(Object(B.imgUrl)(f,"r")," 2x"),alt:c})}),Object(l.b)(L.e,{data:a,link:C,title:Object(l.b)("a",{href:C,target:"_blank",rel:"noopener noreferrer",children:c}),lastreadTouchable:O,children:Object(l.c)(P.b,{excerpt:"",limit:60,limitWithImage:60,html:m||"",data:a,extra:Object(l.c)(L.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"参与人数："}),Object(z.formatNumber)(s)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"课程节数："}),Object(z.formatNumber)(u)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"特价："}),"number"==typeof b?Object(l.c)("span",{className:"LiveItem-price",children:[Object(F.a)(b),Object(l.b)("del",{children:Object(F.a)(d)})]}):Object(F.a)(d)]})]}),children:[Object(l.b)(M.a,Object.assign(Object.assign({},w),{},{liked:h,count:p,icon:"thank"})),Object(l.b)(_.a,Object.assign(Object.assign({},w),{},{url:C,title:c})),j&&j((function(){return e.contentItem}),y)]})})]})}}]),n}(s.Component);V.propTypes={preset:p.a.oneOf(Object.values(L.c)),renderOptions:p.a.func,zaIds:p.a.object},V.defaultProps={zaIds:{}};var G=Object(D.b)((function(e){var t=e.liveCourse,n=e.trackCardShow,a=void 0===n||n;return{module:"LiveCourseItem",card:{content:{type:"LiveCourse",id:t.id}},trackCardShow:a}}))(V),q=n(1218),H=n(1227),K=n(47),W=n(1048),Z=n.n(W),Q=n(1047),Y=n(46),J=n(1045),X=n(1733),$=n(1498),ee=n(960),te=n(1425),ne=n(1022),ae=n(1655),oe=n(45),re=(n(1656),n(1055)),ie=n(1037);function ce(e){var t=e.target,n=e.target,a=n.id,o=n.attachment.url,r=n.description,i=n.title,c=n.author,u=n.thumbnailExtraInfo,d=n.isReviewing,f=n.isUpdateReviewing,p=e.lastreadTouchable,h=e.preset,m=void 0===h?"primary":h,v=e.onToggleExpand,g=e.renderOptions,O=e.renderActionButtons,j=e.toggleUninterest,y=u||{},C=y.videoId,w=y.url,x=Object(s.useRef)();Object(ie.a)({videoId:C,iframeRef:x});var k=Object(b.useSelector)((function(e){return Z()(c)?e.entities.users[c]:c})),S=Object(Y.o)(k),R=Object(s.useState)(!1),A=Object(K.a)(R,2),I=A[0],T=A[1],E=Object(s.useState)({commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"}),N=Object(K.a)(E,2),B=N[0],z=N[1],M=Object(ae.a)(m,I,k),_=Object(K.a)(M,1)[0];return Object(l.b)(Q.a,{data:t,children:Object(l.c)(L.e,{className:"ZVideoItem",data:t,title:Object(l.b)("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:i}),link:o,meta:_,expandedHeight:0,lastreadTouchable:p,"data-zop":JSON.stringify({authorName:null==k?void 0:k.name,itemId:a,title:i,type:"zvideo"}),children:[S&&(d||f)&&Object(l.b)($.a,{}),I&&C&&Object(l.b)("div",{className:"ZVideoItem-video",children:Object(l.b)(re.a,{className:"ZVideoItem-player",type:"video",ref:x,src:"https://".concat(oe.a.videoHost,"/video/").concat(C,"?").concat(new URLSearchParams([["itemId",a],["itemType","zvideo"]]).toString()),iframeProps:{allowFullScreen:!0},zaProps:{token:a}})}),I&&Object(l.b)(te.a,{}),Object(l.b)(P.b,{excerpt:Object(J.c)(r),html:r,cover:w,hasVideo:!0,truncateDisabled:!0,allowCollapseWithEmptyExcerpt:!0,expanded:I,onToggleExpend:function(e){T(e),v&&v(e)},children:Object(l.b)(X.a,{className:"ZVideoItem-toolbar",zvideo:t,author:k,commentsShown:B.commentsShown,onCommentButtonClick:function(e,t){return z(t)},renderOptions:g,renderActionButtons:O,toggleUninterest:j})}),Object(l.b)(ee.a,{className:"ZVideoItem-comment",containerClassName:"ZVideoItem-commentContainer",parent:t,shown:B.commentsShown,commentPattern:B.commentPattern,autoFocus:B.autoFocus,onClose:function(){return z(Object.assign(Object.assign({},B),{},{commentsShown:!1}))},commentInputPosition:"bottom",showPackupButton:!0})]})})}ce.defaultProps={renderOptions:function(){return[null]}};var le=Object(d.compose)(Object(ne.a)((function(e){var t,n=e.target;return{content:{type:"Answer",token:String(n.id)},extra:{mediaInfo:{videoInfo:{videoId:null===(t=n.thumbnailExtraInfo)||void 0===t?void 0:t.videoId}}}}})))(ce),se=n(8);function ue(e,t,n){return t&&n?function(t,a){var o=e.relationship,r=(o=void 0===o?{}:o).isAuthor,i={toggler:Object(l.b)(O.c,{preset:"plain",className:"OptionsButton",icon:g.a,"aria-label":"更多"}),reversed:!0,onOpen:function(){return function(e,t){v.a.trackEvent(e,Object.assign({action:"Click",element_name:"MoreAction"},t&&{id:t}))}(t(),a)},menuClassName:"ItemOptions-selfMenu",itemClassName:"ItemOptions-selfMenuItem"};if(!r)return Object(se.e)(j.c,Object.assign(Object.assign({},i),{},{key:"options"}),n({itemClassName:"ItemOptions-selfMenuItem",getContainer:t}))}:null}var de=n(30),be=n(201),fe=n(1050),pe=n(151);function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var me=function(e){Object(r.a)(n,e);var t=he(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.eventcard,a=n.linkTitle,o=n.linkUrl,r=n.title,i=n.eventUrl,c=n.extraInfo,s=n.content,u=n.bannerUrl,d=t.eventcard,b=t.lastreadTouchable,f=t.renderOptions,p=t.zaIds.options;return Object(l.c)("div",{className:"EventcardItem",children:[u&&Object(l.b)("a",{className:"EventcardItem-cover",href:i,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:u,srcSet:"".concat(u," 2x"),alt:r})}),Object(l.c)(L.e,{data:d,link:i,onRef:function(t){e.contentItem=t},title:Object(l.b)("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:r}),lastreadTouchable:b,children:[Object(l.b)("div",{className:"EventcardItem-content",children:s}),Object(l.c)(L.a,{children:[Boolean(a)&&Object(l.b)(pe.a,{a:!0,color:"blue",to:o,children:a}),Object(l.b)("span",{children:c}),f&&f((function(){return e.contentItem}),p)]})]})]})}}]),n}(s.Component);me.propTypes={preset:p.a.oneOf(Object.values(L.c)),zaIds:p.a.object,renderOptions:p.a.func};var ve=Object(D.b)((function(e){var t=e.trackCardShow;return{module:"EventItem",trackCardShow:void 0===t||t}}))(me),ge=n(2180),Oe=n(1578);var je=Object(d.compose)(Object(ne.a)((function(e){var t=e.question;return{content:{type:"Question",token:String(t.id)},block:"写回答卡片"}})))((function(e){var t=e.question,n=e.lastreadTouchable,a=e.renderOptions,o=e.zaInfos,r=t.id,i=t.title,c=t.content,u=t.excerpt,d=t.viewCount,b=t.answerCount,f=t.recReason,p=o.options,h=o.title,m=o.expand,v=Object(s.useState)(!0),g=Object(K.a)(v,2),O=g[0],j=g[1],y=Object(s.useState)(null),C=Object(K.a)(y,2),w=C[0],x=C[1];return Object(l.c)("div",{className:"TopstoryQuestionAskItem",children:[Object(l.c)("div",{className:"TopstoryQuestionAskItem-hint",children:[Object(l.b)(ge.a,{center:!0}),f]}),Object(l.b)(L.e,{data:t,title:Object(l.b)("a",Object.assign(Object.assign({href:"/question/".concat(r),target:"_blank",rel:"noopener noreferrer"},h&&{"data-za-detail-view-id":h}),{},{children:i})),lastreadTouchable:n,onRef:x,children:Object(l.c)(P.b,{html:c,excerpt:u,limit:60,limitWithImage:60,zaIds:{expand:m},onToggleExpend:function(){return j(!O)},children:[Object(l.c)(pe.a,{className:"TopstoryQuestionAskItem-writeAnswerButton",preset:"outline",color:"blue",to:"/question/".concat(r,"?write"),target:"_blank","data-za-detail-view-id":5121,"data-za-detail-view-action":"Answer",children:[Object(l.b)(Oe.a,{}),"写回答"]}),Object(l.c)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[Object(z.formatNumber)(d)," 次浏览"]}),Object(l.c)("div",{className:"TopstoryQuestionAskItem-questionInfo",children:[Object(z.formatNumber)(b)," 个回答"]}),a&&a((function(){return w}),p)]})})]})})),ye=n(1579),Ce=n(467);function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}function xe(e){return e.closest(".TopstoryItem").querySelector(".ContentItem")}var ke=function(e){Object(r.a)(n,e);var t=we(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleToggleUninterest=function(){var t=e.props,n=t.zaIgnoreId,a=t.getContainer,o=e.props,r=o.item,i=r.id,c=r.type,l=r.ad,s=r.isUninterest,u=o.toggleUninterest,d=o.type,b="feed_advert"===c;b&&Object(be.c)(l.closeTrack);var f=b?xe(e.el):a();return v.a.trackEvent(f,Object.assign({action:s?"UnIgnore":"Ignore",element:"Button",is_intent:!0},n&&{id:n})),u(i,d)},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.ua,a=t.isVip,o=Object(l.b)(j.b,{className:this.props.itemClassName,onClick:this.handleToggleUninterest,onRef:function(t){e.el=t},children:"不感兴趣"}),r=Object(l.b)(j.b,{className:"TopstoryItem-menuItem",onClick:this.props.authRequired((function(){})),children:Object(l.b)(k,{extra:{ua:n,isVip:a}})});return"feed_advert"===this.props.item.type?Object(l.c)(j.c,{className:"TopstoryItem-rightButton",toggler:Object(l.c)(O.c,{onRef:function(t){e.el=t},className:"TopstoryItem-advertButton",preset:"plain",children:["广告",Object(l.b)(ye.a,{center:!0})]}),children:[Object(l.b)(j.b,{className:"TopstoryItem-menuItem",onClick:this.handleToggleUninterest,children:"不感兴趣"}),Object(l.b)(j.b,{className:"TopstoryItem-menuItem",tag:"a",target:"_blank",href:"/promotion-intro",children:"知乎广告介绍"}),r]}):Object(l.c)(s.Fragment,{children:[o,r]})}}]),n}(s.Component);ke.propTypes={zaIgnoreId:p.a.number,getContainer:p.a.func};var Se=Object(b.connect)(null,{toggleUninterest:Ce.q})(ke),Re=n(1019),Ae=n(153),Ie=n(221),Te=n(1147),Ee=n(945),Ne=n(923),Be=n(1491),ze=n(1298),Le=n(51),Pe=Object.assign;var Me=function(e){return u.a.createElement(Le.a,Pe({width:"40",height:"40",viewBox:"0 0 40 40"},e),u.a.createElement("path",{d:"M20 12c6.904 0 12.5 5.596 12.5 12.5S26.904 37 20 37c-6.903 0-12.5-5.596-12.5-12.5S13.097 12 20 12zm0 16.826l3.222 2.061c.76.486 1.218.165 1.016-.72l-.886-3.892 2.867-2.572c.677-.608.494-1.165-.413-1.241l-3.734-.314-1.467-3.693c-.334-.841-.876-.841-1.21 0l-1.467 3.693-3.734.314c-.917.077-1.092.631-.413 1.24l2.867 2.573-.886 3.891c-.202.886.253 1.209 1.016.721L20 28.826zM29.525 3a1 1 0 01.79 1.612l-4.336 5.6a1 1 0 01-.79.388h-.446a1 1 0 01-.853-.479l-3.792-6.208A.6.6 0 0120.61 3h8.915zm-8.692 6.043a1 1 0 01-.83 1.557h-5.468a1 1 0 01-.81-.413l-4.06-5.6A1 1 0 0110.476 3h5.772a1 1 0 01.83.443l3.756 5.6z"}))},_e=function(e){return"FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"===e?{labelInfo:{foregroundColor:{alpha:1,group:"GYL02A"},backgroundColor:{alpha:.08,group:"GYL02A"},text:"专业",type:"recognition"},extra:{customIcon:Me,customIconClassName:"FeedSource-recognizeIcon"}}:null},De=n(2),Fe=n(1293),Ue=n(1002),Ve=n(1766),Ge=/({})/,qe={people:{Component:Ne.a,type:"user"},topic:{Component:Ue.a},column:{Component:Fe.a},roundtable:{Component:Ve.a}},He=function(e){var t=e.actors,n=e.template,a=t.slice(0,5);return Object(l.b)(Re.CJKSpace,{children:n.split(Ge).map((function(e){return"{}"===e?a.map((function(e,t){if(!qe[e.type])return Object(l.c)("span",{children:[e.title,t<a.length-1&&"、"]},e.id);var n=qe[e.type],o=n.Component,r=n.type,i=void 0===r?e.type:r,c=Object.assign(Object(De.a)({},i,e),"people"===e.type&&{noBadge:!0});return Object(l.c)("span",{children:[Object(l.b)(o,Object.assign(Object.assign({},c),{},{children:e.name||e.title})),t<a.length-1&&"、"]},e.id)})):e}))})},Ke=/{}/,We=["pin","answer","article"],Ze=["FEED_MEMBER_RECOGNIZED_PROFESSIONAL_ANSWER"],Qe=Object(Ie.a)((function(e){var t=e.feed,n=(e.currentUser,t.actionTextTpl),a=void 0===n?"":n,o=t.createdTime,r=t.actors,i=void 0===r?[]:r,c=t.verb,u=void 0===c?"":c,d=u.includes("MEMBER"),b=Object(s.useMemo)((function(){return d&&1e3*o<=Date.now()&&Object(Ae.toRelativeString)(o)}),[d,o]);if(Object(ze.b)(t)){var f=i[0],p=a.replace(Ke,"");return Object(l.b)("div",{className:"FeedSource",children:Object(l.c)("div",{className:"FeedSource-firstline",children:[Object(l.c)(Re.CJKSpace,{children:[Object(l.b)(Ne.a,{user:f,noHoverCard:!1,badgeProps:{css:{margin:"0 .3em"}},children:f.name}),p]}),b&&[Object(l.b)(Te.a,{},"bull"),b]]})})}return Object(l.c)("div",{className:"FeedSource",children:[Object(l.c)("div",{className:"FeedSource-firstline",children:[Object(l.b)(He,{actors:i,template:a}),Ze.includes(u)&&Object(l.b)(Be.a,Object.assign(Object.assign({},_e(u)),{},{className:"FeedSource-labelIcon"})),b&&[Object(l.b)(Te.a,{},"bull"),b]]}),t.target&&We.includes(t.target.type)&&Object(l.b)(Ee.a,{className:"FeedSource-byline",author:t.target.author,preset:"plain",extra:!1})]})})),Ye=n(1009),Je=n(1489),Xe=n(4),$e=n(142),et=n.n($e),tt=n(1230),nt=et()((function(e){return e.findIndex((function(e){return"annotation"===e.name}))}),(function(e){return e.map((function(e){return e.name})).join("-")})),at=Object(l.b)(tt.a,{annotationDetail:{showOuter:!0,reasonDescription:"品牌提问"}},"BrandQuestion");var ot=[function(e,t){var n=e.componentList,a=t.item.target,o=t.tabType;if(!Boolean("recommend"===o&&a.question&&"commercial"===a.question.questionType))return e;var r=nt(n);if(n[r].component){var i=Object(Xe.a)(n);return i[r]={name:"annotation",component:at},Object.assign(Object.assign({},e),{},{componentList:i})}return e}],rt=n(5),it=n(461);var ct=function(e){var t=e.node,n=e.data,a=void 0===n?{}:n;return Object(s.useEffect)((function(){if(t&&a){var e=Object(rt.camelizeKeys)(a).viewXTracks,n=void 0===e?[]:e;Object(it.g)(t,n)}}),[t,a]),null},lt=n(918),st=n(78),ut=n(1146),dt=n(193),bt=function(e){return null==e?void 0:e.forEach((function(e){return Object(st.e)(e,{})}))};function ft(e){var t=e.promotionExtra,n=e.children,a=Object(s.useRef)(null),o=Object(s.useMemo)((function(){return Object(ut.a)(t)}),[t]);Object(s.useEffect)((function(){o&&(bt(o.impression_tracks),Object(lt.onViewedOnce)(a.current,(function(){return bt(o.view_tracks)})))}),[o]);var r=Object(s.useCallback)((function(){o&&bt(o.click_tracks)}),[o]);return Object(l.c)("div",{ref:a,children:[Object(l.b)(dt.a,{children:Object(l.b)(ct,{data:o,node:a.current})}),"function"==typeof n?n(r):n]})}ft.propTypes={promotionExtra:p.a.string.isRequired,children:p.a.oneOfType([p.a.func,p.a.any]).isRequired};function pt(e){var t,n=e.item,a=e.tabType,o=e.isFollowTab,r=e.preset,i=e.hasAuthorBeforeContent,c=e.handleExpand,u=e.renderIgnoreButton,d=n.actionTextTpl,b=n.actors,f=n.target,p=n.promotionExtra,h=function(e){var t;if(2===(null===(t=e.attachment)||void 0===t?void 0:t.type)){var n=e.attachment,a=n.parentTitle,o=n.isComplete,r=n.parentContentToken,i=n.parentPlayCount,c=n.parentVoteupCount,l=n.splitStart,s={videoId:e.thumbnailExtraInfo.videoId,zvideoId:r,title:a,playCount:i,voteupCount:c,isComplete:o,startTime:l};return Object.assign(Object.assign({},e),{},{videoAnswerData:s})}return e}(f),m="recommend"===a,v=Object(l.b)(Ye.a,Object.assign(Object.assign({answer:h},i&&{formatContent:ze.a}),{},{action:o&&"{}赞同了回答"===d&&"voted",actor:null==b?void 0:b[0],preset:r,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,renderExtraOptions:u,onToggleExpand:c,zaInfos:fe.c,renderActionButtons:(t={tabType:a,item:n},function(e){var n=ot.reduce((function(e,n){return n(e,t)}),e);return Object(Je.b)(n)}),hideCommercialInviteLabel:!0,shouldAlwaysShowPlayer:m,isRecommend:m}));return p?Object(l.b)(ft,{promotionExtra:p,children:function(e){return Object(s.cloneElement)(v,{trackPromotionClick:e})}}):v}pt.propTypes={item:p.a.object.isRequired,tabType:p.a.oneOf(["recommend","follow"]),isFollowTab:p.a.bool,preset:p.a.string,hasAuthorBeforeContent:p.a.bool,handleExpand:p.a.func,renderIgnoreButton:p.a.func};var ht=n(1081);function mt(e){var t=e.item,n=e.isFollowTab,a=e.preset,o=e.hasAuthorBeforeContent,r=e.handleExpand,i=e.renderOptions,c=t.actionTextTpl,u=t.actors,d=t.target,b=t.promotionExtra,f=Object(l.b)(ht.a,Object.assign(Object.assign({article:d},o&&{formatContent:ze.a}),{},{action:n&&("{}赞了文章"===c||"{}赞同了文章"===c)&&"voted",actor:null==u?void 0:u[0],preset:a,lessExcerpt:!0,trackCardShow:!1,lastreadTouchable:!0,zaInfos:fe.c,onToggleExpand:r,renderOptions:i}));return b?Object(l.b)(ft,{promotionExtra:b,children:function(e){return Object(s.cloneElement)(f,{trackPromotionClick:e})}}):f}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}mt.propTypes={item:p.a.object.isRequired,isFollowTab:p.a.bool,preset:p.a.string,hasAuthorBeforeContent:p.a.bool,handleExpand:p.a.func,renderOptions:p.a.func};var gt={question:"question",answer:"answer",question_ask:"question_ask",article:"article",column:"column",collection:"collection",roundtable:"roundtable",live_course:"live_course",live:"live",ebook:"ebook",pin:"pin",eventcard:"eventcard",zvideo:"zvideo"},Ot=function(e){Object(r.a)(n,e);var t=vt(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={preset:"special-plain",hasAuthorBeforeContent:"recommend"===e.props.type,limitProps:{}},e.handleExpand=function(t){var n=e.props.type;e.setState({preset:"recommend"===n&&t?"plain":"special-plain",hasAuthorBeforeContent:"recommend"===n&&!t})},e.handleToggleUninterest=function(t){var n=e.props,a=n.item.id,o=n.toggleUninterest,r=n.type;return v.a.trackEvent(t,{id:fe.c.ignore,action:"Ignore",element:"Button",is_intent:!0}),o(a,r)},e.renderZVideoOptions=function(t,n){return[Object(l.c)(j.c,{toggler:Object(l.b)(O.c,{preset:"plain",className:"OptionsButton",icon:g.a,"aria-label":"更多"}),children:[Object(l.b)(j.b,{className:"ZVideoToolbar-menuItem",children:Object(l.b)(O.c,{preset:"plain",onClick:e.handleToggleUninterest,label:"不感兴趣"})}),Object(l.b)(j.b,{className:"TopstoryItem-menuItem",onClick:e.props.authRequired((function(){})),children:Object(l.b)(k,{extra:{ua:t,isVip:n}})})]},"options")]},e.renderItem=function(t,n){var a,o=e.props,r=o.ua,i=o.currentUser,c=((null==i?void 0:i.vipInfo)||{}).isVip,s=t.target,u=t.actor,d=t.actionTextTpl,b=e.state,f=b.preset,p=b.hasAuthorBeforeContent,h="follow"===n,m="recommend"===n,v=m?function(a){return Object(l.b)(Se,Object.assign({type:n,item:t,zaIgnoreId:fe.c.ignore,ua:r,isVip:c,authRequired:e.props.authRequired},a))}:void 0,g=v?ue(s,i,v):void 0;switch(s.type){case gt.question:return Object(l.b)(R.a,{preset:L.c.interactive,question:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:fe.c,renderOptions:g});case gt.question_ask:return Object(l.b)(je,{question:s,lastreadTouchable:!0,zaInfos:fe.c,renderOptions:g});case gt.answer:return Object(l.b)(pt,{item:t,tabType:n,isFollowTab:h,preset:f,hasAuthorBeforeContent:p,handleExpand:e.handleExpand,renderIgnoreButton:v});case gt.article:return Object(l.b)(mt,{item:t,isFollowTab:h,preset:f,hasAuthorBeforeContent:p,handleExpand:e.handleExpand,renderOptions:g});case gt.column:return Object(l.b)(A.a,{preset:L.c.interactive,column:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:fe.c,renderOptions:g});case gt.collection:return Object(l.b)(T.a,{preset:L.c.interactive,favlist:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:fe.c,renderOptions:g});case gt.roundtable:return Object(l.b)(E.a,{preset:L.c.interactive,roundtable:s,trackCardShow:!1,lastreadTouchable:!0,zaInfos:fe.c});case gt.live_course:return Object(l.b)(G,{liveCourse:s,preset:L.c.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:g,zaIds:fe.c});case gt.live:return Object(l.b)(N.a,{live:s,preset:L.c.interactive,trackCardShow:!1,lastreadTouchable:!0,renderOptions:g,zaIds:fe.c});case gt.ebook:return Object(l.b)(I.a,{ebook:s,preset:L.c.interactive,trackCardShow:!1,lastreadTouchable:!0});case gt.pin:return Object(l.b)(q.a,{action:"{}赞了想法"===d&&"voted",actor:u,pin:s,preset:"plain",trackCardShow:!1,lastreadTouchable:!0});case gt.zvideo:return 1===(null===(a=s.attachment)||void 0===a?void 0:a.type)?Object(l.b)(le,{target:s,preset:f,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(r,c)},lastreadTouchable:!0}):Object(l.b)(H.a,{zvideo:s,preset:f,onToggleExpand:e.handleExpand,renderOptions:function(){return e.renderZVideoOptions(r,c)},lastreadTouchable:!0,shouldAlwaysShowPlayer:m,showMetaAfterPlayer:m});case gt.eventcard:return Object(l.b)(ve,{trackCardShow:!1,eventcard:s,lastreadTouchable:!0,renderOptions:g,zaIds:fe.c});default:return null}},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.type,a=e.className;return t.target.isDelete?null:Object(l.c)("div",{className:m()("Feed",a),children:["follow"===n&&Object(l.b)(Qe,{feed:t}),this.renderItem(t,n)]})}}]),n}(s.PureComponent);Ot.propTypes={item:p.a.object.isRequired,type:p.a.oneOf(["recommend","follow"]),className:p.a.string};var jt=Object(d.compose)(S.a,Object(b.connect)((function(e){return{ua:e.env.userAgent}})),Object(D.b)((function(e){var t=e.item,n=t.id,a=t.attachedInfo,o=t.target,r=t.target,i=r.id,c=r.type,l=t.dataZaIndex;return{module:"FeedItem",index:String(void 0===l?0:l),isAd:!1,attachedInfoBytes:a,card:{card_type:"Feed",feed_id:n,has_image:Boolean(o.thumbnailExtraInfo&&"image"===o.thumbnailExtraInfo.type),has_video:Boolean(o.thumbnailExtraInfo&&"video"===o.thumbnailExtraInfo.type),content:Object.assign(Object.assign({type:de.bb[c]},Object(be.a)(c,i)),{},{video_id:o.thumbnailExtraInfo&&o.thumbnailExtraInfo.videoId})},view:{id:2743},trackCardShow:!0}})))(Ot)},1479:function(e,t,n){"use strict";var a=n(4),o=n(47),r=n(1),i=n(0),c=n.n(i),l=n(21),s=n(13),u=n.n(s),d=n(59),b=n.n(d),f=n(2837),p=n(26),h=n(72),m=n(40),v=n(433),g=n(2834),O=n(876),j=n(2838),y=n(432),C=n(12),w=Object.assign;function x(e){return c.a.createElement(C.a,w(w({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowSquarePath24","data-old-api":"Sync"},e),{className:"Zi Zi--Sync"+(e.className?" ".concat(e.className):"")}),c.a.createElement("path",{d:"M15 15.768l2.901 3.085a.773.773 0 00.108.114.66.66 0 00.995-.03v-.001a.953.953 0 00.023-.023l3-3.19a.766.766 0 00-.024-1.07.735.735 0 00-1.051.024l-1.713 1.821V8.1a4.35 4.35 0 00-4.35-4.35h-3.9a.75.75 0 000 1.5h3.9a2.85 2.85 0 012.85 2.85v8.404l-1.76-1.873a.66.66 0 00-1.003.022.852.852 0 00.024 1.115zM1.976 9.347a.66.66 0 001.002.022L4.74 7.496V15.9a4.35 4.35 0 004.35 4.35h3.9a.75.75 0 100-1.5h-3.9a2.85 2.85 0 01-2.85-2.85V7.502l1.713 1.821a.735.735 0 001.051.024.765.765 0 00.024-1.07l-3-3.19a.769.769 0 00-.022-.023l-.001-.001a.66.66 0 00-.995-.03.765.765 0 00-.108.114l-2.9 3.085a.852.852 0 00-.025 1.115z",fillRule:"evenodd",clipRule:"evenodd"}))}var k=n(1482),S=n(33),R=n(140),A=n(155),I=n(956),T=n(171),E=n(1080),N=n(132),B=n.n(N),z=n(1157),L=n(20);var P=n(487),M=n(446),_=n(31),D=n(1046),F=n(515),U=n(96);var V=function(e){var t=e.handleConfirm;return Object(r.c)(U.b,{title:"什么是「联合创作」",closeButton:null,children:[Object(r.b)("div",{children:"知乎鼓励视频作者引用图文作者的优质图文内容进行视频联合创作。视频审核成功后，平台会以私信的方式告知图文作者。若图文作者同意升级为联合创作，引用关系会变为联合创作关系。在原图文内容下会展示联合创作的视频，同时图文作者会在他的个人主页下发布视频。"}),Object(r.b)(U.a,{direction:"horizontal",children:Object(r.b)(S.c,{preset:"primary",color:"blue",onClick:t,children:"我知道了"})})]})},G=n(58),q=n(51),H=Object.assign;var K=function(e){return c.a.createElement(q.a,H({width:"12",height:"12",fill:"none",viewBox:"0 0 12 12"},e),c.a.createElement("rect",{width:"10",height:"10",x:"1",y:"1",stroke:"#D3D3D3",rx:"1.5",strokeWidth:"2"}))},W=Object.assign;var Z=function(e){return c.a.createElement(q.a,W({width:"12",height:"12",fill:"none",viewBox:"0 0 12 12"},e),c.a.createElement("path",{fill:"#06F",d:"M0 2a2 2 0 012-2h8a2 2 0 012 2v8a2 2 0 01-2 2H2a2 2 0 01-2-2V2zm5.136 6.608l.214.214 4.276-4.277-.707-.707-3.574 3.574-2.138-2.138-.707.707 2.632 2.632.004-.005z",fillRule:"evenodd",clipRule:"evenodd"}))};var Q=function(e){var t=e.handleCancel,n=e.handleAgree,a=Object(i.useState)(!1),c=Object(o.a)(a,2),l=c[0],s=c[1];return Object(r.c)(U.b,{title:"联合创作协议",closeButton:null,color:"GBK02A",children:[Object(r.b)(G.Box,{mb:"24px",children:"知乎鼓励视频作者引用图文作者的优质图文内容进行视频联合创作。视频审核成功后，平台会以私信的方式告知图文作者。若图文作者同意升级为联合创作，引用关系会变为联合创作关系。在原图文内容下会展示联合创作的视频，同时图文作者会在他的个人主页下发布视频。"}),Object(r.c)(G.Flex,{fontSize:"14px",lineHeight:"24px",alignItems:"center",children:[l?Object(r.b)(Z,{css:{paddingRight:"11px"},onClick:function(){return s(!1)}}):Object(r.b)(K,{css:{paddingRight:"11px"},onClick:function(){return s(!0)}}),"我已充分阅读并同意",Object(r.b)(G.Text,{display:"inline-block",color:"GBL01A",css:{cursor:"pointer"},onClick:function(){return window.open("/term/coopcreation","_blank")},children:"《联合创作用户协议》"})]}),Object(r.c)(U.a,{direction:"horizontal",children:[Object(r.b)(S.c,{onClick:t,children:"取消"}),Object(r.b)(S.c,{preset:"primary",color:"blue",onClick:n,disabled:!l,children:"同意"})]})]})},Y=n(259),J=n(45),X=Object.assign;var $=function(e){return c.a.createElement(q.a,X({width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},e),c.a.createElement("path",{fill:"#121212",d:"M2.333 2.667a1 1 0 100 2 1 1 0 000-2zm2.334 5a1 1 0 011-1h8a1 1 0 110 2h-8a1 1 0 01-1-1zm0 4a1 1 0 011-1h8a1 1 0 010 2h-8a1 1 0 01-1-1zm-3.334-4a1 1 0 112 0 1 1 0 01-2 0zm1 3a1 1 0 100 2 1 1 0 000-2zm2.334-7a1 1 0 011-1h8a1 1 0 110 2h-8a1 1 0 01-1-1z",fillRule:"evenodd",clipRule:"evenodd"}),c.a.createElement("mask",{id:"id-801532647-a",style:{maskType:"alpha"},width:"14",height:"11",x:"1",y:"2",maskUnits:"userSpaceOnUse"},c.a.createElement("path",{fill:"#fff",d:"M2.333 2.667a1 1 0 100 2 1 1 0 000-2zm2.334 5a1 1 0 011-1h8a1 1 0 110 2h-8a1 1 0 01-1-1zm0 4a1 1 0 011-1h8a1 1 0 010 2h-8a1 1 0 01-1-1zm-3.334-4a1 1 0 112 0 1 1 0 01-2 0zm1 3a1 1 0 100 2 1 1 0 000-2zm2.334-7a1 1 0 011-1h8a1 1 0 110 2h-8a1 1 0 01-1-1z",fillRule:"evenodd",clipRule:"evenodd"})),c.a.createElement("g",{mask:"url(#id-801532647-a)"},c.a.createElement("path",{fill:"#8590A6",d:"M0 0h16v16H0z"})))},ee="https://".concat(J.a.wwwHost,"/image-text-cite?").concat(new URLSearchParams({source:"upload-video"}));var te=function(e){var t=e.handleCancel,n=e.handleConfirm,a=e.handleChange,o=e.link;return Object(r.c)(G.Box,{px:"24px",mt:"68px",children:[Object(r.b)(R.a,{multiline:!0,placeholder:"粘贴你想引用的内容链接",rows:7,css:{height:"180px !important",width:"100%",margin:"12px 0",paddingTop:"12px"},onChange:a,value:o}),Object(r.c)(h.a,{extra:{link:{url:ee}},zaAction:"OpenUrl",zaText:"cite_image_text_go_list",zaType:"Button",as:S.c,preset:"plain",onClick:function(){return window.open(ee,"_blank")},children:[Object(r.b)($,{css:{marginRight:"8px",verticalAlign:"middle"}}),"可视化图文内容库"]}),Object(r.c)(U.a,{direction:"horizontal",children:[Object(r.b)(S.c,{onClick:t,children:"取消"}),Object(r.b)(h.a,{zaText:"cite_image_text_stick_click",zaType:"Button",as:S.c,preset:"primary",color:"blue",onClick:function(){return n(o)},disabled:!o,children:"确认"})]})]})},ne=n(434),ae=n(928),oe=n(93),re=n(30);var ie=function(e){var t=e.handleSelect,n=Object(l.useSelector)((function(e){return e.zvideos.collectData})),a=n.list,o=void 0===a?[]:a,c=n.isFetching,s=n.isEnd,u=void 0!==s&&s,d=n.next,b=Object(l.useDispatch)();return Object(i.useEffect)((function(){b(Object(M.e)())}),[b]),Object(r.b)(r.a,{children:c||o.length>0?Object(r.c)(ne.b,{onLoad:function(){b(Object(M.e)(d))},isLoading:c,isDrained:u,css:{flex:"1",overflow:"auto",marginTop:"68px"},getContainer:function(e){return e},placeholder:Object(r.b)(ne.a,{className:"List-item"}),children:[Object(r.b)(G.Text,{lineHeight:"25px",mb:"8px",px:"24px",color:"#1A1A1A",children:"以下为可引用的内容"}),o.map((function(e,n){var a=e.target,o=a.type,i=a.id,c=a.author,l=c.avatarUrl,s=c.name,u=c.description,d=a.title,b=a.question,f=(b=void 0===b?{}:b).title,p=a.excerpt,m="article"===o?d:f;return Object(r.b)(h.b,{content:{token:String(i),type:re.bb[o]},children:Object(r.c)(h.a,{view:{elementLocation:{card:{index:n}}},shouldTrackShow:!0,zaType:"Card",as:G.Box,onClick:function(){return t({type:o,id:i})},css:{borderRadius:"6px",padding:"8px 24px",boxShadow:"inset 0px -0.5px 0px #EBEBEB","&:hover":{background:"rgba(0, 102, 255, 0.08)",cursor:"pointer"}},children:[Object(r.c)(G.Flex,{fontSize:"14px",pb:"7px",alignItems:"center",children:[Object(r.b)(G.Image,{src:l,sx:{borderRadius:2},height:18,width:18,mr:"8px"}),Object(r.b)(G.Text,{color:"GBK03A",fontWeight:"600",children:s}),u&&Object(r.b)(G.Text,{color:"GBK04A",fontWeight:"600",children:"，"}),Object(r.b)(G.Text,{color:"GBK04A",css:Object.assign({flex:1},Object(oe.d)(1)),children:u})]}),Object(r.b)(G.Text,{color:"GBK02A",fontWeight:"600",fontSize:"15px",children:m}),Object(r.b)(G.Text,{fontSize:"14px",lineHeight:"25px",color:"#1A1A1A",children:p})]})},n)}))]}):Object(r.b)(ae.a.EI1,{image:"noCollection",content:"你还没有收藏可引用的内容"})})},ce=[{title:"粘贴链接",key:"sticky"},{title:"我的收藏夹",key:"collect"}];var le=function(e){var t=e.handleCancel,n=e.handleSelect,a=Object(i.useState)("sticky"),c=Object(o.a)(a,2),s=c[0],u=c[1],d=Object(i.useState)(""),b=Object(o.a)(d,2),f=b[0],p=b[1],h=Object(m.d)((function(e){p(e.target.value)})),v=Object(l.useDispatch)(),g=Object(m.d)((function(e){"sticky"===s?v(Object(M.c)(e)).then((function(e){var t=e.payload,n=t.canReference,a=t.contentType,o=t.contentId;return n?v(Object(M.i)({type:a,id:o})):Promise.reject()})).then((function(e){var t=e.payload;n(t)})).catch((function(){v(Object(_.h)("此内容不可引用","red"))})):"collect"===s&&v(Object(M.i)(e)).then((function(e){var t=e.payload;n(t)}))}));return Object(r.b)(U.b,{closeButton:null,css:{height:"416px",width:"536px"},size:"fullPage",children:Object(r.c)(G.Box,{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",children:["sticky"===s&&Object(r.b)(te,{link:f,handleChange:h,handleCancel:t,handleConfirm:g}),"collect"===s&&Object(r.b)(ie,{handleSelect:g}),Object(r.b)(Y.b,{css:{display:"flex",justifyContent:"center",borderBottom:"0",paddingTop:"10px",position:"absolute",width:"100%"},children:ce.map((function(e){var t=e.title,n=e.key;return Object(r.b)(Y.a,{onClick:function(){return u(n)},children:Object(r.b)(G.Box,{css:function(e){return{color:s===n?e.colors.GBK02A:e.colors.GBL05A,fontWeight:600,fontSize:"15px",lineHeight:"30px",position:"relative","&:hover":{cursor:"pointer"},"&::after":s===n?{content:"''",position:"absolute",top:"46px",left:"50%",transform:"translateX(-50%)",height:"4px",width:"36px",background:e.colors.GBL01A,borderRadius:"29px"}:{}}},children:t})},n)}))})]})})},se=n(1768),ue=n(898),de=n(1423),be=n(227);function fe(e){var t=e.club,n=t.id,a=t.name,o=t.description,i=t.avatar,c=t.isJoined,l=t.joinType,s=t.postCount,u=t.allowSync,d=e.selected,b=e.onSelect,f=e.handleJoinButtonClick;return Object(r.c)("div",{className:"VideoSyncToClubModalItem",children:[Object(r.c)(G.Flex,{css:{width:"calc(100% - ".concat(c?20:92,"px)")},children:[Object(r.b)("img",{src:i,className:"VideoSyncToClubModalItem-avatar",alt:""}),Object(r.c)("div",{className:"VideoSyncToClubModalItem-info",role:"button",tabIndex:0,onClick:b,children:[Object(r.b)("div",{className:"VideoSyncToClubModalItem-title Highlight",dangerouslySetInnerHTML:{__html:a}}),Object(r.b)("div",{className:"VideoSyncToClubModalItem-description Highlight",dangerouslySetInnerHTML:{__html:o}}),Object(r.c)("div",{className:"VideoSyncToClubModalItem-data",children:[s,"条内容"]})]})]}),c?Object(r.b)(I.a,{checked:d,onChange:b,size:16,disabled:!u}):Object(r.b)(S.c,{preset:"secondary",color:"blue",onClick:function(){return f(n,l)},children:"all"===l?"加入圈子":"申请加入"})]})}var pe=function(e){var t=e.shown,n=e.onClose,a=e.selectedClub,c=e.onSelectClub,s=Object(i.useState)(a),u=Object(o.a)(s,2),d=u[0],b=u[1],f=Object(i.useState)(""),p=Object(o.a)(f,2),h=p[0],m=p[1],v=Object(i.useState)(""),g=Object(o.a)(v,2),O=g[0],j=g[1],C=Object(l.useSelector)((function(e){return e.club.explore.candidateSyncClubs})),w=Object(l.useSelector)((function(e){var t;return(null===(t=e.search)||void 0===t?void 0:t.clubentityByQuery[O])||{isFetching:!1,isDrained:!1,ids:[]}})),x=w.isFetching,k=w.isDrained,A=w.ids,I=Object(l.useSelector)((function(e){return e.entities})),E=I.searchClub,N={data:A.filter((function(e){return Boolean(e)})).map((function(e){var t=E[e]||{},n=t.object;return Object.assign(Object.assign({},t),{},{object:(I.clubs||{})[n]})})),isLoading:x,paging:{isEnd:k}},B=Object(l.useDispatch)();Object(i.useEffect)((function(){a||b(null)}),[a]);var z=Object(i.useRef)(null),L=Object(i.useCallback)((function(){return z.current.parentElement}),[z]),P=function(){null!=z&&z.current&&(z.current.parentElement.scrollTop=0)},M=Object(i.useCallback)((function(e){var t=e.target.value;m(t),O&&!t&&(j(""),P())}),[O]),_=Object(l.useSelector)((function(e){var t;return null===(t=e.search)||void 0===t?void 0:t.nextOffset.clubentityByQuery})),D=Object(i.useCallback)((function(e){B(Object(be.o)(Object.assign({type:"clubentity",query:e},O===e?_:{limit:10,offset:0})))}),[_,O,B]),V=Object(i.useCallback)((function(e){P(),O!==e&&(D(e),j(e))}),[O,D]),q=Object(i.useCallback)((function(e){13===e.keyCode&&h.trim()&&(document.activeElement.blur(),V(h.trim()))}),[h,V]),H=Object(i.useCallback)((function(){O?D(h):B(Object(F.b)())}),[B,h,O,D]),K=O?N:C,W=K.data,Z=void 0===W?[]:W,Q=K.paging,Y=(Q=void 0===Q?{}:Q).isEnd,J=K.isLoading,X=function(e,t){"all"===t?B(Object(de.a)(e)).then((function(){B(Object(F.b)(!0))})):window.open("https://www.zhihu.com/club/".concat(e),"_blank")},$=Object(r.c)("div",{className:"VideoSyncToClubModal-Empty",children:[Object(r.b)("img",{alt:"",className:"VideoSyncToClubModal-Empty--Image",src:"https://pic4.zhimg.com/80/v2-111b363c733ca84c2fd2044eca77503b_hd.png"}),Object(r.b)("div",{className:"VideoSyncToClubModal-Empty--Text",children:"暂时没有找到「".concat(O,"」的相关圈子")})]}),ee=Object(r.b)(ne.b,{getContainer:L,onLoad:H,isLoading:Boolean(J),placeholder:Object(r.b)(ne.a,{className:"List-item"}),isDrained:Boolean(Y),className:"VideoSyncToClubModal-list",children:Object(r.c)(G.Box,{height:"100%",ref:z,children:[Z.map((function(e){var t=O?Object.assign(Object.assign({},e.object),{},{id:e.object.id,avatar:e.object.avatarUrl,postCount:e.object.clubPostCount}):e;return Object(r.b)(fe,{club:t,selected:(null==d?void 0:d.id)===t.id,onSelect:function(){t.isJoined&&(t.allowSync?b((null==d?void 0:d.id)===t.id?null:t):T.a.alert("无法同步到取消关联主站的圈子。"))},handleJoinButtonClick:X},t.id)})),Y&&Object(r.b)("div",{className:"VideoSyncToClubModal-list--notMore",children:"没有更多内容"})]})});return Object(r.b)(U.b,{title:"选择圈子",size:"large",onClose:n,maskClosable:!1,children:t&&Object(r.c)(r.a,{children:[Object(r.b)(R.a,{className:"VideoSyncToClubModal-search",value:h,placeholder:"搜索圈子",before:Object(r.b)(ue.a,{size:16,className:"VideoSyncToClubModal-search--icon"}),after:Boolean(h)&&Object(r.b)(y.a,{size:12,onClick:function(){m(""),j(""),P()},className:"VideoSyncToClubModal-search--icon"}),onChange:M,onKeyUp:q}),O&&O===N.preSearchText&&0===Z.length?$:ee,Object(r.c)(U.a,{direction:"horizontal",children:[Object(r.b)(S.c,{onClick:n,children:"返回"}),Object(r.b)(S.c,{preset:"primary",color:"blue",onClick:function(){c(d)},disabled:!d,children:"确定"})]})]})})},he=n(311),me=n(458),ve=n(1508),ge=n(1200),Oe=function(){return!0},je=n(1753),ye=function(e){var t=e.defaultVideo,a=e.title,c=e.description,s=e.active,u=t.id,d=Object(l.useDispatch)(),b=Object(i.useRef)(),f=Object(i.useState)(0),p=Object(o.a)(f,2),v=p[0],g=p[1],O=Object(ge.a)("zvideo_contribution_form:should_hide_tooltip"),j=Object(o.a)(O,2),y=j[0],C=j[1],w=Object(i.useState)(!1),x=Object(o.a)(w,2),k=x[0],S=x[1],R=Object(i.useState)(!1),A=Object(o.a)(R,2),I=A[0],T=A[1],E=Object(me.o)(u).answer,N=(E=void 0===E?{}:E).canContribute,B=void 0!==N&&N,z=Object(me.p)(u),L=Object(m.e)((function(){return n.e(46).then(n.bind(null,2903))})),P=Oe(),M=Object(i.useCallback)((function(){a?(d(Object(me.l)(null)),S(!0),T(!1)):d(Object(_.h)("输入标题后才可以投稿哦"))}),[a,d]),D=Object(i.useCallback)((function(){S(!0),T(!0)}),[]);return Object(i.useEffect)((function(){d(Object(me.h)(u,"edit"))}),[d,u]),Object(i.useEffect)((function(){var e,n;t.file&&t.file instanceof File?(n=t.file,new Promise((function(e,t){try{var a=document.createElement("video");a.preload="metadata",a.onloadedmetadata=function(){URL.revokeObjectURL(a.src),e(Math.floor(1e3*a.duration))},a.onerror=t,a.src=URL.createObjectURL(n)}catch(e){t(e)}}))).then((function(e){d(Object(me.g)({zvideoId:u,duration:e})),g(e)})):(null!==(e=t.video)&&void 0!==e&&e.duration&&g(parseInt(1e3*t.video.duration)),d(Object(me.g)({zvideoId:u})))}),[t,d,u]),Object(m.l)((function(){return C(!0)}),!y&&B&&s?5e3:null),B||z.length?Object(r.c)(h.b,{block:"Contribution",children:[Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)(h.e,{ref:b,zaType:"Block",className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--top",children:"投稿问题"}),Object(r.b)(he.a,{placement:"top-left",isOpen:s&&!y,target:b.current,css:{".Popover-arrow":{transform:"translate(-35px, 0)"}},children:"投稿到问题，让更多人看到你的视频"}),Object(r.c)("div",{children:[Object(r.b)("div",{css:function(e){return{color:e.colors.GBK06A,fontSize:13,marginBottom:8,marginTop:4,lineHeight:"15px"}},children:"投稿到问题可以获得更多曝光哦～"}),Object(r.b)(ve.a,{zvideoId:u,showCreateButton:!0,onAdd:M,onSelect:D})]})]}),Boolean(L)&&!P?Object(r.b)(L,{show:k,defaultVideo:t,title:a,description:c,duration:v,closeAfterEdit:I,onClose:function(){return S(!1)}}):Object(r.b)(je.a,{show:k,defaultVideo:t,title:a,description:c,duration:v,closeAfterEdit:I,onClose:function(){return S(!1)},isProduce:!0})]}):null},Ce=[{value:"original",label:"原创"},{value:"reprint",label:"转载"}],we="https://pic2.zhimg.com/v2-feb96045745dac939aa2a900c6d6845d.jpg",xe=[{name:"answer",id:1},{name:"article",id:2}];var ke,Se=(ke=xe,function(e){var t=e.citeId,n=e.citeType;return{reference:{referenceType:n&&ke.find((function(e){return e.name===n})).id||0,referenceContentToken:t?String(t):"0"}}}),Re=function(e){return function(t){return t?e.find((function(e){return e.id===t})).name:null}}(xe),Ae=n(961),Ie=n(294);var Te=function(e){var t=e.title,n=e.description,a=e.imageUrl,o=e.duration,i=Object(Ie.a)(["avatarUrl","name"]),c=i.avatarUrl,l=i.name;return Object(r.c)(G.Box,{width:"278px",height:"535px",pl:"20px",sx:{position:"absolute",right:0,top:"26px",borderLeft:"1px solid",borderColor:"GBK09A"},children:[Object(r.b)(G.Text,{fontSize:"15px",fontWeight:"bold",color:"GBK02A",children:"移动端预览效果"}),Object(r.c)(G.Box,{width:"236px",height:"494px",mt:"26px",sx:{backgroundImage:'url("https://pic3.zhimg.com/v2-6b6281a5e31bfc1385d8d4462f31ea5c.png")',backgroundSize:"100% 100%",fontSize:"12px",position:"relative"},children:[Object(r.c)(G.Box,{width:"222px",height:"281px",bg:"GBK99A",sx:{position:"absolute",left:"7px",top:"158px",overflow:"hidden"},children:[Object(r.c)(G.Flex,{pt:"4px",mx:"9px",alignItems:"center",bg:"GBK99A",children:[Object(r.b)(G.Box,{width:"19px",height:"19px",mr:"9px",bg:"GBK10A",sx:{borderRadius:"50%",overflow:"hidden"},children:c&&Object(r.b)(G.Image,{src:c,width:"100%",height:"100%"})}),Object(r.c)(G.Box,{children:[Object(r.b)(G.Text,{width:l?"150%":"24px",height:"9px",bg:l?"transparent":"GBK10A",mb:l?"2px":"0px",sx:{borderRadius:"4px",color:"GBK02A",lineHeight:"9px",transformOrigin:"0 center",transform:"scale(0.67)"},children:l}),Object(r.b)(G.Text,{width:c?"170%":"113px",height:"9px",bg:c?"transparent":"GBK10A",sx:{borderRadius:"4px",color:"GBK06A",lineHeight:"9px",transformOrigin:"0 center",transform:"scale(0.58)"},children:c&&"1 分钟前・发布了视频"})]})]}),Object(r.b)(G.Box,{width:t?"auto":"175px",height:t?"auto":"13px",bg:t?"transparent":"GBK10A",m:"4px 9px",sx:Object.assign({borderRadius:"4px",fontWeight:"bold",zoom:t?.83:1},Object(oe.d)(2)),children:t}),Object(r.b)(G.Box,{m:"0 9px 5px",sx:Object.assign({color:"GBK03A",zoom:n?.67:1},Object(oe.d)(3)),children:n||Object(r.c)(r.a,{children:[Object(r.b)(G.Text,{width:"199px",height:"9px",mb:"3px",bg:"GBK10A",sx:{borderRadius:"4px"}}),Object(r.b)(G.Text,{width:"74px",height:"9px",bg:"GBK10A",sx:{borderRadius:"4px"}})]})}),Object(r.c)(G.Box,{height:"115px",bg:a?"GBK02B":"GBK10A",mx:"9px",sx:{borderRadius:"4px",overflow:"hidden",position:"relative"},children:[a&&Object(r.b)(G.Image,{src:a,width:"100%",height:"100%",sx:{objectFit:"contain"}}),Object(r.b)(Ae.a,{css:{width:"34px",height:"34px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),Object(r.b)(G.Text,{width:o?"auto":"23px",bg:o?"transparent":"GBK09B",height:o?"auto":"6px",sx:{position:"absolute",bottom:"7px",right:"7px",zoom:o?.58:1,color:"GBK99A",borderRadius:"4px"},children:o})]}),Object(r.b)(G.Image,{src:"https://pic1.zhimg.com/v2-add740deb6bfded14b013d4b115aef7f.png",width:"100%"}),Object(r.b)(G.Image,{src:"https://pic3.zhimg.com/v2-c98b0c106781ed7b3e12c03c6c5b3c86.png",width:"100%"})]}),Object(r.b)(G.Box,{width:"222px",height:"56px",sx:{position:"absolute",left:"7px",bottom:"6px",backgroundImage:'url("https://pic2.zhimg.com/v2-c80434267f8c3e22ca3b5cd109e4b5d4.png")',backgroundSize:"100% 100%"}})]})]})},Ee=n(1771),Ne=n(342);t.a=function(e){var t,c,s,d,C,w,N,U,G,q,H,K,W,Z,Y,J,X,$,ee,te,ne=e.className,ae=e.defaultVideo,oe=e.defaultCampaignId,ie=e.status,ce=e.checkFormValid,ue=e.onRemove,de=e.onSubmit,be=e.isEditing,fe=e.shouldShowScheduledPublish,he=e.active,me=e.citeType,ve=e.citeId,ge=e.showMobilePreview,Oe=void 0!==ge&&ge,je=Object(i.useState)(Object(Ne.e)(null==ae?void 0:ae.id)||(null==ae||null===(t=ae.chapters)||void 0===t?void 0:t.map((function(e){return Object.assign(Object.assign({},e),{},{start_time:e.startTime})})))||[]),xe=Object(o.a)(je,2),ke=xe[0],Ae=xe[1],Ie=Object(i.useState)(null),Be=Object(o.a)(Ie,2),ze=Be[0],Le=Be[1],Pe=Object(i.useState)(!1),Me=Object(o.a)(Pe,2),_e=Me[0],De=Me[1],Fe=Object(i.useState)(!1),Ue=Object(o.a)(Fe,2),Ve=Ue[0],Ge=Ue[1],qe=Re(null==ae||null===(c=ae.reference)||void 0===c?void 0:c.referenceType),He=Object(i.useState)({citeType:qe||me||null,citeId:(null==ae||null===(s=ae.reference)||void 0===s?void 0:s.referenceContentToken)||ve||null}),Ke=Object(o.a)(He,2),We=Ke[0],Ze=Ke[1],Qe=Object(i.useState)(!1),Ye=Object(o.a)(Qe,2),Je=Ye[0],Xe=Ye[1],$e=Object(i.useState)(!1),et=Object(o.a)($e,2),tt=et[0],nt=et[1],at=Object(i.useState)(!1),ot=Object(o.a)(at,2),rt=ot[0],it=ot[1],ct=f.a(new Date,30),lt=Object(i.useState)(!1),st=Object(o.a)(lt,2),ut=st[0],dt=st[1],bt=Object(i.useState)(ct),ft=Object(o.a)(bt,2),pt=ft[0],ht=ft[1],mt=(te=function(e){return e.zvideos.tagoreCategory},Object(l.useSelector)(te,l.shallowEqual)),vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(l.useDispatch)(),o=Array.isArray(e),r=o?e:[e];return Object(i.useMemo)((function(){return o?r.map((function(e){return Object(L.bindActionCreators)(e,n)})):Object(L.bindActionCreators)(r[0],n)}),[n].concat(Object(a.a)(r),Object(a.a)(t)))}([M.g,M.z,M.q,M.r,M.o,M.l,_.h,M.t,M.i,M.f,M.h,M.a]),gt=Object(o.a)(vt,12),Ot=gt[0],jt=gt[1],yt=gt[2],Ct=gt[3],wt=gt[4],xt=gt[5],kt=gt[6],St=gt[7],Rt=gt[8],At=gt[9],It=gt[10],Tt=gt[11],Et=Object(l.useSelector)((function(e){return e.zvideos.videoSource})),Nt=Object(i.useState)((null==ae?void 0:ae.title)||""),Bt=Object(o.a)(Nt,2),zt=Bt[0],Lt=Bt[1],Pt=Object(i.useState)(null!==(d=null==ae?void 0:ae.description)&&void 0!==d?d:""),Mt=Object(o.a)(Pt,2),_t=Mt[0],Dt=Mt[1],Ft=Object(i.useState)(null!==(C=null==ae||null===(w=ae.category)||void 0===w||null===(N=w.firstLevel)||void 0===N?void 0:N.id)&&void 0!==C&&C),Ut=Object(o.a)(Ft,2),Vt=Ut[0],Gt=Ut[1],qt=mt.find((function(e){return e.data.id===Vt})),Ht=Object(i.useState)(null!==(U=null==ae||null===(G=ae.category)||void 0===G||null===(q=G.secondLevel)||void 0===q?void 0:q.id)&&void 0!==U&&U),Kt=Object(o.a)(Ht,2),Wt=Kt[0],Zt=Kt[1];Object(i.useEffect)((function(){At().then((function(e){var t=e.payload.canRef,n=void 0!==t&&t;return De(n),n?It():(Ze({citeId:null,citeType:null}),Promise.reject())})).then((function(e){var t=e.payload.agreeState;Ge(t)})).catch(b.a)}),[]);var Qt=function(e){var t=e.author,n=t.avatarUrl,a=t.name,o=e.type,r={headPhoto:n,name:a};if("article"===o){var i=e.imageUrl,c=e.title;r.contentPhoto=i,r.title=c}if("answer"===o){var l=e.question.title,s=e.thumbnailInfo,u=void 0===s?{}:s,d=B()(u,"thumbnails[0].url",null);d&&(r.contentPhoto=d),r.title=l}return r};Object(i.useEffect)((function(){var e=We.citeId,t=We.citeType;e&&t&&Rt({type:t,id:e}).then((function(e){var t=e.payload||{};Le(Qt(t))}))}),[]),Object(i.useEffect)((function(){mt.length||yt()}),[mt,yt]);var Yt=Object(i.useState)(Boolean(null==ae||null===(H=ae.category)||void 0===H||null===(K=H.firstLevel)||void 0===K?void 0:K.id)||Boolean(null==ae||null===(W=ae.category)||void 0===W||null===(Z=W.secondLevel)||void 0===Z?void 0:Z.id)),Jt=Object(o.a)(Yt,2),Xt=Jt[0],$t=Jt[1],en=Object(m.c)((function(e){Ct(e).then((function(e){var t=e.payload.data[0];t&&(Gt(t.firstLevel.id),Zt(t.secondLevel.id))}))}),300);Object(i.useEffect)((function(){Xt||en({title:zt,type:"zvideo",content:_t})}),[zt,_t,Xt,en]);var tn=Object(i.useState)(null!==(Y=null==ae?void 0:ae.topics)&&void 0!==Y?Y:[]),nn=Object(o.a)(tn,2),an=nn[0],on=nn[1],rn=Object(i.useState)(Boolean(null==ae||null===(J=ae.topics)||void 0===J?void 0:J.length)),cn=Object(o.a)(rn,2),ln=cn[0],sn=cn[1],un=Object(i.useState)(!1),dn=Object(o.a)(un,2),bn=dn[0],fn=dn[1],pn=Object(m.c)((function(e){wt(e).then((function(e){var t=e.payload.data;t.length&&on(t)}))}),300);Object(i.useEffect)((function(){!ln&&Vt&&Wt&&pn({type:"zvideo",text:zt,firstLevelCategoryId:Vt,secondLevelCategoryId:Wt,limit:6})}),[zt,Vt,Wt,ln,pn]);var hn=Object(i.useState)(null==ae?void 0:ae.imageUrl),mn=Object(o.a)(hn,2),vn=mn[0],gn=mn[1],On=Object(i.useCallback)((function(e){return gn(e)}),[gn]);Object(i.useEffect)((function(){(!vn&&null!=ae&&ae.imageUrl||vn===we&&null!=ae&&ae.imageUrl&&ae.imageUrl!==we)&&gn(ae.imageUrl)}),[vn,ae]);var jn=Object(i.useState)(null==ae?void 0:ae.zvideoType),yn=Object(o.a)(jn,2),Cn=yn[0],wn=yn[1],xn="published"===(null==ae?void 0:ae.zvideoState);Object(i.useEffect)((function(){if(Et.isLoaded&&ae.queryVideoId){var e;if(zt||Lt(Et.title||""),!an.length)on(null!==(e=Et.topics)&&void 0!==e?e:[]);Cn||wn(Et.zvideoType)}}),[Et,zt,an,Cn,ae]);var kn=Object(i.useState)(null==ae?void 0:ae.campaign),Sn=Object(o.a)(kn,2),Rn=Sn[0],An=Sn[1],In=Object(i.useState)(!1),Tn=Object(o.a)(In,2),En=Tn[0],Nn=Tn[1],Bn=Object(i.useState)(!1),zn=Object(o.a)(Bn,2),Ln=zn[0],Pn=zn[1],Mn=Object(i.useState)([]),_n=Object(o.a)(Mn,2),Dn=_n[0],Fn=_n[1],Un=Boolean(null==Dn?void 0:Dn.length)&&!Rn,Vn="published"===(null==ae?void 0:ae.zvideoState);Object(i.useEffect)((function(){xt().then((function(e){var t=e.payload;Fn(t.data)}))}),[xt]),Object(i.useEffect)((function(){var e=null==Dn?void 0:Dn.find((function(e){return e.id===oe}));!e||En||Rn||An(e)}),[oe,Dn,En,Rn]);var Gn=Object(m.c)((function(e,t){jt(e,t)}),300);Object(i.useEffect)((function(){ae.id&&Gn(ae.id,Object.assign(Object.assign({title:zt,description:_t,category:{firstLevel:Vt||void 0,secondLevel:Wt||void 0},zvideoType:Cn,topicIds:an.map((function(e){return e.id||e.urlToken})),campaignId:(null==Rn?void 0:Rn.id)||"0",imageUrl:vn,isVisible:!0},Se(We)),{},{chapters:ke}))}),[ae.id,zt,_t,Vt,Wt,Cn,an,Rn,vn,Gn,We,ke]);var qn=Object(m.c)((function(e){return Ot(e).then((function(e){var t,n,a,o,r,i,c,l,s=e.payload;s&&(!zt&&Lt(s.title),!vn&&s.imageUrl&&gn(s.imageUrl),!_t&&Dt(null!==(t=s.description)&&void 0!==t?t:""),!Vt&&Gt(null!==(n=null===(a=s.category)||void 0===a||null===(o=a.firstLevel)||void 0===o?void 0:o.id)&&void 0!==n&&n),!Wt&&Zt(null!==(r=null===(i=s.category)||void 0===i||null===(c=i.secondLevel)||void 0===c?void 0:c.id)&&void 0!==r&&r),(null==an||!an.length)&&on(null!==(l=s.topics)&&void 0!==l?l:[]),!Cn&&wn(s.zvideoType),!Rn&&An(s.campaign))}))}),300);Object(i.useEffect)((function(){ae.id&&qn(ae.id)}),[ae,qn]);var Hn=Object(l.useDispatch)(),Kn=Object(l.useSelector)((function(e){return e.club.explore.joinedClubs})),Wn=(null==Kn||null===(X=Kn.data)||void 0===X?void 0:X.length)>0,Zn=Object(i.useState)(!1),Qn=Object(o.a)(Zn,2),Yn=Qn[0],Jn=Qn[1],Xn=Object(i.useState)(!1),$n=Object(o.a)(Xn,2),ea=$n[0],ta=$n[1],na=Object(i.useState)(null),aa=Object(o.a)(na,2),oa=aa[0],ra=aa[1];Object(i.useEffect)((function(){Kn||Hn(Object(F.c)())}),[Hn,Kn]),Object(i.useEffect)((function(){be&&ae.id&&St(ae.id).then((function(e){null!=e&&e.payload&&(ra(e.payload),Jn(!0))}))}),[be,ae,St]);var ia=Boolean(ae.id),ca=["uploading","uploadError"].includes(ie),la=Object(m.d)((function(){Tt().then((function(e){var t=e.payload.success;void 0!==t&&t&&(nt(!1),it(!0),Ge(!0))}))})),sa=Object(m.d)((function(e){Ae(Object(a.a)(e))})),ua=Object(m.e)((function(){return n.e(33).then(n.bind(null,2882))}));return Object(r.b)(h.b,{block:"VideoUploadForm",content:{type:"Zvideo",id:ae.id},children:Object(r.c)(h.e,{zaType:"Block",className:u()("VideoUploadForm",ne),children:[Object(r.c)("div",{className:"VideoUploadForm-content",children:[Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required VideoUploadForm-itemTitle--topBelow",children:"封面"}),Object(r.c)("div",{className:"VideoUploadForm-imageContainer",children:[!ca&&Object(r.b)("img",{className:"VideoUploadForm-image",src:vn||we,alt:""}),ca&&Object(r.b)("div",{className:"VideoUploadForm-uploadStatus",children:"uploading"===ie?"视频上传中":"视频上传失败"}),Object(r.b)("div",{className:"VideoUploadForm-duration",children:Object(D.a)(null===($=ae.video)||void 0===$?void 0:$.duration)}),Object(r.b)(k.a,{triggerClassName:"VideoUploadForm-imageEditButton",useCoverCrop:!1,originVideo:ae.file,onVideoPosterChange:On,zvideoId:ae.id,id:ae.videoId})]})]}),Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"标题"}),Object(r.b)(R.a,{className:"VideoUploadForm-input",value:zt,onChange:function(e){Lt(e.target.value)},placeholder:"输入视频标题",large:!0,after:Object(r.b)("div",{className:"VideoUploadForm-itemLimit",children:"".concat(zt.length,"/").concat(40)})}),zt.length<5&&Object(r.c)("div",{className:"VideoUploadForm-itemError",children:["最少输入 ",5," 个字"]}),zt.length>40&&Object(r.c)("div",{className:"VideoUploadForm-itemError",children:["已超出 ",zt.length-40," 个字"]})]}),Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--topBelow",children:"简介"}),Object(r.b)(R.a,{className:"VideoUploadForm-input VideoUploadForm-input--multiline",value:_t,onChange:function(e){Dt(e.target.value)},placeholder:"填写视频简介，让更多人找到你的视频",multiline:!0,large:!0,rows:4,after:Object(r.b)("div",{className:"VideoUploadForm-itemLimit VideoUploadForm-itemLimit--multiline",children:"".concat(_t.length,"/").concat(300)})}),_t.length>300&&Object(r.c)("div",{className:"VideoUploadForm-itemError VideoUploadForm-itemError--multiline",children:["已超出 ",_t.length-300," 个字"]})]}),ia&&Object(r.b)(ye,{defaultVideo:ae,title:zt,description:_t,active:he}),Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"所属领域"}),Object(r.c)("div",{className:"VideoUploadForm-selectContainer",children:[Object(r.c)(A.b,{className:"VideoUploadForm-select",listClassName:"VideoUploadForm-selectList",value:Vt,onChange:function(e){Gt(e),Zt(!1),$t(!0)},children:[!qt&&Object(r.b)(A.a,{value:!1,text:"选择领域"},"all"),mt.map((function(e){var t=e.data;return Object(r.b)(A.a,{value:t.id,text:t.name},t.id)}))]}),qt&&Object(r.c)(A.b,{className:"VideoUploadForm-select",listClassName:"VideoUploadForm-selectList",value:Wt,onChange:function(e){Zt(e),$t(!0)},children:[Object(r.b)(A.a,{value:!1,text:"选择领域"},"all"),qt.children.map((function(e){var t=e.data;return Object(r.b)(A.a,{value:t.id,text:t.name},t.id)}))]})]})]}),Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required VideoUploadForm-itemTitle--topic",children:"绑定话题"}),Object(r.b)(P.a,{className:"VideoUploadForm-topicInput",value:an,onChange:function(e){on(e),sn(!0)},max:6,actived:bn,onToggleActived:function(){return fn(!bn)}})]}),Object(r.b)(Ee.b,{zvideo_id:ae.id,defaultVideo:ae,children:Object(r.b)(Ee.a.Consumer,{children:function(e){return e.canUse&&ua&&Object(r.b)(ua,{onSubmit:sa,knowledges:ke,defaultVideo:ae})}})}),Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"视频类型"}),Object(r.c)("div",{className:"VideoUploadForm-typeContainer",children:[Object(r.b)("div",{className:u()("VideoUploadForm-radioContainer",{"VideoUploadForm-radioContainer--disabled":xn}),children:Ce.map((function(e){return Object(r.c)("label",{className:"VideoUploadForm-radioLabel",children:[Object(r.b)(I.a,{className:"VideoUploadForm-radio",size:16,checked:e.value===Cn,onChange:function(){wn(e.value)},disabled:xn}),e.label]},e.value)}))}),"reprint"===Cn&&Object(r.b)("div",{className:"VideoUploadForm-typeHint",children:"请确保转载视频符合版权使用规范，如被举报侵权，视频将会被删除"})]})]}),_e&&Object(r.c)("div",{className:"VideoUploadForm-item",css:{alignItems:"flex-start"},children:[Object(r.c)("div",{className:"VideoUploadForm-itemTitle",children:[Object(r.b)("span",{css:{marginRight:"4px",verticalAlign:"middle"},children:"联合创作"}),Object(r.b)(g.a,{size:16,fill:"#8590A6",css:{verticalAlign:"middle",cursor:"pointer"},onClick:function(){return Xe(!0)}})]}),ze?Object(r.b)(h.b,{content:{token:String(We.citeId),type:re.bb[We.citeType]},children:Object(r.c)(h.e,{zaType:"Card",view:{elementLocation:{card:{index:0}}},children:[Object(r.b)("div",{css:function(e){return{color:e.colors.GBL05A,fontSize:"14px",lineHeight:"14px",marginBottom:"13px",textAlign:"right"}},children:Object(r.b)(S.c,{onClick:function(){"published"!==(null==ae?void 0:ae.zvideoState)?(Le(null),Ze({citeId:null,citeType:null})):kt("视频已发布，无法删除引用内容","red")},css:{padding:"0",lineHeight:"1",border:"none"},children:"删除"})}),Object(r.c)("div",{css:function(e){return{width:"400px",padding:"12px 12px 12px 15px",background:e.colors.GBK10C,borderRadius:"3px",display:"flex",justifyContent:"space-between"}},children:[Object(r.c)("div",{children:[Object(r.b)("div",{css:function(e){return{color:e.colors.GBK03A,fontSize:"14px",lineHeight:"18px",marginBottom:"13px",fontWeight:"500"}},children:ze.title}),Object(r.c)("div",{children:[Object(r.b)("img",{css:{width:"16px",height:"16px",borderRadius:"50%",verticalAlign:"middle",objectFit:"cover"},src:ze.headPhoto,alt:""}),Object(r.b)("span",{css:function(e){return{fontSize:"13px",lineHeight:"18px",color:e.colors.GBK03A,marginLeft:"8px",verticalAlign:"middle"}},children:ze.name})]})]}),ze.contentPhoto&&Object(r.b)("img",{css:{width:"95px",height:"65px",borderRadius:"5px",objectFit:"cover"},src:ze.contentPhoto,alt:""})]})]})}):Object(r.b)(h.a,{zaText:"cite_image_text_content_click",zaType:"Button",as:S.c,onClick:function(){Ve?it(!0):nt(!0)},css:{lineHeight:"30px"},icon:O.a,preset:"plain",color:"blue",children:"引用图文内容"})]}),fe&&Object(r.c)("div",{className:"VideoUploadForm-item VideoUploadForm-scheduledPublish",children:[Object(r.b)("span",{className:"VideoUploadForm-itemTitle",children:"定时发布"}),Object(r.b)(E.a,{className:"VideoUploadForm-scheduledPublish--switch",checked:ut,onChange:function(e){return dt(e.target.checked)}}),ut&&Object(r.c)(r.a,{children:[Object(r.b)(z.a,{className:"VideoUploadForm-scheduledPublish--timePicker",value:pt,min:ct,onChange:function(e){ht(Date.parse(e))}}),Object(r.b)(g.a,{className:"VideoUploadForm-scheduledPublish--tooltip",size:18,"data-tooltip":"时间需至少设置在30分钟以后","aria-label":"时间需至少设置在30分钟以后","data-tooltip-position":"top"})]})]}),(Un&&!Vn||Rn)&&Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle",children:"绑定活动"}),Un&&!Vn&&Object(r.c)("div",{role:"button",tabIndex:0,className:"VideoUploadForm-feature",onClick:function(){Pn(!0),Nn(!0)},children:[Object(r.b)(j.a,{className:"VideoUploadForm-featureIcon",size:20}),Object(r.b)("div",{className:"VideoUploadForm-featureName",children:"绑定活动"})]}),Rn&&Object(r.c)("div",{className:u()("VideoUploadForm-feature",{"VideoUploadForm-feature--disabled":Vn}),children:[Object(r.b)(y.a,{text:!0,center:!0,size:6,css:{marginRight:4},onClick:function(){An(null)}}),Object(r.b)(S.c,{preset:"plain",color:"blue",onClick:function(){Pn(!0),Nn(!0)},disabled:Vn,children:Rn.title})]})]}),(Wn||oa)&&!ut&&Object(r.c)("div",{className:"VideoUploadForm-item",children:[Object(r.b)("div",{className:"VideoUploadForm-itemTitle",children:"同步圈子"}),Wn&&!oa&&Object(r.b)(v.a,{view:{id:8602},card:{content:{type:"Zvideo"}},trackCardShow:!0,children:Object(r.c)("div",{role:"button",tabIndex:0,className:"VideoUploadForm-feature",onClick:function(){ta(!0)},children:[Object(r.b)(x,{className:"VideoUploadForm-featureIcon",size:20}),Object(r.b)("div",{className:"VideoUploadForm-featureName",children:"同步到圈子"})]})}),oa&&Object(r.b)(v.a,{view:{id:8603},card:{content:{id:oa.id,type:"Zvideo"}},trackCardShow:!0,children:Object(r.c)("div",{className:u()("VideoUploadForm-feature",{"VideoUploadForm-feature--disabled":Yn}),children:[Object(r.b)(y.a,{text:!0,center:!0,size:6,css:{marginRight:4},onClick:function(){ra(null)}}),Object(r.b)("span",{role:"button",tabIndex:0,dangerouslySetInnerHTML:{__html:oa.name},onClick:function(){Yn?T.a.alert("暂不支持修改已同步的圈子"):ta(!0)}})]})})]}),Boolean(null==Dn?void 0:Dn.length)&&Object(r.b)(se.a,{shown:Ln,onClose:function(){Pn(!1)},defaultCampaignId:null==Rn?void 0:Rn.id,campaignList:Dn,onSubmit:function(e){Pn(!1),An(e)}}),Wn&&Object(r.b)(pe,{shown:ea,onClose:function(){return ta(!1)},selectedClub:oa,onSelectClub:function(e){ra(e),ta(!1)}}),Je&&Object(r.b)(V,{handleConfirm:function(){Xe(!1)}}),tt&&Object(r.b)(Q,{handleAgree:la,handleCancel:function(){return nt(!1)}}),rt&&Object(r.b)(le,{handleCancel:function(){return it(!1)},handleSelect:function(e){var t=e.id,n=e.type,a=void 0===n?"":n;Le(Qt(e)),Ze({citeId:t,citeType:a}),it(!1)}})]}),Object(r.c)("div",{className:"VideoUploadForm-buttonGroup",children:[Object(r.b)(h.a,{zaText:!0,zaType:"Button",zaBlock:"CancelPublishVideo",zaAction:"Close",as:S.c,preset:"secondary",color:"blue",onClick:ue,children:"取消发布"}),Object(r.b)(v.a,{module:"Content",card:{content:{type:"Zvideo",token:ae.id}},children:Object(r.b)(h.a,{zaText:!0,zaType:"Button",zaBlock:"PublishVideo",zaAction:"Save",as:S.c,className:"VideoUploadForm-submitButton",preset:"primary",color:"blue",disabled:"uploadError"===ie,onClick:function(e){var t=function(e,t){var n=e.title,a=e.description,o=e.categoryFirstLevel,r=e.categorySecondLevelId,i=e.topics,c=e.zvideoType;if(!n)return"视频标题至少 ".concat(5," 个字");if(n.length<5)return"视频标题至少 ".concat(5," 个字");if(n.length>40)return"视频标题最多 ".concat(40," 个字");if(a.length>300)return"视频描述最多 ".concat(300," 个字");if(!o)return"请选择所属领域";if(!r)return"请选择所属二级领域";if(!i.length)return"请绑定话题";if(!c)return"请选择类型";if(t){var l=t();if(l)return l}}({title:zt,description:_t,categoryFirstLevel:qt,categorySecondLevelId:Wt,topics:an,zvideoType:Cn},ce);if(t)return kt(t,"red");p.a.trackEvent(e.target,{id:7038,action:"Upload"},{button:{text:ut?"定时发布":"发布视频"}});var n=Object.assign(Object.assign({id:ae.id,videoId:ae.videoId,title:zt,description:_t,category:{firstLevel:Vt,secondLevel:Wt},zvideoType:Cn,topicIds:an.map((function(e){return e.id||e.urlToken})),campaignId:null==Rn?void 0:Rn.id,clubId:null==oa?void 0:oa.id,imageUrl:vn,publishAt:pt},Se(We)),{},{chapters:ke});de(n,ut)},children:ut?"定时发布":"发布视频"})})]}),Oe&&Object(r.b)(Te,{title:zt,description:_t,imageUrl:vn,duration:Object(D.a)(null===(ee=ae.video)||void 0===ee?void 0:ee.duration)})]})})}},1489:function(e,t,n){"use strict";n.d(t,"b",(function(){return a.a})),n.d(t,"a",(function(){return E}));var a=n(1296),o=n(1),r=n(14),i=n(15),c=n(17),l=n(18),s=n(7),u=n(4),d=n(0),b=n(20),f=n(3),p=n.n(f),h=n(21),m=n(70),v=n.n(m),g=n(26),O=n(72),j=n(873),y=n(33),C=(n(131),n(89)),w=n(438),x=n(218),k=n(258),S=n(30);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.a)(e);if(t){var o=Object(s.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(l.a)(this,n)}}var A={answer:p.a.object.isRequired,renderThankButtonText:p.a.func,zaInfo:p.a.number},I=[].concat(Object(u.a)(Object.keys(A)),["updateAnswerThank","dispatch","authRequired","isLogin","currentUser"]),T=function(e){Object(c.a)(n,e);var t=R(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).buttonRef=Object(d.createRef)(),e.handleUpdateThanked=e.props.authRequired((function(){var t=e.props,n=t.answer,a=n.id,o=n.relationship,r=(o=void 0===o?{}:o).isThanked,i=t.zVideoId,c=t.updateAnswerThank,l=t.zaInfo,s=!r;g.a.trackEvent(e.buttonRef.current,Object.assign({action:s?"Thank":"UnThank",element:"Button"},l&&{id:l})),c(a,s,{zVideoId:i})}),S.Y.thank),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.answer,a=t.renderThankButtonText,r=t.disabled,i=n.relationship,c=(i=void 0===i?{}:i).isThanked,l=v()(this.props,I),s=a(n);return Object(o.c)(o.a,{children:[Object(o.b)(k.c,{keyMap:{LIKE:"l"},handlers:{LIKE:function(t){e.buttonRef.current.focus(),e.handleUpdateThanked(t)}}}),Object(o.b)(O.a,Object.assign({as:y.c,zaType:"Button",zaAction:c?"UnLike":"Like",zaText:!0,onRef:this.buttonRef,preset:"plain",onClick:this.handleUpdateThanked,icon:j.a,label:s,disabled:r,"aria-live":"polite"},l))]})}}]),n}(d.Component);T.propTypes=A,T.defaultProps={renderThankButtonText:function(e){var t=e.relationship;return(t=void 0===t?{}:t).isThanked?"取消喜欢":"喜欢"}};var E=Object(b.compose)(x.a,Object(h.connect)(null,{updateAnswerThank:C.J}),Object(w.a)(null))(T)},1491:function(e,t,n){"use strict";var a=n(2),o=n(1),r=n(13),i=n.n(r),c=n(2845),l=n(438),s=n(890),u=n(2839),d=n(2840),b=n(895),f=n(2841),p=n(2842),h=n(2843),m=n(2181),v=n(2844),g={online_roundtable:s.a,relevant:u.a,editor_recommendation:d.a,roundtable:s.a,special:b.a,weekly:f.a,daily:p.a,professional:h.a,zhizhi_plan_recommend:m.a,zhizhi_plan_edu_recommend:m.a,zhizhi_plan_baby_recommend:m.a,zhizhi_plan_acg_recommend:m.a,zhizhi_plan_outing_recommend:m.a,zhizhi_plan_rumour_deny:v.a,zhizhi_plan:m.a},O={alpha:1,group:"GYL02A"},j={alpha:.08,group:"GYL02A"},y={brand_special:c.a},C=Object.assign(Object.assign({},g),{},{COMMERCIAL_ICONS:y}),w=function(e){return"GBL07A"===(e||O).group?"commercial":"positive"},x=function(e){return"GBL07A"===(e||j).group?"commercial":"positive"},k=function(e){return"recognition"===e?"professional":e};t.a=Object(l.a)(null)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labelInfo,n=e.extra,r=void 0===n?{}:n,c=e.className;if(!t)return null;var l=t.type,s=t.text,u=t.foregroundColor,d=t.backgroundColor,b=r.customIcon,f=r.customIconClassName,p=w(u),h=x(d),m=b||C[k(l)];return m?Object(o.c)("span",{className:i()("Label-icon","Label-iconColor--".concat(p),Object(a.a)({},"Label-iconColor--".concat(h,"Background"),d),c),children:[Object(o.b)(m,{center:!0,className:i()("Label-iconImg",f)}),s]}):null}))},1494:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(0),u=n(3),d=n.n(u),b=n(13),f=n.n(b),p=n(88),h=n(957),m=n(140),v=n(33),g=n(30);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var j=function(e){Object(r.a)(n,e);var t=O(n);function n(e){var o;Object(a.a)(this,n),(o=t.call(this,e)).onChangeInputType=function(e){o.setState({checked:e.target.checked})},o.onChangeInputValue=function(e){o.setState({text:e.target.value})},o.submit=function(){var e=o.state.text;o.props.submitRewardText(e)};var r,i=e.tagline;return o.state={text:(r=i,r.replace(/^「/,"").replace(/」$/,"")||g.p),checked:!0},o}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.edit,a=this.state,o=a.text,r=a.checked;return Object(l.c)(p.b,{onClose:t,className:"RewardForm-rewardModal",children:[Object(l.b)("p",{className:"RewardForm-rewardTitle",children:n?"编辑赞赏描述":"开启赞赏"}),Object(l.b)(m.a,{className:"RewardForm-rewardInput",maxLength:"20",type:"text",value:o,onChange:this.onChangeInputValue,disabled:!0}),Object(l.c)("div",{className:"RewardForm-remark",children:[!n&&Object(l.c)("label",{className:"RewardForm-protocol",children:[Object(l.b)(h.a,{className:"RewardForm-rewardCheckbox",onChange:this.onChangeInputType,checked:r,size:16}),"我已同意",Object(l.b)("a",{className:"RewardForm-rewardLink",href:"/terms/tipjar",children:"《知乎赞赏功能使用协议》"})]}),Object(l.b)("p",{className:"RewardForm-prompting",children:"暂不支持修改赞赏文案"})]}),Object(l.b)(v.c,{className:f()("RewardForm-rewardSubmit",{"RewardForm-rewardSubmit-disabled":!r}),onClick:this.submit,disabled:!r,children:"确定"})]})}}]),n}(s.Component);j.propTypes={onClose:d.a.func,submitRewardText:d.a.func,edit:d.a.bool,tagline:d.a.string},j.defaultProps={tagline:g.p}},1498:function(e,t,n){"use strict";var a=n(1),o=n(13),r=n.n(o),i=n(1410);t.a=function(e){var t=e.className;return Object(a.c)("div",{className:r()("Reviewing",t),children:[Object(a.c)("div",{className:"Reviewing-top",children:[Object(a.b)(i.a,{size:16}),Object(a.b)("span",{className:"Reviewing-tip",children:"内容审核中"})]}),Object(a.b)("div",{className:"Reviewing-text",children:"内容将在审核通过后自动发布"})]})}},1505:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(81),i=n(17),c=n(18),l=n(7),s=n(1),u=n(0),d=n(3),b=n.n(d),f=n(26),p=n(235),h=n(918),m=n(945);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var g=function(e){Object(i.a)(n,e);var t=v(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={expanded:!0},e.handleTitleClick=function(t){f.a.trackEvent(Object(r.a)(e),{id:6121,action:"OpenUrl",element_name:"Title"}),window.open(t)},e.renderHeader=function(){var t=e.props,n=t.title,a=t.url,o=t.author;return Object(s.c)("div",{className:"AbstractCard-header",children:[Object(s.c)("div",{className:"AbstractCard-desc",children:[Object(s.b)("span",{role:"button",tabIndex:0,className:"AbstractCard-title",onClick:function(){return e.handleTitleClick(a,n)},children:n}),Object(s.b)("span",{className:"AbstractCard-source",children:e.abstractSourceInfo})]}),Object(s.b)(m.a,{zaId:6120,className:"AbstractCard-author",author:o,preset:"plain"})]})},e.renderContent=function(){var t=e.props,n=t.content,a=t.member.name,o=t.theme;return Object(s.c)("div",{className:"AbstractCard-content",children:[Object(s.b)("div",{className:"AbstractCard-text AbstractCard-text--".concat(o),children:n}),Object(s.b)("div",{className:"AbstractCard-tip",children:Object(s.c)("span",{className:"AbstractCard-info",children:[a," 摘录于 ",e.createdFormat]})})]})},e}return Object(o.a)(n,[{key:"abstractSourceInfo",get:function(){return"answer"===this.props.type?"下的回答内容摘录":"下的内容摘录"}},{key:"createdFormat",get:function(){var e=this.props.created;return Object(p.a)(e?new Date(1e3*e):new Date,"yyyy-MM-dd")}},{key:"componentDidMount",value:function(){Object(h.onViewedOnce)(this.node,(function(){f.a.trackCardShow(null,{id:6118})}))}},{key:"render",value:function(){var e=this;return Object(s.c)("div",{className:"AbstractCard",ref:function(t){e.node=t},children:[this.renderHeader(),this.renderContent()]})}}]),n}(u.Component);g.propTypes={title:b.a.string.isRequired,url:b.a.string.isRequired,author:b.a.object,member:b.a.object,content:b.a.string.isRequired,created:b.a.number,theme:b.a.string.isRequired};t.a=g},1508:function(e,t,n){"use strict";var a=n(4),o=n(47),r=n(1),i=n(40),c=n(21),l=n(58),s=n(72),u=n(876),d=n(171),b=n(59),f=n.n(b),p=n(458),h=n(1200),m=n(2),v=n(93),g=n(173),O=n(2282),j=function(e){var t=e.className,n=e.index,a=void 0===n?0:n,o=e.selected,i=e.onClick,c=e.onDelete,u=e.item,d=e.item,b=d.status,f=d.target,p=(f=void 0===f?{}:f).parentObject.title,h=0===b,j=Object(r.c)(s.a,Object.assign(Object.assign({zaType:"Card",zaText:p,view:{elementLocation:{card:{index:a}}},as:l.Box,role:"button",className:t,width:"173px",height:"70px",color:"GBK03A",p:"8px",pb:"0",lineHeight:"normal"},h&&{onClick:i}),{},{css:function(e){var t;return{border:"1px solid ".concat(o?"transparent":h?e.colorMod(e.colors.GBL01A).alpha(.08):e.colors.GBK09A),boxShadow:o?"inset 0 0 0 2px ".concat(e.colors.GBL01A):"none",borderRadius:"4px",backgroundColor:e.colors.GBK99C,":hover":(t={background:h?e.colorMod(e.colors.GBL01A).alpha(.08):e.colors.GBK10A},Object(m.a)(t,".".concat("ContributionItem-deleteButton"),{visibility:"visible"}),Object(m.a)(t,"cursor",h?"pointer":"not-allowed"),t),position:"relative"}},children:[Object(r.b)(l.Flex,Object.assign(Object.assign({},h&&{color:"GBL01A"}),{},{fontSize:"11px",fontWeight:"600",alignItems:"center",justifyContent:"space-between",children:Object(r.b)(s.a,{zaBlock:"Delete",zaText:"删除投稿",zaType:"Button",as:l.Box,role:"button",className:"ContributionItem-deleteButton",onClick:function(e){e.stopPropagation(),null==c||c(u)},css:{cursor:"pointer",visibility:"hidden",position:"absolute",right:"-8px",top:"-8px"},children:Object(r.b)(O.b,{size:12,css:function(e){return{color:e.colors.GRD03A,backgroundColor:e.colors.GBK99A,borderRadius:"50%",border:"2px solid ".concat(e.colors.GBK99A)}}})})})),Object(r.b)(l.Box,{mt:"4px",fontSize:"13px",css:[Object(v.d)(2),{wordBreak:"break-all"}],children:p})]}));return Object(r.b)(s.b,{block:"VideoAnswerItem",children:h?j:Object(r.b)(g.a,{toggler:j,placement:"top",arrowed:!0,toggleEvent:"hover",children:Object(r.b)(l.Box,{fontSize:"12px",p:"8px",children:"已投稿问题仅支持在回答详情页编辑"})})})},y=function(e){var t=e.className,n=e.onClick,a=e.totalCount,i=e.currentCount,c=Object(h.a)("zvideo_contribution_form:should_hide_new_tag"),d=Object(o.a)(c,2),b=d[0],f=d[1];return Object(r.c)(s.a,{zaType:"Button",zaAction:"",zaBlock:"AddVideoAnswer",zaText:"添加问题",as:l.Flex,className:t,role:"button",width:"173px",height:"70px",flexDirection:"column",color:"GBL01A",alignItems:"center",justifyContent:"center",onClick:function(e){b||f(!0),null==n||n(e)},css:function(e){return Object.assign({position:"relative",cursor:"pointer",borderRadius:"3px",border:"1px solid ".concat(e.colorMod(e.colors.GBL01A).alpha(.08)),":hover":{background:e.colorMod(e.colors.GBL01A).alpha(.08)},overflow:"hidden"},!b&&{"::after":{content:'"NEW"',position:"absolute",top:"0",right:"0",color:e.colors.GRD03A,fontSize:"8px",fontWeight:"600",width:"28px",height:"17px",lineHeight:"17px",textAlign:"center",background:e.colorMod(e.colors.GRD03A).alpha(.08),borderBottomLeftRadius:"3px"}})},children:[Object(r.b)(u.a,{size:12}),Object(r.b)(l.Box,{fontSize:"14px",fontWeight:"500",mt:"1px",children:i&&a?"继续添加 (".concat(i,"/").concat(a,")"):"添加问题"})]})};t.a=function(e){var t=e.zvideoId,n=e.showCreateButton,o=void 0!==n&&n,s=e.showSelect,u=void 0!==s&&s,b=e.onAdd,h=e.onSelect,m=e.isProduce,v=Object(c.useDispatch)(),g=Object(p.r)(),O=Object(p.p)(t);if(m)O.reverse();else{var C=O.filter((function(e){return 2===e.status})),w=O.filter((function(e){return 2!==e.status}));w.reverse(),O=[].concat(Object(a.a)(w),Object(a.a)(C))}var x=Object(p.o)(t).answer,k=(x=void 0===x?{}:x).canContribute,S=void 0!==k&&k,R=x.totalCount,A=void 0===R?0:R,I=O.length,T=Object(i.d)((function(e){v(Object(p.l)(e.id)),v(Object(p.f)(e.id)),null==h||h(e)})),E=Object(i.d)((function(e){d.a.confirm(Object(r.b)(l.Box,{textAlign:"center",children:"已编辑的投稿内容不会被保存"}),{title:Object(r.b)(l.Box,{ml:"23px",children:"确定删除该视频投稿？"}),text:{ok:"确认删除",cancel:"继续编辑"}}).then((function(){if(e.status&&0!==e.status){var n=e.target.object.id;n&&v(Object(p.d)(t,e.id,n))}else v(Object(p.e)(t,e.id));v(Object(p.l)(null))}),f.a)}));return Object(r.b)(l.Flex,{flexWrap:"wrap",ml:"-8px",children:Object(r.c)(r.a,{children:[" ",O.map((function(e){return Object(r.b)(j,{selected:u&&(null==g?void 0:g.id)===e.id,onClick:function(){return T(e)},onDelete:function(){return E(e)},item:e,css:{marginLeft:"8px",marginTop:"8px"}},e.id)})),S&&I<A&&o&&Object(r.b)(y,{onClick:b,currentCount:I,totalCount:A,css:{marginLeft:"8px",marginTop:"12px"}})]})})}},1594:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Org24","data-old-api":"Org"},e),{className:"Zi Zi--Org"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M10.786 8.41a8.938 8.938 0 00-3.968-2.528c-.305-1.719.814-3.337 2.442-3.741 1.221-.405 2.646.101 3.46 1.011 1.045 1.38.915 3.64.814 4.348-.102 1.315-1.221 3.034-1.323 3.135-.305-.809-.814-1.517-1.425-2.225zm-2.442 2.832c-1.526.202-3.052 1.01-4.171 2.123-1.12-.404-1.934-1.314-2.137-2.427-.316-2.427 1.526-3.64 2.849-3.842 1.628-.372 2.849.505 4.07 1.415 1.146 1.012 2.035 2.63 2.035 2.73-.916-.202-1.832-.1-2.646 0zm4.986.303c.509-.607.931-1.585 1.12-2.225.318-1.039.61-3.134.203-4.651 1.323-1.011 3.154-1.011 4.477.303 1.235 1.146 1.018 2.933.814 3.438-.663 1.581-1.933 2.326-3.256 2.832-1.221.404-3.256.303-3.358.303zm-2.645 1.011c-.51.607-.916 1.416-1.221 2.326-.407 1.314-.643 3.06-.102 4.55-1.323 1.011-3.256 1.011-4.477-.202-1.198-1.124-1.018-2.933-.814-3.438.599-1.605 1.933-2.326 3.256-2.831.916-.304 3.256-.405 3.358-.405zm9.259-1.82c1.018.404 1.933 1.315 2.035 2.427.233 2.57-1.526 3.64-2.849 3.842-1.526 0-2.85-.505-4.07-1.415-1.018-.81-2.035-2.528-2.035-2.63.916.203 1.831.102 2.645 0 1.628-.404 3.053-1.112 4.274-2.224zm-6.716 4.854c1.065 1.08 2.442 2.022 4.07 2.528.306 1.719-.814 3.235-2.442 3.741-1.22.404-2.645-.101-3.46-1.011-1.1-1.481-1.017-3.54-.915-4.247.102-1.315 1.221-3.034 1.323-3.135.305.708.721 1.44 1.424 2.124z"}))}},1629:function(e,t,n){e.exports=n.p+"assets/liukanshan_paper.d98ba9b2.svg"},1630:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(87),o=n(61);function r(e){Object(o.a)(1,arguments);var t=Object(a.a)(e),n=t.getDay();return n}},1631:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(87),o=n(61);function r(e){var t,n;if(Object(o.a)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(a.a)(e);(void 0===n||n>t||isNaN(t))&&(n=t)})),n||new Date(NaN)}},1632:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(87),o=n(61);function r(e){var t,n;if(Object(o.a)(1,arguments),e&&"function"==typeof e.forEach)t=e;else{if("object"!=typeof e||null===e)return new Date(NaN);t=Array.prototype.slice.call(e)}return t.forEach((function(e){var t=Object(a.a)(e);(void 0===n||n<t||isNaN(t))&&(n=t)})),n||new Date(NaN)}},1633:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"CalendarFill24","data-old-api":"Calendar"},e),{className:"Zi Zi--Calendar"+(e.className?" ".concat(e.className):"")}),o.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},o.a.createElement("path",{d:"M3 9.3v11.1A1.6 1.6 0 004.6 22h14.8a1.6 1.6 0 001.6-1.6V9.3a.3.3 0 00-.3-.3H3.3a.3.3 0 00-.3.3zM5.75 13a.75.75 0 01.75-.75h10a.75.75 0 010 1.5h-10a.75.75 0 01-.75-.75zm.75 2.75a.75.75 0 000 1.5h5a.75.75 0 000-1.5h-5zM14.5 4h-5v1a1.5 1.5 0 11-3 0V4H4.6A1.6 1.6 0 003 5.6v2.1a.3.3 0 00.3.3h17.4a.3.3 0 00.3-.3V5.6A1.6 1.6 0 0019.4 4h-1.9v1a1.5 1.5 0 01-3 0V4z"}),o.a.createElement("path",{d:"M8 2.25a.75.75 0 01.75.75v2a.75.75 0 01-1.5 0V3A.75.75 0 018 2.25zm8 0a.75.75 0 01.75.75v2a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75z"})))}},1634:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(87),o=n(61);function r(e,t){Object(o.a)(2,arguments);var n=Object(a.a)(e),r=Object(a.a)(t);return n.getTime()>r.getTime()}},1636:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowDownToLine24","data-old-api":"Download"},e),{className:"Zi Zi--Download"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M12 2.25a.75.75 0 01.75.75v13.37l5.762-4.94a.75.75 0 11.976 1.14l-6.991 5.992a.746.746 0 01-.173.114l-.01.005a.746.746 0 01-.811-.12L4.512 12.57a.75.75 0 11.976-1.138l5.762 4.938V3a.75.75 0 01.75-.75zm-7 18a.75.75 0 000 1.5h14a.75.75 0 000-1.5H5z",fillRule:"evenodd",clipRule:"evenodd"}))}function l(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowDownToLine24","data-old-api":"StickyUnset"},e),{className:"Zi Zi--StickyUnset"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M12 2.25a.75.75 0 01.75.75v13.37l5.762-4.94a.75.75 0 11.976 1.14l-6.991 5.992a.746.746 0 01-.173.114l-.01.005a.746.746 0 01-.811-.12L4.512 12.57a.75.75 0 11.976-1.138l5.762 4.938V3a.75.75 0 01.75-.75zm-7 18a.75.75 0 000 1.5h14a.75.75 0 000-1.5H5z",fillRule:"evenodd",clipRule:"evenodd"}))}},1645:function(e,t,n){},1646:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),o=n(31),r=n(6),i=Object(r.a)("promotion",["LIKE"]);function c(e){return function(t,n){var r=n().entities.promotions[e]||{},c=r.voteupCount,l=r.voting,s=l?0:1;return t({API:{types:i.LIKE,endpoint:"v3/promotions/".concat(e,"/voters"),query:{voting:s},method:"POST"},UPDATE:{request:{promotions:Object(a.a)({},e,{voteupCount:c+(l?-1:1),voting:s})},success:function(t){return{promotions:Object(a.a)({},e,t)}},failure:{promotions:Object(a.a)({},e,r)}},NOTIFICATION:{failure:o.a}})}}},1647:function(e,t,n){},1648:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(1),o=n(58),r=n(93),i=function(e){var t=Object(r.f)();return Object(a.b)(o.Flex,Object.assign(Object.assign({width:"58px",height:"20px",bg:Object(r.b)(t.colors.GYL01A).alpha(.08),color:t.colors.GYL01A,alignItems:"center",justifyContent:"center",css:{fontWeight:"normal",fontSize:12,borderRadius:4,overflow:"hidden"}},e),{},{children:"联合创作"}))}},1649:function(e,t){},1650:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1),o=n(40),r=n(193),i=function(e){var t=e.zvideo,n=t.id,a=t.imageUrl,o=t.author,r=t.video,i=t.playCount,c=t.voteupCount,l=e.stats,s=l.memberCount,u=l.count;return{zvideoId:n,thumbnail:a,duration:r.duration,avatarUrl:o.avatarUrl,userName:o.name,memberCount:s,videoCount:u,playCount:i,voteupCount:c}};function c(e){var t=e.coCreationRefBy,r=e.referenceRefBy,c=e.type,l=Boolean(t),s=!l&&Boolean(r),u=Object(o.e)((function(){return n.e(39).then(n.bind(null,2724))}));if(l){if(u){var d=i(t),b=d.zvideoId,f=d.thumbnail,p=d.duration,h=d.avatarUrl,m=d.userName,v=d.memberCount,g=d.videoCount,O=d.playCount,j=d.voteupCount;return Object(a.b)(u.CoCreationCard,{zaContentId:b,thumbnail:f,duration:p,avatarUrl:h,userName:m,isMultiMember:v>1,videoCount:g,playCount:O,voteupCount:j,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(b),showSingleVideoUI:!0})}return Object(a.b)("div",{css:{height:82}})}if(s){if(u){var y=i(r),C=y.zvideoId,w=y.avatarUrl,x=y.userName,k=y.memberCount;return Object(a.b)(u.ReferenceCard,{type:c,zaContentId:C,avatarUrl:w,userName:x,isMultiMember:k>1,linkToNativePage:!1,linkUrl:"https://www.zhihu.com/zvideo/".concat(C),showSingleVideoUI:!0})}return Object(a.b)("div",{css:{height:44}})}return null}function l(e){return Object(a.b)(r.a,{replacement:null,children:Object(a.b)(c,Object.assign({},e))})}},1651:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1),o=n(58),r=n(945),i=n(1105),c=function(e){var t=e.mainAuthor,n=e.subAuthor,i=function(e){return"plain"===e||"special-plain"===e}(e.preset);return Object(a.c)(o.Flex,{mt:"10px",children:[Object(a.b)(r.a,Object.assign(Object.assign({},i&&{preset:"plain"}),{},{author:t,coCreationAuthorDescriptionText:"视频作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1,css:{marginRight:i?16:30}})),Object(a.b)(r.a,Object.assign(Object.assign({},i&&{preset:"plain"}),{},{author:n,coCreationAuthorDescriptionText:"图文作者",userLinkV2:!0,noBadge:!0,noVipBadge:!0,showVipIcon:!1}))]})};function l(e,t,n,o){var r=Object(i.b)(t,n),l=Object(i.c)(n);return o&&Object(a.b)(c,{preset:e,mainAuthor:r,subAuthor:l},"coCreateAuthors")}},1652:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n(72),i=n(33),c=n(149),l=n(58),s=l.Box,u=l.Flex;t.a=function(e){var t=e.className,n=e.index,l=void 0===n?0:n,d=e.onSelect,b=e.selected,f=void 0!==b&&b,p=e.item,h=p.title,m=p.followCount,v=p.commentCount,g=p.visitCount,O=p.highlight,j=Object(o.useMemo)((function(){return[m,v,g].every((function(e){return"number"==typeof e}))?["".concat(Object(c.niceNumber)(m)," 关注"),"".concat(Object(c.niceNumber)(v)," 评论"),"".concat(Object(c.niceNumber)(g)," 浏览")].join(" · "):null}),[m,v,g]);return Object(a.c)(r.a,{zaBlock:"QuestionItem",zaType:"Card",zaText:j,view:{elementLocation:{card:{index:l}}},as:u,py:"12px",alignItems:"start",className:t,children:[Object(a.c)(s,{flex:"1",children:[Object(a.b)(s,{fontSize:"15px",fontWeight:"500",dangerouslySetInnerHTML:{__html:(null==O?void 0:O.title)||h},css:function(e){return{wordBreak:"break-all",em:{fontStyle:"inherit",color:e.colors.GYL01A}}}}),j&&Object(a.b)(s,{mt:"3px",color:"GBL05A",fontSize:"14px",children:j})]}),f?Object(a.b)(i.c,{preset:"secondary",color:"blue",css:{cursor:"unset"},children:"已选择"}):Object(a.b)(i.c,{onClick:d,color:"blue",css:{padding:"0 9px",marginLeft:"20px"},children:"选择问题"})]})}},1653:function(e,t,n){"use strict";var a=n(1),o=n(58),r=n(59),i=n.n(r),c=n(72),l=n(40),s=n(140),u=n(33),d=n(171),b=n(1652);t.a=function(e){var t=e.isEditing,n=e.onSubmit,r=e.onCancel,f=e.selectedQuestion,p=e.value,h=e.onChange,m=Object(l.d)((function(){n()})),v=Object(l.d)((function(){p?d.a.confirm(Object(a.b)(o.Box,{textAlign:"center",children:t?"已编辑的投稿内容不会被保存":"当前输入的投稿内容不会被保存"}),{title:Object(a.b)(o.Box,{ml:"23px",children:t?"确定取消当前修改":"确定返回选择其他问题？"}),text:{ok:t?"取消修改":"确定返回",cancel:t?"继续编辑":"继续投稿"}}).then(r,i.a):r()}));return Object(a.c)(c.b,{block:"AnswerEditor",children:[Object(a.b)(b.a,{selected:!0,item:f,css:{padding:"0 20px",marginTop:"24px"}}),Object(a.b)(c.a,{zaType:"Input",zaAction:"Answer",as:o.Box,px:"20px",mt:"17px",flex:"1",children:Object(a.b)(s.a,{autoFocus:!0,maxLength:"150000",value:p,onChange:function(e){h(e.target.value)},css:{width:"100%",height:"100%!important",textarea:{height:"100%"}},multiline:!0,placeholder:"针对问题介绍下视频（选填）"})}),Object(a.c)(o.Flex,{height:"82px",justifyContent:"space-between",alignItems:"center",px:"20px",css:{button:{width:"236px"}},children:[Object(a.b)(c.a,{zaType:"Button",zaAction:"Close",zaText:!0,as:u.c,onClick:v,children:t?"取消修改":"返回选择"}),Object(a.b)(c.a,{zaType:"Button",zaAction:"Save",zaText:!0,as:u.c,onClick:m,preset:"primary",color:"blue",children:t?"提交修改":"添加投稿"})]})]})}},1654:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"OpposeFill24","data-old-api":"TriangleDown"},e),{className:"Zi Zi--TriangleDown"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M13.792 20.319c-.781 1.406-2.803 1.406-3.584 0L2.418 6.296c-.76-1.367.228-3.046 1.791-3.046h15.582c1.563 0 2.55 1.68 1.791 3.046l-7.79 14.023z",fillRule:"evenodd",clipRule:"evenodd"}))}},1655:function(e,t,n){"use strict";var a=n(47),o=n(1),r=n(0),i=n(945),c=n(1049),l=function(e){return"plain"===e||"special-plain"===e},s=l,u=function(e){return"special-plain"===e};t.a=function(e,t,n){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=Object(r.useMemo)((function(){var t;if(Object(c.isCoCreateRelation)(d)){var a=!u(e);t=Object(c.renderDualAuthor)(e,n,d,a)}else t=!u(e)&&Object(o.b)(i.a,Object.assign(Object.assign({},s(e)&&{preset:"plain"}),{},{author:n,userLinkV2:!0}),"authorInfo");return l(e)?[t,null]:[[t,null],null]}),[d,e,n]),f=Object(a.a)(b,2),p=f[0],h=f[1];return[p,h]}},1656:function(e,t,n){},1657:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(43);function o(e,t){t.ZhihuHybrid?a.a.dispatch("base/openURL",{url:e}):window.location.href=e}},1658:function(e,t,n){"use strict";var a=n(47),o=n(50),r=n(0),i=n(40);t.a=function(e){var t=e.disabled,n=e.children,c=Object(r.useState)(null),l=Object(a.a)(c,2),s=l[0],u=l[1];return Object(i.i)((function(){u(document.querySelector("#AnswerFormPortalContainer"))})),t?n:Boolean(s)&&Object(o.createPortal)(n,s)}},1659:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(1),o=n(0),r=n(58),i=n(2285),c=n(72);function l(e){var t=e.handleClick,n=Object(o.useRef)(null);return Object(a.c)(c.a,{as:r.Flex,zaAction:"Unknown",zaText:"全屏编辑",zaType:"Button",aliginItem:"center",fontSize:14,color:"GBL05A",pr:"20px",lineHeight:"55px",css:{cursor:"pointer"},onClick:t,ref:n,children:[Object(a.b)(r.Text,{mr:"10px",children:"全屏编辑"}),Object(a.b)(i.a,{text:!0,center:!0})]})}},1660:function(e,t,n){e.exports=n.p+"assets/logo.804f083e.png"},1661:function(e,t,n){"use strict";var a=n(32),o=n(1),r=n(21),i=n(40),c=n(31),l=n(301),s=n(89),u=n(218),d=n(30),b=n(1082),f=["disabled","currentUser","authRequired","answer","isOwner"];t.a=Object(u.a)((function(e){var t,n=e.disabled,u=e.currentUser,p=e.authRequired,h=e.answer,m=e.isOwner,v=Object(a.default)(e,f),g=Object(r.useDispatch)(),O=Boolean(!n&&u);Object(i.i)((function(){O&&g(Object(l.b)(["opposeRight"]))}));var j=Object(r.useSelector)((function(t){return function(e,t){var n=e.entities.questions[t.answer.question.id];return n&&n.voteDownReason}(t,e)})),y=Object(r.useSelector)((function(e){return Object(l.d)(e)})),C=Object(i.d)(p((function(e){g(Object(s.K)(h.id,e,{cardType:h.cardType}))}),d.Y.vote)),w=Object(i.d)((function(){g(Object(s.j)(h.id,h.question.id))})),x=Object(i.d)((function(e){g(Object(s.C)(h.id,e.reasonId)).then((function(e){g(Object(c.h)(e.payload.message))}))})),k=Object(i.d)((function(e){g(Object(l.e)(e))}));return Object(o.b)(b.a,Object.assign({count:h.voteupCount,voting:h.relationship&&h.relationship.voting,isOwner:Boolean(m||(null===(t=h.relationship)||void 0===t?void 0:t.isAuthor)),isShowVoteDownMenu:O&&y,onVote:C,voteDownReason:j,onLoadVoteDownReason:w,onSelectVoteDownReason:x,onSetVoteDownReason:k},v))}))},1662:function(e,t,n){"use strict";n.d(t,"animated",(function(){return M}));var a=n(28),o=n.n(a),r=n(25),i=n.n(r),c=n(23),l=n.n(c),s=n(27),u=n.n(s),d=n(29),b=n.n(d),f=n(19),p=n.n(f),h=n(34),m=n.n(h),v=n(1428);n.o(v,"useSpring")&&n.d(t,"useSpring",(function(){return v.useSpring})),n.o(v,"useTransition")&&n.d(t,"useTransition",(function(){return v.useTransition}));var g=n(50),O=n(1168),j=n(1663),y=["style","children","scrollTop","scrollLeft"],C=["x","y","z"],w=["scrollTop","scrollLeft"];function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return b()(this,n)}}var k=/^--/;function S(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||k.test(e)||A.hasOwnProperty(e)&&A[e]?(""+t).trim():t+"px"}var R={};var A={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I=["Webkit","Ms","Moz","O"];A=Object.keys(A).reduce((function(e,t){return I.forEach((function(n){return e[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(n,t)]=e[t]})),e}),A);var T=/^(matrix|translate|scale|rotate|skew)/,E=/^(translate)/,N=/^(rotate|skew)/,B=function(e,t){return O.s.num(e)&&0!==e?e+t:e},z=function e(t,n){return O.s.arr(t)?t.every((function(t){return e(t,n)})):O.s.num(t)?t===n:parseFloat(t)===n},L=function(e){u()(n,e);var t=x(n);function n(e){var a=e.x,o=e.y,r=e.z,c=m()(e,C);l()(this,n);var s=[],u=[];return(a||o||r)&&(s.push([a||0,o||0,r||0]),u.push((function(e){return["translate3d(".concat(e.map((function(e){return B(e,"px")})).join(","),")"),z(e,0)]}))),Object(O.l)(c,(function(e,t){if("transform"===t)s.push([e||""]),u.push((function(e){return[e,""===e]}));else if(T.test(t)){if(delete c[t],O.s.und(e))return;var n=E.test(t)?"px":N.test(t)?"deg":"";s.push(Object(O.y)(e)),u.push("rotate3d"===t?function(e){var t=i()(e,4),a=t[0],o=t[1],r=t[2],c=t[3];return["rotate3d(".concat(a,",").concat(o,",").concat(r,",").concat(B(c,n),")"),z(c,0)]}:function(e){return["".concat(t,"(").concat(e.map((function(e){return B(e,n)})).join(","),")"),z(e,t.startsWith("scale")?1:0)]})}})),s.length&&(c.transform=new P(s,u)),t.call(this,c)}return n}(j.a),P=function(e){u()(n,e);var t=x(n);function n(e,a){var o;return l()(this,n),(o=t.call(this)).inputs=e,o.transforms=a,o._value=null,o}return o()(n,[{key:"get",value:function(){return this._value||(this._value=this._get())}},{key:"_get",value:function(){var e=this,t="",n=!0;return Object(O.k)(this.inputs,(function(a,o){var r=Object(O.q)(a[0]),c=e.transforms[o](O.s.arr(r)?r:a.map(O.q)),l=i()(c,2),s=l[0],u=l[1];t+=" "+s,n=n&&u})),n?"none":t}},{key:"observerAdded",value:function(e){var t=this;1==e&&Object(O.k)(this.inputs,(function(e){return Object(O.k)(e,(function(e){return Object(O.r)(e)&&Object(O.c)(e,t)}))}))}},{key:"observerRemoved",value:function(e){var t=this;0==e&&Object(O.k)(this.inputs,(function(e){return Object(O.k)(e,(function(e){return Object(O.r)(e)&&Object(O.x)(e,t)}))}))}},{key:"eventObserved",value:function(e){"change"==e.type&&(this._value=null),Object(O.d)(this,e)}}]),n}(O.a);v.Globals.assign({batchedUpdates:g.unstable_batchedUpdates,createStringInterpolator:O.g,colors:O.e});var M=Object(j.d)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;var n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,a=t.style,o=t.children,r=t.scrollTop,i=t.scrollLeft,c=m()(t,y),l=Object.values(c),s=Object.keys(c).map((function(t){return n||e.hasAttribute(t)?t:R[t]||(R[t]=t.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()})))}));for(var u in void 0!==o&&(e.textContent=o),a)if(a.hasOwnProperty(u)){var d=S(u,a[u]);"float"===u?u="cssFloat":k.test(u)?e.style.setProperty(u,d):e.style[u]=d}s.forEach((function(t,n){e.setAttribute(t,l[n])})),void 0!==r&&(e.scrollTop=r),void 0!==i&&(e.scrollLeft=i)},createAnimatedStyle:function(e){return new L(e)},getComponentProps:function(e){e.scrollTop,e.scrollLeft;return m()(e,w)}}).animated},1663:function(e,t,n){"use strict";n.d(t,"a",(function(){return A})),n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return L})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return E})),n.d(t,"g",(function(){return w})),n.d(t,"h",(function(){return C}));var a=n(25),o=n.n(a),r=n(1021),i=n.n(r),c=n(27),l=n.n(c),s=n(29),u=n.n(s),d=n(19),b=n.n(d),f=n(23),p=n.n(f),h=n(28),m=n.n(h),v=n(1168),g=n(0);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=b()(e);if(t){var o=b()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return u()(this,n)}}var j=Symbol.for("Animated:node"),y=function(e){return e&&e[j]},C=function(e,t){return Object(v.h)(e,j,t)},w=function(e){return e&&e[j]&&e[j].getPayload()},x=function(){function e(){p()(this,e),C(this,this)}return m()(e,[{key:"getPayload",value:function(){return this.payload||[]}}]),e}(),k=function(e){l()(n,e);var t=O(n);function n(e){var a;return p()(this,n),(a=t.call(this))._value=e,a.done=!0,a.durationProgress=0,v.s.num(a._value)&&(a.lastPosition=a._value),a}return m()(n,[{key:"getPayload",value:function(){return[this]}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e,t){return v.s.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}},{key:"reset",value:function(){var e=this.done;this.done=!1,v.s.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(x),S=function(e){l()(n,e);var t=O(n);function n(e){var a;return p()(this,n),(a=t.call(this,0))._string=null,a._toString=Object(v.f)({output:[e,e]}),a}return m()(n,[{key:"getValue",value:function(){var e=this._string;return null==e?this._string=this._toString(this._value):e}},{key:"setValue",value:function(e){if(v.s.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!i()(b()(n.prototype),"setValue",this).call(this,e))return!1;this._string=null}return!0}},{key:"reset",value:function(e){e&&(this._toString=Object(v.f)({output:[this.getValue(),e]})),this._value=0,i()(b()(n.prototype),"reset",this).call(this)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(k),R={dependencies:null},A=function(e){l()(n,e);var t=O(n);function n(e){var a;return p()(this,n),(a=t.call(this)).source=e,a.setValue(e),a}return m()(n,[{key:"getValue",value:function(e){var t={};return Object(v.l)(this.source,(function(n,a){var o;(o=n)&&o[j]===o?t[a]=n.getValue(e):Object(v.r)(n)?t[a]=Object(v.q)(n):e||(t[a]=n)})),t}},{key:"setValue",value:function(e){this.source=e,this.payload=this._makePayload(e)}},{key:"reset",value:function(){this.payload&&Object(v.k)(this.payload,(function(e){return e.reset()}))}},{key:"_makePayload",value:function(e){if(e){var t=new Set;return Object(v.l)(e,this._addToPayload,t),Array.from(t)}}},{key:"_addToPayload",value:function(e){var t=this;R.dependencies&&Object(v.r)(e)&&R.dependencies.add(e);var n=w(e);n&&Object(v.k)(n,(function(e){return t.add(e)}))}}]),n}(x),I=function(e){l()(n,e);var t=O(n);function n(e){return p()(this,n),t.call(this,e)}return m()(n,[{key:"getValue",value:function(){return this.source.map((function(e){return e.getValue()}))}},{key:"setValue",value:function(e){var t=this.getPayload();return e.length==t.length?t.some((function(t,n){return t.setValue(e[n])})):(i()(b()(n.prototype),"setValue",this).call(this,e.map(T)),!0)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(A);function T(e){return(Object(v.t)(e)?S:k).create(e)}function E(e){var t=y(e);return t?t.constructor:v.s.arr(e)?I:Object(v.t)(e)?S:k}var N=function(e,t){var n=!v.s.fun(e)||e.prototype&&e.prototype.isReactComponent;return Object(g.forwardRef)((function(a,r){var i=Object(g.useRef)(null),c=n&&Object(g.useCallback)((function(e){i.current=function(e,t){e&&(v.s.fun(e)?e(t):e.current=t);return t}(r,e)}),[r]),l=function(e,t){var n=new Set;R.dependencies=n,e.style&&(e=Object.assign(Object.assign({},e),{},{style:t.createAnimatedStyle(e.style)}));return e=new A(e),R.dependencies=null,[e,n]}(a,t),s=o()(l,2),u=s[0],d=s[1],b=Object(v.z)(),f=function(){var e=i.current;n&&!e||!1===(!!e&&t.applyAnimatedValues(e,u.getValue(!0)))&&b()},p=new B(f,d),h=Object(g.useRef)();Object(v.A)((function(){var e=h.current;h.current=p,Object(v.k)(d,(function(e){return Object(v.c)(e,p)})),e&&(Object(v.k)(e.deps,(function(t){return Object(v.x)(t,e)})),v.w.cancel(e.update))})),Object(g.useEffect)(f,[]),Object(v.C)((function(){return function(){var e=h.current;Object(v.k)(e.deps,(function(t){return Object(v.x)(t,e)}))}}));var m=t.getComponentProps(u.getValue());return Object(g.createElement)(e,Object.assign(Object.assign({},m),{},{ref:c}))}))},B=function(){function e(t,n){p()(this,e),this.update=t,this.deps=n}return m()(e,[{key:"eventObserved",value:function(e){"change"==e.type&&v.w.write(this.update)}}]),e}();var z=Symbol.for("AnimatedComponent"),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.applyAnimatedValues,a=void 0===n?function(){return!1}:n,o=t.createAnimatedStyle,r=void 0===o?function(e){return new A(e)}:o,i=t.getComponentProps,c=void 0===i?function(e){return e}:i,l={applyAnimatedValues:a,createAnimatedStyle:r,getComponentProps:c},s=function e(t){var n=P(t)||"Anonymous";return(t=v.s.str(t)?e[t]||(e[t]=N(t,l)):t[z]||(t[z]=N(t,l))).displayName="Animated(".concat(n,")"),t};return Object(v.l)(e,(function(t,n){v.s.arr(e)&&(n=P(t)),s[n]=s(t)})),{animated:s}},P=function(e){return v.s.str(e)?e:e&&v.s.str(e.displayName)?e.displayName:v.s.fun(e)&&e.name||null}},1664:function(e,t){},1665:function(e,t){},1666:function(e,t,n){},1667:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n(2806),i=n(33),c=n(970),l=n(433),s=n(26);t.a=function(e){var t=e.className,n=e.onClick,u=e.html,d=e.sourceId,b=Object(o.useCallback)((function(e){s.a.trackEvent(e.target,{id:9857,action:"Click"}),n&&n(e)}),[n]),f=Object(o.useMemo)((function(){return Object(c.c)(u,d).catalog}),[u,d]);return null!=f&&f.length?Object(a.b)(l.a,{trackCardShow:!0,view:{id:9856},children:Object(a.b)(i.c,{preset:"plain",className:t,onClick:b,icon:r.a,label:"目录"})}):null}},1668:function(e,t,n){},1669:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(37),o=n.n(a),r=n(152),i=n.n(r),c=n(0),l=n(72),s=n(1005),u=n(1769),d=function(){var e=Object(l.i)().trackEvent;return Object(c.useCallback)(function(){var t=i()(o.a.mark((function t(n){var a,r,i,c,l,d,b,f,p,h,m,v,g,O,j;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.element,r=n.id,i=n.url,c=n.source,l=n.scenes,d=void 0===l?s.b.Content:l,b=n.utmInfo,f=void 0===b?{}:b,p=n.appSchemaIos,h=n.appSchemaAndroid,m=n.isOpenPopup,v=void 0!==m&&m,g=n.extraInfo,O=void 0===g?{}:g,j=n.onClick,Object(u.a)({element:a,id:r,url:i,source:c,scenes:d,utmInfo:f,appSchemaIos:p,appSchemaAndroid:h,isOpenPopup:v,extraInfo:O,trackEvent:e,onClick:j});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e])}},1728:function(e,t,n){"use strict";n.d(t,"a",(function(){return Fe})),n.d(t,"b",(function(){return mn}));var a=n(1),o=n(21),r=n(0),i=n.n(r),c=n(3),l=n.n(c),s=n(13),u=n.n(s),d=n(169),b=n(93),f=n(37),p=n.n(f),h=n(152),m=n.n(h),v=n(43),g=function(){var e=m()(p.a.mark((function e(t,n,a){var o,r,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(e){return{state:-1,message:e}},r=function(e){return{state:0,data:e}},t.Android&&t.Zhihu){e.next=4;break}return e.abrupt("return",o("「先用后付」激活仅支持安卓端内哦"));case 4:return e.prev=4,e.next=7,v.a.supportsAction("payment/activePayScore");case 7:if(!e.sent){e.next=17;break}return e.next=11,Object(v.a)("payment/activePayScore").dispatch({sku_id:n||"",type:a||0});case 11:if(!(null==(i=e.sent)?void 0:i.orderId)){e.next=14;break}return e.abrupt("return",r(i));case 14:throw new Error("激活获取订单号失败");case 17:return e.abrupt("return",o("当前客户端版本不支持，请升级后重试 ~"));case 18:e.next=23;break;case 20:return e.prev=20,e.t0=e.catch(4),e.abrupt("return",o(e.t0.errMsg||e.t0.message||"激活失败，请稍后重试"));case 23:case"end":return e.stop()}}),e,null,[[4,20]])})));return function(t,n,a){return e.apply(this,arguments)}}(),O=n(23),j=n.n(O),y=n(28),C=n.n(y),w=n(102),x=n.n(w),k=n(27),S=n.n(k),R=n(29),A=n.n(R),I=n(19),T=n.n(I),E=n(918),N=n(912),B=n(26),z=n(72),L=n(53),P=n(25),M=n.n(P),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){var n=e[t];return null!=n&&"".concat(t,"=").concat(encodeURIComponent(n))})).filter(Boolean).join("&")},D=function(e){if(!e)return{};var t=e.match(/\?([^#]+)/)||[],n=M()(t,2)[1];return n?n.split("&").reduce((function(e,t){var n=t.split("="),a=M()(n,2),o=a[0],r=a[1];return e[o]=decodeURIComponent(r),e}),{}):{}},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=_(Object.assign(Object.assign({},D(e)),t));return n?/\?([^#]+)/.test(e)?e.replace(/\?([^#]+)/,"?".concat(n)):/(#[\w]+)$/.test(e)?e.replace(/(#[\w]+)$/,"?".concat(n,"$1")):"".concat(e,"?").concat(n):e};function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var o=T()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return A()(this,n)}}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){S()(n,e);var t=U(n);function n(e){var a;return j()(this,n),a=t.call(this,e),V(x()(a),"handleClick",(function(e,t){var n=a.props.onClick;B.a.trackEvent(a.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),"function"==typeof n&&n(a.node),a.unlisten=v.a.listen("base/viewDidAppear",(function(){var e=a.props.popupCallback;e&&e(),a.unlisten&&a.unlisten()}))})),V(x()(a),"handleQuery",(function(e){var t=a.props.extra,n=((void 0===t?{}:t)||{}).ua,o=void 0===n?{}:n;if((null==o?void 0:o.Mobile)&&!(null==o?void 0:o.Zhihu)){var r,i,c=Object(L.parse)(null===(r=window)||void 0===r||null===(i=r.location)||void 0===i?void 0:i.search.substring(1));if("svipgrowth"===(c||{}).utm_medium){var l=encodeURIComponent(Object(L.stringify)(c));a.setState({url:F(e,{growth_ref_url:l})})}}})),a.state={url:""},a}return C()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.btnInfo;if(t){var n=t.btnText,a=t.link;this.setState({url:a}),this.handleQuery(a),v.a.dispatch("vip/preloadVIPHybridPopup",{url:a}),Object(E.onViewedOnce)(this.node,(function(){B.a.trackCardShow(e.node,{id:4241,name:n},{link:{url:a,anchor:n}})}))}}},{key:"componentWillUnmount",value:function(){this.unlisten&&this.unlisten()}},{key:"render",value:function(){var e=this,t=this.props,n=t.btnInfo,a=t.zaInfo,o=void 0===a?{}:a,r=t.className,c=this.state.url;if(!n)return null;var l=n.btnText;return i.a.createElement("div",{className:u()("KfeCollection-PurchaseBtn",r)},i.a.createElement("div",{className:"KfeCollection-PurchaseBtn-mask"}),i.a.createElement(z.b,{block:"textLink",content:Object.assign({},o||{})},i.a.createElement(z.a,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:c}}},i.a.createElement("a",{className:"KfeCollection-PurchaseBtn-HybridLink",href:c,target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleClick(c,l)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},i.a.createElement("span",{className:"KfeCollection-PurchaseBtn-text"},l)," ",i.a.createElement(N.a,{className:"KfeCollection-PurchaseBtn-ArrowRight"})))))}}]),n}(i.a.Component);G.propTypes={popupCallback:l.a.func};var q=G,H=n(50),K=n(59),W=n.n(K),Z=n(963);function Q(e){var t=e.zaInfo,n=void 0===t?{}:t,a=e.btnInfo,o=void 0===a?{}:a,c=e.picsInfo,l=void 0===c?{}:c,s=e.className,d=e.onClick,b=e.popupCallback,f=e.theme,p=e.isMobile,h=e.extra,m=void 0===h?{}:h,g=o.btnText,O=o.link,j=Object(r.useState)(O),y=M()(j,2),C=y[0],w=y[1],x=l.pcPic,k=l.dayPic,S=l.nightPic,R=Object(r.useRef)(),A=(m||{}).ua,I=void 0===A?{}:A,T=Object(r.useMemo)((function(){return p?"dark"===f?S:k:x}),[p,f,x,S,k]),E=null;return Object(r.useEffect)((function(){if(p&&!(null==I?void 0:I.Zhihu)){var e,t,n=Object(L.parse)(null===(e=window)||void 0===e||null===(t=e.location)||void 0===t?void 0:t.search.substring(1));if("svipgrowth"===(n||{}).utm_medium){var a=encodeURIComponent(Object(L.stringify)(n));w(F(O,{growth_ref_url:a}))}}}),[p,null==I?void 0:I.Zhihu,O]),Object(r.useEffect)((function(){return function(){E&&E()}}),[E]),i.a.createElement("div",{className:u()("KfeCollection-VipBenefitsCard",s)},i.a.createElement(z.b,{block:"vipBenefitsCard",content:Object.assign(Object.assign({},n),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer})},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:C}}},i.a.createElement("a",{className:"KfeCollection-VipBenefitsCard-HybridLink",href:C,target:"_blank",rel:"noopener noreferrer",onClick:function(){B.a.trackEvent(R.current,{id:4240,action:"OpenUrl",name:g},{link:{url:C,anchor:g}}),"function"==typeof d&&d(R.current),E=v.a.listen("base/viewDidAppear",(function(){b&&b(),E&&E()}))},ref:R,"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[n]}})},T&&i.a.createElement("img",{className:"KfeCollection-VipBenefitsCard-pic",src:T})))))}Q.propTypes={zaInfo:l.a.object,btnInfo:l.a.object,popupCallback:l.a.func,onClick:l.a.func,className:l.a.string,theme:l.a.string.isRequired,isMobile:l.a.bool.isRequired,picsInfo:l.a.object.isRequired};var Y=Q,J=n(150);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var o=T()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return A()(this,n)}}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee="dark",te="light",ne=function(e){S()(n,e);var t=X(n);function n(e){var a;return j()(this,n),a=t.call(this,e),$(x()(a),"handleClick",(function(e,t){var n=a.props.onClick;B.a.trackEvent(a.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),n&&n({target:a.node})})),$(x()(a),"handleQuery",(function(e){var t=a.props.extra,n=((void 0===t?{}:t)||{}).ua,o=void 0===n?{}:n;if((null==o?void 0:o.Mobile)&&!(null==o?void 0:o.Zhihu)){var r,i,c=Object(L.parse)(null===(r=window)||void 0===r||null===(i=r.location)||void 0===i?void 0:i.search.substring(1));"svipgrowth"===(c||{}).utm_medium&&a.setState({url:F(e,c)})}})),a.state={url:""},a}return C()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.goodsCard.body.link;this.setState({url:t}),Object(E.onViewedOnce)(this.node,(function(){B.a.trackCardShow(e.node,{id:4241,name:"课程"},{link:{url:t,anchor:"课程"}})})),this.handleQuery(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,a=t.zaInfo,o=void 0===a?{}:a,r=t.goodsCard,c=t.className,l=n===ee,s=this.state.url,d=r.header,b=d.title,f=d.subTitle,p=r.body,h=p.title,m=p.cover,v=p.coverLabel,g=p.desc,O=p.label,j=p.vipNote,y=r.catalog;return i.a.createElement(i.a.Fragment,null,i.a.createElement("section",{className:u()("KfeCollection-GoodsCardV2",c),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},i.a.createElement("h1",{className:"KfeCollection-GoodsCardV2-header"},"".concat(b).concat(f?" · ".concat(f):"")),i.a.createElement(z.b,{content:Object.assign(Object.assign({},o),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"oldSkuCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:s}}},i.a.createElement("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV2-content",onClick:function(){return e.handleClick(s,h)},ref:function(t){return e.node=t}},i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover"},i.a.createElement("img",{className:u()("KfeCollection-GoodsCardV2-cover-img",{"KfeCollection-GoodsCardV2-cover-img--dark":l}),src:Object(J.imgUrl)(m,{size:"200x0"})}),i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover-label"},v)),i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-detail"},i.a.createElement("div",null,i.a.createElement("h2",{className:"KfeCollection-GoodsCardV2-detail-title"},h),g&&i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-desc"},g),i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-label"},O)),i.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-vipNote",dangerouslySetInnerHTML:{__html:j}}))))),y&&y.length>0&&i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalog"},"章节目录",i.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalogSectionList"},y.map((function(e){var t=e.manuscriptUrl,n=e.sectionId,a=e.title;return i.a.createElement(z.a,{zaType:"Text",key:n,zaBlock:"catalog",extra:{link:{url:t}},zaAction:"OpenUrl"},i.a.createElement("a",{className:"KfeCollection-GoodsCardV2-catalogSectionItem",href:t,target:"_blank",rel:"noopener noreferrer",key:n,"data-za-detail-view-id":7500,"data-za-extra":JSON.stringify({button:{text:a}})},a,i.a.createElement(N.a,{className:"KfeCollection-GoodsCardV2-catalogSectionItemIcon"})))}))))))}}]),n}(i.a.Component);$(ne,"propTypes",{theme:l.a.oneOf([ee,te]),onClick:l.a.func,extra:l.a.object}),$(ne,"defaultProps",{theme:te});var ae=ne,oe=n(33),re=n(2805),ie=function(e){return-1===e.indexOf("?")?"".concat(e,"?entry=qa"):"".concat(e,"&entry=qa")};function ce(e){var t=e.header,n=void 0===t?{}:t,a=e.onClick,o=n.title,r=n.subTitle,c=n.link;return i.a.createElement("a",{href:ie(c),target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV3-header",onClick:function(e){return a&&a(e)}},i.a.createElement("div",{className:"KfeCollection-GoodsCardV3-headerTitle"},o),i.a.createElement("div",{className:"KfeCollection-GoodsCardV3-headerSubTitle"},i.a.createElement("div",null,r),i.a.createElement(re.a,{className:"KfeCollection-GoodsCardV3-headerIcon"})))}var le=function(e){var t=Object(r.useRef)(),n=e.className,a=e.zaInfo,o=void 0===a?{}:a,c=e.goodsCard,l=e.shelvesInfo,s=e.onBookshelfButtonClick,d=void 0===s?W.a:s,b=e.theme,f=void 0===b?"light":b,p=e.onClick,h=c.header,m=c.body,v=c.body,g=v.title,O=v.cover,j=v.coverLabel,y=v.link,C=v.desc,w=v.label,x=v.vipNote,k=v.icons,S=v.heatNote,R=Object(z.i)().trackEvent;Object(r.useEffect)((function(){Object(E.onViewedOnce)(t.current,(function(){B.a.trackCardShow(t.current,{id:8467,name:m.title},{button:{text:h.title}})}))}),[m,h]);var A=Object(r.useCallback)((function(e){B.a.trackEvent(e.target,{id:8468,action:"OpenUrl",name:m.title},{link:{url:h.link},button:{text:h.title}}),R({action:"OpenUrl",eventType:"Click",elementLocation:{text:h.title,block:{blockText:"newSkuCardHeader"},type:"Button",content:{type:Z.e.Answer,subType:Z.e.PaidAnswer}}},{link:{url:h.link}})}),[m,h,R]),I=Object(r.useCallback)((function(e){B.a.trackEvent(e.target,{id:8469,action:"OpenUrl",name:m.title},{link:{url:m.link},button:{text:h.title}}),p&&p(e)}),[m,h,p]),T=Object(r.useCallback)((function(e){var t=(null==l?void 0:l.whetherInShelf)?"去书架查看":"加入书架",n=(null==l?void 0:l.whetherInShelf)?"OpenUrl":"Collect",a={url:m.link};B.a.trackEvent(e.target,{id:8294,action:"OpenUrl",name:m.title},{link:a,button:{text:t}}),R({action:n,eventType:"Click",elementLocation:{type:"Button",text:t}},(null==l?void 0:l.whetherInShelf)?{link:{url:"https://www.zhihu.com/xen/market/vip/vip-recommend"}}:null),d(e)}),[m,d,l,R]);return i.a.createElement("section",{className:u()("KfeCollection-GoodsCardV3",n),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},i.a.createElement(ce,{header:h,onClick:A}),i.a.createElement(z.b,{content:Object.assign(Object.assign({},o),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"newSkuCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:y}}},i.a.createElement("a",{href:ie(y),target:"_blank",rel:"noopener noreferrer",className:u()("KfeCollection-GoodsCardV3-content","KfeCollection-GoodsCardV3-content--topHeader"),onClick:I,ref:t},i.a.createElement("div",{className:"KfeCollection-GoodsCardV3-cover"},i.a.createElement("img",{className:"KfeCollection-GoodsCardV3-coverVip",src:"light"===f?null==k?void 0:k.leftTopDayIcon:null==k?void 0:k.leftTopNightIcon,alt:""}),i.a.createElement("img",{className:u()("KfeCollection-GoodsCardV3-coverImage"),src:Object(J.imgUrl)(O,{size:"200x0"})}),i.a.createElement("div",{className:"KfeCollection-GoodsCardV3-coverLabel"},j)),i.a.createElement("div",{className:"KfeCollection-GoodsCardV3-detail"},g&&i.a.createElement("h2",{className:"KfeCollection-GoodsCardV3-detailTitle"},g),C&&i.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailDescription"},C),w&&i.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailLabel"},w),S?i.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailHeatNote"},S):x&&i.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailVipNote",dangerouslySetInnerHTML:{__html:x}}),l&&i.a.createElement(oe.c,{className:"KfeCollection-GoodsCardV3-bookshelfButton",preset:"plain",color:"grey",onClick:T},l.whetherInShelf?"去书架查看":"加入书架",i.a.createElement(N.a,{text:!0,center:!0})))))))},se=function(e){return e?-1===e.indexOf("?")?"".concat(e,"?entry=qa"):"".concat(e,"&entry=qa"):""};var ue=function(e){var t=e.className,n=e.nextSectionInfo,a=e.zaInfo,o=void 0===a?{}:a,c=e.theme,l=void 0===c?"light":c,s=n.title,b=n.content,f=n.url,p=n.skuUrl,h=n.voteNum,m=n.isShowVote,v=n.trackNum,g=n.skuName,O="dark"===l,j=Object(z.i)().trackEvent,y=se(f),C=Object(r.useRef)(),w=Object(r.useState)(!1),x=M()(w,2),k=x[0],S=x[1],R=Object(d.b)(),A=!s||!f||0===v;Object(r.useEffect)((function(){if(C.current&&b){var e=C.current.clientWidth,t=document.createElement("p");t.style="visibility:hidden;position:absolute;left:-9999px;top:-9999px;width:".concat(e,"px;line-height:21px;font-size:13px;"),t.innerText=b.replace(/[\r\n]/g,""),document.body.appendChild(t);var n=t.clientHeight>63;S(n),document.body.removeChild(t)}}),[C,b]);var I=Object(r.useCallback)((function(){j({action:"OpenUrl",eventType:"Click",elementLocation:{text:s,block:{blockText:"StoryCardTitle"},type:"Button",content:{type:Z.e.Answer,subType:Z.e.PaidAnswer}}},{link:{url:f}})}),[s,j,f]),T=Object(r.useCallback)((function(){j({action:"OpenUrl",eventType:"Click",elementLocation:{block:{blockText:"StoryCardButton"},type:"Button",content:{type:Z.e.Answer,subType:Z.e.PaidAnswer}}},{link:{url:p}})}),[p,j]);return i.a.createElement("section",{className:u()("KfeCollection-GoodsCardV4",{"KfeCollection-GoodsCardV4-dark":O},t),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-guide"},i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideBefore"},"来自盐选专栏"),i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideTitle"},"《".concat(g)),i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-guideAfter"},"》")),A?null:i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-wrapper"},i.a.createElement("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV4-header",onClick:I},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-title"},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-titleText"},"继续阅读下一篇：".concat(s)),i.a.createElement(re.a,{className:"KfeCollection-GoodsCardV4-headerIcon"})),i.a.createElement("img",{className:"KfeCollection-GoodsCardV4-vipIcon",src:"https://pic2.zhimg.com/v2-d296124c7c5db450cd7cb5d567afd0f0.png"})),i.a.createElement(z.b,{content:Object.assign(Object.assign({},o),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"StoryCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:f}}},i.a.createElement("a",{href:y,target:"_blank",rel:"noopener noreferrer"},b?i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-contentWrapper".concat(R.iOS?" KfeCollection-GoodsCardV4-iosContent":"")},i.a.createElement("p",{className:"KfeCollection-GoodsCardV4-content",ref:C},b),k&&m&&i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-endorse"},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-mask"}),i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-ellipsis"},"..."),i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-endorseText"},h))):null))),i.a.createElement("a",{className:"KfeCollection-GoodsCardV4-bottom",target:"_blank",rel:"noopener noreferrer",href:se(p),onClick:T},i.a.createElement("div",{className:"KfeCollection-GoodsCardV4-bottomText"},"查看本专栏全部",i.a.createElement("span",{className:"KfeCollection-GoodsCardV4-num"},v),"篇",i.a.createElement(N.a,{className:"KfeCollection-GoodsCardV4-arrowRight",text:!0,center:!0})))))},de=n(889);function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var o=T()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return A()(this,n)}}var fe,pe,he,me=function(e){S()(n,e);var t=be(n);function n(){return j()(this,n),t.apply(this,arguments)}return C()(n,[{key:"render",value:function(){var e=this.props,t=e.total,n=e.value,a=Math.floor(Math.round(2*n)/2),o=Math.round(2*n)%2,r=t-a-o;return i.a.createElement("div",{className:"KfeCollection-Rating"},Array.from({length:a}).map((function(e,t){return i.a.createElement("div",{className:"KfeCollection-Rating-star",key:"full-".concat(t)},i.a.createElement(de.a,null))})),Boolean(o)&&i.a.createElement("div",{className:"KfeCollection-Rating-star KfeCollection-Rating-star--half",key:"half"},i.a.createElement(de.a,null),i.a.createElement(de.a,null)),Array.from({length:r}).map((function(e,t){return i.a.createElement("div",{className:"KfeCollection-Rating-star KfeCollection-Rating-star--empty",key:"empty-".concat(t)},i.a.createElement(de.a,null))})))}}]),n}(i.a.Component);he={value:5,total:5},(pe="defaultProps")in(fe=me)?Object.defineProperty(fe,pe,{value:he,enumerable:!0,configurable:!0,writable:!0}):fe[pe]=he;var ve=me,ge=n(1657),Oe=["Live","RemixAlbum","RemixInstabook"],je={Live:"Live 讲座","课程":"盐选专栏"};var ye=function(e){var t=e.goodsCard,n=e.zaInfo,a=void 0===n?{}:n,o=e.isMobile,c=e.theme,l=void 0===c?"light":c,s=e.resourceType,u=t.header,b=void 0===u?{}:u,f=t.body,p=void 0===f?{}:f,h=b.skuTitle,m=b.brandImage,v=p.title,g=p.coverLabel,O=p.link,j=p.activeLink,y=p.vipNote,C=p.icons,w=p.cover,x=p.introduce,k=p.score,S=p.activeText,R=p.contentType,A=Object(d.b)(),I=!o&&Oe.includes(R)?O:j,T=Object(r.useCallback)((function(){Object(ge.a)(se(I),A)}),[I,A]),E=function(){var e=C||{},t=e.centerIcon,n=e.leftTopDayIcon,a=e.leftTopNightIcon;return i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentWrapper"},w&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentLeft"},n&&a&&i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverVip",src:"light"===l?n:a}),i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverImg",src:w}),t&&i.a.createElement("img",{className:"KfeCollection-GoodsCardNew-coverBtn",src:t}),g&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-coverLabel"},je[g]||g)),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentRight"},i.a.createElement("div",null,v&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentTitle"},v),k?i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentStar"},i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-score"},k),i.a.createElement(ve,{value:+k/2})):x&&x.length?i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentIntro"},x.map((function(e){return i.a.createElement("div",{key:e,className:"KfeCollection-GoodsCardNew-contentIntroItem"},e)}))):null),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-contentBottom"},y?i.a.createElement("p",{className:"KfeCollection-GoodsCardNew-vipNote",dangerouslySetInnerHTML:{__html:y}}):i.a.createElement("div",null),S&&i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-readBtn"},i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-readBtnText"},S),i.a.createElement(N.a,{className:"KfeCollection-GoodsCardNew-arrowRight",text:!0,center:!0})))))};return i.a.createElement("section",{className:"KfeCollection-GoodsCardNew","data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-guide"},i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-guideBefore"},"以上回答来自"),m&&i.a.createElement("span",{className:"KfeCollection-GoodsCardNew-brandImg"},"「",m,"」"),g&&i.a.createElement("span",null,g)),i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-wrapper"},i.a.createElement(z.b,{content:Object.assign(Object.assign({},a),{},{type:Z.e.Answer,subType:Z.e.PaidAnswer}),block:"".concat(s,"_card")},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:I}}},i.a.createElement("a",{onClick:T,rel:"noopener noreferrer"},i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-header"},i.a.createElement("div",{className:"KfeCollection-GoodsCardNew-headerTitle"},h),i.a.createElement(re.a,{className:"KfeCollection-GoodsCardNew-headerIcon"})),E())))))};function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var o=T()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return A()(this,n)}}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe=function(e){S()(n,e);var t=Ce(n);function n(){var e;j()(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),we(x()(e),"handleObserve",(function(t){var n=e.props.logPaidAnswerProgress;t.forEach((function(t){if(0!==t.intersectionRatio){var a=t.target;e.observer.unobserve(a),n&&n("card")}}))})),we(x()(e),"renderVipCard",(function(){var t=e.props,n=t.hasPurchased,a=t.result,o=void 0===a?{}:a,r=t.theme,c=t.isMobile,l=t.onBookshelfButtonClick,s=void 0===l?W.a:l,u=o.zaInfo,d=o.className,b=o.nextSectionInfo,f=o.goodsCard,p=o.abParam,h=o.resourceType,m=o.shelvesInfo;return b?i.a.createElement(ue,{nextSectionInfo:b,zaInfo:u,theme:r,className:d}):f?"1"===(null==p?void 0:p.storyCard)?i.a.createElement(ye,{isMobile:c,goodsCard:f,zaInfo:u,theme:r,resourceType:h}):i.a.createElement(le,{goodsCard:f,zaInfo:u,hasPurchased:n,shelvesInfo:n?m:null,onBookshelfButtonClick:s,theme:r,className:d}):null})),e}return C()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.hasPurchased,a=t.logPaidAnswerProgress;n&&a&&"undefined"!=typeof window&&window.IntersectionObserver&&(this.target=Object(H.findDOMNode)(this),this.observer=new window.IntersectionObserver(this.handleObserve,{threshold:[.1]}),setTimeout((function(){e.observer.observe(e.target)})))}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.unobserve(this.target)}},{key:"render",value:function(){var e=this.props,t=e.hasPurchased,n=e.result,a=void 0===n?{}:n,o=e.theme,r=e.className,c=e.isMobile,l=e.logPaidAnswerProgress,s=e.extra,u=void 0===s?{}:s,d=a.goodsCard,b=a.zaInfo,f=a.btnInfo,p=a.abParam,h=a.benefitsPics,m=a.popupCallback,v="1"===(null==p?void 0:p.benefitsPicsShow);return t?this.renderVipCard():v?i.a.createElement(Y,{btnInfo:f,zaInfo:b||{},picsInfo:h||{},popupCallback:m,theme:o,isMobile:c||!1,onClick:l,extra:u}):d?i.a.createElement(ae,{goodsCard:d,zaInfo:b,className:r,extra:u}):null}}]),n}(i.a.Component);we(xe,"propTypes",{result:l.a.object.isRequired,theme:l.a.string,hasPurchased:l.a.bool,onBookshelfButtonClick:l.a.func,logPaidAnswerProgress:l.a.func,extra:l.a.object}),we(xe,"defaultProps",{result:{goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}}});var ke=xe,Se=n(903);n(132);function Re(e){return!e&&0!==e}var Ae={yellow:{day:"https://pic1.zhimg.com/v2-74a907bc68ec906c4cbe6fbcd7b382f1.png",night:"https://pic1.zhimg.com/v2-f6840db8368fe995a6a81b20866c90e8.png"},blue:{day:"https://pic1.zhimg.com/v2-176249162145d8ec58435bfab44d2d6e.png",night:"https://pic3.zhimg.com/v2-ae3c36cfe91b5ce4faf4908a551413a3.png"}};var Ie=function(e){var t=e.result,n=void 0===t?{}:t,a=e.isDarkMode,o=n.paidConsult,r=n.zaInfo;if(!o)return null;var c,l,s=o.userId,u=o.consultUrl,d=o.name,b=o.avatarPath,f=o.description,p=o.descriptionType,h=o.answerCount,m=o.averageScore;return i.a.createElement("div",{className:"KfeCollection-PaidConsultCard"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Header"},"向作者咨询"),i.a.createElement(z.b,{content:Object.assign(Object.assign({},r),{},{id:s,type:Z.e.Conversation}),block:"PaidConsultCard"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:u}}},i.a.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},(l=null,3!==p&&(l=1===p?Ae.yellow:Ae.blue),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-CardWrapper"},i.a.createElement("img",{className:"KfeCollection-PaidConsultCard-Avatar",src:b}),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Right"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-NameWrapper"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Name"},d),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Action"},"去咨询",i.a.createElement(N.a,{className:"KfeCollection-PaidConsultCard-ArrowRight",text:!0,center:!0}))),i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-SubInfo"},i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-ConsultTime"},i.a.createElement(Se.a,{className:"KfeCollection-PaidConsultCard-ConsultTimeIcon",text:!0,center:!0}),i.a.createElement("div",null,h," 次咨询")),!Re(m)&&i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-ConsultScore"},i.a.createElement(de.a,{className:"KfeCollection-PaidConsultCard-ConsultScoreIcon",text:!0,center:!0}),i.a.createElement("div",null,Re(c=m)?"":-1===c.toString().indexOf(".")?c.toFixed(1):c))),f&&i.a.createElement("div",{className:"KfeCollection-PaidConsultCard-Info"},l&&i.a.createElement("img",{className:"KfeCollection-PaidConsultCard-InfoIcon",src:a?l.night:l.day}),i.a.createElement("p",null,f)))))))))};function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var o=T()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return A()(this,n)}}var Ee=function(e){S()(n,e);var t=Te(n);function n(){return j()(this,n),t.apply(this,arguments)}return C()(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.url,a=e.zaInfo,o=void 0===a?{}:a;return t&&n?i.a.createElement("div",{className:"KfeCollection-TextLink"},i.a.createElement("div",{className:"KfeCollection-TextLink-mask"}),i.a.createElement(z.b,{block:"textLinkV2",content:Object.assign({},o||{})},i.a.createElement(z.a,{zaType:"Text",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:n}}},i.a.createElement("a",{className:"KfeCollection-TextLink-HybridLink",href:n,target:"_blank",rel:"noopener noreferrer","data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},i.a.createElement("span",{className:"KfeCollection-TextLink-text"},t)," ",i.a.createElement(N.a,{className:"KfeCollection-TextLink-ArrowRight"}))))):null}}]),n}(i.a.Component);Ee.propTypes={zaInfo:l.a.object,text:l.a.string.isRequired,url:l.a.string.isRequired};var Ne=Ee;function Be(e){var t=e.paidContent,n=void 0===t?{}:t,a=e.hasPurchased,o=e.className,c=e.popupCallback,l=e.onLogPaidAnswerProgress,s=e.handleBookshelfButtonClick,f=e.onPayScoreCallback,p=n.resourceType,h=n.btnInfo,m=n.zaInfo,v=n.advertorialInfo||{},O=v.text,j=v.url,y=Object(b.f)().isDarkMode,C=void 0!==y&&y,w=Object(d.b)(),x=Object(r.useRef)(null);return function(e,t,n,a,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{threshold:[.6]},c=Object(r.useRef)(!0),l=t&&e&&e.Zhihu&&e.Android&&"undefined"!=typeof window&&window.IntersectionObserver&&a&&a.current,s=Object(r.useCallback)((function(t){Array.isArray(t)&&t.length&&t[0].isIntersecting&&l&&c.current&&(c.current=!1,g(e,n,0).then((function(e){"function"==typeof o&&o(e)})))}),[o,l,n,e]);Object(r.useEffect)((function(){if(l){var e=new window.IntersectionObserver(s,i),t=a.current;return setTimeout((function(){e&&e.observe(t)}),0),function(){e.unobserve(t)}}}),[l,s,a,i])}(w,!a&&"function"==typeof f&&20!==p,n.id,x,(function(e){return f(e)})),20===p&&O&&j?i.a.createElement(Ne,{text:O,url:j}):i.a.createElement("div",{className:u()("KfeCollection-PaidAnswerFooter",o),ref:x},!a&&i.a.createElement(q,{btnInfo:h,zaInfo:m||{},popupCallback:c,extra:{ua:w},onClick:l}),i.a.createElement(ke,{isMobile:w.Mobile,extra:{ua:w},isDarkMode:C,result:n,hasPurchased:a,onBookshelfButtonClick:s,theme:C?"dark":"light",popupCallback:c,logPaidAnswerProgress:l}),i.a.createElement(Ie,{result:n,isDarkMode:C,extra:{ua:w}}))}Be.propTypes={paidContent:l.a.object.isRequired,hasPurchased:l.a.bool.isRequired,className:l.a.string,popupCallback:l.a.func,onLogPaidAnswerProgress:l.a.func,handleBookshelfButtonClick:l.a.func,onPayScoreCallback:l.a.func};var ze=Be,Le=n(438),Pe=n(89);function Me(e){var t=e.id,n=e.children,a=Object(r.useRef)(),i=Object(o.useDispatch)();return Object(r.useEffect)((function(){var e=a.current;if(t&&e){var n=e instanceof Element?e:Object(H.findDOMNode)(e);n&&Object(E.onViewedOnce)(n,(function(){return i(Object(Pe.y)(t))}))}}),[i,t]),Object(r.cloneElement)(n,{ref:a})}Me.propTypes={id:l.a.oneOfType([l.a.number,l.a.string]).isRequired};var _e=Object(Le.a)(null)(Me);function De(e){var t,n=e.answer,r=(Object(o.useSelector)((function(e){return Object(Pe.z)(e,null==n?void 0:n.id)}))||{}).result;if(!r)return null;var i=null==n||null===(t=n.paidInfo)||void 0===t?void 0:t.hasPurchased;return Object(a.c)(a.a,{children:[Object(a.b)(_e,{id:n.id,children:Object(a.b)("div",{})}),Object(a.b)(ze,{hasPurchased:i,paidContent:r})]})}var Fe=Object(Le.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(a.b)(De,{answer:t}):null}));function Ue(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ge=function(e){return function(e){if(!window)return null;try{var t=document.createElement("div");t.innerHTML=e;var n,a=Array.from(t.childNodes),o=M()(a,3),r=o[0].nodeValue,i=o[1],c=i.innerText,l=i.attributes,s=o[2].nodeValue,u={},d=Ue(l);try{for(d.s();!(n=d.n()).done;){var b=n.value;u[b.name]=b.value}}catch(e){d.e(e)}finally{d.f()}return r&&c&&s?{prefixText:r,content:c,status:s,linkInfo:{name:"a",attr:u}}:null}catch(e){return null}}(e)},qe=function(e){var t=e.content;t=void 0===t?[]:t;var n=M()(t,2),a=n[0],o=n[1],r=e.className,c=e.onClick;return i.a.createElement("div",{className:u()("KfeCollection-CertainEndEllipsis",r),onClick:c},i.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-start"},a),i.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-end"},o))},He=function(e){var t=e.contentName,n=e.fallbackContent,a=e.onClick,o=Object(r.useMemo)((function(){return Ge(t)}),[t]);if(null===o)return n;var c=o.prefixText,l=o.content,s=o.status,u=o.linkInfo,d=u.name,b=i.a.createElement(i.a.Fragment,null,c,i.a.createElement(d,u.attr,l.slice(0,-1))),f=i.a.createElement(i.a.Fragment,null,i.a.createElement(d,u.attr,l.slice(-1)),s);return i.a.createElement(qe,{onClick:a,content:[b,f],className:"KfeCollection-PaidContentNameCertainEndEllipsis"})};var Ke=function(e){var t=e.introCard,n=e.paidConsult,a=e.RichTextComponent,o=e.className,r=e.zaInfo,c=void 0===r?{}:r,l=e.handleTrack,s=e.extra,d=void 0===s?{}:s,b=t.statement,f=t.description,p=t.contentName,h=t.authorDesc,m=d.isNewStyle,v=d.isMobile,g=Object(z.i)().trackEvent,O=function(e,t){var n=e.target,a=e.target,o=a.text,r=a.href,i=5325===t?"userName":"bookTitle";"A"===a.tagName&&(B.a.trackEvent(n,{id:t,action:"OpenUrl"},{button:{text:o},link:{url:r}}),g({action:"OpenUrl",eventType:"Click",elementLocation:{type:"Text",block:{blockText:i}}},{link:{url:r}})),l&&l(e,r)},j=function(e){return m?"".concat(e,v?"-newStyle-mobile":"-newStyle-pc"):e};return i.a.createElement("section",{className:u()(j("KfeCollection-IntroCard"),o),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[c]}})},!m&&i.a.createElement(i.a.Fragment,null,!!b&&i.a.createElement("p",null,b),!!f&&i.a.createElement("p",null,f),(!!b||!!f)&&i.a.createElement("p",{className:"KfeCollection-IntroCard-spacing"})),i.a.createElement(He,{contentName:p,onClick:function(e){return O(e,5326)},fallbackContent:i.a.createElement("p",{onClick:function(e){return O(e,5326)},className:j("KfeCollection-IntroCard-contentName"),dangerouslySetInnerHTML:{__html:p}})}),a?i.a.createElement(a,{className:j("KfeCollection-IntroCard-authorDesc"),html:h,onClick:function(e){return O(e,5325)}}):i.a.createElement("p",{onClick:function(e){return O(e,5325)},className:j("KfeCollection-IntroCard-authorDesc"),dangerouslySetInnerHTML:{__html:h}}),n&&n.consultUrl&&i.a.createElement(z.b,{content:Object.assign(Object.assign({},c),{},{id:n.userId,type:Z.e.Conversation}),block:"PaidConsultTopText"},i.a.createElement(z.a,{zaType:"Card",shouldTrackShow:!0,zaAction:"OpenUrl",extra:{link:{url:n.consultUrl}}},i.a.createElement("div",{className:j("KfeCollection-IntroCard-paidConsult")},"作者已开通付费咨询，可向作者",i.a.createElement("a",{href:n.consultUrl,target:"_blank",rel:"noopener noreferrer"},"发起咨询")))))},We=n(1028),Ze=n(1253),Qe=function(e){return i.a.createElement(Ze.a,Object.assign({viewBox:"0 0 140 43"},e),i.a.createElement("defs",null,i.a.createElement("rect",{id:"zhimg_ic_primelabel_01@2x-a",width:"70",height:"30",x:"0",y:"0"})),i.a.createElement("g",{fillRule:"evenodd",transform:"translate(0 -6)"},i.a.createElement("path",{fillRule:"nonzero",d:"M80.0023638,2.63706979 L129.732029,30.638653 C135.976314,34.154746 139.822785,40.6523917 139.822785,47.6843672 L139.822785,103.687744 C139.822785,110.719509 135.976314,117.217365 129.732029,120.733248 L80.0023638,148.734831 C73.758079,152.250924 66.0649216,152.250924 59.8206368,148.734831 L10.0909714,120.733248 C3.84668657,117.217365 -7.10542736e-14,110.719509 -7.10542736e-14,103.687744 L-7.10542736e-14,47.6843672 C-7.10542736e-14,40.6523917 3.84668657,34.154746 10.0909714,30.638653 L59.8206368,2.63706979 C66.0649216,-0.879023264 73.758079,-0.879023264 80.0023638,2.63706979 Z M62.8214584,21.9369801 L62.4917192,22.1167713 L25.9257887,42.6512656 C21.4364336,45.1724346 18.6325361,49.7839786 18.5101354,54.8082708 L18.5059568,55.1514561 L18.5059568,96.2205991 C18.5059568,101.262635 21.2100909,105.930346 25.6223198,108.545528 L25.9257887,108.720635 L62.4917192,129.25513 C66.9737863,131.772206 72.4710741,131.832136 77.0014851,129.434921 L77.3312243,129.25513 L113.897155,108.720635 C118.38651,106.199617 121.190256,101.587929 121.31265,96.5637746 L121.316828,96.2205991 L121.316828,55.1514561 C121.316828,50.1092692 118.612846,45.4417025 114.200623,42.826383 L113.897155,42.6512656 L77.3312243,22.1167713 C72.8491571,19.5996952 67.3518694,19.5397648 62.8214584,21.9369801 Z M69.2442049,35.8512397 L88.2394468,68.1217272 L103.868354,54.7872625 L103.868354,94.6758324 C103.868354,97.7547043 101.333778,100.250689 98.2071383,100.250689 L40.2839921,100.24974 C37.1573717,100.249699 34.6227848,97.7537776 34.6227848,94.674925 L34.6227848,54.7872625 L50.2512033,68.1217272 L69.2442049,35.8512397 Z",mask:"url(#zhimg_ic_primelabel_01@2x-b)",opacity:".54"})))};Qe.defaultProps={name:"PrivilegeLabel"};var Ye=Qe,Je=function(e){var t=e.data,n=e.className,a=e.extra,o=t||{},r=o.vipText,c=o.worthText,l=o.cardColor,s=void 0===l?0:l,d=a||{},b=d.isNewStyle,f=d.isMobile,p=function(e){return b?"".concat(e,f?"-newStyle-mobile":"-newStyle-pc"):e};return 0===s?null:i.a.createElement("div",{className:u()(p("KfeCollection-Privilege"),n)},i.a.createElement(We.a,{className:p("KfeCollection-Privilege-vipIcon")}),i.a.createElement("div",{className:p("KfeCollection-Privilege-content")},i.a.createElement("span",{className:"KfeCollection-Privilege-vipText"},r),i.a.createElement("span",null," ".concat(c))),!b&&i.a.createElement(Ye,{className:"KfeCollection-Privilege-label"}))},Xe=function(e){var t=e.data,n=e.className,a=e.extra,o=t||{},r=o.worthText,c=o.cardColor,l=void 0===c?0:c,s=a||{},d=s.isNewStyle,b=s.isMobile;return 2!==l?null:i.a.createElement("div",{className:u()(d?b?"KfeCollection-OrdinaryLabel-newStyle-mobile":"KfeCollection-OrdinaryLabel-newStyle-pc":"KfeCollection-OrdinaryLabel",n)},i.a.createElement("div",{className:"KfeCollection-OrdinaryLabel-content"},r))},$e=n(34),et=n.n($e),tt=n(432),nt=n(1348),at=n(1579),ot=(n(2846),n(2845),n(2849),n(2838),n(890)),rt=n(2839),it=n(2840),ct=n(895),lt=n(2841),st=n(2842),ut=n(2843),dt=n(2181),bt=n(2844),ft=(n(1129),n(911),n(224)),pt=n(58),ht=n(90),mt=n.n(ht),vt=n(8),gt=["params","onRequestOpen","extra","as"],Ot=function(e){return/^(\w+:)?\/\//.test(e)?e:location.origin+e},jt=function(e,t){var n=t.params,a=t.onRequestOpen,o=Object(d.b)();return function(t){var r=e.href,i=e.onClick;if(i&&i(t),!t.defaultPrevented&&r){var c=function(e,t){if(!t)return e;var n=e.split("#"),a=M()(n,2),o=a[0],r=a[1],i=o+(o.includes("?")?"&":"?")+t;return r?i+"#"+r:i}(Ot(r),n);if((null==o?void 0:o.ZhihuHybrid)||(null==o?void 0:o.Zhihu))return t.preventDefault(),void v.a.dispatch("base/openURL",{url:c});(null==a?void 0:a({ua:o,url:c}))&&t.preventDefault()}}},yt=function(e,t){var n=t.extra;return{zaType:"Button",zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:Boolean(e),extra:mt()({link:{get url(){return Ot(e)}}},n)}},Ct=Object(r.forwardRef)((function(e,t){var n=e.params,a=e.onRequestOpen,o=e.extra,r=e.as,i=void 0===r?pt.Link:r,c=et()(e,gt);return Object(vt.g)(z.c,Object.assign({as:i},yt(c.href,{extra:o}),c,{ref:t,onClick:jt(c,{params:n,onRequestOpen:a})}))})),wt=n(40),xt=n(2286),kt=n(1205),St=n.n(kt),Rt=["onRef"];function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var o=T()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return A()(this,n)}}var It="top",Tt=Object.freeze({__proto__:null,LEFT:"left",RIGHT:"right",TOP:It,BOTTOM:"bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right",LEFT_TOP:"left-top",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_BOTTOM:"right-bottom"}),Et=[It,"bottom"],Nt=["left","right"];function Bt(e,t,n,a){var o,r,i,c,l,s=a.split("-"),u=M()(s,2),d=u[0],b=u[1],f=(r=(o=t).top,i=o.bottom,c=o.left,l=o.right,{top:Math.max(r,0),bottom:Math.min(Math.max(i,0),window.innerHeight),left:Math.max(c,0),right:Math.min(Math.max(l,0),window.innerWidth)}),p={},h={},m=d;if(Et.includes(d)){var v,g,O=f.right-n.width,j=f.left;if("left"===b?(v=e.left,g=j):"right"===b?(v=e.right-n.width,g=O):(v=e.left+e.width/2-n.width/2,g=j),h.left=O>j?v<j?j:v<O?v:O:g,e.width<=n.width){var y=e.left+e.width/2;p.left=y-h.left}else p.left=n.width/2;"bottom"===d&&e.bottom+n.height>f.bottom&&e.top-n.height>f.top&&(m=It),d===It&&e.bottom+n.height<f.bottom&&e.top-n.height<f.top&&(m="bottom");var C=m===It?[n.height,e.top-n.height]:[0,e.bottom],w=M()(C,2);p.top=w[0],h.top=w[1]}if(Nt.includes(d)){var x,k,S=f.bottom-n.height,R=f.top;if(b===It?(x=e.top,k=R):"bottom"===b?(x=e.bottom-n.height,k=S):(x=e.top+e.height/2-n.height/2,k=R),h.top=S>R?x<R?R:x<S?x:S:k,e.width<=n.width){var A=e.top+e.height/2;p.top=A-h.top}else p.top=n.height/2;"right"===d&&e.right+n.width>f.right&&e.left-n.width>f.left&&(m="left"),"left"===d&&e.right+n.width<f.right&&e.left-n.width<f.left&&(m="right");var I="left"===m?[n.width,e.left-n.width]:[0,e.right],T=M()(I,2);p.left=T[0],h.left=T[1]}return{arrowStyle:p,targetContainerStyle:h,placement:m}}var zt=function(e){return Object(vt.g)("svg",Object.assign({width:"26",height:"10",viewBox:"0 0 26 10"},e),Object(vt.g)("path",{d:"M0 0h26v1c-4.498 0-9 9-13 9S4.5 1 0 1V0z",fillRule:"evenodd"}))},Lt={top:{width:"32px",height:"16px",marginTop:"-5px",transform:"translate(-50%, 0)","&::after":{left:"50%",top:"-8px"}},bottom:{width:"32px",height:"16px",marginTop:"3px",transform:"translate(-50%, -100%) rotate(180deg)","&::after":{left:"50%",bottom:"-8px"}},left:{width:"16px",height:"32px",marginLeft:"-5px",transform:"translate(0, -50%) rotate(-90deg)","&::after":{left:"-8px",top:"50%"}},right:{width:"16px",height:"32px",marginLeft:"6px",transform:"translate(-100%, -50%) rotate(90deg)","&::after":{right:"-8px",top:"50%"}}},Pt={top:{marginTop:"-16px"},bottom:{marginTop:"16px"},left:{marginLeft:"-16px"},right:{marginRight:"16px"}},Mt={top:{transformOrigin:"bottom center",marginTop:"-8px"},bottom:{marginTop:"8px"},left:{transformOrigin:"right center",marginLeft:"-16px"},right:{marginLeft:"16px"}},_t=i.a.forwardRef((function(e,t){var n=e.withArrow,a=e.arrowStyle,o=e.placement,r=e.fixed,i=e.style,c=e.children,l=Object(b.f)();return Object(vt.g)("div",{key:"popoverContent",ref:t,css:Object(ft.a)({position:"absolute",background:l.colors.GBK99C,borderRadius:"4px",zIndex:203,boxShadow:"rgba(0, 0, 0, 0.16) 0 0 20px 0"},";label:PopoverContent;"),style:Object.assign(Object.assign(Object.assign(Object.assign({},Mt[o]),n&&Pt[o]),r&&{position:"fixed"}),i)},n&&Object(vt.g)(zt,{css:Object(ft.a)({position:"absolute",overflow:"hidden",pointerEvents:"none",fill:i.backgroundColor||l.colors.GBK99C,"&:after":{content:'""',position:"absolute",boxSizing:"border-box",width:"24px",height:"24px",margin:"-12px",fill:i.backgroundColor||l.colors.GBK99C,transform:"rotate(45deg)",pointerEvents:"auto"}},";label:PopoverContent;"),style:Object.assign(Object.assign({},Lt[o]),a)}),"function"==typeof c?c(e):c)})),Dt=Object(xt.animated)(_t),Ft=function(e){S()(n,e);var t=At(n);function n(e){var a;return j()(this,n),a=t.call(this,e),"undefined"!=typeof document&&(a.element=document.createElement("div")),a}return C()(n,[{key:"componentDidMount",value:function(){document.body.appendChild(this.element)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.element),delete this.element}},{key:"render",value:function(){if(this.element){var e=this.props,t=e.onRef,n=et()(e,Rt);return Object(H.createPortal)(Object(vt.g)("div",Object.assign({ref:t},n)),this.element)}return null}}]),n}(r.Component),Ut=function(e){var t,n,a=e.renderChildren,o=e.children,i=e.transitionProps,c=e.springProps,l=e.onAfterEnter,s=e.onAfterLeave,u=Object(r.useState)(!1),d=M()(u,2),b=d[0],f=d[1],p=!!o,h=Object(xt.useSpring)((function(){return c.from})),m=M()(h,2),v=m[0],g=m[1],O=(t=o,n=Object(r.useRef)(),Object(r.useEffect)((function(){t&&(n.current=t)})),n.current),j=Object(xt.useTransition)(p,Object.assign(Object.assign({},i),{},{onRest:function(e,t){e.finished&&t.item&&2===e.value.p&&(s&&s(),f(!1))}}));return Object(r.useEffect)((function(){p?(f(!0),g(c.enter)):g(c.leave)}),[p]),Object(r.useLayoutEffect)((function(){b&&l&&l()}),[b]),b?Object(vt.g)(Ft,null,j((function(e,t){return t?a({transitionStyles:e,springStyles:v,item:p?o:O}):null}))):null},Vt=St()(.25,.1,.25,1),Gt={from:{opacity:0},enter:{opacity:1,config:{duration:200,easing:Vt}},leave:{opacity:0,config:{duration:300,easing:Vt}}},qt=function(e){var t=e.isOpen,n=e.arrowed,a=e.fixed,o=e.globalClose,i=e.target,c=e.container,l=e.boundary,s=e.placement,u=e.listenResize,b=e.customStyle,f=e.backgroundColor,p=e.transitionProps,h=e.springProps,m=e.customPosition,v=e.onClose,g=e.onAfterLeave,O=e.children,j=Object(r.useState)(s),y=M()(j,2),C=y[0],w=y[1],x=Object(r.useState)({}),k=M()(x,2),S=k[0],R=k[1],A=Object(r.useState)({}),I=M()(A,2),T=I[0],E=I[1],N=Object(r.useRef)(null),B=Object(d.b)(),z=Object(wt.d)((function(){var e=function(e){var t=e.target,n=e.container,a=e.placement,o=e.fixed,r=e.boundary,i=e.element,c=e.customPosition;if(i&&t){var l=t instanceof HTMLElement?t:Object(H.findDOMNode)(t),s=document.body;n&&(s=n instanceof HTMLElement?n:Object(H.findDOMNode)(n));var u=(c||Bt)(l.getBoundingClientRect(),function(){var e,t,n,a,o,r,i,c,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0,u=l.getElement,d=l.padding,b=void 0===d?0:d,f=l.getBoundaryInfo;if("object"==typeof b&&(o=b.top||0,r=b.bottom||0,i=b.left||0,c=b.right||0),f)return f();var p={};u?p=u():s&&(p=s);var h=p.getBoundingClientRect(),m=h.top,v=h.right,g=h.bottom,O=h.left;return{top:m+(null!==(e=o)&&void 0!==e?e:b),right:v-(null!==(t=c)&&void 0!==t?t:b),bottom:g-(null!==(n=r)&&void 0!==n?n:b),left:O+(null!==(a=i)&&void 0!==a?a:b)}}(r,s),i.getBoundingClientRect(),a);return o||(u.targetContainerStyle.left+=window.pageXOffset,u.targetContainerStyle.top+=window.pageYOffset),u}}({target:i,container:c,placement:C,fixed:a,boundary:l,element:N.current,customPosition:m});if(e){var t=e.placement,n=e.targetContainerStyle,o=e.arrowStyle;w(t),R(n),E(o)}}));Object(r.useEffect)((function(){t&&z()}),[t]),Object(r.useLayoutEffect)((function(){if(u)return window.addEventListener("resize",z),function(){window.removeEventListener("resize",z)}}),[]);var L=Object(wt.d)((function(e){var n;t&&(!document.body.contains(e.target)||(null==N||null===(n=N.current)||void 0===n?void 0:n.contains(e.target))||(null==i?void 0:i.contains(e.target))||v&&v())}));Object(r.useEffect)((function(){return o&&(B.Mobile?document.addEventListener("touchstart",L):document.addEventListener("click",L)),o&&function(){B.Mobile?document.removeEventListener("touchstart",L):document.removeEventListener("click",L)}}),[o,B,L]);var P=Object(wt.d)((function(){w(s),g()})),_=Object(r.useCallback)((function(e){var t=e.transitionStyles,o=e.springStyles,r=e.item;return Object(vt.g)(Dt,{key:"popover",ref:N,withArrow:n,arrowStyle:T,placement:C,fixed:a,style:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},S),t),o),"function"==typeof b?b(C):b),f&&{backgroundColor:f}),onMounted:z},r)}),[n,T,C,a,S,b,f,z]);return Object(vt.g)(Ut,{renderChildren:_,transitionProps:p,springProps:h,onAfterEnter:z,onAfterLeave:P},t&&O)};qt.propTypes={isOpen:l.a.bool,arrowed:l.a.bool,fixed:l.a.bool,globalClose:l.a.bool,placement:l.a.oneOf(Object.values(Tt)),listenResize:l.a.bool,container:l.a.object,boundary:l.a.shape({getElement:l.a.func,padding:l.a.oneOfType([l.a.number,l.a.object]),getBoundaryInfo:l.a.func}),transitionProps:l.a.shape({from:l.a.object.isRequired,enter:l.a.object.isRequired,leave:l.a.object.isRequired,config:l.a.oneOfType([l.a.object,l.a.func])}),springProps:l.a.shape({from:l.a.object.isRequired,enter:l.a.object.isRequired,leave:l.a.object.isRequired}),customStyle:l.a.oneOfType([l.a.object,l.a.func]),backgroundColor:l.a.string,customPosition:l.a.func,onClose:l.a.func,onAfterLeave:l.a.func},qt.defaultProps={isOpen:!1,arrowed:!0,fixed:!1,globalClose:!1,placement:"top",listenResize:!0,transitionProps:{from:{transform:"translateY(10px)",p:1},enter:{transform:"translateY(0px)",p:0},leave:{transform:"translateY(0px)",p:2},config:function(e){return e?{tension:380,friction:20}:{duration:300}}},springProps:Gt,onClose:l.a.func,onAfterLeave:W.a};var Ht=qt,Kt=["color","iconUrl","icon","name","subText","linkText","link","expandable","isExpanded","showDeleteButton","onDelete","onClick","style","css"],Wt=["children","placement","onClick","onPopoverClosed"],Zt=["answerCollapsed","answerAbnormal","commercial","thanksForInviting","positive","bluebook","annotation","disclaimer","adPromotion","campaign","limit"],Qt={GOLDEN:{bg:"GYL02A",color:"GYL02A",colorNoAlpha:!0},BLUE:{bg:"GBL01A",color:"GBL07A"},PURPLE:{bg:"GRD07A",color:"GRD07A"},GREY:{bg:"GBK10A",color:"GBK06A",bgNoAlpha:!0,colorNoAlpha:!0}},Yt=function(e){var t=e.bg,n=e.color,a=e.bgNoAlpha,o=e.colorNoAlpha,r=Object(b.f)(),i=r.colors,c=r.colorMod;return{bg:a?i[t]:c(i[t]).alpha(.08),color:o?i[n]:c(i[n]).alpha(.72)}};var Jt={name:"2q0wp1-Label",styles:"flex:0 0 auto;;label:Label;"},Xt={name:"2q0wp1-Label",styles:"flex:0 0 auto;;label:Label;"},$t={name:"18mqqn8-Label",styles:"flex:0 0 auto;cursor:pointer;;label:Label;"},en={name:"zzd7cz-Label",styles:"margin:0 -4px;flex:0 0 auto;;label:Label;"},tn=i.a.forwardRef((function(e,t){var n=e.color,a=void 0===n?Qt.BLUE:n,o=e.iconUrl,r=e.icon,i=e.name,c=e.subText,l=e.linkText,s=e.link,u=e.expandable,f=e.isExpanded,p=e.showDeleteButton,h=e.onDelete,m=e.onClick,v=e.style,g=e.css,O=et()(e,Kt),j=Object(d.b)().Mobile,y=Object(b.f)().fontWeights,C=Yt(a),w=C.bg,x=C.color,k=s&&!u?Ct:"div",S=null,R=null;return p?R=tt.a:u?S=f?nt.a:at.a:s&&(S=N.a),Object(vt.g)(k,Object.assign({ref:t,css:Object(ft.a)(Object.assign({flex:"0 1 auto",display:"flex",alignItems:"center",justifyContent:"flex-start",background:w,padding:"0 8px",height:j?28:30,borderRadius:j?14:15,textDecoration:"none",fontSize:j?13:14,lineHeight:j?"16px":"18px",color:x,overflow:"hidden"},g),";label:Label;")},s&&{href:s},{style:Object.assign({cursor:S?"pointer":"default"},v),onClick:m},O),o?Object(vt.g)("img",{src:Object(J.imgUrl)(o,"m"),height:j?16:19,width:j?16:19,alt:"",css:Jt}):Boolean(r)&&Object(vt.g)(r,{fill:x,size:j?17:20,css:Xt}),Object(vt.g)(pt.Flex,{overflow:"hidden",flex:"0 1 auto",mx:"4px"},Object(vt.g)(pt.Text,{flexShrink:0,fontWeight:y.bold,mt:j?"1px":0},i)),Boolean(c||l)&&Object(vt.g)(pt.Text,{flex:"0 0 auto",display:"flex",alignItems:"center",mt:j?"1px":0,mr:"4px"},c||l),Boolean(R)&&Object(vt.g)(R,{fill:x,size:18,onClick:h,css:$t}),Boolean(S)&&Object(vt.g)(S,{fill:x,size:j?23:26,css:en}))}));tn.displayName="Label";ot.a,rt.a,it.a,ot.a,ct.a,ct.a,lt.a,st.a,ut.a,dt.a,dt.a,dt.a,dt.a,dt.a,bt.a,dt.a;var nn={online_roundtable:"圆桌收录",relevant:"亲自答",editor_recommendation:"编辑推荐",roundtable:"圆桌收录",special:"专题收录",raise_hand:"举手行动",weekly:"周刊收录",daily:"日报收录",professional:"专业",zhizhi_plan_recommend:"致知计划",zhizhi_plan_edu_recommend:"致知计划",zhizhi_plan_baby_recommend:"致知计划",zhizhi_plan_acg_recommend:"致知计划",zhizhi_plan_outing_recommend:"致知计划",zhizhi_plan_rumour_deny:"专业辟谣",zhizhi_plan:"致知计划",science_seeking_truth_recommend:"科学求真"},an=(Object.assign(Object.assign({},nn),{},{weekly:"知乎周刊收录",daily:"知乎日报收录"}),i.a.forwardRef((function(e,t){var n=e.children,a=e.placement,o=void 0===a?"bottom":a,c=e.onClick,l=e.onPopoverClosed,s=et()(e,Wt),u=Object(b.f)(),f=Object(r.useRef)(),p=Object(r.useState)(!1),h=M()(p,2),m=h[0],v=h[1],g=Object(r.useRef)(),O=Object(d.b)().Mobile,j=Boolean(n),y=Object(wt.d)((function(e){f.current=function(e,t){return e?("function"==typeof e?e(t):e.current=t,t):t}(t,e)})),C=Object(wt.d)((function(e){c&&c(e),j&&v(!m)})),w=Object(wt.d)((function(){g.current&&clearTimeout(g.current),j&&!m&&v(!0)})),x=Object(wt.d)((function(){g.current=setTimeout((function(){v(!1)}),100)}));return Object(vt.g)(i.a.Fragment,null,Object(vt.g)(tn,Object.assign({},s,{ref:y,expandable:j,isExpanded:m,onClick:C},!O&&{onMouseOver:w,onMouseLeave:x})),j&&Object(vt.g)(Ht,{isOpen:m,arrowed:!0,globalClose:!0,listenResize:!0,target:f.current,placement:o,boundary:{padding:16},customStyle:{borderRadius:"8px",boxShadow:"0 -3px 10px 0 rgba(0, 0, 0, 0.1)"},backgroundColor:u.colors.GBK99C,onClose:x,onAfterLeave:l},Object(vt.g)("div",{onMouseOver:w,onMouseLeave:x},n)))})));an.displayName="ExpandableLabel";var on=function(e){var t=e.color,n=void 0===t?Qt.GREY:t,a=e.icon,o=e.name,r=e.subText,c=e.moreLink,l=e.renderMoreIcon,s=e.description,u=Object(d.b)().Mobile,b=Yt(n).color,f=null;return f=c&&l?Object(vt.g)(i.a.Fragment,null,r,Object(vt.g)(Ct,{href:c,css:Object(ft.a)({marginLeft:r?4:0,textDecoration:"none",color:"inherit"},";label:PopoverContent;")},l)):r,Object(vt.g)(pt.Box,{py:"8px",maxWidth:u?"calc(100vw - 34px)":"400px"},Object(vt.g)(tn,{color:n,icon:a,name:o,subText:f,css:Object(ft.a)({height:u?32:36,borderRadius:0,background:"none"},";label:PopoverContent;")}),Boolean(s)&&Object(vt.g)(pt.Text,{lineHeight:u?"16px":"18px",fontSize:u?"13px":"14px",color:b,mx:"12px",mb:"8px"},s))},rn=function(e){var t=e.disclaimerInfo,n=t.excerpt,a=t.description,o=t.subDescription,r=n?"创作声明":a,i=n&&"内容".concat(n);return Object(vt.g)(an,{name:r,subText:i},Object(vt.g)(on,{color:Qt.BLUE,name:r,subText:i,description:o}))};var cn={name:"pf9kc0-Labels",styles:"& > div, & > a{margin-right:8px;margin-bottom:8px;};label:Labels;"},ln=function(e){var t=e.answerCollapsed,n=e.answerAbnormal,a=e.commercial,o=e.thanksForInviting,r=e.positive,i=e.bluebook,c=e.annotation,l=e.disclaimer,s=e.adPromotion,u=e.campaign,d=e.limit,b=void 0===d?2:d,f=et()(e,Zt);if(!(t||n||a||o||r||i||c||l||s||u))return null;var p=[t||n,a||o||s||i,r,c||l,u].filter(Boolean).slice(0,b);return Object(vt.g)(pt.Flex,Object.assign({flexDirection:"row",flexWrap:"wrap",pt:"8px",css:cn},f),p.map((function(e,t){return Object(vt.g)("div",{key:t},e)})))};ln.propTypes={answerCollapsed:l.a.node,answerAbnormal:l.a.node,commercial:l.a.node,thanksForInviting:l.a.node,bluebook:l.a.node,positive:l.a.node,annotation:l.a.node,disclaimer:l.a.node,adPromotion:l.a.node,campaign:l.a.node};var sn=function(e){var t=e.ua,n=void 0===t?{}:t,a=e.isDarkMode,o=void 0!==a&&a,r=e.isFixed,c=void 0!==r&&r;return i.a.createElement("div",{className:c?"KfeCollection-FabledStatement-fixed":"KfeCollection-FabledStatement"},i.a.createElement(b.a,{isDarkMode:o,ua:n},i.a.createElement(d.a.Provider,{value:n},i.a.createElement(rn,{disclaimerInfo:{excerpt:"包含虚构创作",description:"创作声明",subDescription:"内容中的情节存在虚构加工，仅供参考"}}))))};function un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=T()(e);if(t){var o=T()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return A()(this,n)}}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bn=function(e){S()(n,e);var t=un(n);function n(){return j()(this,n),t.apply(this,arguments)}return C()(n,[{key:"render",value:function(){var e=this.props,t=e.result,n=t.introCard,a=t.vipWorthInfo,o=t.isFabled,r=void 0!==o&&o,c=t.abParam,l=t.paidConsult,s=t.zaInfo,u=e.extra,d=u.ua,b=void 0===d?{}:d,f=u.isDarkMode,p=(a||{}).cardColor,h={isNewStyle:"1"===(c||{}).paTopLabel,isMobile:Boolean(b.Mobile)},m=h.isNewStyle&&!h.isMobile&&0!==p;return i.a.createElement("div",{className:"KfeCollection-AnswerTopCard-Container"},i.a.createElement("div",{className:m?"KfeCollection-AnswerTopCard-FlexContainer":""},2===p?i.a.createElement(Xe,{data:a,extra:h}):i.a.createElement(Je,{data:a,className:h.isNewStyle?"":"KfeCollection-AnswerTopCard-Privilege",extra:h}),r&&h.isNewStyle&&i.a.createElement(sn,{ua:b,isDarkMode:f,isFixed:m})),Boolean(n)&&i.a.createElement("div",null,i.a.createElement(Ke,{introCard:n,paidConsult:l,zaInfo:s,extra:h})))}}]),n}(i.a.Component);dn(bn,"propTypes",{className:l.a.string,result:l.a.object.isRequired}),dn(bn,"defaultProps",{result:{articleDesc:{},vipWorthInfo:{},goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}},extra:{ua:{}}});var fn=bn,pn=n(63),hn=function(e){var t=e.answer,n=Object(o.useSelector)((function(e){return Object(Pe.z)(e,null==t?void 0:t.id)}))||{},i=n.isRequesting,c=n.error,l=n.result,s=Boolean(!i&&!c&&!l),u=Object(o.useDispatch)();Object(r.useEffect)((function(){s&&u(Object(Pe.v)(t.id))}),[s,u,t.id]);var d=Object(o.useSelector)(pn.l),f=Object(b.f)().isDarkMode;return Object(a.b)(fn,{result:l,extra:{ua:d,isDarkMode:f}})},mn=Object(Le.a)(null)((function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(a.b)(hn,{answer:t}):null}))},1733:function(e,t,n){"use strict";n.d(t,"a",(function(){return Oe}));var a=n(4),o=n(47),r=n(1),i=n(0),c=n.n(i),l=n(21),s=n(13),u=n.n(s),d=n(58),b=n(72),f=n(40),p=n(59),h=n.n(p),m=n(96),v=n(131),g=n(33),O=n(311),j=n(899),y=n(26),C=n(1047),w=n(63),x=n(458),k=n(1479),S=n(46),R=n(922),A=n(1082),I=n(966),T=n(962),E=n(1023),N=n(1123),B=n(469),z=n(1296),L=n(1424),P=n(446),M=n(1200),_=n(32),D=n(873),F=n(218),U=["isLiked","onClick","showIcon","authRequired"],V=Object(F.a)((function(e){var t=e.isLiked,n=e.onClick,a=e.showIcon,o=void 0===a||a,i=e.authRequired,c=Object(_.default)(e,U),l=Object(f.d)((function(e){var a=!t,o=a?"Like":"UnLike";y.a.trackEvent(e.target,{id:7448,action:o}),i((function(){return n(a)}))()}));return Object(r.b)(g.c,Object.assign({preset:"plain",onClick:l,icon:o?D.a:null,label:t?"取消喜欢":"喜欢","aria-live":"polite"},c))})),G=n(51),q=Object.assign;var H=function(e){return c.a.createElement(G.a,q({width:"14",height:"16",fill:"none",viewBox:"0 0 14 16"},e),c.a.createElement("path",{fill:"#8590A6",d:"M1 2.666c0-.736.597-1.333 1.334-1.333h9.333c.736 0 1.334.597 1.334 1.333v10.667c0 .736-.598 1.333-1.334 1.333h-1.666a.333.333 0 01-.334-.333v-4A2.333 2.333 0 007.334 8h-6A.333.333 0 011 7.667v-5zm2.667 0a.667.667 0 100 1.334h6.667a.667.667 0 100-1.333H3.667zM3 6c0-.368.299-.667.667-.667H9a.667.667 0 010 1.334H3.667A.667.667 0 013 6zm-2 4.334a1 1 0 011-1h5.333a1 1 0 011 1v3.333a1 1 0 01-1 1H2a1 1 0 01-1-1v-3.333zm5.167 1.377a.333.333 0 010 .578l-2 1.154a.333.333 0 01-.5-.288v-2.31c0-.256.277-.417.5-.288l2 1.154z",fillRule:"evenodd",clipRule:"evenodd"}))},K=["label","onClick"];function W(e,t){var n=e.label,a=e.onClick,o=Object(_.default)(e,K);return Object(r.b)(b.a,{zaText:!0,zaType:"Button",zaBlock:"VideoContributeButton",className:"ContentItem-action",children:Object(r.b)(g.c,Object.assign({ref:t,preset:"plain",onClick:a,icon:H,label:n},o))})}var Z=Object(i.forwardRef)(W),Q=n(37),Y=n.n(Q),J=n(65),X=n(904),$=n(171),ee=n(1076),te=n(1049),ne=["onClick"],ae=Object(i.forwardRef)((function(e,t){var n=e.onClick,a=Object(_.default)(e,ne);return Object(r.b)(g.c,Object.assign({ref:t,preset:"plain",onClick:n,icon:X.a,label:"设置"},a))})),oe=function(e){var t,n,a=e.className,o=e.zvideo,c=e.onEdit,s=e.onToggleVisibility,b=e.onRemove,f=e.onChangeCommentPermission,p=e.togglerProps,h=Object(l.useDispatch)(),m=o.id,g=o.commentPermission,O=o.isVisible,j=o.creationRelationship,y=null==j||null===(t=j.coCreation)||void 0===t||null===(n=t.bizInfo)||void 0===n?void 0:n.canCancelPermission,C=Object(i.useCallback)(function(){var e=Object(J.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="视频删除后将不可恢复",e.next=3,h(Object(P.j)(m)).then((function(e){var t=e.payload.message;t&&(n=t)}));case 3:$.a.confirm(Object(r.b)(d.Text,{textAlign:"center",children:n}),{title:"确定删除视频",text:{ok:"删除视频"}}).then((function(){b(t)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h,m,b]),w=Object(r.c)(r.a,{children:[Object(r.b)(v.b,{onClick:c,children:"编辑视频"}),Object(r.b)(v.b,{onClick:s,children:"在视频列表内".concat(O?"隐藏":"显示")}),Object(r.b)(v.a,{}),Object(r.b)(ee.c,{current:g,target:o,onChange:f}),Object(r.b)(v.a,{}),Object(r.b)(v.b,{onClick:C,children:"删除"})]});return Object(r.b)(v.c,{arrowed:Boolean(y),className:u()("ZVideoSettingMenu",a),itemClassName:"ZVideoSettingMenu-item",toggler:Object(r.b)(ae,Object.assign({},p)),reversed:!0,children:y?Object(r.b)(v.b,{children:Object(r.b)(te.CancelCoCreation,{contentType:"zvideo",contentId:m})}):w})},re=n(1105),ie=n(120);var ce=n(1753),le=n(93),se=n(912),ue=function(e){var t,n,a,o,i=e.startTime,c=e.endTime,l=e.target,s=e.status,u=e.abnormalReason,d=Math.floor(i/1e3),b=Math.floor(c/1e3),f=l.parentObject,p=f.id,h=f.title,m=l.object.id,v=null;return 0===s?(t="已保存草稿",n="GBK06A",v=Object(r.b)(se.a,{}),a="GBK06A"):1===s?(t="发布中...",n="GBK06A",a="GBK06A"):2===s?"审核中"===u?(t="审核中",n="GBL05A",v=Object(r.b)(se.a,{}),a="GBK06A"):(t="已投稿",n="GBL01A",v=Object(r.b)(se.a,{}),a="GBK03A"):3===s&&(t="发布失败",n="GRD03A",v=Object(r.b)(se.a,{}),a="GBK06A",o=!0),{status:s,statusText:t,statusColor:n,StatusIcon:v,titleColor:a,hasAbnormalInfo:o,startTime:d,endTime:b,questionId:p,title:h,answerId:m,abnormalReason:u}},de=["status","questionId","answerId","children"],be=["item"],fe=function(e){var t=e.status,n=e.questionId,a=e.answerId,o=e.children,i=Object(_.default)(e,de);return 2===t?Object(r.b)(d.Link,Object.assign(Object.assign({target:"_blank",href:"https://www.zhihu.com/question/".concat(n,"/answer/").concat(a),css:{display:"block",cursor:"pointer"}},i),{},{children:o})):Object(r.b)(d.Box,Object.assign(Object.assign({},i),{},{children:o}))},pe={"已保存草稿":"已保存草稿","发布失败":"发布失败","已投稿":"投稿成功","审核中":"审核中","发布中...":"发布中..."},he={"已保存草稿":"继续编辑","发布失败":"修改草稿","已投稿":"已投稿","审核中":"查看投稿","发布中...":""},me=function(e){var t=e.item,n=Object(_.default)(e,be),a=ue(t),o=a.status,i=a.statusText,c=a.statusColor,l=a.StatusIcon,s=a.titleColor,u=a.hasAbnormalInfo,b=a.questionId,f=a.title,p=a.answerId,h=a.abnormalReason;return Object(r.c)(fe,Object.assign(Object.assign({py:"20px",css:function(e){return Object.assign(Object.assign({},0===o&&{cursor:"pointer"}),Object(le.c)({borderTop:"1px solid ".concat(e.colors.GBK09A)}))},status:o,questionId:b,answerId:p},n),{},{children:[Object(r.c)(d.Flex,{color:c,alignItems:"center",mb:"8px",fontSize:"12px",children:[Object(r.b)(d.Text,{children:pe[i]}),Object(r.b)(d.Text,{ml:"auto",fontWeight:"bold",css:function(e){return{color:e.colors.GBL01A}},children:he[i]}),i===pe.发布失败?null:l]}),Object(r.b)(d.Text,{color:s,fontSize:"14px",children:f}),u&&Object(r.b)(d.Text,{p:"8px",mt:"8px",color:"GBK03A",fontSize:"14px",css:function(e){return{borderRadius:2,backgroundColor:e.colorMod(e.colors.GRD03A).alpha(.08)}},children:h})]}))},ve={up:1,neutral:0,down:-1};function ge(e){var t,c=Object(l.useDispatch)(),s=e.className,p=e.zvideo,z=e.author,_=e.commentsShown,D=void 0!==_&&_,F=e.onCommentButtonClick,U=void 0===F?h.a:F,G=e.renderOptions,q=e.renderActionButtons,H=e.enableContribute,K=void 0!==H&&H,W=p.id,Q=p.title,Y=p.description,J=p.voting,X=p.voteCount,$=p.voteupCount,ee=p.commentCount,te=p.isLiked,ne=p.isFavorited,ae=p.contribute,le=p.video,se=p.video,ue=(se=void 0===se?{}:se).duration,de=void 0===ue?0:ue,be=function(e){var t=Object(re.c)(e),n="string"==typeof t?t:null==t?void 0:t.urlToken,a=Object(l.useSelector)((function(e){return Object(ie.d)(e,{urlToken:n})}));return e?null!=a?a:t:null}(p.creationRelationship),fe=Object(S.o)(be),pe=Object(S.o)(z)&&!fe,he=pe||fe,ge=Object(w.o)(),Oe=Object(i.useMemo)((function(){return parseInt(1e3*de)}),[de]),je=Object(i.useMemo)((function(){return{id:W,video:le}}),[W,le]),ye=Object(f.e)((function(){return n.e(46).then(n.bind(null,2903))})),Ce=Object(x.p)(W),we=Object(i.useState)(!1),xe=Object(o.a)(we,2),ke=xe[0],Se=xe[1],Re=Object(x.o)(W).answer,Ae=(Re=void 0===Re?{}:Re).canContribute,Ie=void 0!==Ae&&Ae,Te=Boolean((null==ae||null===(t=ae.contributeList)||void 0===t?void 0:t.length)||(null==ae?void 0:ae.totals)),Ee=K&&!ge&&pe&&Te,Ne=K&&!ge&&pe&&Ie&&!Te,Be=Object(M.a)("zvideo_toolbar:should_hide_contribution_tooltip"),ze=Object(o.a)(Be,2),Le=ze[0],Pe=ze[1],Me=Object(i.useRef)();Object(f.l)((function(){return Pe(!0)}),!Le&&Ne?5e3:null);var _e=Object(i.useCallback)((function(){Se(!0),c(Object(x.h)(W,"edit"))}),[W,c]),De=Object(i.useCallback)((function(){return c(Object(x.g)({zvideoId:W,target:"answer",duration:Oe}))}),[c,W,Oe]),Fe=Object(i.useCallback)((function(e){return c(Object(P.A)(W,ve[e]))}),[W,c]),Ue=Object(i.useCallback)((function(e){c(Object(P.k)(W,e))}),[c,W]),Ve=Object(i.useState)(!1),Ge=Object(o.a)(Ve,2),qe=Ge[0],He=Ge[1],Ke=Object(i.useCallback)((function(e){He(!0),y.a.trackEvent(e.target,{id:8213,action:"Collect",is_intent:!ne})}),[ne]),We=Object(i.useCallback)((function(){He(!1)}),[]),Ze=Object(i.useCallback)((function(e,t){c(Object(P.b)(W,t))}),[W,c]),Qe=Object(i.useCallback)((function(){c(Object(P.y)(W))}),[W,c]),Ye=Object(i.useCallback)((function(){c(Object(P.w)(W)).then((function(){var e="https://www.zhihu.com/people/".concat(z.urlToken,"/zvideos");window.location.href=e}))}),[W,z,c]),Je=Object(i.useState)(null),Xe=Object(o.a)(Je,2),$e=Xe[0],et=Xe[1],tt=Object(i.useState)(!1),nt=Object(o.a)(tt,2),at=nt[0],ot=nt[1],rt=Object(i.useState)(!1),it=Object(o.a)(rt,2),ct=it[0],lt=it[1];Object(i.useEffect)((function(){at&&!$e&&c(Object(P.g)(W)).then((function(e){var t=e.payload;et(t)}))}),[W,at,$e,c]),Object(i.useEffect)((function(){pe&&!ge&&K&&De()}),[pe,De,ge,K]);var st=Object(i.useCallback)((function(e){c(Object(P.u)(W,e)).then((function(){c(Object(x.k)(W)),e.clubId&&c(Object(P.x)(W,e.clubId));var t="https://www.zhihu.com/zvideo/".concat(W);window.location.href=t}))}),[W,c]),ut=Object(i.useState)(!1),dt=Object(o.a)(ut,2),bt=dt[0],ft=dt[1],pt=Object(C.b)().blockStrategies,ht=Object(L.b)([Object(L.a)(pt)],q),mt=ht({componentList:[{name:"favlist",component:Object(r.b)(N.a,{onClick:Ke,label:"收藏",showIcon:!ge},"favlist")},{name:"like",component:Object(r.b)(V,{isLiked:te,onClick:Ue,showIcon:!ge},"like")},{name:"report",component:!he&&Object(r.b)(B.a,{id:W,type:"zvideo",onModalShown:ft},"report")}]}).filter(Boolean),vt=Object(i.useCallback)((function(){et(null),ot(!1),c(Object(P.s)(W))}),[c,W]),gt=Object(f.d)((function(e){_e(),c(Object(x.l)(e.id)),lt(!1)})),Ot=Object(f.d)((function(e){De(),c(Object(P.s)(e)),Se(!1)})),jt=me,yt=ce.a;return Object(r.c)(r.a,{children:[Object(r.b)("div",{css:{marginBottom:"14px"},children:Object(r.c)(R.a,{className:u()("ZVideoToolbar",s),children:[ht({componentList:[{name:"vote",component:Object(r.b)(A.a,{type:"zvideo",count:$||X,voting:J,onVote:Fe,isOwner:pe,zaIds:{voteUp:6599,voteDown:6600}})},{name:"comment",component:Object(r.b)(I.a,{onClick:U,commentsShown:D,count:ee,positionStatus:"normal"})},{name:"share",component:Object(r.b)(T.a,{id:W,type:"zvideo",url:"https://www.zhihu.com/zvideo/".concat(W),title:Q,authorName:z.name,positionStatus:"normal"})}]}),ge?Object(r.c)(v.c,{preventCloseOnTarget:!0,globalClose:!bt,menuContainerClassName:"ZVideoToolbar-menuContainer",toggler:Object(r.b)(g.c,{preset:"plain",icon:j.a,"aria-label":"更多"}),children:[mt.map((function(e){return Object(r.b)(v.b,{className:"ZVideoToolbar-menuItem",children:e},e.key)})),!he&&G()]}):[].concat(Object(a.a)(mt),Object(a.a)(he?[]:G())),Ee&&Object(r.b)(Z,{label:"全部投稿",onClick:function(){c(Object(x.h)(W)),lt(!0)}}),Ne&&Object(r.c)(r.a,{children:[Object(r.b)(Z,{ref:Me,label:"添加投稿",onClick:_e}),Object(r.b)(O.a,{placement:"top",isOpen:!Le,target:Me.current,children:"投稿到问题，让更多人看到你的视频"})]}),he&&Object(r.b)(oe,Object.assign({zvideo:p,onEdit:function(){return ot(!0)},onToggleVisibility:Qe,onChangeCommentPermission:Ze,onRemove:Ye},ge&&{togglerProps:{label:null}}))]})}),pe&&Object(r.b)(m.b,{className:"ZVideoToolbar-videoFormModal",title:"编辑视频",size:"fullPage",onClose:vt,css:{width:"734px",".Modal-inner":{"::-webkit-scrollbar":{display:"none"}},".Modal-title":{marginLeft:32}},children:at&&$e&&Object(r.b)(k.a,{defaultVideo:$e,onSubmit:st,onRemove:vt,isEditing:!0})}),Object(r.b)(E.a,{id:W,type:"zvideo",shown:qe,onClose:We,zaEnabled:!0}),K&&!ge&&pe&&Object(r.c)(r.a,{children:[Object(r.b)(m.b,{title:Object(r.c)(d.Flex,{px:"24px",justifyContent:"space-between",children:[Object(r.b)(d.Text,{fontSize:"24px",color:"GBK02A",children:"全部视频回答投稿"}),Ie&&Object(r.b)("button",{css:function(e){return{width:90,height:34,border:"none",borderRadius:3,fontSize:14,fontWeight:"normal",color:e.colors.GBL01A,backgroundColor:e.colorMod(e.colors.GBL01A).alpha(.08)}},onClick:function(){_e(),lt(!1)},children:"添加投稿"})]}),css:function(e){return{width:536,height:554,backgroundColor:e.colors.GBK99A,".Modal-title":{marginTop:24},".Modal-inner::-webkit-scrollbar":{display:"none"}}},onClose:function(){return lt(!1)},children:ct&&Ce.map((function(e){return Object(r.b)(jt,Object.assign({item:e},0===e.status&&{onClick:function(){gt(e)}}),e.id)}))}),Boolean(ye)&&Object(r.b)(b.b,{block:"Contribution",children:Object(r.b)(yt,{show:ke,defaultVideo:je,title:Q,description:Y,duration:Oe,onClose:function(){Ot(W)},shouldPublish:!0})})]})]})}ge.defaultProps={renderOptions:function(){return[null]},renderActionButtons:z.a};var Oe=ge},1745:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(20),f=n(1636),p=n(896),h=n(153),m=n(150),v=(n(149),n(33)),g=n(221),O=n(1322),j=n(32),y=n(8),C=n(13),w=n.n(C),x=n(219),k=["className","src"],S=["className"],R=["imageUrls"],A=function(e){var t=e.className,n=e.children;return Object(l.b)("div",{className:w()(t,"LiveAvatar-column"),children:n})},I=function(e){var t=e.className,n=e.speakers,a=e.size,o=e.alt;if(!n||!n.length)return null;var r=n.map((function(e){return e.avatarUrl})).slice(0,4),i=function(e){var t=e.className,n=e.src,a=Object(j.default)(e,k);return Object(l.b)(x.a,Object.assign(Object.assign({url:n},a),{},{className:w()("LiveAvatar-img",t)}))},c=function(e){var t=e.className,n=Object(j.default)(e,S);return Object(l.b)(A,{children:Object(l.b)(i,Object.assign(Object.assign({},n),{},{className:w()(t,"alignCenter"),size:a}))})},s=function(e){return Object(l.b)(i,Object.assign(Object.assign({},e),{},{size:a/2-1}))},u=function(e){var t=e.imageUrls,n=Object(j.default)(e,R);return Object(l.b)(A,{children:t.map((function(e,t){return Object(y.e)(s,Object.assign(Object.assign({},n),{},{key:t,src:e}))}))})},d=[];switch(r.length){case 1:d=Object(l.b)((function(e){return Object(l.b)(i,Object.assign(Object.assign({},e),{},{size:a}))}),{src:r[0],alt:o});break;case 2:d=r.map((function(e,t){return Object(l.b)(c,{src:e,alt:o},t)}));break;case 3:d=[Object(l.b)(c,{src:r[0],alt:o},"1"),Object(l.b)(u,{imageUrls:r.slice(1,3),alt:o},"2")];break;default:d=[r.slice(0,2),r.slice(2)].map((function(e,t){return Object(l.b)(u,{imageUrls:e,alt:o},t)}))}return Object(l.b)("div",{className:w()(t,"LiveAvatar-wrapper"),style:{width:a,height:a},children:d})},T=n(922),E=n(1224),N=n(973),B=n(962),z=n(433),L=n(1421),P=n(1045),M=n(1295);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var D=function(e){Object(r.a)(n,e);var t=_(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.live,o=t.live,r=o.id,i=o.type,c=o.subject,s=o.speaker.member,u=o.startsAt,d=o.price,b=o.promotionPrice,g=o.description,j=void 0===g?"":g,y=o.image,C=o.isLiked,w=o.likedNum,x=o.seats,k=t.lastreadTouchable,S=t.zaIds.options,R=t.renderOptions,A=t.isSticky,z=t.handleToggleSticky,_=t.currentUser,D=_&&_.urlToken===s.urlToken,F="function"==typeof z,U=(x||{}).taken,V="/lives/".concat(r);if(n!==T.c.interactive)return Object(l.b)(T.e,{data:a,link:V,title:Object(l.c)(l.a,{children:[F&&A&&Object(l.b)(O.a,{}),Object(l.b)("a",{href:V,target:"_blank",rel:"noopener noreferrer",children:c})]}),children:F&&D&&Object(M.a)(_)&&Object(l.b)(v.c,{preset:"plain",onClick:z,icon:A?f.b:p.b,label:A?"取消置顶":"置顶"})});Object(l.b)(I,{className:"LiveItem-avatar",speakers:[s],size:60});var G={id:r,type:i};return Object(l.c)("div",{className:"LiveItem",children:[y&&Object(l.b)("a",{className:"LiveItem-cover",href:V,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{src:Object(m.imgUrl)(y,"640w"),srcSet:"".concat(Object(m.imgUrl)(y,"r")," 2x"),alt:c})}),Object(l.b)(T.e,{image:!1,data:a,link:V,onRef:function(t){e.contentItem=t},title:Object(l.c)("span",{children:[s.name,"：",Object(l.b)("a",{href:V,target:"_blank",rel:"noopener noreferrer",children:c})]}),meta:!1,lastreadTouchable:k,children:Object(l.c)(N.b,{className:"LiveItem-description",excerpt:Object(P.b)(j,60),limit:60,limitWithImage:60,html:j,data:a,extra:Object(l.c)(T.b,{children:[Boolean(U)&&Object(l.c)("div",{children:[Object(l.b)("span",{children:"参与人数："}),U]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"时间："}),Object(h.toSimpleDateTimeString)(u)]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"特价："}),"number"==typeof b?Object(l.c)("span",{className:"LiveItem-price",children:[Object(L.a)(b),Object(l.b)("del",{children:Object(L.a)(d)})]}):Object(L.a)(d)]})]}),children:[Object(l.b)(E.a,Object.assign(Object.assign({},G),{},{liked:C,count:w,icon:"thank"})),Object(l.b)(B.a,Object.assign(Object.assign({},G),{},{title:c,authorName:s&&s.name,url:V})),R&&R((function(){return e.contentItem}),S)]})})]})}}]),n}(d.Component);D.propTypes={preset:u.a.oneOf(Object.values(T.c)),renderOptions:u.a.func,zaIds:u.a.object},D.defaultProps={zaIds:{}};t.a=Object(b.compose)(g.a,Object(z.b)((function(e){var t=e.live,n=e.trackCardShow,a=void 0===n||n,o=e.zaInfos,r=(o=void 0===o?{}:o).cardShow;return Object.assign(Object.assign({module:"LiveItem",card:{content:{type:"Live",id:t.id,author_member_hash_id:t.speaker.member.id}}},r&&{view:{id:r}}),{},{trackCardShow:a})})))(D)},1746:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(4),s=n(1),u=n(0),d=n(21),b=n(89),f=n(473),p=n(479),h=n(383),m=n(3),v=n.n(m),g=n(88),O=n(455),j=n(1019),y=n(33),C=n(149),w=n(923),x=function(e){var t=e.upvotedFollowees,n=e.voteupCount,a=e.actionText,o=e.canClick,r=e.onClick;if(!n)return null;var i=t.length,c=i===n?"":"".concat(Object(C.formatNumber)(n)," 人");return Object(s.c)(j.CJKSpace,{children:[t.map((function(e,t){return Object(s.c)("span",{children:[t>0&&"、",Object(s.b)(w.a,{noBadge:!0,user:e,children:e.name},t)]},t)})),i>0&&n-i>0&&"等",o?Object(s.c)(y.c,{preset:"plain",onClick:r,children:[c,a]}):c+a]})};x.propTypes={voteupCount:v.a.number.isRequired,upvotedFollowees:v.a.array.isRequired,actionText:v.a.string.isRequired,canClick:v.a.bool,onClick:v.a.func},x.defaultProps={voteupCount:0,actionText:"赞了",upvotedFollowees:[]};var k=x,S=n(1331);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var A=function(e){Object(r.a)(n,e);var t=R(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={modalShown:e.props.defaultModalShown},e.handleListHide=function(){return e.setState({modalShown:!1})},e.handleListShown=function(){return e.setState({modalShown:!0})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.voteupCount,n=e.upvotedFollowees,a=e.openable,o=e.type,r=e.too,i=e.isFetching,c=e.isDrained,l=e.items,u=e.onLoad;if(t<=0)return null;var d,b=this.state.modalShown;return d="pin"===o?"为该".concat(O.b[o],"鼓掌"):"column"===o?"关注":"".concat(r?"也":"","赞同了该").concat(O.b[o]),Object(s.c)("span",{className:"Voters",children:[Object(s.b)(k,{canClick:a,onClick:this.handleListShown,voteupCount:t,upvotedFollowees:n,actionText:d}),Object(s.b)(g.b,{size:"fullPage",onClose:this.handleListHide,children:b&&Object(s.b)(S.a,{isFetching:i,isDrained:c,text:"column"===o?"关注了":"赞同了",items:l,voteupCount:t,onLoad:u})})]})}}]),n}(u.Component);A.propTypes={openable:v.a.bool,upvotedFollowees:v.a.array,id:v.a.oneOfType([v.a.number,v.a.string]),type:v.a.oneOf(["pin","answer","article","column"]).isRequired,defaultModalShown:v.a.bool},A.defaultProps={openable:!0,defaultModalShown:!1};var I=A;function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var E={answer:"answers",article:"articles",pin:"pins",column:"columns"};var N=function(e){Object(r.a)(n,e);var t=T(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleLoad=function(){var t=e.props,n=t.type,a=t.id,o=t.loadAnswerVoters,r=t.loadPinVoters,i=t.loadArticleVoters,c=t.loadColumnsFollowers;switch(n){case"answer":return o(a);case"pin":return r(a);case"article":return i(a);case"column":return c(a);default:return null}},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(s.b)(I,Object.assign({onLoad:this.handleLoad},this.props))}}]),n}(u.Component);N.propsTypes=Object.assign({},I.propsTypes),N.defaultProps=Object.assign({},I.defaultProps);t.a=Object(d.connect)((function(e,t){var n=t.id,a=t.type,o=e.entities.users,r=e[E[a]]||{},i=r.voters,c=void 0===i?{}:i,s=r.concernedUpvoters,u=void 0===s?{}:s,d=c[n]||{isFetching:!1,isDrained:!1,order:"normal",ids:[]},b=d.isFetching,f=d.isDrained,p=d.order,h=d.ids,m=(u[n]||{ids:[]}).ids;return{isFetching:b,isDrained:f,order:p,items:[].concat(Object(l.a)(m),Object(l.a)(h.filter((function(e){return!m.includes(e)})))).map((function(e){return o[e]}))}}),{loadAnswerVoters:b.u,loadArticleVoters:f.e,loadPinVoters:p.f,loadColumnsFollowers:h.c})(N)},1747:function(e,t,n){"use strict";var a=n(1),o=n(0),r=n.n(o),i=n(51),c=Object.assign;var l=function(e){return r.a.createElement(i.a,c({viewBox:"0 0 15 15"},e),r.a.createElement("g",{fill:"#ffab2e",fillRule:"evenodd"},r.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),r.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},s=Object.assign;var u=function(e){return r.a.createElement(i.a,s({width:"15",height:"15",viewBox:"0 0 15 15"},e),r.a.createElement("g",{fillRule:"evenodd"},r.a.createElement("path",{fill:"#d7d8d9",d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),r.a.createElement("path",{fill:"#ffab2e",d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))},d=Object.assign;var b=function(e){return r.a.createElement(i.a,d({viewBox:"0 0 15 15"},e),r.a.createElement("g",{fill:"#d7d8d9",fillRule:"evenodd"},r.a.createElement("path",{d:"M10.925 14.302c.173.13.408.13.58-.002a.514.514 0 00.175-.572l-1.323-4.296 3.435-2.456c.175-.13.25-.36.185-.572a.5.5 0 00-.468-.36H9.275L7.96 1.754c-.064-.21-.21-.354-.46-.354-.14 0-1.027 3.53-.988 6.32.04 2.788.98 3.85.98 3.85l3.433 2.732z"}),r.a.createElement("path",{d:"M7.5 1.4a.47.47 0 00-.474.354l-1.318 4.29H1.49a.499.499 0 00-.467.36.523.523 0 00.185.572l3.42 2.463-1.307 4.286c-.066.21.004.44.176.572.172.13.407.132.58.003l3.42-2.734L7.5 1.4z"})))};t.a=function(e){var t=e.score;if(0===t)return null;var n=Math.round(2*t)/2;return Object(a.b)("div",{className:"Rating",children:Array.from({length:5}).map((function(e,t){var o=function(e,t){return t>=e+1?l:t>=e+.5?u:b}(t,n);return Object(a.b)(o,{size:15},t)}))})}},1748:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var a=n(1),o=n(58),r=n(912),i=n(72),c=n(40),l=n(0),s=n.n(l),u=n(51),d=Object.assign;var b=function(e){return s.a.createElement(u.a,d({width:"20",height:"20",fill:"none",viewBox:"0 0 20 20"},e),s.a.createElement("path",{fill:"url(#paint0_linear_269:46630)",d:"M2.8 2a.8.8 0 00-.8.8v11.4a.8.8 0 00.8.8h11.4a.8.8 0 00.8-.8V2.8a.8.8 0 00-.8-.8H2.8zm1.051 1.25a.6.6 0 00-.6.6v9.3a.6.6 0 00.6.6h9.3a.6.6 0 00.6-.6v-9.3a.6.6 0 00-.6-.6h-9.3z",fillRule:"evenodd",clipRule:"evenodd"}),s.a.createElement("path",{fill:"#06F",d:"M2.8 2a.8.8 0 00-.8.8v11.4a.8.8 0 00.8.8h11.4a.8.8 0 00.8-.8V2.8a.8.8 0 00-.8-.8H2.8zm1.051 1.25a.6.6 0 00-.6.6v9.3a.6.6 0 00.6.6h9.3a.6.6 0 00.6-.6v-9.3a.6.6 0 00-.6-.6h-9.3z",fillRule:"evenodd",clipRule:"evenodd"}),s.a.createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"url(#paint1_linear_269:46630)",rx:".8"}),s.a.createElement("rect",{width:"13",height:"13",x:"4.5",y:"4.5",fill:"#06F",rx:".8"}),s.a.createElement("path",{fill:"#fff",stroke:"#fff",d:"M8.962 11.153h.725V13.5H8.3v-2.754c0-.66.293-1.181.7-1.567.064-.06.129-.116.196-.168a2.654 2.654 0 00-.205.227c-.295.369-.53.864-.53 1.415v.5h.5zM12.974 11.153h.726V13.5h-1.387v-2.754c0-.66.293-1.181.7-1.567.063-.06.129-.116.195-.168a2.657 2.657 0 00-.204.227c-.295.369-.53.864-.53 1.415v.5h.5z"}),s.a.createElement("defs",null,s.a.createElement("linearGradient",{id:"paint0_linear_269:46630",x1:"15",x2:"2",y1:"2",y2:"15",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#06F"}),s.a.createElement("stop",{offset:"1",stopColor:"#00D1FF"})),s.a.createElement("linearGradient",{id:"paint1_linear_269:46630",x1:"17.5",x2:"4.5",y1:"4.5",y2:"17.5",gradientUnits:"userSpaceOnUse"},s.a.createElement("stop",{stopColor:"#06F"}),s.a.createElement("stop",{offset:"1",stopColor:"#00D1FF"}))))},f=n(30);function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.title,l=e.question,s=(l=void 0===l?{}:l).title,u=e.url,d=e.id,p="answer"===t?"原回答：".concat(s):"原文章：".concat(n),h=Object(c.d)((function(){window.open(u)}));return Object(a.b)(i.b,{content:{type:f.bb[t],token:String(d)},children:Object(a.c)(i.a,{shouldTrackShow:!0,zaText:"zvideo_origin_content",zaType:"Card",zaAction:"OpenUrl",extra:{link:{url:u}},as:o.Flex,bg:"GBK10A",padding:"12px 10px 12px 18px",justifyContent:"space-between",onClick:h,css:{cursor:"pointer"},children:[Object(a.c)(o.Flex,{children:[Object(a.b)(b,{css:{marginRight:"6.5px"}}),Object(a.b)(o.Text,{color:"GBK06A",fontSize:"14px",lineHeight:"19.6px",children:p})]}),Object(a.b)(r.a,{size:20,css:function(e){return{flexShrink:"0",fill:e.colors.GBK06A}}})]})})}var h=n(47),m=n(21),v=n(93),g=n(96),O=n(977),j=n(219),y=n(149),C=n(120),w=n(446),x=n(929),k=(n(1049),function(e){var t=e.author,n=t.author,r=t.identity,c=t.id,s=Object(m.useSelector)((function(e){return Object(C.d)(e,{urlToken:n})})),u=s||{},d=u.avatarUrl,b=u.isFollowing,f=u.name,p=Object(l.useRef)(),h=Object(l.useCallback)((function(){return window.open("https://www.zhihu.com/people/".concat(n))}),[n]),g=Object(l.useCallback)((function(){return p.current.trackEvent({eventType:"Click",elementLocation:{type:"Button",text:b?"取消关注":"关注"},action:b?"UnFollow":"Follow"}),!0}),[b]);return s?Object(a.c)(i.b,{content:{type:"User",token:n,id:c},children:[Object(a.b)(i.d,{ref:p}),Object(a.c)(o.Flex,{mt:"16px",css:{"& + &":{marginTop:"24px"}},alignItems:"center",children:[Object(a.b)(j.a,{url:d,size:38,css:{cursor:"pointer"},onClick:h}),Object(a.c)(o.Box,{ml:"14px",flex:"1",children:[Object(a.b)(o.Box,{color:"GBK03A",fontSize:"15px",lineHeight:"17px",fontWeight:"bold",onClick:h,css:[Object(v.d)(1),{cursor:"pointer"}],children:f}),Object(a.b)(o.Box,{color:"GBK04A",fontSize:"14px",lineHeight:"16px",mt:"3px",children:r})]}),Object(a.b)(x.a,{useCustomZa:!0,preset:"primary",type:"people",id:n,isFollowing:b,onClick:g,css:{padding:"0 14px",minWidth:"0px"}})]})]}):null}),S=function(e){var t,n,r,c,l,s=e.item,u=e.index;if("ANSWER"===s.type)r="Answer",c=(l=s.answer).question.title;else{if("ARTICLE"!==s.type)return null;r="Post",c=(l=s.article).title}var d=l,b=d.id,f=d.thumbnailInfo,p=d.url,h=d.voteupCount,m=d.commentCount,g=null==f||null===(t=f.thumbnails)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.url,O="".concat(Object(y.cnNiceNumber)(h),"赞同 · ").concat(Object(y.cnNiceNumber)(m),"评论");return Object(a.b)(i.b,{content:{type:r,id:String(b)},children:Object(a.c)(i.a,{as:"a",view:{elementLocation:{card:{index:u}}},zaType:"Card",zaAction:"OpenUrl",zaText:"视频引用的原文",extra:{link:{url:p}},href:p,target:"_blank",css:function(e){return{marginTop:"16px",display:"flex",alignItems:"center",height:"84px",borderRadius:"8px",padding:"0 12px",backgroundColor:e.colors.GBK10A}},children:[g&&Object(a.b)(o.Image,{src:g,width:"60px",height:"60px",mr:"12px",css:{borderRadius:"6px"}}),Object(a.c)(o.Box,{flex:"1",children:[Object(a.b)(o.Box,{fontWeight:"bold",fontSize:"15px",css:Object(v.d)(1),children:c}),Object(a.b)(o.Box,{color:"GBK06A",fontSize:"13px",children:O})]})]})})},R=function(e){var t,n,c=e.id,s=e.subAuthor,u=e.before,d=e.after,p=e.content,y=p||{},C=y.type,x=y.id,R=f.bb[C],A=Object(m.useDispatch)(),I=Object(m.useSelector)((function(e){return e.zvideos.creationReferences[c]})),T=Object(l.useState)(!1),E=Object(h.a)(T,2),N=E[0],B=E[1],z=Object(l.useCallback)((function(){B(!0),A(Object(w.m)(c))}),[A,c]);return s?Object(a.c)(a.a,{children:[Object(a.b)(i.b,{block:"CreationReferencesBar",content:p?{type:R,token:String(x)}:{},children:Object(a.c)(i.e,{zaText:!0,shouldTrackClick:!0,zaType:"Card",as:o.Flex,onClick:z,justifyContent:"space-between",alignItems:"center",pl:"16px",pr:"10px",py:"12px",color:"GBK06A",bg:"GBK10A",fontSize:"14px",lineHeight:"20px",css:{whiteSpace:"pre-wrap",cursor:"pointer"},children:[Object(a.c)(o.Flex,{children:[Object(a.b)(b,{css:{marginRight:"6.5px"}}),Object(a.b)(o.Box,{flexShrink:"0",children:u}),Object(a.c)(o.Flex,{alignItems:"center",mx:"6px",children:[Object(a.b)(j.a,{url:s.avatarUrl,round:!0,size:18,css:function(e){return{border:"1px solid ".concat(e.colors.GBK99A)}}}),Object(a.b)(o.Box,{flex:"1",ml:"6px",css:Object(v.d)(1),children:s.name})]}),Object(a.b)(o.Box,{flexShrink:"0",children:d})]}),Object(a.b)(r.a,{size:20,css:{flexShrink:"0"}})]})}),Object(a.b)(g.b,{onClose:function(){return B(!1)},title:"引用详情",children:N&&(I?Object(a.c)(i.b,{block:"CreationReferencesModal",children:[Object(a.b)(o.Box,{fontSize:"15px",fontWeight:"bold",children:"作者"}),null===(t=I.authors)||void 0===t?void 0:t.map((function(e){return Object(a.b)(k,{author:e},e.author)})),Object(a.b)(o.Box,{my:"24px",css:function(e){return{borderTop:"1px solid ".concat(e.colors.GBK10A)}}}),Object(a.b)(o.Box,{fontSize:"15px",fontWeight:"bold",children:"视频引用的原文"}),null===(n=I.originalContent)||void 0===n?void 0:n.map((function(e,t){return Object(a.b)(S,{item:e,index:t},t)}))]}):Object(a.c)(a.a,{children:[Object(a.b)(O.a,{variant:"P01"}),Object(a.b)(O.a,{variant:"T02"})]}))})]}):null},A=n(1105),I=function(e){var t=e.id,n=e.creationRelationship;if(!n)return null;if(Object(A.e)(n)){var o,r=Object(A.a)(n);return(null!==(o=null==r?void 0:r.author)&&void 0!==o?o:null)&&Object(a.b)(p,Object.assign({},r))}if(Object(A.f)(n)){var i,c=Object(A.d)(n),l=null!==(i=null==c?void 0:c.author)&&void 0!==i?i:null,s="answer"===(null==c?void 0:c.type)?"回答":"文章";return l&&Object(a.b)(R,{id:t,subAuthor:l,before:"本视频引用",after:"的".concat(s,"进行创作"),content:c})}return null}},1752:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(1),o=n(0),r=n.n(o),i=n(149),c=n(1055),l=n(969),s=n(40),u=n(51),d=Object.assign;var b=function(e){return r.a.createElement(u.a,d({width:"8",height:"10",fill:"none",viewBox:"0 0 8 10"},e),r.a.createElement("path",{fill:"#121212",d:"M1.315 9.302a.6.6 0 01-.915-.51v-7.52a.6.6 0 01.914-.51l6.11 3.754a.6.6 0 010 1.022l-6.11 3.764z",fillRule:"evenodd",clipRule:"evenodd"}))},f=n(45),p=n(1049),h=n(1037),m=function(e,t){return null!=e&&e.plainText?"".concat(e.plaintext," · "):Object(p.isReferenceRelation)(t)?"引用创作 · ":null};function v(e){var t=e.videoId,n=e.zvideoId,r=e.title,u=e.playCount,d=void 0===u?0:u,p=e.voteupCount,v=void 0===p?0:p,g=e.isComplete,O=void 0!==g&&g,j=e.startTime,y=void 0===j?0:j,C=e.creationReferences,w=e.creationRelationship,x=e.shouldExpandState,k=e.videoRef,S=e.alwaysShowVolumeButton,R=e.itemId,A=e.itemType,I=Number(y/1e3),T=Object(o.useRef)(),E=Object(o.useRef)({currentTime:0}),N=Object(o.useRef)(Object(l.c)(t,"*",!0));Object(h.a)({videoId:t,iframeRef:T}),Object(o.useEffect)((function(){var e=N.current.subscribeMessage((function(e,t){e===l.b.DOM.TIMEUPDATE&&(E.current.currentTime=t.currentTime)}));return function(){return e.unsubscribe()}}),[]);return Object(a.c)("div",{className:"VideoAnswerPlayer",children:[Object(a.b)("div",{className:"VideoAnswerPlayer-video",children:Object(a.b)(c.a,{zaProps:{type:"Answer",token:R},ref:Object(s.h)(T,k),className:"VideoAnswerPlayer-iframe",type:"video",src:"https://".concat(f.a.videoHost,"/video/").concat(t,"?").concat(new URLSearchParams([["itemId",R],["itemType",A]]).toString()),iframeProps:{allowFullScreen:!0},griffithProps:{alwaysShowVolumeButton:S}})}),x&&Object(a.c)("div",{role:"button",tabIndex:0,"aria-label":"跳转到对应视频",className:"VideoAnswerPlayer-stateBar",onClick:function(){N.current.dispatchMessage(T.current.contentWindow,l.a.PLAYER.PAUSE,{});var e=(E.current.currentTime+I).toFixed(1);window.open("https://www.zhihu.com/zvideo/".concat(n,"?playTime=").concat(e))},children:[Object(a.c)("div",{className:"VideoAnswerPlayer-state",children:[Object(a.b)("div",{className:"VideoAnswerPlayer-state--title",children:r}),Object(a.c)("div",{className:"VideoAnswerPlayer-state--data",children:[m(C,w),Object(i.cnNiceNumber)(d),"播放",v>0?" · ".concat(Object(i.cnNiceNumber)(v),"赞同"):null]})]}),!O&&Object(a.c)("div",{className:"VideoAnswerPlayer-action",children:[Object(a.b)(b,{style:{marginRight:"6px"}}),"完整版"]})]})]})}},1753:function(e,t,n){"use strict";var a=n(47),o=n(1),r=n(0),i=n.n(r),c=n(21),l=n(58),s=n(72),u=n(33),d=n(96),b=n(458),f=n(1770),p=n(1653),h=n(1508),m=n(171),v=n(40),g=n(59),O=n.n(g),j=n(31),y=function(e){var t=e.selectedQuestion,n=e.answerContent,a=e.checkRange,i=e.onClose,u=e.shouldPublish,d=e.setSelectedQuestion,f=e.selectedContribution,p=e.zvideoId,h=e.isEditing,g=e.duration,y=e.editorRef,C=e.closeAfterEdit,w=e.reset,x=e.MIN_RANGE,k=Object(s.i)(),S=Object(c.useDispatch)();return{onCancel:Object(v.d)((function(){k.trackEvent({eventType:"Click",action:"Close",block:"Modal",elementLocation:{type:"Button"}}),t&&n?m.a.confirm(Object(o.b)(l.Box,{textAlign:"center",children:"当前视频投稿内容离开后不保存"}),{title:Object(o.b)(l.Box,{ml:"23px",children:"取消当前视频投稿编辑吗？"}),text:{ok:"继续编辑",cancel:"取消离开"}}).then(O.a,i):i()})),onComplete:Object(v.d)((function(){u?S(Object(b.k)(p)).then((function(){S(Object(j.h)("投稿成功，审核后自动发布")),i()})):i()})),onSelectQuestion:Object(r.useCallback)((function(e){a&&a()||d(e)}),[a,d]),onSubmit:Object(v.d)((function(){var e={startTime:0,endTime:g,content:n};h?S(Object(b.n)(f.id,e)).then((function(){var e;C?i():(w(),null===(e=y.current)||void 0===e||e.changeRange(0,y.current.getDuration()))})).catch((function(e){var t=e.payload.message;S(Object(j.h)(t||"添加失败"))})):S(Object(b.a)(p,Object.assign(Object.assign({},e),{},{target:{parentObject:{type:"question",id:t.id,title:t.title},object:{type:"answer"}}}),g)).then((function(){var e;w(),null===(e=y.current)||void 0===e||e.autoNextRange(x)})).catch((function(e){var t=e.payload.message;S(Object(j.h)(t||"添加失败"))}))})),onCancelEdit:Object(v.d)((function(){h&&C?i():w()}))}},C=n(51),w=Object.assign;var x=function(e){return i.a.createElement(C.a,w({width:"153",height:"104",fill:"none",viewBox:"0 0 153 104"},e),i.a.createElement("path",{fill:"#F0F4F7",d:"M95.97 102.732H45.137c-13.147 0-23.805-10.651-23.805-23.79 0-37.472 30.396-67.85 67.893-67.85 27.184 0 49.221 22.023 49.221 49.19 0 23.445-19.017 42.45-42.476 42.45z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{stroke:"#2B6BCC",d:"M73.088 40.905v20.068M39.27 64.164v24.009M110.813 64.164v34.1",strokeLinecap:"round",strokeWidth:".475"}),i.a.createElement("path",{stroke:"#D3E0ED",d:"M110.813 14.992v16.205M39.199 29.223v8.56M33.03 37.754h99.165M28.754 64.125h112.104",strokeLinecap:"round",strokeWidth:".475"}),i.a.createElement("path",{fill:"#fff",d:"M.015 101.856h152.816L76.423 11.907.015 101.856z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#fff",d:"M81.32 27.703a4.895 4.895 0 01-4.897 4.894 4.895 4.895 0 01-4.897-4.894 4.895 4.895 0 014.897-4.893 4.895 4.895 0 014.897 4.893z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{stroke:"#D3E0ED",d:"M76.423 14.321V.811",strokeWidth:".633"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M61.587 29.415H91.26c.853 0 1.308-1.007.743-1.646L76.423 10.132 60.844 27.769c-.564.64-.11 1.646.743 1.646zM8.472 103.516h142.657V96.19H8.472v7.326z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#ABBEDB",d:"M15.014 96.116h33.27V88.79h-33.27v7.326zM50.03 70.63l9.3 24.354-2.967 1.132-9.3-24.355 2.967-1.13z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M57.15 76.295l6.94 18.175-4.316 1.646-6.94-18.175 4.316-1.646z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#ABBEDB",d:"M15.014 79.644H49.43V77.5H15.014v2.144z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M11.25 88.79h33.271v-3.663h-33.27v3.663zM17.548 77.5h30.737v-2.642H17.548V77.5z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#fff",d:"M17.809 84.866H48.25v-4.96H17.809v4.96z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M17.548 85.127h30.964v-5.483H17.548v5.483zm.522-.522h29.92v-4.439H18.07v4.439z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{stroke:"#fff",d:"M76.423 33.84v2.178M79.776 33.063l1.541 1.54M82.135 31.197h2.18M68.363 31.197h2.18M71.436 34.603l1.54-1.54",strokeWidth:"1.095"}),i.a.createElement("path",{stroke:"#D3E0ED",d:"M140.533 96.372c-2.182-9.496-.74-19.823 4.845-28.733",strokeWidth:"1.133"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M147.924 67.603c-.988.704-2.073.877-2.422.387-.348-.49.17-1.457 1.159-2.16.989-.704 2.073-.876 2.422-.386.349.489-.17 1.456-1.159 2.16z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M144.759 65.51c.704.987.877 2.071.387 2.42-.49.348-1.458-.17-2.162-1.159-.703-.988-.876-2.071-.386-2.42.49-.348 1.458.17 2.161 1.158zM145.6 73.984c-1.394.659-2.788.634-3.115-.057-.327-.69.538-1.784 1.931-2.443 1.394-.659 2.788-.633 3.115.057.327.69-.538 1.784-1.931 2.443z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M142.109 70.66c.66 1.393.634 2.786-.057 3.113-.69.327-1.785-.538-2.444-1.93-.659-1.393-.634-2.787.057-3.113.69-.327 1.785.537 2.444 1.93zM143.964 81.107c-1.607.76-3.216.731-3.593-.065-.377-.796.621-2.058 2.228-2.818 1.608-.76 3.216-.73 3.593.066.377.796-.621 2.057-2.228 2.817z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M139.938 77.273c.761 1.607.732 3.214-.065 3.59-.797.378-2.059-.62-2.82-2.225-.761-1.607-.731-3.215.065-3.591.797-.377 2.06.62 2.82 2.226zM143.224 87.524c-1.527.912-3.131 1.039-3.583.283-.452-.756.418-2.108 1.945-3.02 1.526-.912 3.13-1.038 3.582-.283.452.756-.418 2.108-1.944 3.02z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M138.845 84.098c.912 1.525 1.039 3.128.283 3.58-.757.452-2.11-.418-3.023-1.943-.912-1.525-1.039-3.128-.282-3.58.756-.452 2.109.418 3.022 1.943zM144.305 93.69c-1.507 1.384-3.285 1.9-3.971 1.154-.686-.746-.021-2.473 1.487-3.857 1.507-1.384 3.285-1.9 3.971-1.153.686.746.02 2.473-1.487 3.856z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M138.571 90.849c1.384 1.506 1.901 3.283 1.154 3.97-.747.685-2.475.02-3.859-1.487-1.385-1.506-1.901-3.282-1.154-3.968.747-.687 2.474-.021 3.859 1.485zM129.951 96.157h-10.3V84.28c0-.36.293-.654.655-.654h8.99c.362 0 .655.293.655.654v11.877z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{stroke:"#D3E0ED",d:"M129.296 87.595h1.069a2.31 2.31 0 012.311 2.31v.488a2.31 2.31 0 01-2.311 2.31h-1.069",strokeWidth:"1.634"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M125.974 72.734c-.263.388-.538.758-.701 1.174a2.514 2.514 0 00-.21 1.244c.089.826.641 1.546 1.238 2.216l.226.258c.08.103.164.202.238.31.139.22.265.456.33.714a2.376 2.376 0 01-.1 1.54c-.407.955-1.299 1.546-2.195 1.775.796-.48 1.47-1.145 1.715-1.95a1.985 1.985 0 00-.278-1.719c-.06-.082-.128-.157-.191-.237l-.237-.26c-.306-.358-.611-.736-.851-1.171-.232-.435-.412-.934-.404-1.452-.005-.518.177-1.011.437-1.419.263-.411.617-.735.983-1.023zM123.249 77.57c-.312.404-.568.873-.518 1.339.048.463.356.865.686 1.237l.125.143c.044.056.09.11.131.169a1.304 1.304 0 01.129 1.233c-.22.527-.712.85-1.202.988.445-.255.82-.628.961-1.074a1.108 1.108 0 00-.152-.967c-.034-.046-.072-.088-.107-.132l-.131-.144a3.948 3.948 0 01-.47-.646c-.128-.238-.227-.512-.224-.795a1.445 1.445 0 01.236-.78c.146-.226.336-.41.536-.571z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#ABBEDB",d:"M81.44 73.316h16.04v-5.712H81.44v5.712z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M112.063 96.19H66.857l1.491-15.342a10.45 10.45 0 0110.404-9.436h21.416a10.45 10.45 0 0110.403 9.436l1.492 15.342z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#ABBEDB",d:"M70.543 96.157h43.929v-.68h-43.93v.68z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#fff",d:"M72.252 92.11l-1.007 3.368h21.262v-1.684s-7.61-2.467-20.255-1.684zM112.762 92.11l1.007 3.368H92.507v-1.684s7.61-2.467 20.255-1.684z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{stroke:"#D3E0ED",d:"M92.507 93.794v1.684",strokeWidth:".368"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M99.775 69.924h-20.63a5.265 5.265 0 01-5.267-5.264v-1.992a5.265 5.265 0 015.267-5.264h20.63a5.265 5.265 0 015.267 5.264v1.992a5.265 5.265 0 01-5.267 5.264z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#BDCDE5",d:"M111.419 95.41a.666.666 0 01.648-.681l.578-.015.035 1.328-.579.015a.665.665 0 01-.682-.647z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#ABBEDB",d:"M112.685 96.225l-.045-1.695 6.832-.179.044 1.695-6.831.18zM119.521 96.231l-.054-2.072 4.69-.123.054 2.072-4.69.123z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#BDCDE5",d:"M124.211 96.108l-.054-2.072 1.283.374.033 1.258-1.262.44z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#D3E0ED",d:"M112.646 94.713l.034 1.329-.407.01-.034-1.328.407-.01z",fillRule:"evenodd",clipRule:"evenodd"}),i.a.createElement("path",{fill:"#BDCDE5",d:"M125.44 94.41l.033 1.258 1.768-.672-1.801-.586z",fillRule:"evenodd",clipRule:"evenodd"}))};t.a=function(e){var t=e.defaultVideo,n=e.title,i=e.description,m=e.duration,v=e.show,g=e.onClose,O=e.closeAfterEdit,j=void 0!==O&&O,C=e.shouldPublish,w=void 0!==C&&C,k=e.isProduce,S=void 0!==k&&k,R=Object(c.useDispatch)(),A=t.id,I=Object(b.o)(A).answer,T=(I=void 0===I?{}:I).totalCount,E=void 0===T?0:T,N=Object(b.r)(),B=Boolean(N),z=Object(b.p)(A),L=!B&&z.length===E,P=Object(r.useRef)(),M=Object(r.useState)(null),_=Object(a.a)(M,2),D=_[0],F=_[1],U=Object(r.useState)(""),V=Object(a.a)(U,2),G=V[0],q=V[1],H=!D&&w,K=Object(r.useCallback)((function(){F(null),q(""),R(Object(b.l)(null))}),[R]),W=y({selectedQuestion:D,answerContent:G,onClose:g,shouldPublish:w,setSelectedQuestion:F,selectedContribution:N,zvideoId:A,isEditing:B,duration:m,editorRef:P,closeAfterEdit:j,reset:K,MIN_RANGE:6e4}),Z=W.onCancel,Q=W.onComplete,Y=W.onSelectQuestion,J=W.onSubmit,X=W.onCancelEdit;return Object(r.useEffect)((function(){if(v)if(N){var e,t=N.target.parentObject,n=N.content,a=N.startTime,o=N.endTime;F(t),q(n),null===(e=P.current)||void 0===e||e.changeRange(a,o)}else K()}),[v,N,R,K]),Object(o.b)(d.b,{maskClosable:!1,onClose:Z,css:{width:"790px",maxHeight:"initial",".Modal-content":{lineHeight:"normal",padding:0,margin:0}},children:v&&Object(o.b)(s.b,{block:"Modal",children:Object(o.c)(s.e,{zaType:"Block",as:l.Flex,height:"600px",children:[Object(o.c)(l.Flex,{flexDirection:"column",width:"216px",height:"100%",css:function(e){return{backgroundColor:"".concat(e.colors.GBK10A)}},children:[Object(o.c)(l.Box,{as:"p",fontSize:"24px",fontFamily:"PingFang SC",fontWeight:"500",px:"10px",mt:"24px",mb:"4px",children:["已添加投稿 ",null==z?void 0:z.length,"/",E]}),Object(o.b)(l.Box,{flex:"1",overflowY:"auto",px:"20px",mt:"12px",children:z.length?Object(o.b)(h.a,{isProduce:S,zvideoId:A,showSelect:!0}):Object(o.c)(l.Flex,{justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100%",children:[Object(o.b)(x,{}),Object(o.b)(l.Text,{fontSize:"17px",fontFamily:"PingFang SC",fontWeight:"500",mt:"46px",css:function(e){return{color:e.colors.GBK02A}},children:"选择相关问题投稿"}),Object(o.b)(l.Text,{fontSize:"14px",fontFamily:"PingFang SC",fontWeight:"400",css:function(e){return{color:e.colors.GBK06A}},mt:"4px",children:"让更多人看到你的视频"})]})}),H&&Object(o.b)(l.Flex,{alignItems:"center",justifyContent:"space-between",px:"20px",height:"82px",css:{button:{width:"162px"}},children:Object(o.b)(s.a,{zaType:"Button",zaAction:"Save",zaText:!0,as:u.c,onClick:Q,preset:"primary",color:"blue",disabled:!z.length,children:"发布"})})]}),Object(o.b)(l.Flex,{flexDirection:"column",flex:"1",children:L?Object(o.c)(o.a,{children:[Object(o.b)(l.Box,{px:"20px",my:"24px",fontSize:"24px",fontWeight:"500",children:"选择投稿问题"}),Object(o.c)(l.Flex,{flexDirection:"column",justifyContent:"center",alignItems:"center",flex:"1",children:[Object(o.b)(l.Image,{width:"160px",height:"160px",src:"https://pic3.zhimg.com/v2-aee0d50112db6c845a1b7e7bcd2d7a84.png"}),Object(o.b)(l.Box,{mt:"10px",fontWeight:"500",fontSize:"17px",children:"已达到投稿数量上限"}),Object(o.b)(l.Box,{mt:"4px",fontSize:"14px",color:"GBK06A",children:"可移除已添加投稿来继续投稿问题"})]})]}):D?Object(o.b)(p.a,{value:G,onChange:q,onSubmit:J,onCancel:X,isEditing:B,selectedQuestion:D}):Object(o.b)(f.a,{zvideoId:A,title:n,description:i,onSelect:Y})})]})})})}},1755:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(0),u=n(3),d=n.n(u),b=n(21),f=n(33),p=n(88),h=n(46),m=n(129);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var g=function(e){Object(r.a)(n,e);var t=v(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleToggleAnonymousConfirm=function(){var t=e.props,n=t.question.id,a=t.updateQuestionAnonymous;(0,t.onClose)(),a(n)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.fillCurrentUserIfNeeded(["mcn_user_info"])}},{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.question,a=e.shown,o=e.isMCNUser,r=n.relationship.isAnonymous;return Object(l.b)(p.b,{title:r?"确认取消匿名身份？":"启用匿名后",onClose:t,size:"default",children:a&&Object(l.c)("div",{children:[r?Object(l.b)("div",{className:"Anonymous-confirm",children:Object(l.b)("p",{children:"取消匿名身份后， 提问、回答、赞同和关注将以实名显示。"})}):Object(l.b)("div",{className:"Anonymous-confirm",children:Object(l.c)("ul",{children:[Object(l.b)("li",{children:"提问、回答、赞同、关注会显示为匿名"}),Object(l.b)("li",{children:"不能邀请别人回答问题"}),Object(l.b)("li",{children:"不能将回答同步到圈子"}),Object(l.b)("li",{children:"除提问者本人，不能匿名编辑问题"}),Object(l.b)("li",{children:"匿名身份不能使用视频功能"}),Object(l.b)("li",{children:"不能被视频引用和联合创作"}),Object(l.b)("li",{children:"启用匿名将自动取消所有已获得的「专业认可」"}),Object(l.b)("li",{children:"匿名身份不能参与芝士任务"}),o&&Object(l.b)("li",{children:"不能使用商品信息发布功能"})]})}),Object(l.c)(p.a,{direction:"horizontal",children:[Object(l.b)(f.c,{onClick:t,color:"grey",children:"取消"}),Object(l.b)(f.c,{preset:"primary",color:"blue",onClick:this.handleToggleAnonymousConfirm,children:"确认"})]})]})})}}]),n}(s.Component);g.propTypes={question:d.a.object.isRequired};t.a=Object(b.connect)((function(e){var t,n=Object(h.b)(e);return{isMCNUser:2===(null==n||null===(t=n.mcnUserInfo)||void 0===t?void 0:t.status)}}),{updateQuestionAnonymous:m.pb,fillCurrentUserIfNeeded:h.e})(g)},1757:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(150),f=n(923),p=n(922),h=(n(1747),n(966)),m=n(960),v=n(962),g=n(1224),O=n(1421),j=n(433);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var C=function(e){Object(r.a)(n,e);var t=y(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.preset,a=e.ebook,o=e.lastreadTouchable,r=a.id,i=a.type,c=a.url,s=a.title,u=a.cover,d=a.authors,b=a.price,j=a.promotionPrice,y=a.description,C=a.relationship,w=void 0===C?{}:C,x=a.voteupCount,k=a.commentCount,S=(a.score,this.state),R=S.commentsShown,A=S.commentsAutoFocus,I=S.commentPattern;if(t!==p.c.interactive)return Object(l.b)(p.e,{title:Object(l.b)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:s}),data:a,link:c});var T={id:r,type:i},E=d.slice(0,2);return Object(l.c)(p.e,{className:"EBookItem",data:a,link:c,title:Object(l.b)("a",{className:"EBookItem-title",href:c,target:"_blank",rel:"noopener noreferrer",children:s}),image:Object(l.b)(n.Cover,{url:c,title:s,cover:u}),meta:Object(l.c)("div",{children:[Object(l.b)("div",{className:"EBookItem-description",children:y}),Object(l.c)(p.b,{children:[Object(l.c)("div",{children:[Object(l.b)("span",{children:"作者："}),E.map((function(e,t){return Object(l.c)("span",{children:[Object(l.b)(f.a,{user:e}),t<E.length-1&&"、"]},t)}))]}),Object(l.c)("div",{children:[Object(l.b)("span",{children:"知乎价："}),"number"==typeof j?Object(l.c)("span",{className:"EBookItem-price",children:[Object(O.a)(j),Object(l.b)("del",{children:Object(O.a)(b)})]}):Object(O.a)(b)]})]})]}),lastreadTouchable:o,children:[Object(l.c)(p.a,{className:"EBookItem-actions",children:[Object(l.b)(g.a,Object.assign(Object.assign({},T),{},{liked:Boolean(w.voting),count:x})),Object(l.b)(h.a,{onClick:this.handleCommentsShown,commentsShown:R,count:k}),Object(l.b)(v.a,Object.assign(Object.assign({},T),{},{title:s,authorName:d[0]&&d[0].name,href:c}))]}),Object(l.b)(m.a,{parent:a,commentPattern:I,shown:R,autoFocus:A,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);C.propTypes={preset:u.a.oneOf(Object.values(p.c))},C.defaultProps={preset:p.c.default},C.Cover=function(e){var t=e.url,n=e.cover,a=e.title;return Object(l.b)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(l.b)("img",{className:"EBookItem-image",style:{width:"78px",height:"104px"},src:Object(b.imgUrl)(n,"100w"),srcSet:"".concat(Object(b.imgUrl)(n,"xld")," 2x"),alt:a})})};t.a=Object(j.b)((function(e){var t=e.trackCardShow;return{module:"EBookItem",trackCardShow:void 0===t||t}}))(C)},1758:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(0),u=n(20),d=n(21),b=n(1290),f=n.n(b),p=n(385),h=n.n(p),m=n(201),v=n(598);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}function O(e,t){var n=t.os,a=t.id,o=t.sessionId,r=t.type;return e.replace("__OS__",n).replace("__REQUESTID__",o).replace("__SESSIONID__",o).replace("__ATOKEN__",a).replace("__AID__",a).replace("__PAGETYPE__",r)}var j=function(e){Object(r.a)(n,e);var t=g(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={urls:null,logged:!1},e.handleObserve=function(t){t&&e.log()},e.log=function(){e.state.logged||Promise.resolve(e.state.urls||e.load().then((function(t){return t?(t=e.normalize(t),e.setState({urls:t}),t):[]}))).then((function(e){return e.forEach((function(e){return e&&Object(m.c)(e)}))})).then((function(){return e.setState({logged:!0})}))},e.load=function(){var t=e.props,n=t.type,a=t.id;return(0,t.loadBrandEntityTrackUrl)({type:n,id:a}).then((function(e){return e&&e.payload&&e.payload.data}))},e.normalize=function(t){var n=h()(),a=e.props,o=a.ua,r=a.id,i=a.type,c=encodeURIComponent("其他");o.Android?c="android":o.iOS&&(c="ios");var l={os:c,id:r,sessionId:n,type:i};return t.map((function(e){return O(e,l)}))},e}return Object(o.a)(n,[{key:"render",value:function(){return!this.state.logged&&Object(l.b)(f.a,{rootMargin:"0px 0px 0px 0px",onChange:this.handleObserve})}}]),n}(s.Component),y=Object(u.compose)(Object(d.connect)((function(e){return{ua:e.env.userAgent}}),{loadBrandEntityTrackUrl:v.b}))(j)},1759:function(e,t,n){"use strict";var a=n(47),o=n(1),r=n(0),i=n.n(r),c=n(13),l=n.n(c),s=n(40),u=n(72),d=n(41),b=n.n(d),f=n(33),p=n(51),h=Object.assign;var m=function(e){return i.a.createElement(p.a,h({width:"1.2em",height:"1.2em",viewBox:"0 0 24 24"},e),i.a.createElement("path",{d:"M19.027 10c.239.01 1.973.138 1.973 2l-.001 8.027c-.009.24-.137 1.973-2 1.973H5.003C3.138 22 3.009 20.266 3 20.027V12c0-1.862 1.733-1.99 1.972-2zm-8.481 3.004c-.475-.277-.86-.064-.86.5V18.5c0 .553.394.773.86.5l4.278-2.496c.475-.277.466-.731 0-1.003zM18 2a2 2 0 012 2v1.134a1 1 0 011.207 1.573l-1.5 1.5a1 1 0 01-1.414 0l-1.5-1.5A1 1 0 0118 5.134V4h-2a1 1 0 110-2h2zm-8 4a1 1 0 010 2H4a1 1 0 110-2h6zm2-4a1 1 0 010 2H4a1 1 0 110-2h8z",fillRule:"evenodd"}))},v=n(1426),g=n(1103),O=n(60),j=!1,y=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],i=t[1],c=Object(r.useRef)(null);Object(r.useEffect)((function(){b.a.get("vessayTipShown")||i(!0)}),[]),Object(g.a)((function(){i(!1),b.a.set("vessayTipShown",!0)}),c);var l=Object(s.d)((function(e){e.stopPropagation(),i(!1),b.a.set("vessayTipShown",!0)}));return n&&Object(o.b)("img",{ref:c,onClick:l,onKeyUp:l,src:"https://pic1.zhimg.com/v2-97ce1cdeee383ce98263fc787f08ba9e.png",alt:"一键生成视频",css:{width:"347px",height:"120px",objectFit:"cover",transform:"translate(-50%, -100%)",position:"absolute",top:"4px",left:"50%"}})};t.a=function(e){var t=e.className,n=e.type,i=e.id,c=e.useVessayV2,d=e.isAuthor,p=Object(v.c)(n,i,c),h=Object(O.isBrowser)()&&location.href.includes("/people"),g=Object(r.useState)(!1),C=Object(a.a)(g,2),w=C[0],x=C[1],k=Object(s.f)({once:!0}),S=Object(a.a)(k,2),R=S[0],A=S[1];return Object(r.useEffect)((function(){A&&!j&&(j=!0,x(!0))}),[A]),Object(o.c)(u.a,{as:f.c,zaAction:"OpenUrl",zaText:"生成视频",zaType:"Button",preset:"plain",onClick:function(){b.a.set("vessayTipShown",!0),window.open(p)},className:l()("ContentItem-convertVideoButton",t),css:{position:"relative"},extra:{link:{url:p}},children:[w&&d&&h&&Object(o.b)(y,{}),Object(o.b)(m,{}),Object(o.b)("span",{ref:R,children:"一键生成视频"})]})}},1760:function(e,t,n){"use strict";var a,o=n(172),r=n(1),i=n(0),c=n(13),l=n.n(c),s=n(88),u=n(153),d=n(220),b=n.n(d),f=n(970),p=n(47),h=n(32),m=n(58),v=n(912),g=n(93),O=n(433),j=n(26),y=n(992),C=["children","targetId","active","setCursor"],w=function(e){var t=e.children,n=e.targetId,a=e.active,o=e.setCursor,i=Object(h.default)(e,C);return Object(r.b)(m.Text,Object.assign(Object.assign({color:a?"GBL01A":"GBK02A",fontWeight:a?"bold":"normal",css:{fontSize:"14px"}},i),{},{children:Object(r.b)(O.a,{module:"Content",moduleName:String(t),children:Object(r.c)(m.Flex,{css:{cursor:"pointer",alignItems:"center",height:"48px"},sx:{borderBottom:"1px solid",borderColor:"GBK09A"},onClick:function(e){j.a.trackEvent(e.target,{id:9745,action:"Click",name:"弹窗"});var t=document.querySelector("#"+n);o(n),t&&Object(y.a)(t)},children:[Object(r.b)(m.Text,{css:Object(g.d)(1),children:t}),Object(r.b)(v.a,{size:"24px",css:function(e){return{color:e.colors.GBL05A,flex:"0 0 auto",marginLeft:"auto"}}})]})})}))},x=function(e){return Object(r.b)(w,Object.assign({},e))},k={1:x,2:function(e){return Object(r.b)(w,Object.assign({pl:"20px"},e))}},S=function(e){var t=e.catalog,n=e.className,a=e.zaContent,o=Object(i.useState)(null),c=Object(p.a)(o,2),s=c[0],u=c[1];return Object(i.useEffect)((function(){if(null!=t&&t.length){var e=null,n=Object(y.d)();t.forEach((function(t){var a=document.querySelector("#"+t.targetId);(null==a?void 0:a.getBoundingClientRect().top)<=n+2&&(e=t.targetId)})),u(e)}}),[]),null!=t&&t.length?Object(r.b)(O.a,{trackCardShow:!0,view:{id:9744,name:"弹窗"},content:a,module:"Content",children:Object(r.b)(m.Box,{className:l()(n),children:Object(r.b)(m.Flex,{flexDirection:"column",css:{fontSize:"12px"},children:t.map((function(e){var t=e.titleLevel,n=e.text,a=e.targetId,o=k[t]||x;return Object(r.b)(o,{targetId:a,active:s===a,setCursor:u,children:n},a)}))})})}):null};t.a=function(e){var t=e.className,n=e.shown,c=e.onClose,d=e.html,p=e.sourceId,h=e.updated,m=e.author,v=e.zaContent,g=Object(i.useMemo)((function(){return Object(f.c)(d,p).catalog}),[d,p]);return Object(r.b)(s.b,{wrapperClassName:"CatalogModal-wrapper",className:l()("CatalogModal",t),title:"目录",subtitle:b()(a||(a=Object(o.a)([""," 编辑于",""])),null==m?void 0:m.name,Object(u.toDateTimeString)(h)),onClose:c,children:n&&Object(r.b)(S,{css:{paddingBottom:"16px"},catalog:g,zaContent:v})})}},1761:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(2077),f=n(219),p=n(149),h=n(153),m=n(922),v=n(966),g=n(960),O=n(929),j=n(962),y=n(1766),C=n(923);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var x=function(e){Object(r.a)(n,e);var t=w(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={commentsShown:!1,commentsAutoFocus:!0,commentPattern:"fixed"},e.handleCommentsShown=function(t,n){e.setState(n)},e.handleCommentsHide=function(){e.setState({commentsShown:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.preset,a=t.roundtable,o=t.lastreadTouchable,r=t.zaInfos.follow,i=a||{},c=i.id,s=i.logo,u=i.type,d=i.guests,w=void 0===d?[]:d,x=i.stopTime,k=i.startTime,S=i.followers,R=i.commentCount,A=i.isFollowing,I=this.state,T=I.commentsShown,E=I.commentsAutoFocus,N=I.commentPattern,B=Object(l.b)(y.a,{roundtable:a,target:"_blank"}),z="/roundtable/".concat(c);if(n!==m.c.interactive)return Object(l.b)(m.e,{data:a,link:z,title:B});var L,P,M,_={id:c,type:u};return Object(l.c)(m.e,{data:a,link:z,onRef:function(t){e.contentItem=t},title:Object(l.c)("div",{className:"RoundtableItem-title",children:[B,Object(l.c)("div",{className:"RoundtableItem-badge",children:[Object(l.b)(b.a,{text:!0,center:!0})," ",(L=k,P=x,M=Date.now()/1e3,M>P?"已结束":M<L?"".concat(Object(h.toRelativeString)(L)," 开始"):"".concat(Object(h.toRelativeString)(P)," 结束"))]})]}),image:Object(l.b)(f.a,{url:s,size:60}),meta:Object(l.c)("div",{className:"RoundtableItem-meta",children:[Object(p.formatNumber)(S)," 人关注","了该圆桌"]}),lastreadTouchable:o,children:[w.length>0&&Object(l.b)(m.b,{children:Object(l.c)("div",{children:[Object(l.b)("span",{children:"嘉宾："}),w.map((function(e,t){return Object(l.c)("span",{children:[Object(l.b)(C.a,{user:e}),t<w.length-1&&"、"]},t)}))]})}),Object(l.c)(m.a,{children:[Object(l.b)(O.a,Object.assign(Object.assign({},_),{},{isFollowing:A,zaId:r})),Object(l.b)(v.a,{onClick:this.handleCommentsShown,commentsShown:T,count:R}),Object(l.b)(j.a,Object.assign(Object.assign({},_),{},{title:a.name}))]}),Object(l.b)(g.a,{parent:a,commentPattern:N,shown:T,autoFocus:E,onClose:this.handleCommentsHide})]})}}]),n}(d.Component);x.propTypes={preset:u.a.oneOf(Object.values(m.c)),zaInfos:u.a.shape({follow:u.a.number,options:u.a.number}),renderOptions:u.a.func},x.defaultProps={preset:m.c.default,zaInfos:{}}},1762:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(37),o=n.n(a),r=n(65),i=n(1),c=n(21),l=n(72),s=n(171),u=n(6),d=Object(u.a)("coCreation",["CANCEL"]);function b(e){var t=e.contentType,n=e.contentId,a=Object(c.useDispatch)(),u=function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.confirm("",{title:"你确定要取消联合创作吗？",text:{ok:"同意"}});case 2:return e.next=4,a((o=t,r=n,{API:{types:d.CANCEL,endpoint:"creation-relationship/cancel",method:"PUT",body:{content_type:o,content_id:String(r)}}}));case 4:window.location.reload();case 5:case"end":return e.stop()}var o,r}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.b)(l.a,{zaType:"Button",zaText:!0,zaBlock:"CancelCoCreation",onClick:u,children:"取消联合创作"})}},1766:function(e,t,n){"use strict";var a=n(32),o=n(14),r=n(15),i=n(17),c=n(18),l=n(7),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(13),p=n.n(f),h=n(21),m=n(48),v=n(1012),g=n(1077),O=n(2077),j=n(1594),y=n(153),C=n(26),w=n(151),x=n(929),k=n(444),S=["userKey","isLast"],R=["toggler","roundtable","id","isLoading","onRef"];function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var I=function(e){var t=e.userKey,n=e.isLast,o=Object(a.default)(e,S),r=Object(h.useSelector)((function(e){return e.entities.users[t]}));if(!r)return null;var i=r.urlToken,c=r.name,l=r.isOrg;return Object(s.c)(m.Link,Object.assign(Object.assign({to:"/".concat(l?"org":"people","/").concat(i)},o),{},{children:[c,!n&&"、"]}))},T=function(e){Object(i.a)(n,e);var t=A(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).load=function(){var t=e.props,n=t.dispatch,a=t.id;n(Object(k.d)(a))},e.track=function(){var t=e.props.roundtable;e.hoverCardElement&&t&&(C.a.setModule(e.hoverCardElement,{module:"RoundtableItem"},{card:{content:{type:"Roundtable",token:t.id,item_num:t.questionsCount,follower_num:t.followers,publish_timestamp:1e3*t.stopTime}}}),C.a.trackCardShow(e.hoverCardElement))},e.handleOpen=function(){e.load(),e.track()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,o=t.roundtable,r=t.id,i=t.isLoading,c=t.onRef,l=Object(a.default)(t,R),u=o||{},d=u.name,b=u.type,f=u.description,p=u.guests,h=void 0===p?[]:p,m=u.activitiesCount,C=u.questionsCount,k=u.followers,S=u.logo,A=u.stopTime,T=u.isFollowing,E=h.length,N="/roundtable/".concat(r);return Object(s.c)(g.b,Object.assign(Object.assign({toggler:n,preventCloseOnTarget:!0,isLoading:i,onOpen:this.handleOpen,size:"large"},l),{},{onRef:function(t){c&&"function"==typeof c&&c(t),e.hoverCardElement=t},children:[Object(s.b)(g.a,{title:Object(s.b)("a",{target:"_blank",href:"/roundtable/".concat(r),rel:"noopener noreferrer",children:d}),avatarUrl:S,attrInfo:Object(s.c)("div",{children:[Object(s.b)(O.a,{text:!0,center:!0})," ",Object(y.toRelativeString)(A)]})}),f&&Object(s.b)("div",{children:Object(s.b)("div",{className:"HoverCard-description",children:f})}),Object(s.c)("div",{children:[Object(s.b)(j.a,{text:!0,center:!0})," 组织机构",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),Object(s.b)("a",{href:"/topic/19793502",children:"圆桌"})]}),E>0&&Object(s.c)("div",{children:["嘉宾",Object(s.b)("span",{className:"HoverCard-separate",children:" | "}),h.map((function(e,t){var n=e.member;return Object(s.b)(I,{userKey:n,isLast:t===E-1},t)}))]}),Object(s.c)("div",{children:[Object(s.c)(v.a,{children:[Object(s.b)(v.a.Item,{tag:w.a,preset:"plain",a:!0,to:N,name:"动态",value:m}),Object(s.b)(v.a.Item,{tag:w.a,preset:"plain",a:!0,to:"".concat(N,"/question"),name:"问题",value:C}),Object(s.b)(v.a.Item,{tag:w.a,preset:"plain",a:!0,to:"".concat(N,"/followers"),name:"关注者",value:k})]}),Object(s.b)("div",{className:"HoverCard-buttons",children:Object(s.b)(x.a,{id:r,type:b,isFollowing:T,preset:"primary"})})]})]}))}}]),n}(b.Component),E=Object(h.connect)((function(e,t){var n=t.id,a=e.entities.roundtables,o=e.loading.local;return{roundtable:a[n],isLoading:Boolean(o["roundtable/".concat(n)])}}))(T),N=["roundtable","noHoverCard","style","className","children"];function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var z=function(e){Object(i.a)(n,e);var t=B(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.roundtable,n=t.name,o=t.id,r=e.noHoverCard,i=e.style,c=e.className,l=e.children,u=Object(a.default)(e,N),d=l||n;return r||(d=Object(s.b)(E,{toggler:d,id:o})),Object(s.b)("a",Object.assign(Object.assign({style:i,className:p()("RoundTableLink",c),href:"/roundtable/".concat(o)},u),{},{children:d}))}}]),n}(b.Component);z.propTypes={roundtable:d.a.object.isRequired,noHoverCard:d.a.bool,style:d.a.object,className:d.a.string,children:d.a.node},z.defaultProps={noHoverCard:!1};t.a=z},1768:function(e,t,n){"use strict";var a=n(47),o=n(1),r=n(0),i=n(96),c=n(33),l=n(956);function s(e){var t=e.campaign,n=e.selected,a=e.onSelect,r=t.title,i=t.description;return Object(o.c)("div",{className:"VideoContributableCampaignModalCampaign",children:[Object(o.c)("div",{role:"button",tabIndex:0,className:"VideoContributableCampaignModalCampaign-info",onClick:a,children:[Object(o.b)("div",{className:"VideoContributableCampaignModalCampaign-title",children:r}),Object(o.b)("div",{className:"VideoContributableCampaignModalCampaign-description",children:i})]}),Object(o.b)(l.a,{checked:n,onChange:a,size:16})]})}t.a=function(e){var t=e.shown,n=e.onClose,l=e.defaultCampaignId,u=e.campaignList,d=e.onSubmit,b=Object(r.useState)((function(){return l?u.find((function(e){return e.id===l})):null})),f=Object(a.a)(b,2),p=f[0],h=f[1];return Object(o.b)(i.b,{title:"选择活动",size:"large",onClose:n,children:t&&Object(o.c)(o.a,{children:[Object(o.b)("div",{className:"VideoContributableCampaignModal-list",children:u.map((function(e){return Object(o.b)(s,{campaign:e,selected:(null==p?void 0:p.id)===e.id,onSelect:function(){h((null==p?void 0:p.id)===e.id?null:e)}},e.id)}))}),Object(o.c)(i.a,{direction:"horizontal",children:[Object(o.b)(c.c,{onClick:n,children:"返回"}),Object(o.b)(c.c,{preset:"primary",color:"blue",onClick:function(){d(p)},children:"确定"})]})]})})}},1770:function(e,t,n){"use strict";var a=n(47),o=n(1),r=n(0),i=n(58),c=n(432),l=n(898),s=n(59),u=n.n(s),d=n(1400),b=n.n(d),f=n(72),p=n(40),h=n(21),m=n(225),v=n(928),g=n(13),O=n.n(g),j=n(257),y=n.n(j),C=n(60),w=n(622),x=n(441),k=Object(C.isBrowser)()?r.useLayoutEffect:function(){},S=function(e){return e===window?window.pageYOffset:e.scrollTop},R=function(){return window},A=function(e){var t=e.children,n=e.className,i=e.getContainer,c=void 0===i?R:i,l=e.isDrained,s=e.isLoading,u=e.isLocal,d=e.isPrevDrained,b=void 0===d||d,f=e.onLoad,p=e.onRef,h=e.placeholder,m=e.stopPropagation,v=e.threshold,g=void 0===v?1200:v,j=Object(r.useState)(!1),C=Object(a.a)(j,2),A=C[0],I=C[1],T=Object(r.useState)(!1),E=Object(a.a)(T,2),N=E[0],B=E[1],z=Object(r.useState)(!1),L=Object(a.a)(z,2),P=L[0],M=L[1],_=Object(r.useRef)(),D=Object(r.useRef)(),F=Object(r.useRef)(),U=Object(r.useRef)(),V=Object(r.useRef)(0),G=Object(r.useRef)(0),q=Object(r.useRef)(s),H=Object(r.useCallback)((function(){var e=D.current,t=U.current,n=F.current,a=S(e),o=a-V.current;V.current=a;var r=o<0,i=r&&b||!r&&l;if(!q.current&&!i){var c=function(e){var t,n,a=e.isPrev,o=e.container,r=e.nextPlaceholderEl,i=e.prevPlaceholderEl;if(void 0!==o.innerHeight)t=0,n=o.innerHeight;else{var c=o.getBoundingClientRect();t=c.top,n=c.bottom}var l=r.getBoundingClientRect().top;return a?t-i.getBoundingClientRect().bottom:l-n}({isPrev:r,container:e,nextPlaceholderEl:t,prevPlaceholderEl:n});r&&(G.current=t.getBoundingClientRect().top,M(c<=0)),c<=g&&(I(r),f(r))}}),[l,b,f,g]);Object(r.useEffect)((function(){q.current=s}),[s]),Object(r.useEffect)((function(){var e=c(_.current);D.current=e}),[c]),Object(r.useEffect)((function(){if(!l||!b){var e=D.current;H();var t=y()(H,100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t),t.cancel()}}}),[l,b,H]),k((function(){var e,t,n=D.current,a=U.current;if(n&&(A&&!s)){var o=S(n)+a.getBoundingClientRect().top-G.current;return t=o,(e=n)===window?e.scrollTo(e.pageXOffset,t):e.scrollTop=t,V.current=o,function(){G.current=a.getBoundingClientRect().top}}}),[s,A]);var K=u&&r.Children.toArray(t).length<=0;Object(r.useEffect)((function(){if(s&&K){var e=setTimeout((function(){B(q.current)}),300);return function(){clearTimeout(e),B(!1)}}}),[s,K]);var W=h;return N?W=Object(o.b)(x.a,{}):K&&(W=null),Object(o.c)(w.a,{className:O()(n,{"InfiLoader--bounceShown":N}),stopPropagation:m,onRef:function(e){"function"==typeof p?p(e):"object"==typeof p&&(p.current=e),_.current=e},children:[Object(o.b)("div",{ref:F,children:A&&!b&&s&&P&&W}),t,Object(o.b)("div",{ref:U,children:!l&&s&&W})]})},I=n(1652),T=n(292),E=n(458),N=b()(1);t.a=function(e){var t=e.title,n=e.description,s=e.zvideoId,d=e.onSelect,b=Object(T.b)(),g=Object(h.useDispatch)(),O=Object(r.useRef)(),j=Object(r.useState)(!1),y=Object(a.a)(j,2),C=y[0],w=y[1],x=Object(r.useState)(""),k=Object(a.a)(x,2),S=k[0],R=k[1],B=Object(r.useState)([]),z=Object(a.a)(B,2),L=z[0],P=z[1],M=Object(h.useSelector)((function(e){return e.zvideos.contribution[C?"questionSearchResults":"recommendQuestions"]})),_=M.isLoading,D=M.paging.isEnd,F=M.data,U=Object(f.i)(),V=Object(p.c)((function(e){return N((function(){return b("/api/v4/search/suggest",{query:{q:e},headers:{"X-API-Version":"3.0.91","X-App-Za":"OS=Web"}})})).then((function(e){var t=e.payload.suggest;P(t.map((function(e,t){return Object.assign(Object.assign({},e),{},{name:e.query,index:t})})))}),u.a)}),500),G=Object(r.useCallback)((function(){O.current&&(O.current.scrollTop=0)}),[]),q=Object(p.d)((function(e){e!==S&&(R(e),e?V(e):(G(),w(!1),P([])))})),H=Object(p.d)((function(e,t){var n=t.index;U.trackEvent({eventType:"Click",action:"Question",block:"SuggestItem",elementLocation:{type:"Text",text:e,card:{index:n}}}),G(),R(e),w(!0),g(Object(E.i)(e,!0))})),K=Object(p.d)((function(){S&&(G(),w(!0),g(Object(E.i)(S,!0)))})),W=Object(p.d)((function(){F.length&&g(S?Object(E.i)():Object(E.j)())}));return Object(r.useEffect)((function(){g(Object(E.j)({zvideoId:s,title:t,description:n},!0))}),[s,t,n,g]),Object(o.c)(o.a,{children:[Object(o.b)(i.Box,{px:"20px",my:"24px",fontSize:"24px",fontWeight:"500",children:"选择投稿问题"}),Object(o.b)(m.b,{autoSelect:!1,value:S,onChange:q,onSelect:H,onEnterInput:K,items:L,css:{".Popover":{width:"100%",padding:"0 20px",boxSizing:"border-box"},".Input-wrapper":{width:"100%"}},inputProps:{grey:!0,placeholder:"搜索相关问题…",after:S?Object(o.b)(c.a,{size:16,css:function(e){return{cursor:"pointer",color:e.colors.GBK07A}},onClick:function(){return q("")}}):Object(o.b)(l.a,{size:20,css:function(e){return{color:e.colors.GBL05A}}})},menuProps:{style:{width:"470px"}}}),D&&!F.length?Object(o.b)(v.a.EI1,{image:"default",content:"暂无相关问题"}):Object(o.b)(A,{onRef:O,css:{flex:"1",padding:"0 20px",overflowY:"auto"},isLoading:_,isDrained:D,onLoad:W,getContainer:function(e){return e},children:F.map((function(e,t){return Object(o.b)(I.a,{onSelect:function(){d(e)},index:t,item:e,css:function(e){return{"& + &":{borderTop:"1px solid ".concat(e.colors.GBK09A)}}}},e.id)}))})]})}},1771:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(47),o=n(1),r=n(40),i=n(0),c=n(292),l=function(e){return new Promise((function(t,n){try{var a=document.createElement("video");a.preload="metadata",a.onloadedmetadata=function(){URL.revokeObjectURL(a.src),t(Math.floor(1e3*a.duration))},a.onerror=n,a.src=URL.createObjectURL(e)}catch(e){n(e)}}))},s=Object(i.createContext)({});t.b=function(e){var t=e.children,n=e.zvideo_id,u=e.defaultVideo,d=Object(i.useState)(null),b=Object(a.a)(d,2),f=b[0],p=b[1],h=Object(c.b)(),m=Object(r.d)((function(e){h&&n&&h("/api/v4/zvideos/".concat(n,"/publish/permissions?full_duration_millis=").concat(e)).then((function(e){if(e.ok){var t=e.payload,n=(null!=t?t:{}).chapters;if(!n)return;var a=Object.assign(Object.assign({},n),{minInterval:"number"==typeof n.minInterval?parseInt("".concat(n.minInterval/1e3)):5});p(a)}}))})),v=Object(i.useRef)();return Object(i.useEffect)((function(){var e;n&&void 0===v.current&&(u.file&&u.file instanceof File?l(u.file).then((function(e){v.current=e,m(e)})):null!==(e=u.video)&&void 0!==e&&e.duration&&m(1e3*u.video.duration))}),[u,n,h,m]),Object(o.b)(s.Provider,{value:f,children:f&&t})}},2072:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowUturnLeft24","data-old-api":"Undo24"},e),{className:"ZDI ZDI--Undo24"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M4.165 6.59l3.522-3.522a.75.75 0 011.06 1.061L6.494 6.384h6.155c3.924 0 7.029 2.69 7.029 6.687 0 2.017-.96 3.706-2.297 4.875-1.329 1.162-3.071 1.849-4.732 1.849H5.082a.75.75 0 010-1.5h7.566c1.269 0 2.666-.535 3.745-1.478 1.07-.935 1.784-2.234 1.784-3.746 0-3.064-2.325-5.187-5.53-5.187H6.494l2.255 2.255a.75.75 0 01-1.06 1.061L4.163 7.677a.748.748 0 010-1.086z"}))}function l(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowUturnLeft24","data-old-api":"Undo"},e),{className:"Zi Zi--Undo"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M4.165 6.59l3.522-3.522a.75.75 0 011.06 1.061L6.494 6.384h6.155c3.924 0 7.029 2.69 7.029 6.687 0 2.017-.96 3.706-2.297 4.875-1.329 1.162-3.071 1.849-4.732 1.849H5.082a.75.75 0 010-1.5h7.566c1.269 0 2.666-.535 3.745-1.478 1.07-.935 1.784-2.234 1.784-3.746 0-3.064-2.325-5.187-5.53-5.187H6.494l2.255 2.255a.75.75 0 01-1.06 1.061L4.163 7.677a.748.748 0 010-1.086z"}))}},2073:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowUturnRight24","data-old-api":"Redo24"},e),{className:"ZDI ZDI--Redo24"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M19.454 6.6L15.92 3.07a.75.75 0 10-1.06 1.06l2.255 2.255H10.96c-3.924 0-7.029 2.69-7.029 6.687 0 2.017.96 3.706 2.297 4.875 1.329 1.162 3.071 1.849 4.733 1.849h7.565a.75.75 0 000-1.5H10.96c-1.27 0-2.667-.535-3.745-1.478-1.07-.935-1.785-2.233-1.785-3.746 0-3.064 2.325-5.187 5.53-5.187h6.155l-2.255 2.256a.75.75 0 001.06 1.06l3.536-3.535a.75.75 0 00-.003-1.064z"}))}function l(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowUturnRight24","data-old-api":"Redo"},e),{className:"Zi Zi--Redo"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M19.454 6.6L15.92 3.07a.75.75 0 10-1.06 1.06l2.255 2.255H10.96c-3.924 0-7.029 2.69-7.029 6.687 0 2.017.96 3.706 2.297 4.875 1.329 1.162 3.071 1.849 4.733 1.849h7.565a.75.75 0 000-1.5H10.96c-1.27 0-2.667-.535-3.745-1.478-1.07-.935-1.785-2.233-1.785-3.746 0-3.064 2.325-5.187 5.53-5.187h6.155l-2.255 2.256a.75.75 0 001.06 1.06l3.536-3.535a.75.75 0 00-.003-1.064z"}))}},2077:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Clock24","data-old-api":"Clock24"},e),{className:"ZDI ZDI--Clock24"+(e.className?" ".concat(e.className):"")}),o.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},o.a.createElement("path",{d:"M15.481 14.438a.75.75 0 01-1.044.184l-2.867-2.008a.75.75 0 01.86-1.229l2.867 2.008a.75.75 0 01.184 1.045z"}),o.a.createElement("path",{d:"M12 12.75a.75.75 0 01-.75-.75V8.5a.75.75 0 011.5 0V12a.75.75 0 01-.75.75z"}),o.a.createElement("path",{d:"M12 19.5a7.5 7.5 0 100-15 7.5 7.5 0 000 15zm0 1.5a9 9 0 100-18 9 9 0 000 18z"})))}function l(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Clock24","data-old-api":"Time"},e),{className:"Zi Zi--Time"+(e.className?" ".concat(e.className):"")}),o.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},o.a.createElement("path",{d:"M15.481 14.438a.75.75 0 01-1.044.184l-2.867-2.008a.75.75 0 01.86-1.229l2.867 2.008a.75.75 0 01.184 1.045z"}),o.a.createElement("path",{d:"M12 12.75a.75.75 0 01-.75-.75V8.5a.75.75 0 011.5 0V12a.75.75 0 01-.75.75z"}),o.a.createElement("path",{d:"M12 19.5a7.5 7.5 0 100-15 7.5 7.5 0 000 15zm0 1.5a9 9 0 100-18 9 9 0 000 18z"})))}},2180:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"QuestionShieldFill24","data-old-api":"FeaturedQuestion"},e),{className:"Zi Zi--FeaturedQuestion"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M3 5.4A2.4 2.4 0 015.4 3h13.2A2.4 2.4 0 0121 5.4v11.04a2.4 2.4 0 01-1.425 2.194l-6.6 2.933a2.4 2.4 0 01-1.95 0l-6.6-2.933A2.4 2.4 0 013 16.44V5.4zm7.396 3.093c-.232.403-.246.855-.246.977a.75.75 0 01-1.5 0c0-.191.011-.973.447-1.728.474-.819 1.383-1.492 2.927-1.492 1.58 0 2.583.787 3.055 1.807.438.949.406 2.077.034 2.84-.212.434-.544.728-.85.942-.217.152-.472.293-.68.409a14.53 14.53 0 00-.182.102c-.533.307-.634.46-.634.695a.75.75 0 01-1.5 0c0-1.145.842-1.682 1.386-1.995.095-.055.182-.103.263-.148.185-.103.338-.188.49-.294.197-.138.303-.255.36-.37.163-.335.21-.99-.049-1.551-.226-.49-.698-.937-1.693-.937-1.03 0-1.433.406-1.628.743zm2.678 7.706a1.05 1.05 0 11-2.1.001 1.05 1.05 0 012.1-.001z",fillRule:"evenodd",clipRule:"evenodd"}))}},2181:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Cheese24","data-old-api":"Cheese24"},e),{className:"ZDI ZDI--Cheese24"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M5.66 5.37l16.225-1.766a.759.759 0 01.71 1.17l-9.248 14.6a3.375 3.375 0 01-5.765-.12L1.2 8.255l1.34-.787 6.297 10.885a1.871 1.871 0 002.56.71 1.871 1.871 0 00.71-2.56L5.66 5.368zm5.187 4.053a1.51 1.51 0 101.668-2.519 1.51 1.51 0 00-1.668 2.519zm5.14-.063a.973.973 0 00.537.172v.014a.964.964 0 00.986-.964.972.972 0 10-1.524.778zM3.391 6.766l1.416-.81 6.182 10.818-1.416.809L3.392 6.766z",fillRule:"evenodd",clipRule:"evenodd"}))}function l(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Cheese24","data-old-api":"Cheese"},e),{className:"Zi Zi--Cheese"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M5.66 5.37l16.225-1.766a.759.759 0 01.71 1.17l-9.248 14.6a3.375 3.375 0 01-5.765-.12L1.2 8.255l1.34-.787 6.297 10.885a1.871 1.871 0 002.56.71 1.871 1.871 0 00.71-2.56L5.66 5.368zm5.187 4.053a1.51 1.51 0 101.668-2.519 1.51 1.51 0 00-1.668 2.519zm5.14-.063a.973.973 0 00.537.172v.014a.964.964 0 00.986-.964.972.972 0 10-1.524.778zM3.391 6.766l1.416-.81 6.182 10.818-1.416.809L3.392 6.766z",fillRule:"evenodd",clipRule:"evenodd"}))}},2276:function(e,t,n){var a;
/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n=function(){function e(){}function t(e,t){for(var n=t.length,a=0;a<n;++a)o(e,t[a])}e.prototype=Object.create(null);var n={}.hasOwnProperty;var a=/\s+/;function o(e,o){if(o){var r=typeof o;"string"===r?function(e,t){for(var n=t.split(a),o=n.length,r=0;r<o;++r)e[n[r]]=!0}(e,o):Array.isArray(o)?t(e,o):"object"===r?function(e,t){if(t.toString===Object.prototype.toString)for(var a in t)n.call(t,a)&&(e[a]=!!t[a]);else e[t.toString()]=!0}(e,o):"number"===r&&function(e,t){e[t]=!0}(e,o)}}return function(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];var r=new e;t(r,a);var i=[];for(var c in r)r[c]&&i.push(c);return i.join(" ")}}();e.exports?(n.default=n,e.exports=n):void 0===(a=function(){return n}.apply(t,[]))||(e.exports=a)}()},2277:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ChatBubbleFill24","data-old-api":"Comment"},e),{className:"Zi Zi--Comment"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M11.982 3C17.211 3 21 7.271 21 12.014c0 1.514-.441 3.072-1.215 4.496a.946.946 0 00-.063.813l.603 2.018c.135.487-.279.847-.738.703l-1.818-.54c-.495-.163-.882.044-1.341.324C15.114 20.602 13.476 21 12 21c-4.464 0-9-3.452-9-9.014C3 7.19 6.87 3 11.982 3z"}))}},2278:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ThumbFill24","data-old-api":"Like"},e),{className:"Zi Zi--Like"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M8.5 4.078c0-1.834 1.986-2.979 3.573-2.06a4.826 4.826 0 012.379 4.71l-.114 1.022h3.581c2.53 0 4.334 2.454 3.58 4.868l-1.823 5.833a3.784 3.784 0 01-3.848 2.64c-2.372-.147-6.042-.341-8.828-.341H4.5A1.75 1.75 0 012.75 19V9.5c0-.967.784-1.75 1.75-1.75h.637a3.418 3.418 0 003.19-2.191c.115-.296.173-.611.173-.928v-.553z"}))}},2279:function(e,t,n){e.exports=n.p+"assets/ReviewingPlaceholder.b2c9d906.svg"},2280:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(87),o=n(61);function r(e){Object(o.a)(1,arguments);var t=Object(a.a)(e),n=t.getHours();return n}},2281:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(87),o=n(61);function r(e){Object(o.a)(1,arguments);var t=Object(a.a)(e),n=t.getMinutes();return n}},2282:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"XmarkCircleFill24","data-old-api":"XmarkCircleFill24"},e),{className:"ZDI ZDI--XmarkCircleFill24"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10zm-6.47-3.53a.75.75 0 010 1.06L13.06 12l2.47 2.47a.75.75 0 11-1.06 1.061L12 13.061l-2.47 2.47a.75.75 0 11-1.06-1.061L10.939 12l-2.47-2.469a.75.75 0 111.061-1.06L12 10.94l2.47-2.47a.75.75 0 011.06 0z",fillRule:"evenodd",clipRule:"evenodd"}))}function l(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"XmarkCircleFill24","data-old-api":"CircleClose24"},e),{className:"ZDI ZDI--CircleClose24"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10zm-6.47-3.53a.75.75 0 010 1.06L13.06 12l2.47 2.47a.75.75 0 11-1.06 1.061L12 13.061l-2.47 2.47a.75.75 0 11-1.06-1.061L10.939 12l-2.47-2.469a.75.75 0 111.061-1.06L12 10.94l2.47-2.47a.75.75 0 011.06 0z",fillRule:"evenodd",clipRule:"evenodd"}))}},2283:function(e,t,n){e.exports=n.p+"assets/deleteComment.97d8abc0.gif"},2284:function(e,t,n){e.exports=n.p+"assets/liukanshan_loudspeaker.292ada3b.svg"},2285:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ArrowExpand24","data-old-api":"FullscreenEnter"},e),{className:"Zi Zi--FullscreenEnter"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M20 3.25h-6.5a.75.75 0 000 1.5h4.69l-5.22 5.22a.75.75 0 101.06 1.06l5.22-5.22v4.69a.75.75 0 001.5 0V4a.747.747 0 00-.75-.75zM9.97 12.97l-5.22 5.22V13.5a.75.75 0 00-1.5 0V20a.748.748 0 00.75.75h6.5a.75.75 0 000-1.5H5.81l5.22-5.22a.75.75 0 10-1.06-1.06z",fillRule:"evenodd",clipRule:"evenodd"}))}},2286:function(e,t,n){"use strict";var a=n(1662);n.o(a,"animated")&&n.d(t,"animated",(function(){return a.animated})),n.o(a,"useSpring")&&n.d(t,"useSpring",(function(){return a.useSpring})),n.o(a,"useTransition")&&n.d(t,"useTransition",(function(){return a.useTransition}))},2835:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"PaperplaneFill24","data-old-api":"Share"},e),{className:"Zi Zi--Share"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M20.223 1.881a.8.8 0 011.205.778l-1.874 16.393a.9.9 0 01-1.204.742l-4.617-1.692a.7.7 0 00-.83.28l-1.929 3.021c-.43.674-1.474.37-1.474-.43v-3.866a.8.8 0 01.18-.505l5.809-7.15a.595.595 0 00-.897-.782l-5.933 6.357a1.1 1.1 0 01-1.257.251l-4.085-1.847a.8.8 0 01-.08-1.415L20.223 1.88z"}))}},2836:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Clap24","data-old-api":"Clap"},e),{className:"Zi Zi--Clap"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M6.02 4.198a.707.707 0 001.15.29l.051-.048a3.76 3.76 0 012.852-.996l.832.064a.717.717 0 00.139-1.427l-.37-.043a5.675 5.675 0 00-4.12 1.143l-.297.229a.707.707 0 00-.237.788z"}),o.a.createElement("path",{d:"M2.594 9.339a2.097 2.097 0 00.124 2.296 2.11 2.11 0 00-.435.531c-.577 1-.245 2.279.751 2.854l.733.423c-.116.12-.22.258-.307.409-.577 1-.246 2.279.751 2.854l4.397 2.539a7.306 7.306 0 008.439-.807 7.278 7.278 0 004.164-3.325c1.512-2.62.716-6.075-1.249-8.49-.67-.826-1.456-1.55-2.242-2.276-.72-.664-1.44-1.328-2.072-2.07a2.087 2.087 0 00-2.848.777c-.019.034-.07.117-.137.228l-.251.418c-1.798-.77-2.495.591-2.954 2.175L7.734 6.88a2.087 2.087 0 00-2.847.776 2.11 2.11 0 00-.243.643 2.097 2.097 0 00-2.05 1.04zm17.25 6.982a5.737 5.737 0 01-.662.923c.924-2.78-.017-5.787-2.303-7.682-.223-.185-.45-.363-.678-.541-.467-.367-.934-.733-1.356-1.15l-1.01-.999c.074-.31.17-.663.334-1.029.175-.39.45-.326.685-.19.56.656 1.194 1.251 1.828 1.846.868.816 1.736 1.631 2.413 2.6 1.312 1.878 1.83 4.35.749 6.222zM4.14 10.816a.503.503 0 01-.178-.688.503.503 0 01.685-.19l5.572 3.217a.795.795 0 00.795-1.376L6.433 9.134a.503.503 0 01-.178-.688.503.503 0 01.685-.19l5.572 3.217a.795.795 0 00.795-1.377l-2.103-1.213c-.335-.194.102-2.022.901-1.56l1.957 1.932c.355.351.745.664 1.136.977.297.238.594.476.875.73 1.913 1.732 2.495 4.477 1.144 6.818a5.716 5.716 0 01-7.808 2.091L5.006 17.33a.503.503 0 01-.178-.688.503.503 0 01.685-.19l2.846 1.643a.795.795 0 00.795-1.376l-5.325-3.074a.503.503 0 01-.177-.689.503.503 0 01.685-.19l4.58 2.645a.795.795 0 00.795-1.376L4.14 10.816z",fillRule:"evenodd",clipRule:"evenodd"}))}},2837:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(141),o=n(587),r=n(61);function i(e,t){Object(r.a)(2,arguments);var n=Object(a.a)(t);return Object(o.a)(e,6e4*n)}},2838:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"HashBubbleFill24","data-old-api":"Hashtag"},e),{className:"Zi Zi--Hashtag"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M6.24 1.924c-.432 0-.829 0-1.152.044-.355.047-.73.16-1.04.469-.309.309-.421.685-.47 1.04-.042.323-.042.72-.042 1.153v13.232c0 .433 0 .83.043 1.152.048.356.16.732.47 1.04.308.31.684.422 1.04.47.322.043.72.043 1.152.043h1.39l.478 2.13c.03.14.07.315.125.459.064.167.214.464.573.6.36.135.669.011.827-.072.136-.07.282-.177.397-.26l3.932-2.857h3.796c.433 0 .83 0 1.152-.043.356-.048.732-.16 1.04-.47.31-.308.422-.684.47-1.04.043-.322.043-.72.043-1.152V4.63c0-.433 0-.83-.043-1.153-.048-.355-.16-.731-.47-1.04-.308-.31-.684-.422-1.04-.47-.322-.043-.72-.043-1.152-.043H6.241zm5.267 5.384a.75.75 0 01.517.927l-.226.795h1.94l.343-1.205a.75.75 0 111.443.41l-.226.795h.452a.75.75 0 010 1.5h-.88l-.568 2h.948a.75.75 0 010 1.5h-1.375l-.404 1.42a.75.75 0 11-1.442-.41l.287-1.01h-1.94l-.405 1.42a.75.75 0 11-1.442-.41l.287-1.01H8.25a.75.75 0 010-1.5h.992l.57-2H8.75a.75.75 0 010-1.5h1.488l.343-1.205a.75.75 0 01.926-.517zm-.136 3.222l-.57 2h1.941l.57-2H11.37z",fillRule:"evenodd",clipRule:"evenodd"}))}},2839:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"BadgeRelevantFill24","data-old-api":"LabelRelevant"},e),{className:"Zi Zi--LabelRelevant"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M15.465 4.544l2.272.406c.67.12 1.193.644 1.313 1.313l.406 2.272c.042.231.132.45.266.643l1.32 1.894a1.624 1.624 0 010 1.857l-1.32 1.893a1.626 1.626 0 00-.266.643l-.406 2.272a1.624 1.624 0 01-1.313 1.313l-2.272.406c-.231.042-.45.132-.643.267l-1.894 1.319a1.624 1.624 0 01-1.856 0l-1.894-1.32a1.624 1.624 0 00-.643-.266l-2.272-.406a1.624 1.624 0 01-1.313-1.313l-.406-2.272a1.625 1.625 0 00-.266-.643l-1.32-1.893a1.624 1.624 0 010-1.857l1.32-1.894a1.64 1.64 0 00.266-.643l.406-2.272c.12-.67.644-1.193 1.313-1.313l2.272-.406c.231-.041.45-.132.643-.266l1.894-1.32a1.624 1.624 0 011.856 0l1.894 1.32.643.266zM12 14.187c.526 0 .977-.208 1.351-.625.375-.416.562-.916.562-1.501V8.659c0-.584-.187-1.085-.562-1.501-.374-.416-.825-.625-1.35-.625-.527 0-.977.209-1.352.625a2.166 2.166 0 00-.562 1.501v3.402c0 .585.187 1.085.562 1.501.374.417.825.625 1.351.625zm3.436-3.159a.373.373 0 00-.278-.121.372.372 0 00-.277.121.402.402 0 00-.117.289v.82c0 .79-.27 1.466-.812 2.027-.54.562-1.191.843-1.952.843-.76 0-1.412-.281-1.953-.843a2.818 2.818 0 01-.81-2.027v-.82a.402.402 0 00-.118-.289.372.372 0 00-.277-.121c-.107 0-.2.04-.278.121a.401.401 0 00-.117.289v.82c0 .944.303 1.765.91 2.463.606.698 1.356 1.098 2.248 1.2v1.94c-.002.22.13.33.395.33s.397-.11.395-.33V15.8c.892-.102 1.642-.502 2.248-1.2.607-.698.91-1.52.91-2.463v-.82a.401.401 0 00-.117-.289z",fillRule:"evenodd",clipRule:"evenodd"}))}},2840:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"BadgeRecommendationFill24","data-old-api":"LabelEditorRecommendation"},e),{className:"Zi Zi--LabelEditorRecommendation"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M12.868 2.899l6.597 3.8c.538.31.868.882.868 1.5v7.602c0 .619-.33 1.19-.868 1.5l-6.597 3.8c-.537.31-1.199.31-1.736 0l-6.597-3.8a1.731 1.731 0 01-.868-1.5V8.199c0-.618.33-1.19.868-1.5l6.597-3.8a1.74 1.74 0 011.736 0zm-2.614 11.85a.29.29 0 01.255.148l1.239 2.207a.289.289 0 00.505 0l1.238-2.207a.29.29 0 01.255-.148l2.52.023a.29.29 0 00.253-.434l-1.284-2.192a.288.288 0 010-.292l1.284-2.192a.288.288 0 00-.253-.434l-2.52.023a.29.29 0 01-.255-.148l-1.239-2.207a.289.289 0 00-.505 0L10.51 9.103a.29.29 0 01-.255.148l-2.52-.023a.29.29 0 00-.253.434l1.284 2.192a.288.288 0 010 .292L7.48 14.338a.288.288 0 00.253.434l2.52-.023z",fillRule:"evenodd",clipRule:"evenodd"}))}},2841:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"LabelWeekly24","data-old-api":"LabelWeekly"},e),{className:"Zi Zi--LabelWeekly"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M3.85 5.266c1.093-.4 2.175-.6 3.245-.6 1.338 0 2.675.313 4.01.939a.6.6 0 01.346.543v10.309a.24.24 0 01-.342.217c-1.337-.626-2.675-.94-4.014-.94-1.186 0-2.387.246-3.603.737a.6.6 0 01-.825-.556V6.957a1.8 1.8 0 011.182-1.691zm9.045.339c1.335-.626 2.672-.939 4.01-.939 1.07 0 2.152.2 3.246.6a1.8 1.8 0 011.182 1.69v8.96a.6.6 0 01-.824.555c-1.216-.49-2.418-.736-3.604-.736-1.339 0-2.677.313-4.014.94a.24.24 0 01-.342-.218V6.148a.6.6 0 01.346-.543zm4.01 11.282c1.311 0 2.619.27 3.918.805.419.173.62.657.45 1.082a.813.813 0 01-1.065.456c-1.107-.456-2.207-.683-3.303-.683-1.08 0-2.162.22-3.254.664-.207.08-.426.12-.648.12l-2.079.002c-.195 0-.389-.04-.568-.12-1.094-.445-2.18-.666-3.261-.666-1.096 0-2.195.227-3.303.683a.813.813 0 01-1.065-.456.834.834 0 01.45-1.082c1.3-.535 2.607-.805 3.918-.805a10.007 10.007 0 013.391.604 3 3 0 001.025.18l.974.001a3 3 0 001.027-.18 10.012 10.012 0 013.393-.604z",fillRule:"evenodd",clipRule:"evenodd"}))}},2842:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"LabelDaily24","data-old-api":"LabelDaily"},e),{className:"Zi Zi--LabelDaily"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M10.037 3.2h3.926c2.377 0 3.24.248 4.109.713a4.846 4.846 0 012.016 2.016c.464.869.712 1.73.712 4.108v3.926c0 2.378-.248 3.24-.712 4.109a4.846 4.846 0 01-2.017 2.016c-.869.465-1.73.712-4.108.712h-3.926c-2.377 0-3.24-.247-4.109-.712a4.846 4.846 0 01-2.016-2.016c-.465-.87-.712-1.731-.712-4.109v-3.926c0-2.377.247-3.24.712-4.108a4.846 4.846 0 012.016-2.016c.87-.465 1.732-.713 4.109-.713zM12 17.61a1.027 1.027 0 000-2.053A3.557 3.557 0 1115.557 12a1.027 1.027 0 002.053 0A5.61 5.61 0 1012 17.61z",fillRule:"evenodd",clipRule:"evenodd"}))}},2843:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"BadgeProFill24","data-old-api":"LabelProfessional"},e),{className:"Zi Zi--LabelProfessional"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 011.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 010 1.989l-1.414 2.029a1.74 1.74 0 00-.285.688l-.435 2.435a1.74 1.74 0 01-1.407 1.407l-2.435.435a1.739 1.739 0 00-.688.285l-2.03 1.414a1.74 1.74 0 01-1.989 0l-2.029-1.414a1.739 1.739 0 00-.688-.285l-2.435-.435a1.74 1.74 0 01-1.407-1.407l-.435-2.435a1.74 1.74 0 00-.285-.688l-1.414-2.03a1.74 1.74 0 010-1.989l1.414-2.029c.144-.206.24-.44.285-.688l.435-2.435a1.74 1.74 0 011.407-1.407l2.435-.435a1.74 1.74 0 00.688-.285l2.03-1.414a1.74 1.74 0 011.989 0l2.029 1.414.688.285zM11.875 8.84a4.21 4.21 0 100 8.42 4.21 4.21 0 000-8.42zm2.086 4.044l-.8.815.19 1.152c.063.386-.149.555-.487.37l-.989-.545-.988.544c-.332.183-.551.025-.486-.37l.188-1.15-.8-.816c-.268-.274-.192-.54.186-.598l1.106-.168.494-1.047c.166-.352.432-.359.601 0l.494 1.047 1.106.168c.37.057.46.319.185.598zm2.066-6.143h-2.65a.298.298 0 00-.291.217l-.817 1.504s1.75.098 2.782 1.027l1.22-2.298a.268.268 0 00.062-.164c0-.158-.137-.286-.306-.286zM11.73 8.46l-.816-1.503a.298.298 0 00-.292-.217h-2.65c-.169 0-.306.128-.306.286a.27.27 0 00.062.164l1.22 2.298c1.033-.929 2.782-1.027 2.782-1.027V8.46z"}))}},2844:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Stamp24","data-old-api":"Stamp"},e),{className:"Zi Zi--Stamp"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M12.3 3a9.3 9.3 0 110 18.6 9.3 9.3 0 010-18.6zm4.5 15H7.2v.6h9.6V18zm-9.99-5.785l-.394 1.082a.18.18 0 00.084.213l.04.02.678.247-.162.443 8.989 3.272.161-.444.678.247c.087.032.18.004.226-.063l.019-.036.393-1.082L6.81 12.215zm.25-.673l-.045.11 10.713 3.899c.326-.897-.163-1.906-1.097-2.311l-.119-.047-7.05-2.566c-.971-.354-2.02.055-2.403.915zm6.467-5.502l-1.462 4.895 2.255.821 2.026-4.69a1.5 1.5 0 10-2.82-1.026z",fillRule:"evenodd",clipRule:"evenodd"}))}},2845:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"BadgeWriteFill24","data-old-api":"BadgeWrite"},e),{className:"Zi Zi--BadgeWrite"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M15.712 4.011l2.435.435a1.74 1.74 0 011.407 1.407l.435 2.435c.044.247.141.482.285.688l1.414 2.03a1.74 1.74 0 010 1.989l-1.414 2.029a1.74 1.74 0 00-.285.688l-.435 2.435a1.74 1.74 0 01-1.407 1.407l-2.435.435a1.74 1.74 0 00-.688.285l-2.03 1.414a1.74 1.74 0 01-1.989 0l-2.029-1.414a1.74 1.74 0 00-.688-.285l-2.435-.435a1.74 1.74 0 01-1.407-1.407l-.435-2.435a1.74 1.74 0 00-.285-.688l-1.414-2.03a1.74 1.74 0 010-1.989l1.414-2.029a1.74 1.74 0 00.285-.688l.435-2.435a1.74 1.74 0 011.407-1.407l2.435-.435a1.74 1.74 0 00.688-.285l2.03-1.414a1.74 1.74 0 011.989 0l2.029 1.414.688.285zM7.874 14.585l-.551 1.838a.204.204 0 00.255.254l1.836-.55c.347-.105.662-.293.918-.548l4.46-4.462a.273.273 0 000-.385l-1.524-1.524a.273.273 0 00-.386 0l-4.46 4.461c-.256.256-.444.57-.548.916zm8.581-6.317l-.723-.723a.786.786 0 00-1.111 0l-.882.88a.262.262 0 000 .371l1.465 1.465a.262.262 0 00.37 0l.881-.881a.786.786 0 000-1.112z",fillRule:"evenodd",clipRule:"evenodd"}))}},2846:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Crab24","data-old-api":"Crab"},e),{className:"Zi Zi--Crab"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M17.526 5.497a.75.75 0 01.657-.744 4.621 4.621 0 013.644 1.113c.893.78 1.479 1.892 1.479 2.993a3.807 3.807 0 01-3.807 3.807c-1.46 0-2.618-.65-3.298-1.671-.67-1.005-.839-2.307-.48-3.564a.75.75 0 01.959-.506l.846.283v-1.71zm1.5.729v2.022a.75.75 0 01-.987.712l-1-.334c-.02.585.13 1.119.41 1.537.389.583 1.066 1.003 2.05 1.003a2.307 2.307 0 002.307-2.307c0-.586-.331-1.309-.966-1.864a3.124 3.124 0 00-1.814-.77zM6.436 4.737a.75.75 0 01.657.744v1.725l.856-.286a.75.75 0 01.958.506c.361 1.262.192 2.57-.48 3.579-.684 1.025-1.846 1.678-3.313 1.678A3.822 3.822 0 011.29 8.86c0-1.106.589-2.222 1.486-3.006a4.641 4.641 0 013.659-1.117zM3.764 6.984c-.64.558-.973 1.286-.973 1.876a2.322 2.322 0 002.323 2.323c.99 0 1.672-.423 2.064-1.01.281-.423.434-.962.413-1.552l-1.011.337a.75.75 0 01-.987-.712V6.21a3.144 3.144 0 00-1.83.775zM16.75 18.405c0-2.014-1.864-3.906-4.5-3.906s-4.5 1.892-4.5 3.906c0 .316.114.513.28.655.19.16.518.302.976.302h6.488c.458 0 .787-.142.975-.302.167-.142.281-.34.281-.655zm1.5 0c0 1.517-1.239 2.457-2.756 2.457H9.006c-1.517 0-2.756-.94-2.756-2.457 0-2.985 2.686-5.406 6-5.406s6 2.42 6 5.406z",fillRule:"evenodd",clipRule:"evenodd"}),o.a.createElement("path",{d:"M11.25 12.75a1 1 0 11-2 0 1 1 0 012 0zm4 0a1 1 0 11-2 0 1 1 0 012 0z"}),o.a.createElement("path",{d:"M5.848 17.446a.6.6 0 01-.544.65l-1.979.18a.6.6 0 01-.107-1.196l1.978-.178a.6.6 0 01.652.544zm-.018 1.986a.6.6 0 01-.336.78l-1.444.573a.6.6 0 11-.443-1.115l1.444-.574a.6.6 0 01.779.336zm.133-4.185a.6.6 0 01-.6.6h-1.72a.6.6 0 110-1.2h1.72a.6.6 0 01.6.6zm12.802 2.199a.6.6 0 00.544.65l1.979.18a.6.6 0 00.107-1.196l-1.978-.178a.6.6 0 00-.652.544zm.018 1.986a.6.6 0 00.336.78l1.444.573a.6.6 0 10.443-1.115l-1.444-.574a.6.6 0 00-.779.336zm-.133-4.185a.6.6 0 00.6.6h1.721a.6.6 0 000-1.2h-1.72a.6.6 0 00-.6.6z",fillRule:"evenodd",clipRule:"evenodd"}))}},2848:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"AlarmFill24","data-old-api":"Clock"},e),{className:"Zi Zi--Clock"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M12 22.486a9 9 0 100-18 9 9 0 000 18zM11 10.5v2.97a.75.75 0 00.374.68l2.598 1.5a.75.75 0 00.75-1.3L12.5 13.067V10.5a.75.75 0 00-1.5 0zM7.374 3.584a.75.75 0 01-.208 1.04l-3 2a.75.75 0 01-.832-1.248l3-2a.75.75 0 011.04.208zm9.002 0a.75.75 0 00.208 1.04l3 2a.75.75 0 00.832-1.248l-3-2a.75.75 0 00-1.04.208z",fillRule:"evenodd",clipRule:"evenodd"}))}},2849:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),o=n.n(a),r=n(12),i=Object.assign;function c(e){return o.a.createElement(r.a,i(i({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"BlueBook24","data-old-api":"BlueBook"},e),{className:"Zi Zi--BlueBook"+(e.className?" ".concat(e.className):"")}),o.a.createElement("path",{d:"M15.333 19.333l-2.764 2.765a.333.333 0 01-.569-.236v-2.529h3.333zm0-13.333c.737 0 1.334.597 1.334 1.333V16A2.667 2.667 0 0114 18.666H7.333A1.333 1.333 0 016 17.334v-10C6 6.597 6.597 6 7.333 6h8zm.394-1.987a2.933 2.933 0 012.93 2.79l.004.143v8.838c0 .693-.53 1.262-1.205 1.327l-.129.006V6.946a1.6 1.6 0 00-1.49-1.596l-.11-.004H7.333c0-.736.597-1.333 1.334-1.333h7.06z",fillRule:"evenodd",clipRule:"evenodd"}))}},914:function(e,t,n){"use strict";n.d(t,"d",(function(){return a.a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return f}));var a=n(976),o=(n(0),n(13)),r=n.n(o),i=(n(1017),n(8)),c=function(e){var t=e.className,n=e.options,a=e.children;return Object(i.g)("div",{className:r()("Card-header",t)},Object(i.g)("div",{className:"Card-headerText"},a),n&&Object(i.g)("div",{className:"Card-headerOptions"},n))},l=n(34),s=n.n(l),u=n(42),d=n.n(u),b=["className"],f=function(e){var t=e.className,n=s()(e,b);return Object(i.g)("div",d()({className:r()("Card-section",t)},n))}},922:function(e,t,n){"use strict";n.d(t,"a",(function(){return R})),n.d(t,"b",(function(){return S})),n.d(t,"d",(function(){return A})),n.d(t,"c",(function(){return T}));var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(32),s=n(1),u=n(0),d=n(13),b=n.n(d),f=n(70),p=n.n(f),h=n(918),m=n(72),v=n(435),g=n(221),O=n(258),j=n(1140),y=["onRef","listClassName","itemClassName","className","children"],C=["className","title","meta","children","extra","image","link"];function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}function x(e){return!!e&&!(Array.isArray(e)&&!e.some(Boolean))}function k(e){var t=e.onRef,n=e.listClassName,a=e.itemClassName,o=e.className,r=e.children,i=Object(l.default)(e,y);return Object(s.b)("div",Object.assign(Object.assign({ref:t,className:b()(n,o)},i),{},{children:u.Children.map(r,(function(e){return"string"==typeof e?Object(s.b)("span",{className:a,children:e}):e?Object(u.cloneElement)(e,{className:b()(a,e.props.className)}):e}))}))}var S=function(e){return Object(s.b)(k,Object.assign({listClassName:"ContentItem-cells",itemClassName:"ContentItem-cell"},e))},R=function(e){return Object(s.b)(k,Object.assign({listClassName:"ContentItem-actions",itemClassName:"ContentItem-action"},e))},A=function(e){return Object(s.b)(k,Object.assign({listClassName:"ContentItem-status",itemClassName:"ContentItem-statusItem"},e))},I=function(e){Object(r.a)(n,e);var t=w(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).onRef=function(t){e.domNode=t,e.props.onRef&&e.props.onRef(t)},e.onAccessContent=function(t,n){n===document.activeElement&&window.open(e.props.link)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(h.onViewedOnce)(this.domNode,(function(){var t=e.props,n=t.data,a=(n=void 0===n?{}:n).type,o=n.id,r=t.lastreadTouchable;t.currentUser&&r&&a&&o&&Object(j.c)("article"===a?"post":a,o,j.b)}))}},{key:"render",value:function(){var e,t=p()(this.props,["noTrackCardShow","lastreadTouchable","data","onRef","dispatch","currentUser","isLogin"]),n=t.className,a=t.title,o=t.meta,r=t.children,i=t.extra,c=t.image,u=t.link,d=Object(l.default)(t,C),f=Object(s.c)(s.a,{children:[a&&Object(s.b)(m.b,{block:"卡片标题跳转",children:Object(s.b)("h2",{className:"ContentItem-title",children:null!==(e=a.props)&&void 0!==e&&e.href?Object(s.b)(v.a,{zaAction:"OpenUrl",zaEventType:"Click",zaText:"标题跳转",zaType:"Text",children:a}):Object(s.b)("span",{children:a})})}),x(o)&&Object(s.b)("div",{className:"ContentItem-meta",children:o})]});return Object(s.c)("div",Object.assign(Object.assign({ref:this.onRef,className:b()("ContentItem",n)},d),{},{children:[u&&Object(s.b)(O.c,{keyMap:{ACCESS:"enter"},handlers:{ACCESS:this.onAccessContent}}),c||i?Object(s.c)("div",{className:"ContentItem-main",children:[c&&Object(s.b)("div",{className:"ContentItem-image",children:c}),Object(s.b)("div",{className:"ContentItem-head",children:f}),i&&Object(s.b)("div",{className:"ContentItem-extra",children:i})]}):f,r]}))}}]),n}(u.Component),T={plain:"plain",default:"default",interactive:"interactive"};t.e=Object(g.a)(I)},929:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(20),f=n(21),p=n(13),h=n.n(p),m=n(387),v=n.n(m),g=n(876),O=n(33),j=n(26),y=n(72),C=n(455),w=n(218),x=n(63),k=n(1031),S=n(120),R=n(129),A=n(231),I=n(383),T=n(444),E=n(191),N=n(471),B=n(30),z=n(82),L=n.n(z),P=function(e){return L()((function(t){var n=t.type,a=void 0===n?"":n,o=t.id,r=void 0===o?"":o;return a&&"people"===a||"rewardPeople"===a?Object(l.b)(y.b,{content:{type:"User",token:r,id:r},children:Object(l.b)(e,Object.assign({},t))}):Object(l.b)(e,Object.assign({},t))}),e)};function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var _={default:"default",primary:"primary"},D=function(e){Object(r.a)(n,e);var t=M(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).zaRef=Object(d.createRef)(),e.state={hovered:!1,isFetching:!1},e.handleMouseEnter=function(){e.setState({hovered:!0})},e.handleMouseLeave=function(){e.setState({hovered:!1})},e.toggleFollow=function(t){var n=e.props,a=n.isFollowing,o=n.type,r=n.id,i=n.zaId,c=n.useCustomZa,l=n.onFollowButtonClick,s=!a;if(!c){j.a.trackEvent(t.target,Object.assign({action:s?"Follow":"UnFollow",element:"Button",element_name:B.cb[o]},i&&{id:i}));var u=s?"关注":"取消关注";e.zaRef.current.trackEvent({action:s?"Follow":"UnFollow",eventType:"Click",elementLocation:{type:"Button",text:u},block:u})}var d="toggleFollow".concat(o.slice(0,1).toUpperCase()).concat(o.slice(1)),b=e.props[d](r,s);v()(b)&&(e.setState({isFetching:!0}),b.then((function(){e.setState({isFetching:!1}),l&&l()})).catch((function(){return e.setState({isFetching:!1})})))},e.handleToggleFollow=function(t){var n=e.props,a=n.authRequired,o=n.globalAuthRequired,r=n.ua;a?a(e.toggleFollow,B.Y.follow,!0)(t):r.Zhihu?e.toggleFollow(t):o(e.toggleFollow,B.Y.follow)(t)},e.handleClick=function(t){var n=e.props.onClick;n&&!n(t)||(e.handleToggleFollow(t),t.stopPropagation())},e}return Object(o.a)(n,[{key:"render",value:function(){var e,t,n,a=this.state.hovered,o=this.props,r=o.onRef,i=o.preset,c=o.entityHidden,s=o.type,u=o.isFollowing,d=o.isFollowed,b=o.gender,f=o.className,p=o.children,m=o.isMobile,v=o.disabled,j=o.canShowMutualFollowStatus;u?(e="primary",n=a?"取消关注":j&&d?"互相关注":"已关注",t={color:"grey"}):(e=i,t={color:"blue"},n=p||("people"===s||"rewardPeople"===s?[Object(l.b)(g.a,{className:"FollowButton-icon",text:!0,center:!0},"icon"),"关注".concat("number"==typeof b&&-1!==b?B.P[b]:"")]:"关注".concat(c?"":C.b[s])));var w=this.state.isFetching;return Object(l.c)(O.c,Object.assign(Object.assign(Object.assign({onRef:r,preset:e,onClick:this.handleClick,className:h()("FollowButton",f)},t),!m&&{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),{},{disabled:v||w,children:[Object(l.b)(y.d,{ref:this.zaRef}),n]}))}}]),n}(d.Component);D.propTypes={preset:u.a.oneOf(Object.values(_)),type:u.a.oneOf(C.a).isRequired,id:u.a.oneOfType([u.a.number,u.a.string]).isRequired,zaId:u.a.number,useCustomZa:u.a.bool},D.defaultTypes={preset:_.default},D.PRESETS=_;t.a=Object(b.compose)(P,Object(w.b)("globalAuthRequired"),Object(f.connect)((function(e){return{ua:e.env.userAgent,isMobile:Object(x.d)(e,{includeTablet:!0})}}),{toggleFollowQuestion:R.qb,toggleFollowCollection:A.d,toggleFollowColumn:I.e,toggleFollowRoundtable:T.m,toggleFollowTopic:E.M,toggleFollowPeople:S.b,toggleFollowRewardPeople:N.o,toggleFollowClub_mask:k.a}))(D)},945:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(20),f=n(21),p=n(48),h=n(13),m=n.n(h),v=(n(289),n(26)),g=n(63),O=n(980),j=n(923),y=n(1062),C=(n(380),n(58)),w=n(93),x=function(e){var t=e.text,n=Object(w.f)();return Object(l.b)(C.Box,{css:{color:n.colors.GBK04A,fontSize:14,lineHeight:1.6,fontWeight:"normal"},children:t})},k=n(958),S=n(948),R=n(30);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var I=function(e){Object(r.a)(n,e);var t=A(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){var n=e.props,a=n.zaId,o=n.zaExtra,r=n.author.urlToken,i=n.isSpecialQuestionOrAnswer;if(n.preventOpenUrl)t.preventDefault();else if(a&&v.a.trackEvent(null,{id:a,action:"OpenUrl",element_name:"User"},o),i)return location.href="zhihu://people/".concat(r,"?utm_app_name=zhihu_check"),t.preventDefault(),void t.stopPropagation()},e.renderDetail=function(t){var n=e.props,a=n.extra,o=n.children,r=n.author,i=n.noHeadline,c=n.coCreationAuthorDescriptionText;return c?Object(l.b)("div",{className:"AuthorInfo-badge",children:Object(l.b)(x,{text:c})}):t&&a||Object(l.b)("div",{className:"AuthorInfo-badge",children:o||Object(l.b)(O.a,{className:"AuthorInfo-badgeText",user:r,noHeadline:i})})},e}return Object(o.a)(n,[{key:"render",value:function(){var e,t="plain"===this.props.preset,n=this.props,a=n.author,o=n.noLink,r=n.avatarSize,i=void 0===r?t?24:38:r,c=n.className,s=n.extra,u=n.itemProp,d=n.roundAvatar,b=n.isMobile,f=n.target,p=n.noDetail,h=n.noHoverCard,v=n.router,g=n.noBadge,O=n.noVipBadge,C=n.showVipIcon,w=null==a||null===(e=a.vipInfo)||void 0===e?void 0:e.widget,x=v.getCurrentLocation().pathname,A=-1!==x.indexOf("people")&&3===x.split("/").length,I=this.renderDetail(t),T=this.props.userLinkV2,E=b&&R.D;return Object(l.c)("div",{className:m()("AuthorInfo",c,{"AuthorInfo--plain":t}),itemProp:u,itemScope:!0,itemType:"http://schema.org/Person",children:[Object(l.c)("div",{className:m()("AuthorInfo",{"AuthorInfo--mobile":!1}),children:[Object(l.b)("meta",{itemProp:"name",content:a.name}),Object(l.b)("meta",{itemProp:"image",content:a.avatarUrl}),Object(l.b)("meta",{itemProp:"url",content:"https://www.zhihu.com/people/".concat(a.urlToken)}),Object(l.b)("meta",{itemProp:"zhihu:followerCount",content:a.followerCount}),T&&Object(l.c)(l.a,{children:[Object(l.b)(k.a,Object.assign({onClick:this.handleClick,noHoverCard:b||h,noLink:o||E,user:a,className:"AuthorInfo-avatarWrapper",avatarProps:{className:"AuthorInfo-avatar",size:i,round:d}},f&&{target:f})),Object(l.c)("div",{className:"AuthorInfo-content",children:[Object(l.c)("div",{className:"AuthorInfo-head",children:[Object(l.b)(S.a,Object.assign({noHoverCard:b||h,onClick:this.handleClick,noLink:o||E,user:a,noBadge:g,noVipBadge:O,showVipIcon:C,className:"AuthorInfo-name"},f&&{target:f})),!t&&s]}),!p&&Object(l.b)("div",{className:"AuthorInfo-detail",children:I})]})]}),!T&&Object(l.c)(l.a,{children:[Object(l.b)(j.a,Object.assign({onClick:this.handleClick,noHoverCard:b||h,noLink:o||E,className:"AuthorInfo-avatarWrapper",user:a,avatar:!0,avatarProps:{className:"AuthorInfo-avatar",size:i,round:d}},f&&{target:f})),Object(l.c)("div",{className:"AuthorInfo-content",children:[Object(l.c)("div",{className:"AuthorInfo-head",children:[Object(l.b)(j.a,Object.assign({noHoverCard:b||h,onClick:this.handleClick,className:"AuthorInfo-name",noLink:o||E,user:a},f&&{target:f})),!t&&s]}),!p&&Object(l.b)("div",{className:"AuthorInfo-detail",children:I})]})]})]}),A&&w&&w.id&&Object(l.b)(y.a,{className:"AuthorInfo-Widget",widget:w})]})}}]),n}(d.Component);I.propTypes={author:u.a.object.isRequired,noLink:u.a.bool,avatarSize:u.a.number,preset:u.a.oneOf(["plain","default"]),className:u.a.string,itemProp:u.a.string,roundAvatar:u.a.bool,isMobile:u.a.bool,noDetail:u.a.bool,relatedTo:u.a.string,zaId:u.a.number,zaExtra:u.a.object,noHoverCard:u.a.bool,noHeadline:u.a.bool,preventOpenUrl:u.a.bool,noBadge:u.a.bool,noVipBadge:u.a.bool,showVipIcon:u.a.bool,coCreationAuthorDescriptionText:u.a.oneOf(["视频作者","图文作者"])},I.defaultProps={noLink:!1,roundAvatar:!1,itemProp:"author",noHoverCard:!1,noHeadline:!1,preventOpenUrl:!1,coCreationAuthorDescriptionText:null};t.a=Object(b.compose)(p.withRouter,Object(f.connect)((function(e,t){var n=t.relatedTo,a=t.params,o=["question","answer"].includes(n);return{isHuman:Object(g.c)(e),shouldOia:Object(g.h)(e)&&o,isMobile:Object(g.d)(e,{includeTablet:!0}),isSpecialQuestionOrAnswer:Object(g.j)(e,{type:o&&n,id:o?"question"===n?null==a?void 0:a.id:null==a?void 0:a.answerId:""})}})))(I)},947:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return k}));var a=n(34),o=n.n(a),r=n(42),i=n.n(r),c=n(0),l=n.n(c),s=n(13),u=n.n(s),d=n(8),b=["className","title","options","children"],f=function(e){var t=e.className,n=e.title,a=e.options,r=e.children,c=o()(e,b);return Object(d.g)("div",i()({className:u()("List",t)},c),(n||a)&&Object(d.g)("div",{className:"List-header"},Object(d.g)("h4",{className:"List-headerText"},n),Object(d.g)("div",{className:"List-headerOptions"},a)),r)},p=n(23),h=n.n(p),m=n(28),v=n.n(m),g=n(27),O=n.n(g),j=n(29),y=n.n(j),C=n(19),w=n.n(C);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=w()(e);if(t){var o=w()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return y()(this,n)}}var k=function(e){O()(n,e);var t=x(n);function n(){return h()(this,n),t.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.tabIndex,a=e.meta,o=e.children,r=e.onRef;return Object(d.g)("div",{className:u()("List-item",t),tabIndex:n,ref:r},a&&Object(d.g)("div",{className:"List-itemMeta"},a),o)}}]),n}(l.a.Component);n(989)},957:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(25),o=n.n(a),r=n(0),i=n(13),c=n.n(i),l=n(1190),s=n(1191),u=n(8);var d=function(e){var t=e.style,n=e.className,a=e.id,i=e.name,d=e.size,b=void 0===d?20:d,f=e.checked,p=e.onChange,h=e.disabled,m=Object(r.useState)(!1),v=o()(m,2),g=v[0],O=v[1];return Object(u.g)("label",{style:t,className:c()("Checkbox",n,{"Checkbox--focused":g,"Checkbox--disabled":h})},f?Object(u.g)(l.a,{size:b,className:"Checkbox-iconOn"}):Object(u.g)(s.a,{size:b,className:"Checkbox-iconOff"}),Object(u.g)("input",{className:"Checkbox-input",id:a,name:i,type:"checkbox",checked:f,onFocus:function(){return O(!0)},onBlur:function(){return O(!1)},onChange:p,disabled:h}))}},959:function(e,t,n){"use strict";n.d(t,"b",(function(){return b}));var a=n(24),o=n.n(a),r=n(180),i=n.n(r),c=n(485),l=n.n(c);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var d={CONTENT_OPERATION:"content_operation",TEXT_STYLE:"text_style",LIST:"list",BLOCK:"block",STRUCTURE_GENERATION:"structure_generation",PROFESSIONAL_MEDIA:"professional_media",BASIC_MEDIA:"basic_media",BUSINESS_MEDIA:"business_media"},b=function(e){var t,n=Object.values(d).reduce((function(e,t){return Object.assign(Object.assign({},e),{},o()({},t,[]))}),{}),a=[],r=[],c=s(e);try{for(c.s();!(t=c.n()).done;){var u=t.value.toolbarV2;if(i()(u)||Array.isArray(u)){var b,f=s(i()(u)?[u]:u);try{for(f.s();!(b=f.n()).done;){var p=b.value;p.parentName?r.push(p):a.push(p)}}catch(e){f.e(e)}finally{f.f()}}}}catch(e){c.e(e)}finally{c.f()}for(var h=function(){var e=v[m],t=e.section,a=e.parentName,o=n[t];if(a){var r=o.find((function(e){return e.name===a}));if(!r)return"continue";r.childItems||(r.childItems=[]),r.childItems.includes(e)||(r.childItems.push(e),r.childItems=l()(r.childItems,(function(e){var t;return null!==(t=e.priority)&&void 0!==t?t:1/0})))}else o.push(e),o=l()(o,(function(e){var t;return null!==(t=e.priority)&&void 0!==t?t:1/0}));n[t]=o},m=0,v=[].concat(a,r);m<v.length;m++)h();return n};t.a=d},960:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(88),f=n(1024);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var h=function(e){Object(r.a)(n,e);var t=p(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handlePackup=function(){var t=e.props.onClose;window.scrollTo(0,e.originPageYOffset),t&&t()},e}return Object(o.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){"bottom"===e.commentPattern&&e.shown&&!this.props.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.containerClassName,a=e.shown,o=e.showPackupButton,r=e.parent,i=e.commentPattern,c=e.commentInputPosition,s=e.onClose,u=e.byComment,d=e.needLoadCommentPermission,p=e.isMobile,h=e.onOrderChange,m=e.onItemLike,v=e.onPaginationClick,g=e.autoFocus,O=e.onMount,j=e.zaInfo;return a?"bottom"===i?Object(l.b)(f.a,{className:t,containerClassName:n,autoFocus:g,parent:r,commentPattern:i,commentInputPosition:c,showPackupButton:o,handlePackupButton:this.handlePackup,needLoadCommentPermission:d,isMobile:p,onOrderChange:h,onItemLike:m,onPaginationClick:v,onMount:O,zaInfo:j}):Object(l.b)(b.b,{size:"fullPage",onClose:s,maskClosable:!1,children:a&&"fixed"===i&&Object(l.b)(f.a,{className:t,containerClassName:n,parent:r,commentPattern:i,byComment:u,needLoadCommentPermission:d,onOrderChange:h,onItemLike:m,onPaginationClick:v,onMount:O,zaInfo:j})}):null}}]),n}(d.Component);h.propTypes={className:u.a.string,containerClassName:u.a.string,byComment:u.a.oneOfType([u.a.number,u.a.string]),parent:u.a.object,shown:u.a.bool,showPackupButton:u.a.bool,commentPattern:u.a.string,commentInputPosition:u.a.oneOf(["top","bottom"]),onClose:u.a.func,needLoadCommentPermission:u.a.bool,isMobile:u.a.bool,onOrderChange:u.a.func,onItemLike:u.a.func,onPaginationClick:u.a.func,autoFocus:u.a.bool,onMount:u.a.func,zaInfo:u.a.object},h.defaultProps={commentPattern:"fixed",showPackupButton:!0,commentInputPosition:"bottom"},t.a=h},962:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(21),f=n(13),p=n.n(f),h=n(1292),m=n.n(h),v=n(59),g=n.n(v),O=n(2021),j=n(1246),y=n(1245),C=n(2835),w=n(131),x=n(33),k=n(26),S=n(72),R=n(124),A=n(455),I=n(258),T=n(596),E=n(31),N=n(30);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}function z(e){return e&&e.startsWith("//")?"https:".concat(e):e}function L(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&")}var P=function(e){Object(r.a)(n,e);var t=B(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={qrCodeUrl:"",url:""},e.togglerRef=Object(d.createRef)(),e.shouldShowMenu=function(){var t=e.props,n=t.onTogglerClick,a=t.disabled;return!1!==n()&&!a},e.handleTogglerClick=function(t){e.shouldShowMenu()?(e.loadQrcodeImage(),e.onShare(t)):t.preventDefault()},e.handleMouseEnter=function(t){e.shouldShowMenu()?(e.loadQrcodeImage(),e.onShare(t)):t.preventDefault()},e.open=function(t){e.shouldShowMenu()&&(e.loadQrcodeImage(),e.menu.popover.open(),e.onShare(t))},e.onShare=function(){var t=e.props,n=t.id,a=t.type,o=t.getShareText,r=t.zaShareId;["live","club","edu_course"].includes(a)||o(n,a),k.a.trackEvent(e.togglerRef.current,Object.assign({action:"Share",element:"Button",is_intent:!0,element_name:N.cb[a]},r&&{id:r}))},e.copyLink=function(){var t=e.props,n=t.type,a=t.title,o=t.authorName,r=t.href,i=t.showNotification,c=A.b[n]||"",l=a?"".concat(a," - "):"",s=o&&"匿名用户"!==o&&c?"".concat(o,"的").concat(c," - "):"",u=r?Object(R.toAbsoluteUrl)(r):e.url();m()("".concat(l).concat(s,"知乎\n").concat(z(u))),i("链接复制成功！")},e.url=function(){var t=e.props,n=t.id,a=t.type;return z(Object(R.toAbsoluteUrl)(e.props.url))||"".concat(location.origin,"/").concat(a,"/").concat(n)},e.loadQrcodeImage=function(){var t=e.state.qrCodeUrl;if(!t){var n="".concat(location.protocol,"//www.zhihu.com/"),a=e.url();t="".concat(n,"qrcode?").concat(L({url:"".concat(a).concat("#showWechatShareTip")})),e.setState({qrCodeUrl:t,url:a})}},e.shareToWeibo=function(){var t={appKey:"3063806388"},n=e.props.shareText;n&&(t.title=n);var a="http://service.weibo.com/share/share.php?".concat(L(t));window.open(a,"_blank","width=615,height=505")||(location.href=a)},e}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.togglerClassName,o=t.positionStatus,r=t.toggler,i=t.type,c=t.disabled,s=t.placement,u=t.toggleEvent,b=t.stickHover,f=t.children,h=this.state.qrCodeUrl,m=Object(l.c)("div",{className:p()("ShareMenu-toggler",a),children:[h&&Object(l.b)("img",{className:"ShareMenu-fakeQRCode",src:h,alt:"微信二维码"}),Object(d.cloneElement)(r,{onMouseEnter:this.loadQrcodeImage,disabled:c,ref:this.togglerRef})]}),v="hover"===u?{onMouseEnter:this.handleMouseEnter}:{onClick:this.handleTogglerClick};return Object(l.c)(d.Fragment,{children:[Object(l.b)(I.c,{keyMap:{SHARE:"f x"},handlers:{SHARE:this.open}}),Object(l.c)(S.a,Object.assign(Object.assign({as:w.c,zaText:!0,zaType:"Button",zaAction:"Share",className:p()("ShareMenu",n),positionStatus:o,ref:function(t){e.menu=t},toggler:m,placement:s,toggleEvent:u,stickHover:b},v),{},{children:[Object(l.c)(S.a,{as:w.b,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.copyLink,children:[Object(l.b)(O.a,{size:17,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"]}),"live"===i||Object(l.c)(S.a,{as:w.b,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.shareToWeibo,children:[Object(l.b)(j.a,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"]}),Object(l.c)(w.b,{tag:"div",className:"ShareMenu-wechat",noActive:!0,children:[Object(l.c)(x.c,{className:"ShareMenu-button",preset:"plain",children:[Object(l.b)(y.a,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"]}),Object(l.b)("img",{className:"ShareMenu-qrCode",src:h,alt:"微信二维码"})]}),f]}))]})}}]),n}(d.Component);P.propTypes={toggler:u.a.node,onTogglerClick:u.a.func,zaShareId:u.a.number},P.defaultProps={toggler:Object(l.b)(x.c,{preset:"plain",icon:C.a,label:"分享"}),onTogglerClick:g.a};t.a=Object(b.connect)((function(e,t){var n=t.id,a=t.type,o=e.shareTexts;return{shareText:(null==o?void 0:o["".concat(a).concat(n)])||t.shareText}}),{showNotification:E.h,getShareText:T.b})(P)},963:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return s}));var a={general:"general",live:"live",publication:"publication",album:"album",special:"special",manga:"manga",course:"km_course"},o=(Object.assign(Object.assign({},a),{},{album_chapter:a.album,album_video_chapter:a.album,album_paid_column:a.album,paid_column_chapter:a.album,training:a.album,training_bundle:a.album,training_chapter:a.album,web_literature:a.publication,instabook:a.publication,ebook_audio:a.publication,publication_chapter:a.publication,publication_paid_magazine:a.publication,magazine_section:a.publication,paid_answer:a.album,assessment:a.album,playlet:a.album}),{live:"Live 讲座",album:"盐选专栏",album_paid_column:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",paid_column_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书章节",instabook:"讲书",ebook_audio:"有声书",publication_paid_magazine:"盐选杂志",special:"专题",training:"训练营",training_bundle:"训练营",training_chapter:"训练营",web_literature:"网络文学",magazine_section:"杂志文章",manga:"漫画",course:"课程",class:"盐选专栏"}),r={live:"Live 讲座",album:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",album_paid_column:"盐选专栏",paid_column_chapter:"盐选专栏",assessment:"盐选专栏",training:"盐选专栏",training_bundle:"盐选专栏",training_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书",instabook:"电子书",ebook_audio:"电子书",publication_paid_magazine:"电子书",special:"电子书",web_literature:"电子书",magazine_section:"电子书",manga:"电子书",course:"课程",class:"盐选专栏"},i={live:a.live,album:a.album,album_chapter:a.album,album_paid_column:a.album,album_video_chapter:a.album,training:a.album,training_bundle:a.album,training_chapter:a.album,paid_column_chapter:a.album,assessment:a.album,publication:a.publication,publication_chapter:a.publication,instabook:a.publication,ebook_audio:a.publication,publication_paid_magazine:a.publication,special:a.publication,web_literature:a.publication,magazine_section:a.publication,manga:a.publication,course:a.course},c=["live","album","album_chapter","album_video_chapter","paid_column_chapter","publication_chapter","magazine_section","album_paid_column","assessment","special"],l={PaidAnswer:"PaidAnswer",PaidPost:"PaidPost",Answer:"Answer",Post:"Post",Conversation:"Conversation"},s={paid_magazine:"PaidMagazine",paid_column:"PaidColumn",paid_column_chapter:"PaidColumn",album:"RemixAlbum",ebook:"EBook",instabook:"InstaBook",literature:"Literature",training:"Training",training_bundle:"TrainingBundle",special:"Special",ebook_audio:"AudioBook",live:"Live",publication:"EBook",web_literature:"EBook",album_chapter:"RemixAlbum",album_paid_column:"RemixAlbum",album_video_chapter:"RemixAlbum",manga:"Manga",free_conversation:"FreeConversation",event:"Event",Onebox:"OneBox",paid_answer:"Answer"}},966:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(72),f=n(2277),p=n(33),h=n(26),m=n(149),v=n(258);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var O=function(e){Object(r.a)(n,e);var t=g(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).buttonRef=Object(d.createRef)(),e.handleClick=function(t){var n=e.props,a=n.zaInfos,o=a.toggleComment,r=a.getCommentAction,i=n.positionStatus,c=n.onClick,l=n.commentsShown;if(h.a.trackEvent(e.buttonRef.current,Object.assign({action:r?r(!l):"Comment",element:"Button",is_intent:!0},o&&{id:o})),c){var s="fixed"===i?"fixed":"bottom",u={commentsShown:!e.props.commentsShown,commentsAutoFocus:!(t instanceof KeyboardEvent),commentPattern:s};t instanceof KeyboardEvent&&"bottom"===s&&e.buttonRef.current.focus(),c(t,u)}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e,t=this.props,n=t.className,a=t.count,o=t.commentsShown,r=t.commentClosed;o?e="收起评论":e=a&&!r?"".concat(Object(m.formatNumber)(a)," 条评论"):"添加评论";return Object(l.c)(d.Fragment,{children:[Object(l.b)(v.c,{keyMap:{COMMENT:"c"},handlers:{COMMENT:this.handleClick}}),Object(l.b)(b.a,{as:p.c,zaAction:o?"Collapse":"Expand",zaText:o?"收起评论":"展开评论",zaBlock:o?"收起评论":"展开评论",zaType:"Button",onRef:this.buttonRef,preset:"plain",className:n,onClick:this.handleClick,icon:f.a,label:e})]})}}]),n}(d.Component);O.propTypes={commentsShown:u.a.bool,count:u.a.number,zaInfos:u.a.shape({id:u.a.number,getCommentAction:u.a.func}),onInstance:u.a.func},O.defaultProps={zaInfos:{},onInstance:function(){return null}};t.a=O},971:function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},972:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(0),u=n(13),d=n.n(u),b=n(33),f=n(88);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var h=function(e){Object(r.a)(n,e);var t=p(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(){var t=e.props,n=t.onSubmit,a=t.onCancel,o=t.needCancel;(void 0===o||o)&&a(),n()},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,a=e.shown,o=e.onCancel,r=e.className,i=e.isMobile,c=e.confirmText,s=e.cancelText,u=e.showButtonHorizontal,p=e.showConfirmButtonRight,h=Object(l.b)(b.c,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:c||"确认"},"confirm"),m=Object(l.b)(b.c,{onClick:o,children:s||"取消"},"cancel"),v=i||p?[m,h]:[h,m];return Object(l.b)(f.b,{wrapperClassName:"ConfirmModal-wrapper",className:d()("ConfirmModal",r),title:t,size:i?"small":"default",subtitle:n,onClose:o,closeButton:!1,buttonGroupOnly:!0,children:a&&Object(l.b)(f.a,{direction:i||u?"horizontal":"vertical",children:v})})}}]),n}(s.Component);t.a=h},973:function(e,t,n){"use strict";n.d(t,"a",(function(){return Se}));var a=n(32),o=n(14),r=n(15),i=n(17),c=n(18),l=n(7),s=n(1),u=n(3),d=n.n(u),b=n(0),f=n(21),p=n(20),h=n(1289),m=n.n(h),v=n(13),g=n.n(v),O=n(33),j=n(961),y=n(1579),C=n(979),w=n(290),x=n(1228),k=n(464),S=n(918),R=n(1088),A=n(150),I=n(72),T=n(26),E=n(44),N=n.n(E),B=n(221),z=n(63);function L(e){for(var t=e.replace(/(<noscript>).*?(<\/noscript>)/g,""),n=[],a=/<\s*img.*?>/g,o=/(zh-lightbox-thumb)|(Slideshow-swiperImage)/,r=/(data-original=").*?"/,i=null;i=null===(c=a.exec(t))||void 0===c?void 0:c[0];){var c;if(o.test(i)){var l=r.exec(i);l&&n.push(l[0].split("data-original=")[1].replace(/"|\\/g,""))}}return n}var P=n(258),M=n(1291),_=n(37),D=n.n(_),F=n(65),U=n(2803);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var G=function(e){Object(i.a)(n,e);var t=V(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"hintInfo",get:function(){var e=this.props,t=e.content;if(!e.isCopyable)return{type:"danger",text:"该内容限制转载"};var n=t.length;return n<100?{type:"danger",text:"最少摘录 100 字"}:n>450&&n<=500?{type:"warning",text:"还可以摘录 ".concat(500-n," 字")}:n>500&&{type:"danger",text:"已经超出 ".concat(n-500," 字")}}},{key:"render",value:function(){var e=this.props,t=e.visible,n=e.top,a=e.onSelect,o=e.content,r=this.hintInfo,i=r&&"danger"===r.type;return Object(s.c)("div",{className:g()("SharePopover",{"SharePopover--show":t}),style:{top:n},disabled:i,children:[Object(s.b)("span",{className:"SharePopover-arrow"}),Object(s.c)("div",{role:"button",tabIndex:0,className:g()("SharePopover-content",{"SharePopover-content--danger":i}),onClick:function(){i||a(o)},children:[Object(s.b)(U.b,{className:"SharePopover-quote",size:24}),Object(s.b)("span",{className:"SharePopover-main",children:"发送到百科下的摘录"}),r&&Object(s.b)("span",{className:"SharePopover-hint",children:r.text})]})]})}}]),n}(b.Component);G.propTypes={content:d.a.string,top:d.a.number,visible:d.a.bool};var q=G,H=n(47),K=n(88),W=n(1505),Z=n(487);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var Y=function(e){Object(i.a)(n,e);var t=Q(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={topics:[],actived:!1},e.handleChange=function(t){(0,e.props.onChange)(t),e.setState((function(e){return Object.assign(Object.assign({},e),{},{actived:!1,topics:t})}))},e.deactived=function(){e.setState({actived:!1})},e.toggleActived=function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{actived:!e.actived})}))},e.focus=function(){return e.topicsInput&&e.topicsInput.focus()},e}return Object(r.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.topics,a=t.actived;return Object(s.b)("div",{className:"TopicSelect",children:Object(s.b)(Z.a,{actived:a,placeholderNote:" ",max:1,inputProps:{className:"".concat("TopicSelect","-topicInput")},onRef:function(t){e.topicsInput=t},value:n,onChange:this.handleChange,onBlur:this.handleBlur,onToggleActived:this.toggleActived})})}}]),n}(b.Component);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var X=function(e){Object(i.a)(n,e);var t=J(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={topics:[]},e.handleChangeTopics=function(t){e.setState((function(e){return Object.assign(Object.assign({},e),{},{topics:t})}))},e.handleSubmit=function(){var t=Object(H.a)(e.state.topics,1)[0].urlToken;(0,e.props.onSubmit)(t)},e}return Object(r.a)(n,[{key:"disabled",get:function(){var e=this.state.topics,t=this.props.content;return 0===e.length||""===t}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.author,a=e.currentUser,o=e.title,r=e.url,i=e.onClose,c=e.content,l=e.visible;return Object(s.b)(K.b,{onClose:i,size:"large",title:"发送摘录到百科",className:"AbstractForm",children:l&&Object(s.c)(b.Fragment,{children:[Object(s.b)(W.a,{type:t,author:n,member:a,title:o,url:r,content:c,theme:"scroll"}),Object(s.b)(Y,{onChange:this.handleChangeTopics}),Object(s.b)("div",{className:"AbstractForm-footer",children:Object(s.b)(O.c,{preset:"primary",color:"blue",disabled:this.disabled,onClick:this.handleSubmit,children:"确定"})})]})})}}]),n}(b.Component);X.propTypes={type:d.a.string.isRequired,author:d.a.object,currentUser:d.a.object,title:d.a.string.isRequired,content:d.a.string.isRequired,url:d.a.string.isRequired,visible:d.a.bool.isRequired,onClose:d.a.func.isRequired,onSubmit:d.a.func.isRequired};var $=n(191),ee=n(1202),te=n(303);function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var ae=function(e){Object(i.a)(n,e);var t=ne(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={popoverVisible:!1,top:0,content:"",abstractModalVisible:!1},e.handlePopoverShow=function(t,n){if(!e.hasAddBaikeSummaryPermission)return null;T.a.trackCardShow(null,{id:6115}),e.setState((function(e){return Object.assign(Object.assign({},e),{},{top:n,content:t,popoverVisible:!0})}))},e.handlePopoverClose=function(){if(!e.hasAddBaikeSummaryPermission)return null;e.setState((function(e){return Object.assign(Object.assign({},e),{},{popoverVisible:!1})}))},e.handleAbstractModalClose=function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{abstractModalVisible:!1})}))},e.handleAbstractSelected=function(t){T.a.trackEvent(null,{id:6116,action:"Send"}),e.setState((function(e){return Object.assign(Object.assign({},e),{},{content:t,popoverVisible:!1,abstractModalVisible:!0})}))},e.handleCreateAbstract=function(t){var n=e.props,a=n.type,o=n.objectId,r=n.createAbstract,i=e.state.content;T.a.trackEvent(null,{id:6117,action:"Submit"}),r({type:a,token:o,topicId:t,content:i}).then((function(){e.setState((function(e){return Object.assign(Object.assign({},e),{},{content:i,popoverVisible:!1,abstractModalVisible:!1})}))}))},e}return Object(r.a)(n,[{key:"isAuthor",get:function(){var e=this.props,t=e.currentUser,n=e.author;return Object(ee.a)(t,n)}},{key:"hasAddBaikeSummaryPermission",get:function(){var e=this.props.currentUser;return e&&e.hasAddBaikeSummaryPermission}},{key:"richContainer",get:function(){var e=this.props,t=e.type,n=e.objectId;return"article"===t?document.querySelector(".Post-RichText"):document.querySelector(".AnswerItem[name='".concat(n,"'] .RichContent-inner"))}},{key:"componentDidMount",value:function(){var e,t,n;e=this.richContainer,t=this.handlePopoverShow,n=this.handlePopoverClose,e.onmouseup=function(){var a=Object(F.a)(D.a.mark((function a(o){var r,i;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,new Promise((function(e){setTimeout((function(){var t="";t=document.selection?document.selection.createRange().text:document.getSelection(),e(t.toString())}),0)}));case 2:(r=a.sent)?(i=o.target===e?o.offsetY:o.offsetY+o.target.offsetTop+30,t(r,i)):n();case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}},{key:"render",value:function(){var e=this.state,t=e.popoverVisible,n=e.top,a=e.content,o=e.abstractModalVisible,r=this.props,i=r.type,c=r.author,l=r.currentUser,u=r.title,d=r.url,f=r.isCopyable;return this.hasAddBaikeSummaryPermission?Object(s.c)(b.Fragment,{children:[Object(s.b)(q,{top:n,visible:t,content:a,isCopyable:this.isAuthor||f,onBlur:this.handlePopoverClose,onSelect:this.handleAbstractSelected}),Object(s.b)(X,{type:i,onSubmit:this.handleCreateAbstract,author:c,visible:o,onClose:this.handleAbstractModalClose,currentUser:l,title:u,url:d,content:a})]}):null}}]),n}(b.Component);ae.propTypes={type:d.a.string.isRequired,author:d.a.object.isRequired,currentUser:d.a.object,title:d.a.string.isRequired,url:d.a.string.isRequired,objectId:d.a.number.isRequired,isCopyable:d.a.bool},ae.defaultProps={isCopyable:!0};var oe=Object(p.compose)(te.b,Object(f.connect)(null,{createAbstract:$.d}))(ae),re=n(922),ie=n(81),ce=n(519),le=n(46),se=n(1075);function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var de=function(e){Object(i.a)(n,e);var t=ue(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(Object(ie.a)(e)),e.handleCopy=e.handleCopy.bind(Object(ie.a)(e)),e.handleTipClose=e.handleTipClose.bind(Object(ie.a)(e)),e.rightClickX=-1,e.rightClickY=-1,e}return Object(r.a)(n,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var a=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],o=["",""];return a=n?a.concat(o):o.concat(a)}},{key:"getCopyText",value:function(e,t,n,a){var o=this.getExtraCopyright(t,n,a).join("\n");return a?o+e:e+o}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,a){var o=this.getExtraCopyright(t,n,a).join("<br />");return"<div>".concat(a?o+e:e+o,"</div>")}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var a=window.getSelection(),o=this.getRange(a),r=o.toString().trim(),i=this.getRangeHtml(o);if(r&&!(r.length<128)){var c=r.length>=512,l=this.getCopyHtml(i,t,n,c),s=this.getCopyText(r,t,n,c),u=e.nativeEvent.clipboardData;if("object"==typeof u){if(u.setData("text/html",'<meta charset="utf-8">'+l),u.setData("text/plain",s),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var d=document.createElement("div");d.innerHTML=l;var b=d.firstChild;b.style.position="fixed",b.style.left="-9999px",document.body.appendChild(b),a.selectAllChildren(b),setTimeout((function(){document.body.removeChild(b),a.removeAllRanges(),a.addRange(o)}),200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),a=this.getRange(n),o=a.toString().trim(),r=this.randomRange(44,66);if(!(o.length<=r)){e.preventDefault(),e.stopPropagation();var i,c=a.getBoundingClientRect(),l=window.pageYOffset,s=this.rightClickX,u=this.rightClickY,d="bottom";if(-1!==u)i=u+3;else{var b=this.props.viewPort,f=c.top+l,p=c.bottom+l,h=l+b.top+52,m=l+b.bottom-52;p<h?i=h-52:p<m?i=p:(d="top",i=f>h&&f<m?f:m+52)}var v=-1!==s?s+3:c.left+(c.right-c.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:v,tipY:i,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,a=n.author,o=n.type,r=n.id,i=n.question,c=n.reshipmentSettings,l=n.relationship,u=(l=void 0===l?{}:l).isAuthor,d=l.isAuthorized,b=t.isCurrentUser,f="";if("article"===o?f="https://zhuanlan.zhihu.com/p/".concat(r):"answer"===o&&(f="https://www.zhihu.com/question/".concat(i.id,"/answer/").concat(r)),!b&&!u)switch(c){case"disallowed":this.showTip(e,Object(s.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms#sec-licence-6",children:"禁止转载"}));break;case"need_payment":if(!d){this.showTip(e,Object(s.b)("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(r),children:"申请转载"}));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,f,a.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.data,a=e.tag,o=e.html,r=e.children,i=e.onClick,c=e.className,l=e.itemProp,u=e.style,d=e.prefix,b=e.ecommerce,f=e.shouldShowCatalog,p=e.shouldCatalogCollapse,h=e.richContentKey,m=e.isCurrentUser,v=e.isNovel,g=e.isExpanded,O=e.entityWords,j=e.isVideoAnswer,y=this.state,C=y.tipShown,w=y.tipContent,x=y.tipX,k=y.tipY,S=y.tipPosition;return Object(s.c)("div",{ref:t,onClick:i,className:c,style:u,children:[d,Object(s.b)(se.a,{entityWords:O,richContentKey:h,sourceId:n.id,sourceType:n.type,itemProp:l,tag:a,html:o,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:b,shouldShowCatalog:f,useCatalogV2:!0,isAuthor:m,isNovel:v,isExpanded:g,shouldCatalogCollapse:p,isVideoAnswer:j}),r,Object(s.b)(ce.a,{shown:C,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:x,y:k,position:S,content:w,className:"CopyrightRichText-tooltip"})]})}}]),n}(b.Component);de.propTypes={onRef:d.a.func,viewPort:d.a.object};var be,fe,pe,he,me=Object(p.compose)(Object(f.connect)((function(e,t){return{isCurrentUser:Object(le.i)(e,t.data.author)}})))(de),ve=n(1126),ge=n(172),Oe=n(48),je=n(220),ye=n.n(je),Ce=n(149),we=n(153);function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var ke=function(e){Object(i.a)(n,e);var t=xe(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,a=e.updated,o=e.onClick,r=e.videoPlayCount;return Object(s.c)("div",{className:"ContentItem-time",children:[Object(s.b)(Oe.Link,{to:t,target:"_blank",onClick:o,children:Object(s.b)("span",{"data-tooltip":ye()(be||(be=Object(ge.a)(["发布于",""])),Object(we.toDateTimeString)(n)),"aria-label":ye()(fe||(fe=Object(ge.a)(["发布于",""])),Object(we.toDateTimeString)(n)),children:a!==n?ye()(pe||(pe=Object(ge.a)(["编辑于",""])),Object(we.toDateTimeString)(a)):ye()(he||(he=Object(ge.a)(["发布于",""])),Object(we.toDateTimeString)(n))})}),Boolean(r)&&Object(s.c)("span",{css:{marginTop:10,marginLeft:5},children:["· ",Object(Ce.cnNiceNumber)(r),"次播放"]})]})}}]),n}(b.Component);ke.propTypes={href:d.a.string,created:d.a.number,updated:d.a.number,videoPlayCount:d.a.number,onClick:d.a.func};var Se=ke,Re=function(){var e=Object(I.h)({action:"ReadFinished",elementLocation:{type:"Text",text:"阅读完成",block:{blockText:"阅读完成"}}});return Object(s.b)("span",{ref:e})},Ae=n(607),Ie=n(1140),Te=new Set([106713022,429615779,435773734,426291898,250310031,414291487,409115369,446861209,247003387,73377905,254989758,35134669,36249462,435345603,182387634,140256060,437667891,153624684,47216571,1009993776,1166287748,150785754,573667246,345093461,2051581556,423418617,24921526,427937981,119180585,442812865,175851487,285113967,807213480,415830436,125852644,399866520,269912473,736404714,630788898,217627201,32718846,233425911,1965977070,1703482555,425876259,376921084,477237451,430849009,409175983,395659900,404407636,33593650,29355234,45519587,477365726,407347055,128506044,324992390,391677046,399503822,540487048,514491508,340627548,433773279,125028091,126685323,1073936835,128655569,1782124590,431426144,198577418,449399100,2074550774,342658316,429187404,275411797,121202894,356603699,211168793,1182049284,88545788,435377412,142918293,112180819,107952366,394146559,239506554,243404812,967162682,416311991,108937963,503648342,37744326,338336040,742041726,2142758456,13098904,435935045,181579258,17350640]),Ee=["url","hasVideo","duration","isVideoAnswer"];function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var Be=/.*?(class="link-box")/;var ze=function(e){Object(i.a)(n,e);var t=Ne(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state=Object.assign(Object.assign({},e.getInitTruncatedState(e.props)),{},{shouldSticky:!1,offset:0,prevImgUrls:[]}),e.richContentRef=Object(b.createRef)(),e.zaRef=Object(b.createRef)(),e.truncateContent=function(){var t=e.props,n=t.isMobile,a=t.onToggleExpend,o=n?400:800,r=e.props.expandedHeight||o;(!e.content||e.content.scrollHeight<r)&&(e.setState({isTruncated:!1,isExpanded:!1}),null==a||a(!1,{trackUserAction:!1})),e.content&&e.content.scrollHeight>e.content.offsetHeight&&e.setState({contentCollapsed:!0})},e.updateStateInBrowser=function(){var t=e.props,n=t.excerpt,a=t.allowCollapseWithEmptyExcerpt,o=t.html,r=t.expanded,i=t.cover,c=t.unescapable,l=t.limit,s=t.limitWithImage,u=t.truncateHTMLOptions,d=t.truncateDisabled,b=!0,f=e.state.truncatedContent;if((n||a)&&(Be.test(n)||d))f=n;else if(!c){var p=i?s:l,h=e.truncate(o,p,u);b=h.isTruncated,f=h.content}return{isTruncated:b,isExpanded:o&&r,truncatedContent:f,previewImg:null}},e.checkOpenInAppStyle=function(e){},e.toggle=function(t){e.isCollapsed()?e.handleExpand(t):e.handleCollapse(t)},e.trackExpand=function(t){var n=t?"阅读全文":"收起阅读全文";e.zaRef.current.trackEvent({eventType:"Click",action:t?"Expand":"Collapse",elementLocation:{type:"Card",text:n},block:n})},e.handleExpand=function(t){var n,a,o,r,i,c,l=e.props.zaIds.expand;null!=t&&t.target&&(((null===(r=o=t.target.textContent)||void 0===r?void 0:r.length)>10||t.target.classList.contains("RichContent-inner")||t.target.classList.contains("List-item"))&&(o=null));(T.a.trackEvent(e.richContentRef.current,Object.assign(Object.assign({action:"Expand"},o&&{name:o}),l&&{id:l})),Te.has(null===(n=e.props)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.id))&&N.a.increment("RichContent.Expand.afterZALog.".concat(o||"default",".").concat(l||"default",".").concat(null===(i=e.props)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.id,".count"));var s=e.props.onExpand;if(s)s(t);else{var u=e.props,d=u.onToggleExpend,b=u.data,f=b.type,p=b.id;u.currentUser&&Object(Ie.c)("article"===f?"post":f,p,Ie.a);d&&(d(!0),e.trackExpand(!0)),e.setState({isExpanded:!0},(function(){"article"===f&&Object(S.onViewedOnce)(e.richContentRef.current,(function(){T.a.trackEvent(e.richContentRef.current,{action:"ReadFinish"})}))}))}},e.handleCollapse=function(){var t=e.props.onToggleExpend;T.a.trackEvent(e.richContentRef.current,{action:"Collapse",element:"Button"});t&&(t(!1),e.trackExpand(!1)),e.setState({isExpanded:!1},(function(){return e.checkOpenInAppStyle(!1)}))},e.handlePreview=function(t){var n,a,o=e.props,r=o.ua,i=o.isMobile,c=e.state,l=c.isExpanded,s=c.isTruncated,u=c.prevImgUrls,d=s&&!l,b=t.target;d||"IMG"!==b.tagName||!b.classList.contains("zh-lightbox-thumb")&&!b.classList.contains("Slideshow-swiperImage")||(i&&r.MQQBrowser&&null!==(n=window.browser)&&void 0!==n&&null!==(a=n.app)&&void 0!==a&&a.openPhotoBrowser?setTimeout((function(){window.browser.app.openPhotoBrowser(u,m()(u,(function(e){return e===b.dataset.original})),0)}),0):e.setState({previewImg:b}))},e.handlePositionStatusChange=function(t){var n=e.props.onPositionStatusChange;n&&(n(t),e.checkOpenInAppStyle("fixed"===t))},e.handleObserve=function(t){var n=t[0].intersectionRatio;if(n||!document.querySelector("#root").style.position){var a=n>0;a!==e.state.shouldSticky&&(e.setState({shouldSticky:a}),a||e.checkOpenInAppStyle(!1))}},e.handleTrunObserve=function(t){var n=e.props,a=n.data,o=(a.type,a.id,n.updateReadStatus,n.html),r=t[0],i=r.intersectionRatio,c=r.isIntersecting;e.truncateComputed||(i>0||c||!o)&&(setTimeout((function(){return e.truncateContent()})),e.truncateComputed=!0)},e.isCollapsed=function(){var t=e.props,n=t.after,a=t.before,o=t.unescapable,r=e.state,i=r.isExpanded,c=r.isTruncated;return!a&&!n||o?c&&!i:!i},e}return Object(r.a)(n,[{key:"abstractProps",get:function(){var e=this.props.data,t=e.id,n=e.type,a=e.author,o=e.question;return{objectId:t,type:n,author:a,title:(o=void 0===o?{}:o).title,url:e.url,isCopyable:e.isCopyable}}},{key:"componentDidMount",value:function(){var e=this;this.setState(Object.assign(Object.assign({},this.updateStateInBrowser()),{},{viewPort:{top:148,bottom:window.innerHeight-56}}),(function(){var t,n;null===(t=(n=e.props).onToggleExpend)||void 0===t||t.call(n,e.state.isExpanded,{trackUserAction:!1})})),Object(S.onViewedOnce)(this.richContentRef.current,(function(){var t=e.props,n=t.data,a=n.type,o=n.id,r=t.expanded;t.currentUser&&r&&Object(Ie.c)("article"===a?"post":a,o,Ie.a)})),this.props.imperativeRef&&(this.props.imperativeRef.current={handleExpand:this.handleExpand.bind(this)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"UNSAFE_componentWillUpdate",value:function(e,t){var n=e.ua,a=e.html,o=e.isMobile;if(this.state.isExpanded&&!t.isExpanded){var r=this.richContentRef.current.getBoundingClientRect();r.top<this.props.topExcludedHeight&&(this.rect=r,this.scroll=window.pageYOffset)}o&&!this.state.isExpanded&&t.isExpanded&&n.MQQBrowser&&this.setState({prevImgUrls:L(a)})}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,a=n.top,o=n.bottom,r=n.height,i=this.richContentRef.current.offsetHeight,c=window.innerHeight,l=o<c?i-r:a-(c-i);window.scrollTo(0,this.scroll+l),this.rect=null,this.scroll=null}}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,a=e.expanded,o=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:a,truncatedContent:o?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var a=Object(R.truncateHTML)(e,t,n);return{isTruncated:a.isTruncated,content:a.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,a=t.unescapable,o=t.noCollapsed,r=t.expandText,i=void 0===r?"展开阅读全文":r,c=t.onClick,l=t.videoData,u=t.needExpandArrow,d=void 0===u||u,b=this.state,f=b.isExpanded,p=b.isTruncated,h=b.shouldSticky,m=b.offset;if(!f)return[a&&p&&!l&&Object(s.c)(O.c,{preset:"plain",className:"ContentItem-rightButton ContentItem-expandButton",onClick:c||this.handleExpand,children:[i,d&&Object(s.b)(y.a,{className:"ContentItem-arrowIcon",center:!0})]},"expand-button"),n&&Object(s.b)(re.a,{children:n},"actions")];var v=(n||!o)&&Object(s.c)(re.a,{className:"RichContent-actions",children:[n,!o&&Object(s.c)(O.c,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse,children:[Object(s.b)("span",{className:"RichContent-collapsedText",children:"收起"}),Object(s.b)(y.a,{className:"ContentItem-arrowIcon is-active",center:!0})]})]});return h&&v?Object(s.b)(w.a,{offset:m,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange,children:v}):v}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,a=t.excerpt,o=t.data,r=t.itemProp,i=void 0===r?"text":r,c=t.expandText,l=void 0===c?"阅读全文":c,u=t.onClick,d=t.prefix,b=t.unescapable,f=(t.isSearchContent,t.collapsedHeight),p=t.ecommerce,h=t.canAbstract,m=t.richContentKey,v=t.shouldCatalogCollapse,j=t.isNovel,w=t.entityWords,x=t.isVideoAnswer,S=this.state,R=S.truncatedContent,A=S.previewImg,I=S.viewPort,T=S.contentCollapsed,E=S.isExpanded,N=this.isCollapsed(),B=N?R||a:n,z={},L=Object(s.c)(me,Object.assign(Object.assign(Object.assign({entityWords:w,richContentKey:m&&String([m,N]),itemProp:i,className:g()("RichContent-inner",{"RichContent-inner--collapsed":T}),style:N&&b?{maxHeight:f}:null,tag:"span",onRef:function(t){e.content=t},isExpanded:E,data:o,html:B,viewPort:I,prefix:d},N&&{onClick:u||this.handleExpand}),z),{},{ecommerce:p,shouldCatalogCollapse:v,shouldShowCatalog:Object(M.a)(o)&&(E||b&&!N),isNovel:j,isVideoAnswer:x,children:[h&&Object(s.b)(oe,Object.assign({},this.abstractProps)),!b&&N&&Object(s.c)(O.c,{preset:"plain",className:"ContentItem-more",children:[l,Object(s.b)(y.a,{className:"ContentItem-arrowIcon",center:!0})]}),A&&Object(s.b)(C.a,{img:A,onClose:function(){return e.setState({previewImg:null})}})]}),N);return b?Object(s.b)(k.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve,children:L}):L}},{key:"render",value:function(){var e=this.props,t=e.unescapable,a=e.after,o=e.before,r=e.extra,i=e.cover,c=e.hasVideo,l=e.renderCanExpandExtra,u=e.className,d=e.videoData,b=e.handleClickVideoMoreButton,f=e.duration,p=e.isVideoAnswer,h=this.state.isExpanded,m=this.isCollapsed(),v=d?Object(s.c)(s.a,{children:[Object(s.b)(ve.a,{data:d}),Object(s.b)("p",{className:"RichContent-videoMore",onClick:b,children:"点击查看全文"})]}):this.renderText(),O=h?Object(s.b)(k.a,{rootMargin:"-".concat(240,"px 0px"),onObserve:this.handleObserve,children:v}):v;return Object(s.c)("div",{className:g()("RichContent",u,{"is-collapsed":m,"RichContent--unescapable":t}),ref:this.richContentRef,onClick:this.handlePreview,children:[Object(s.b)(I.d,{ref:this.zaRef}),Object(s.b)(P.c,{keyMap:{TOGGLE_EXPAND:"o"},handlers:{TOGGLE_EXPAND:this.toggle}}),!m&&o,!t&&m&&i&&Object(s.b)(n.Cover,{url:i,hasVideo:c,onClick:this.handleExpand,duration:f,isVideoAnswer:p}),O,r||"function"==typeof l&&l(h,this.handleExpand),!m&&Object(s.c)(s.a,{children:[a,Object(s.b)(Re,{root:this.richContentRef})]}),this.renderActions()]})}}]),n}(b.Component);ze.propTypes={enableConvert:d.a.bool,unescapable:d.a.bool,expanded:d.a.bool,noCollapsed:d.a.bool,limit:d.a.number,limitWithImage:d.a.number,collapsedHeight:d.a.number,html:d.a.string,excerpt:d.a.string,allowCollapseWithEmptyExcerpt:d.a.bool,truncateDisabled:d.a.bool,before:d.a.node,after:d.a.node,prefix:d.a.node,extra:d.a.node,renderCanExpandExtra:d.a.func,topExcludedHeight:d.a.number,onPositionStatusChange:d.a.func,type:d.a.string,data:d.a.object,canAbstract:d.a.bool,cover:d.a.string,hasVideo:d.a.bool,truncateHTMLOptions:d.a.object,expandText:d.a.string,onToggleExpend:d.a.func,videoData:d.a.object,handleClickVideoMoreButton:d.a.func,zaIds:d.a.shape({expand:d.a.number})},ze.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",allowCollapseWithEmptyExcerpt:!1,hasVideo:!1,isVideoAnswer:!1,data:{},collapsedHeight:400,zaIds:{}},ze.Cover=function(e){var t=e.url,n=e.hasVideo,o=e.duration,r=e.isVideoAnswer,i=Object(a.default)(e,Ee);return Object(s.c)("div",Object.assign(Object.assign({className:g()("RichContent-cover",{"RichContent-cover--mobile":!1})},i),{},{children:[Object(s.c)("div",{className:"RichContent-cover-inner",children:[Object(s.b)(x.a,{thumbnail:Object(A.imgUrl)(t,"60w"),url:Object(A.imgUrl)(t,"400x224"),alt:"cover"}),o&&Object(s.b)("div",{className:"RichContent-cover-mask"}),o&&Object(s.b)("div",{className:"RichContent-cover-duration",children:o})]}),r&&Object(s.b)("img",{alt:"",css:{position:"absolute",left:0,top:0,width:"64px",height:"18px",objectFit:"cover"},src:"https://pic1.zhimg.com/80/v2-c19ceba4b1bea7204cb67e27f469c95b_1440w.png"}),n&&Object(s.b)(j.a,{className:"RichContent-cover-play"})]}))};t.b=Object(p.compose)(B.a,Object(f.connect)((function(e){return{ua:Object(z.l)(e),isMobile:Object(z.d)(e)}}),{updateReadStatus:Ae.b}))(ze)},976:function(e,t,n){"use strict";var a=n(34),o=n.n(a),r=n(42),i=n.n(r),c=(n(0),n(13)),l=n.n(c),s=(n(1017),n(8)),u=["className","onRef"];t.a=function(e){var t=e.className,n=e.onRef,a=o()(e,u);return Object(s.g)("div",i()({ref:n,className:l()("Card",t)},a))}},977:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(24),o=n.n(a),r=n(3),i=n.n(r),c=n(0),l=n.n(c),s=n(13),u=n.n(s),d=n(8),b=function(){return Object(d.g)(l.a.Fragment,null)},f={SkeletonH01:function(e){var t=e.lineClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}))},SkeletonP01:function(e){var t=e.lineClass,n=e.blockClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:n}),Object(d.g)("div",null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t})))},SkeletonT01:function(e){var t=e.lineClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}))},SkeletonT02:function(e){var t=e.lineClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t}))},SkeletonC01:function(e){var t=e.lineClass,n=e.blockClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:n}),Object(d.g)("div",null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t})))},SkeletonC02:function(e){var t=e.lineClass,n=e.blockClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",null,Object(d.g)("div",{className:t}),Object(d.g)("div",{className:t})),Object(d.g)("div",{className:n}))},SkeletonI01:function(e){var t=e.blockClass;return Object(d.g)(l.a.Fragment,null,Object(d.g)("div",{className:t}))},SkeletonSpacing:b,SkeletonFill:b},p=l.a.memo((function(e){var t,n=e.variant,a=void 0===n?"H01":n,r=e.height,i=e.width,c=void 0===i?"auto":i,l=e.animation,s=void 0===l?"ease-in":l,b="skeleton__line--".concat(a.toLowerCase()),p="skeleton--".concat(a.toLowerCase()),h=u()(o()({skeleton__block:!0},"skeleton__block--".concat(a.toLowerCase()),!0)),m=u()(o()({skeleton__line:!0},b,!0)),v=u()((t={skeleton:!0},o()(t,p,!0),o()(t,"skeleton--ease-in","ease-in"===s),t)),g={width:c};r&&["Spacing","Fill"].includes(a)&&(g.height="number"==typeof r?"".concat(r,"px"):r);var O=f["Skeleton".concat(a)];return Object(d.g)("section",{className:v,style:g},Object(d.g)(O,{variant:a,lineClass:m,blockClass:h}))}));p.propTypes={variant:i.a.string,height:i.a.oneOfType([i.a.string,i.a.number]),width:i.a.oneOfType([i.a.string,i.a.number]),animation:i.a.oneOfType([i.a.bool,i.a.string])};var h=p,m=n(25),v=n.n(m);var g=l.a.memo((function(e){var t=e.content,n=function(e){return("string"==typeof e?e.split(","):e).map((function(e){var t=e.split("-"),n=v()(t,2),a=n[0],o=n[1];return["Spacing","Fill"].includes(a)?{type:a,height:+o}:{type:a,count:+o||1}}))}(void 0===t?"T01":t);return Object(d.g)(l.a.Fragment,null,n.map((function(e,t){var n=e.type,a=e.count,o=e.height;return a?Array.from({length:a}).map((function(e,a){return Object(d.g)(h,{variant:n,key:"".concat(t,"-").concat(a)})})):Object(d.g)(h,{variant:n,height:o,key:"".concat(t,"-").concat(o)})})))}));g.prototype={content:Object(r.oneOfType)([Object(r.arrayOf)(r.string),r.string])}},982:function(e,t,n){"use strict";var a=n(915);t.a=function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:" ",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{isBatched:!1,isLastOneOfBatch:!1},c=e.getSelection(),l=e.getCurrentContent(),s=l.createEntity(t,n,o),u=s.getLastCreatedEntityKey(),d=a.EditorState.set(e,{currentContent:s}),b=(d=a.AtomicBlockUtils.insertAtomicBlock(d,u,r)).getCurrentContent(),f=b.getBlockMap(),p=c.getStartKey(),h=b.getBlockForKey(p);h!==f.first()&&0===h.getLength()&&(f=f.delete(p),b=b.merge({blockMap:f}));var m=d.getSelection().getFocusKey(),v=b.getBlockForKey(m),g=(null==i?void 0:i.isBatched)&&!i.isLastOneOfBatch;return g||v===f.last()||0!==v.getLength()||(f=f.delete(m),b=b.merge({blockMap:f,selectionAfter:a.SelectionState.createEmpty(b.getKeyAfter(m))})),d=a.EditorState.set(d,{currentContent:b}),a.EditorState.forceSelection(d,d.getCurrentContent().getSelectionAfter())}},983:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return y}));var a=n(42),o=n.n(a),r=n(23),i=n.n(r),c=n(28),l=n.n(c),s=n(29),u=n.n(s),d=n(19),b=n.n(d),f=n(27),p=n.n(f),h=n(0),m=n.n(h),v=n(5),g=n(49),O=n(69),j=function(e){function t(e){var n;return i()(this,t),(n=u()(this,b()(t).call(this,e))).state={hasError:!1},n}return p()(t,e),l()(t,[{key:"componentDidCatch",value:function(e,t){this.handleError(e,t)}},{key:"unstable_handleError",value:function(e,t){this.handleError(e,t)}},{key:"handleError",value:function(e,t){this.setState({hasError:!0}),console.error(e),t&&console.error(t),Object(O.sendRaven)({adjson:Object(g.e)(this.props,"children.props"),error:e,info:t})}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}]),t}(m.a.Component),y=function(e){return function(t){return t.data?m.a.createElement(j,null,m.a.createElement(e,o()({},t,{data:Object(v.camelizeKeys)(t.data)}))):null}}},986:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0);function o(){return Object(a.useEffect)((function(){window.scrollTo(0,0)}),[]),null}},989:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var a=n(13),o=n.n(a),r=n(8),i=function(e){var t=e.avatar,n=e.bottom,a=e.button,i=e.className,c=e.height,l=e.icon,s=e.inline,u=e.right,d=e.style,b=void 0===d?{}:d,f=e.title,p=e.width,h=Object.assign({},b);return p&&(h.width="".concat(p,"px")),c&&(h.height="".concat(c,"px")),n&&(h.marginBottom="".concat(n,"px")),u&&(h.marginRight="".concat(u,"px")),Object(r.g)("div",{className:o()("Holder",i,{"Holder--inline":s,"Holder--title":f,"Holder--icon":l,"Holder--button":a,"Holder--avatar":t}),style:h})}},994:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(17),i=n(18),c=n(7),l=n(1),s=n(3),u=n.n(s),d=n(0),b=n(26),f=n(153),p=n(149),h=n(929),m=n(1163),v=n(923),g=n(980),O=n(922),j=(n(1276),n(958)),y=n(948);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(i.a)(this,n)}}var w=function(e){Object(r.a)(n,e);var t=C(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.user;b.a.setModule(this,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:e.id,follower_num:e.followerCount}}})}},{key:"renderRewardDetails",value:function(){var e=this.props.user,t=e.amount,n=e.rewardCreated;return Object(l.c)("div",{className:"ContentItem-rewardDetails",children:[Object(l.b)("p",{className:"ContentItem-rewardAmount",children:t&&"赞赏了 ¥".concat(t/100)}),Object(l.b)("p",{className:"ContentItem-rewardTime",children:Object(f.toRelativeString)(n)})]})}},{key:"render",value:function(){var e=this.props,t=e.user,n=t.urlToken,a=t.isFollowed,o=t.isFollowing,r=t.answerCount,i=t.articlesCount,c=t.followerCount,s=t.id,u=t.isOrg,d=e.user,b=e.type,f=e.isRewardList,C=e.action,w=e.meta,x=e.status,k=e.noTrackCardShow,S=e.onClick,R=e.currentUser,A=!n,I=R&&R.id===s,T=void 0!==C?C:!I&&!A&&Object(l.b)(h.a,{id:d.urlToken,type:b||d.type,preset:h.a.PRESETS.primary,gender:d.gender,isFollowing:o,onClick:S}),E=void 0!==w?w:A||Object(l.b)(g.a,{user:d}),N=void 0!==x?Object(l.b)(O.d,{children:x}):!A&&Object(l.c)(O.d,{children:[Boolean(r)&&"".concat(Object(p.formatNumber)(r)," 回答"),Boolean(i)&&"".concat(Object(p.formatNumber)(i)," 文章"),Boolean(c)&&"".concat(Object(p.formatNumber)(c)," 关注者")]}),B="//www.zhihu.com/".concat(u?"org":"people","/").concat(n||s),z=this.props.userLinkV2;return Object(l.b)(O.e,{data:d,link:B,image:z?Object(l.b)(j.a,{className:"UserItem-avatar",avatarProps:{size:60},user:d,target:"_blank"}):Object(l.b)(v.a,{className:"UserItem-avatar",avatar:!0,avatarProps:{size:60},user:d,target:"_blank"}),title:Object(l.c)("div",{className:"UserItem-title",children:[z?Object(l.b)(y.a,{user:d,target:"_blank"}):Object(l.b)(v.a,{user:d,target:"_blank"}),Object(l.b)(m.a,{isFollowing:o,isFollowed:a})]}),meta:Object(l.c)("div",{children:[E,N]}),noTrackCardShow:k,extra:f?this.renderRewardDetails():T})}}]),n}(d.Component);w.propTypes={action:u.a.node,status:u.a.node,meta:u.a.node,type:u.a.string,isRewardList:u.a.bool,onClick:u.a.func,currentUser:u.a.object},t.a=w},995:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var a=n(1032),o=n.n(a),r=n(30);function i(e){if("number"!=typeof e)return null;var t=Math.floor(e/60),n=Math.floor(e%60);return"".concat(String(t),":").concat(o()(String(n),2,"0"))}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.multiple,a=void 0!==n&&n,o=t.numLimit,i=void 0===o?r.V:o,c=t.uploadPartiallyWhenExceedsLimit,l=void 0===c||c,s=Array.from(e).filter((function(e){return r.a.VIDEO.some((function(t){return e.name.toLowerCase().endsWith(t)}))}));if(0===s.length)return{message:"视频格式不支持",abortUpload:!0};var u=s.filter((function(e){return e.size>102400}));return 0===u.length?{message:"视频必须大于 100KB，请重新选择上传",abortUpload:!0}:!a&&u.length>1?{message:"一次仅能上传一个视频，请分开上传",abortUpload:!1,validFiles:[u[0]]}:a&&u.length>i?0===i?{message:"上传个数已达上限",abortUpload:!0}:l?{message:"最多可上传 ".concat(i," 个视频，已默认选择").concat(i>1?"前":"第"," ").concat(i," 个视频"),abortUpload:!1,validFiles:u.slice(0,i)}:{message:"一次最多上传 ".concat(i," 个视频, 请重新选择上传"),abortUpload:!0}:{message:null,abortUpload:!1,validFiles:u}}}}]);
//# sourceMappingURL=main.shared_f30f7459f944e851b885959dfde412e92f3a8d2e.9c55b109f1a9f32f36ec.js.map